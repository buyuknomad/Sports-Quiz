const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BdwrkyL5.js","assets/vendor-C2OVMZwl.js"])))=>i.map(i=>d[i]);
var Yl=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);import{r as w,a as Xl,g as Zl,c as Ae,b as ko,R as Ue}from"./vendor-C2OVMZwl.js";import{l as ec}from"./socket-TjCxX7sJ.js";var Fg=Yl((n0,ls)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Co={exports:{}},Ls={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc=w,sc=Symbol.for("react.element"),nc=Symbol.for("react.fragment"),rc=Object.prototype.hasOwnProperty,ic=tc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oc={key:!0,ref:!0,__self:!0,__source:!0};function Po(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)rc.call(e,n)&&!oc.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:sc,type:t,key:i,ref:o,props:r,_owner:ic.current}}Ls.Fragment=nc;Ls.jsx=Po;Ls.jsxs=Po;Co.exports=Ls;var l=Co.exports,Ao,zr=Xl;Ao=zr.createRoot,zr.hydrateRoot;const ac="modulepreload",lc=function(t){return"/"+t},Hr={},_t=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=lc(c),c in Hr)return;Hr[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ac,u||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},cc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>_t(async()=>{const{default:n}=await Promise.resolve().then(()=>Pt);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class sr extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class uc extends sr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class dc extends sr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hc extends sr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Pn||(Pn={}));var fc=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class mc{constructor(e,{headers:s={},customFetch:n,region:r=Pn.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=cc(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return fc(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let a={},{region:c}=s;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u}).catch(v=>{throw new uc(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new dc(d);if(!d.ok)throw new hc(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield d.json():f==="application/octet-stream"?m=yield d.blob():f==="text/event-stream"?m=d:f==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(r){return{data:null,error:r}}})}}var ve={},nr={},$s={},es={},Vs={},Fs={},pc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tt=pc();const gc=Tt.fetch,Eo=Tt.fetch.bind(Tt),No=Tt.Headers,yc=Tt.Request,vc=Tt.Response,Pt=Object.freeze(Object.defineProperty({__proto__:null,Headers:No,Request:yc,Response:vc,default:Eo,fetch:gc},Symbol.toStringTag,{value:"Module"})),xc=Zl(Pt);var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});let wc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Bs.default=wc;var Ro=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fs,"__esModule",{value:!0});const bc=Ro(xc),jc=Ro(Bs);let _c=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=bc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let u=null,d=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=b:d=JSON.parse(b))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,m="OK")}catch{i.status===404&&y===""?(f=204,m="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new jc.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};Fs.default=_c;var Tc=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vs,"__esModule",{value:!0});const Sc=Tc(Fs);let kc=class extends Sc.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Vs.default=kc;var Cc=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(es,"__esModule",{value:!0});const Pc=Cc(Vs);let Ac=class extends Pc.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};es.default=Ac;var Ec=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($s,"__esModule",{value:!0});const Mt=Ec(es);let Nc=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Mt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Mt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Mt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Mt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Mt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};$s.default=Nc;var Us={},Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.version=void 0;Gs.version="0.0.0-automated";Object.defineProperty(Us,"__esModule",{value:!0});Us.DEFAULT_HEADERS=void 0;const Rc=Gs;Us.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Rc.version}`};var Mo=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nr,"__esModule",{value:!0});const Mc=Mo($s),Ic=Mo(es),Oc=Us;let Dc=class Io{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Oc.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new Mc.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Io(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",c=s);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Ic.default({method:o,url:a,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};nr.default=Dc;var At=Ae&&Ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ve,"__esModule",{value:!0});ve.PostgrestError=ve.PostgrestBuilder=ve.PostgrestTransformBuilder=ve.PostgrestFilterBuilder=ve.PostgrestQueryBuilder=ve.PostgrestClient=void 0;const Oo=At(nr);ve.PostgrestClient=Oo.default;const Do=At($s);ve.PostgrestQueryBuilder=Do.default;const Lo=At(es);ve.PostgrestFilterBuilder=Lo.default;const $o=At(Vs);ve.PostgrestTransformBuilder=$o.default;const Vo=At(Fs);ve.PostgrestBuilder=Vo.default;const Fo=At(Bs);ve.PostgrestError=Fo.default;var Lc=ve.default={PostgrestClient:Oo.default,PostgrestQueryBuilder:Do.default,PostgrestFilterBuilder:Lo.default,PostgrestTransformBuilder:$o.default,PostgrestBuilder:Vo.default,PostgrestError:Fo.default};const{PostgrestClient:$c,PostgrestQueryBuilder:Jg,PostgrestFilterBuilder:Qg,PostgrestTransformBuilder:Yg,PostgrestBuilder:Xg,PostgrestError:Zg}=Lc,Vc="2.11.2",Fc={"X-Client-Info":`realtime-js/${Vc}`},Bc="1.0.0",Bo=1e4,Uc=1e3;var jt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(jt||(jt={}));var je;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(je||(je={}));var Me;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Me||(Me={}));var An;(function(t){t.websocket="websocket"})(An||(An={}));var ot;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ot||(ot={}));class Gc{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}let Uo=class{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Z;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Z||(Z={}));const Wr=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=qc(o,t,e,r),i),{})},qc=(t,e,s,n)=>{const r=e.find(a=>a.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?Go(i,o):En(o)},Go=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Kc(e,s)}switch(t){case Z.bool:return zc(e);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return Hc(e);case Z.json:case Z.jsonb:return Wc(e);case Z.timestamp:return Jc(e);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return En(e);default:return En(e)}},En=t=>t,zc=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Hc=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Wc=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Kc=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Go(e,a))}return t},Jc=t=>typeof t=="string"?t.replace(" ","T"):t,qo=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class nn{constructor(e,s,n={},r=Bo){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Kr;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Kr||(Kr={}));class Bt{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bt.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=Bt.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Bt.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),a={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),v=d.filter(g=>m.indexOf(g.presence_ref)<0),y=h.filter(g=>f.indexOf(g.presence_ref)<0);v.length>0&&(a[u]=v),y.length>0&&(c[u]=y)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const h=e[a].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...f)}n(a,d,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,c),u.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jr;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jr||(Jr={}));var Qr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Qr||(Qr={}));var $e;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})($e||($e={}));class rr{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new nn(this,Me.join,this.params,this.timeout),this.rejoinTimer=new Uo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=je.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Me.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Bt(this),this.broadcastEndpointURL=qo(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e($e.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e($e.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e($e.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let y=0;y<m;y++){const g=f[y],{filter:{event:b,schema:j,table:_,filter:C}}=g,S=d&&d[y];if(S&&S.event===b&&S.schema===j&&S.table===_&&S.filter===C)v.push(Object.assign(Object.assign({},g),{id:S.id}));else{this.unsubscribe(),e==null||e($e.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e($e.SUBSCRIBED);return}}).receive("error",d=>{e==null||e($e.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e($e.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=je.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Me.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new nn(this,Me.leave,{},e);r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new nn(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=Me;if(n&&[a,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var v,y,g;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(y=m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,y,g,b,j,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const C=m.id,S=(v=m.filter)===null||v===void 0?void 0:v.event;return C&&((y=s.ids)===null||y===void 0?void 0:y.includes(C))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((g=s.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const C=(j=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return C==="*"||C===((_=s==null?void 0:s.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:g,commit_timestamp:b,type:j,errors:_}=v;f=Object.assign(Object.assign({},{schema:y,table:g,commit_timestamp:b,eventType:j,new:{},old:{},errors:_}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===je.closed}_isJoined(){return this.state===je.joined}_isJoining(){return this.state===je.joining}_isLeaving(){return this.state===je.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&rr.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Me.close,{},e)}_onError(e){this._on(Me.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Wr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Wr(e.columns,e.old_record)),s}}const Qc=()=>{},Yc=typeof WebSocket<"u",Xc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zc{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Fc,this.params={},this.timeout=Bo,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Qc,this.conn=null,this.sendBuffer=[],this.serializer=new Gc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>_t(async()=>{const{default:c}=await Promise.resolve().then(()=>Pt);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${An.websocket}`,this.httpEndpoint=qo(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Uo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Yc){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new eu(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),_t(async()=>{const{default:e}=await import("./browser-BdwrkyL5.js").then(s=>s.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bc}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case jt.connecting:return ot.Connecting;case jt.open:return ot.Open;case jt.closing:return ot.Closing;default:return ot.Closed}}isConnected(){return this.connectionState()===ot.Open}channel(e,s={config:{}}){const n=new rr(`realtime:${e}`,s,this);return this.channels.push(n),n}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s}),r.joinedOnce&&r._isJoined()&&r._push(Me.access_token,{access_token:s})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Uc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:o}=s;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Me.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Xc],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class eu{constructor(e,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=jt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class ir extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class tu extends ir{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Nn extends ir{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var su=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const zo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>_t(async()=>{const{default:n}=await Promise.resolve().then(()=>Pt);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},nu=()=>su(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _t(()=>Promise.resolve().then(()=>Pt),void 0)).Response:Response}),Rn=t=>{if(Array.isArray(t))return t.map(s=>Rn(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Rn(n)}),e};var dt=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const rn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ru=(t,e,s)=>dt(void 0,void 0,void 0,function*(){const n=yield nu();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{e(new tu(rn(r),t.status||500))}).catch(r=>{e(new Nn(rn(r),r))}):e(new Nn(rn(t),t))}),iu=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function ts(t,e,s,n,r,i){return dt(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,iu(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>ru(c,a,n))})})}function Ss(t,e,s,n){return dt(this,void 0,void 0,function*(){return ts(t,"GET",e,s,n)})}function We(t,e,s,n,r){return dt(this,void 0,void 0,function*(){return ts(t,"POST",e,n,r,s)})}function ou(t,e,s,n,r){return dt(this,void 0,void 0,function*(){return ts(t,"PUT",e,n,r,s)})}function au(t,e,s,n){return dt(this,void 0,void 0,function*(){return ts(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Ho(t,e,s,n,r){return dt(this,void 0,void 0,function*(){return ts(t,"DELETE",e,n,r,s)})}var ye=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const lu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cu{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=zo(r)}uploadOrUpdate(e,s,n,r){return ye(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Yr),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}upload(e,s,n){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return ye(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let c;const u=Object.assign({upsert:Yr.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(ue(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return ye(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield We(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ir("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}update(e,s,n){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return ye(this,void 0,void 0,function*(){try{return{data:yield We(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}copy(e,s,n){return ye(this,void 0,void 0,function*(){try{return{data:{path:(yield We(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return ye(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield We(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return ye(this,void 0,void 0,function*(){try{const r=yield We(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}download(e,s){return ye(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ss(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ue(a))return{data:null,error:a};throw a}})}info(e){return ye(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Ss(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Rn(n),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}exists(e){return ye(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield au(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ue(n)&&n instanceof Nn){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}list(e,s,n){return ye(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},lu),s),{prefix:e||""});return{data:yield We(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const uu="2.7.1",du={"X-Client-Info":`storage-js/${uu}`};var ft=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class hu{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},du),s),this.fetch=zo(n)}listBuckets(){return ft(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ue(e))return{data:null,error:e};throw e}})}getBucket(e){return ft(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return ft(this,void 0,void 0,function*(){try{return{data:yield We(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return ft(this,void 0,void 0,function*(){try{return{data:yield ou(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ft(this,void 0,void 0,function*(){try{return{data:yield We(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}deleteBucket(e){return ft(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}}class fu extends hu{constructor(e,s={},n){super(e,s,n)}from(e){return new cu(this.url,this.headers,e,this.fetch)}}const mu="2.49.3";let Ot="";typeof Deno<"u"?Ot="deno":typeof document<"u"?Ot="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ot="react-native":Ot="node";const pu={"X-Client-Info":`supabase-js-${Ot}/${mu}`},gu={headers:pu},yu={schema:"public"},vu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xu={};var wu=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};const bu=t=>{let e;return t?e=t:typeof fetch>"u"?e=Eo:e=fetch,(...s)=>e(...s)},ju=()=>typeof Headers>"u"?No:Headers,_u=(t,e,s)=>{const n=bu(s),r=ju();return(i,o)=>wu(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Tu=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};function Su(t){return t.replace(/\/$/,"")}function ku(t,e){const{db:s,auth:n,realtime:r,global:i}=t,{db:o,auth:a,realtime:c,global:u}=e,d={db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},u),i),accessToken:()=>Tu(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const Wo="2.69.1",gt=30*1e3,Mn=3,on=Mn*gt,Cu="http://localhost:9999",Pu="supabase.auth.token",Au={"X-Client-Info":`gotrue-js/${Wo}`},In="X-Supabase-Api-Version",Ko={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Eu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Nu=6e5;class or extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function B(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ru extends or{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Mu(t){return B(t)&&t.name==="AuthApiError"}class Jo extends or{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Xe extends or{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class qe extends Xe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Iu(t){return B(t)&&t.name==="AuthSessionMissingError"}class an extends Xe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hs extends Xe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fs extends Xe{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ou(t){return B(t)&&t.name==="AuthImplicitGrantRedirectError"}class Xr extends Xe{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class On extends Xe{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function ln(t){return B(t)&&t.name==="AuthRetryableFetchError"}class Zr extends Xe{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Ut extends Xe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ti=` 	
\r=`.split(""),Du=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ti.length;e+=1)t[ti[e].charCodeAt(0)]=-2;for(let e=0;e<ei.length;e+=1)t[ei[e].charCodeAt(0)]=e;return t})();function Qo(t,e,s){const n=Du[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function si(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{Vu(o,n,s)};for(let o=0;o<t.length;o+=1)Qo(t.charCodeAt(o),r,i);return e.join("")}function Lu(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function $u(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}Lu(n,e)}}function Vu(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Fu(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Qo(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Bu(t){const e=[];return $u(t,s=>e.push(s)),new Uint8Array(e)}function Uu(t){return Math.round(Date.now()/1e3)+t}function Gu(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ie=()=>typeof window<"u"&&typeof document<"u",tt={tested:!1,writable:!1},Gt=()=>{if(!Ie())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tt.tested)return tt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),tt.tested=!0,tt.writable=!0}catch{tt.tested=!0,tt.writable=!1}return tt.writable};function qu(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const Yo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>_t(async()=>{const{default:n}=await Promise.resolve().then(()=>Pt);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},zu=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Xo=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ms=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ps=async(t,e)=>{await t.removeItem(e)};class qs{constructor(){this.promise=new qs.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}qs.promiseConstructor=Promise;function cn(t){const e=t.split(".");if(e.length!==3)throw new Ut("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Eu.test(e[n]))throw new Ut("JWT not in base64url format");return{header:JSON.parse(si(e[0])),payload:JSON.parse(si(e[1])),signature:Fu(e[2]),raw:{header:e[0],payload:e[1]}}}async function Hu(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Wu(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function Ku(t){return("0"+t.toString(16)).substr(-2)}function Ju(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Ku).join("")}async function Qu(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function Yu(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Qu(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mt(t,e,s=!1){const n=Ju();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Xo(t,`${e}-code-verifier`,r);const i=await Yu(n);return[i,n===i?"plain":"s256"]}const Xu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Zu(t){const e=t.headers.get(In);if(!e||!e.match(Xu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ed(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function td(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var sd=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const nt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),nd=[502,503,504];async function ni(t){var e;if(!zu(t))throw new On(nt(t),0);if(nd.includes(t.status))throw new On(nt(t),t.status);let s;try{s=await t.json()}catch(i){throw new Jo(nt(i),i)}let n;const r=Zu(t);if(r&&r.getTime()>=Ko["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Zr(nt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new qe}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Zr(nt(s),t.status,s.weak_password.reasons);throw new Ru(nt(s),t.status||500,n)}const rd=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function W(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[In]||(i[In]=Ko["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await id(t,e,s+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function id(t,e,s,n,r,i){const o=rd(e,n,r,i);let a;try{a=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new On(nt(c),0)}if(a.ok||await ni(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(c){await ni(c)}}function ze(t){var e;let s=null;cd(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Uu(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function ri(t){const e=ze(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ke(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function od(t){return{data:t,error:null}}function ad(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=sd(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function ld(t){return t}function cd(t){return t.access_token&&t.refresh_token&&t.expires_in}var ud=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class dd{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=Yo(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ke})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=ud(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ad,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(B(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ke})}catch(s){if(B(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:ld});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(B(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await W(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ke})}catch(s){if(B(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Ke})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ke})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:s,error:n}=await W(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(B(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}}}const hd={getItem:t=>Gt()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Gt()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Gt()&&globalThis.localStorage.removeItem(t)}};function ii(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function fd(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pt={debug:!!(globalThis&&Gt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class md extends Zo{}async function pd(t,e,s){pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),pt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new md(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(pt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}fd();const gd={url:Cu,storageKey:Pu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Au,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function oi(t,e,s){return await s()}class Kt{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kt.nextInstanceID,Kt.nextInstanceID+=1,this.instanceID>0&&Ie()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},gd),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new dd({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Yo(r.fetch),this.lock=r.lock||oi,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Ie()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=pd:this.lock=oi,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Gt()?this.storage=hd:(this.memoryStorage={},this.storage=ii(this.memoryStorage)):(this.memoryStorage={},this.storage=ii(this.memoryStorage)),Ie()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Wo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=qu(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Ie()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ou(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return B(s)?{error:s}:{error:new Jo("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ze}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await mt(this.storage,this.storageKey)),i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:ze})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ze})}else throw new hs("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ri})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ri})}else throw new hs("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new an}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await ms(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ze});if(await ps(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new an}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(B(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,a=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ze}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new an}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await mt(this.storage,this.storageKey));const{error:h}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new hs("You must provide either an email or phone number.")}catch(a){if(B(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ze});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if(B(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await mt(this.storage,this.storageKey)),await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:od})}catch(i){if(B(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new qe;const{error:r}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(B(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await W(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await W(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new hs("You must provide either an email or phone number and a type")}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<on:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ke}):await this._useSession(async s=>{var n,r,i;const{data:o,error:a}=s;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qe}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Ke})})}catch(s){if(B(s))return Iu(s)&&(await this._removeSession(),await ps(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new qe;const o=r.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await mt(this.storage,this.storageKey));const{data:u,error:d}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Ke});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qe;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=cn(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(B(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new qe;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(B(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Ie())throw new fs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Xr("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fs("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Xr("No code detected.");const{data:j,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!i||!a||!o||!u)throw new fs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=gt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:y,error:g}=await this._getUser(i);if(g)throw g;const b={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(B(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ms(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Mu(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ps(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Gu(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await mt(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(B(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,a,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return Ie()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(B(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(B(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Wu(async r=>(r>0&&await Hu(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ze})),(r,i)=>{const o=200*Math.pow(2,r);return i&&ln(i)&&Date.now()+o-n<gt})}catch(n){if(this._debug(s,"error",n),B(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Ie()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await ms(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<on;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${on}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),ln(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new qs;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new qe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),B(i)){const o={session:null,error:i};return ln(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Xo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ps(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ie()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/gt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${gt}ms, refresh threshold is ${Mn} ticks`),r<=Mn&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Zo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ie()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await mt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await W(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(B(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await W(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(B(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:a}=await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(B(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(B(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=cn(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Nu>Date.now()))return n;const{data:r,error:i}=await W(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!r.keys||r.keys.length===0)throw new Ut("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(o=>o.kid===e),!n)throw new Ut("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};n=m.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:c}}=cn(n);if(ed(i.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:o},error:null}}const u=td(r.alg),d=await this.fetchJwk(r.kid,s),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Bu(`${a}.${c}`)))throw new Ut("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}}Kt.nextInstanceID=0;const yd=Kt;class vd extends yd{constructor(e){super(e)}}var xd=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};class wd{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Su(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:yu,realtime:xu,auth:Object.assign(Object.assign({},vu),{storageKey:c}),global:gu},d=ku(n??{},u);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=_u(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new $c(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new mc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fu(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return xd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:a,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vd({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:a,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Zc(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bd=(t,e,s)=>new wd(t,e,s),jd="https://zfkjvbhkroowlyqebvyh.supabase.co",_d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpma2p2Ymhrcm9vd2x5cWVidnloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1NTY2NTYsImV4cCI6MjA1ODEzMjY1Nn0.ULHVkpGVQOqMckICZUsdhnPu4TMQYBxLkzZW4eVNOw4",Td=bd(jd,_d,{auth:{autoRefreshToken:!0,persistSession:!0},global:{headers:{"X-Client-Info":"sports-quiz-app"}}}),Dt=new Map,Sd=5*60*1e3,gs=new Map,ys={football:[{id:"fb1",category:"football",question:"Which country won the 2022 FIFA World Cup?",options:["France","Brazil","Argentina","Germany"],correctAnswer:"Argentina"},{id:"fb2",category:"football",question:"Who holds the record for most goals in World Cup history?",options:["Pelé","Miroslav Klose","Ronaldo","Just Fontaine"],correctAnswer:"Miroslav Klose"},{id:"fb3",category:"football",question:"Which team has won the most UEFA Champions League titles?",options:["Real Madrid","AC Milan","Bayern Munich","Liverpool"],correctAnswer:"Real Madrid"}],basketball:[{id:"bb1",category:"basketball",question:"Which NBA team has won the most championships?",options:["Los Angeles Lakers","Boston Celtics","Chicago Bulls","Golden State Warriors"],correctAnswer:"Boston Celtics"},{id:"bb2",category:"basketball",question:"Who holds the NBA record for most points in a single game?",options:["Michael Jordan","Kobe Bryant","Wilt Chamberlain","LeBron James"],correctAnswer:"Wilt Chamberlain"},{id:"bb3",category:"basketball",question:"Who is the NBA's all-time leading scorer?",options:["Kareem Abdul-Jabbar","LeBron James","Michael Jordan","Karl Malone"],correctAnswer:"LeBron James"}],tennis:[{id:"tn1",category:"tennis",question:"Who has won the most Grand Slam singles titles in tennis history?",options:["Roger Federer","Rafael Nadal","Novak Djokovic","Serena Williams"],correctAnswer:"Novak Djokovic"},{id:"tn2",category:"tennis",question:"Which Grand Slam tournament is played on clay courts?",options:["Wimbledon","US Open","French Open","Australian Open"],correctAnswer:"French Open"},{id:"tn3",category:"tennis",question:"Who holds the record for most Wimbledon singles titles?",options:["Roger Federer","Novak Djokovic","Pete Sampras","Björn Borg"],correctAnswer:"Roger Federer"}],olympics:[{id:"ol1",category:"olympics",question:"Which city hosted the 2020 Summer Olympics (held in 2021)?",options:["Paris","Tokyo","London","Rio de Janeiro"],correctAnswer:"Tokyo"},{id:"ol2",category:"olympics",question:"Who is the most decorated Olympian of all time?",options:["Usain Bolt","Michael Phelps","Simone Biles","Carl Lewis"],correctAnswer:"Michael Phelps"},{id:"ol3",category:"olympics",question:"Which country has won the most Summer Olympic medals?",options:["Soviet Union","United States","China","Germany"],correctAnswer:"United States"}],mixed:[{id:"mx1",category:"mixed",question:"Which sport uses a shuttlecock?",options:["Tennis","Badminton","Cricket","Hockey"],correctAnswer:"Badminton"},{id:"mx2",category:"mixed",question:"In which sport would you perform a slam dunk?",options:["Volleyball","Basketball","Tennis","Football"],correctAnswer:"Basketball"},{id:"mx3",category:"mixed",question:"What is the diameter of a basketball hoop in inches?",options:["16 inches","18 inches","20 inches","24 inches"],correctAnswer:"18 inches"}]};function ai(t){if(t==="mixed"){const s=[],n=["football","basketball","tennis","olympics"];for(const r of n){const o=[...ys[r]].sort(()=>Math.random()-.5);s.push(...o.slice(0,2))}return s.push(...ys.mixed),s.sort(()=>Math.random()-.5).slice(0,10).map(r=>({...r,category:"mixed"}))}const e=[...ys[t]];if(e.length<10){const s=10-e.length,n=Object.entries(ys).filter(([r])=>r!==t).flatMap(([,r])=>r).sort(()=>Math.random()-.5).slice(0,s).map(r=>({...r,category:t}));e.push(...n)}return e.slice(0,10).map(s=>({...s,category:t}))}async function kd(t){console.log(`Fetching questions for category: ${t}`);const e=`pending_${t}`;if(gs.has(e))return console.log("Request already in progress for category:",t),gs.get(e);const s=`questions_${t}`,n=Dt.get(s);if(n&&Date.now()-n.timestamp<Sd)return console.log("Using cached questions for category:",t),n.data;const r=(async()=>{try{console.log("Fetching questions from Supabase...");let i=Td.from("questions").select("*").eq("active",!0);t!=="mixed"&&(i=i.eq("category",t));const{data:o,error:a}=await i;if(a)throw console.error("Supabase query error:",a),a;if(!o||o.length===0){console.warn("No questions found in Supabase, using fallback questions");const u=ai(t);return Dt.set(s,{data:u,timestamp:Date.now()}),u}const c=o.map(u=>({id:u.id,category:u.category,question:u.question,options:u.options,correctAnswer:u.correct_answer})).sort(()=>Math.random()-.5).slice(0,10);return Dt.set(s,{data:c,timestamp:Date.now()}),c}catch(i){console.error("Error fetching questions:",i);const o=ai(t);return Dt.set(s,{data:o,timestamp:Date.now()}),o}finally{gs.delete(e)}})();return gs.set(e,r),r}function ea(){Dt.clear(),console.log("Question cache cleared")}class Cd extends w.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleRetry=()=>{ea(),this.setState({hasError:!1,error:null}),window.location.reload()}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Uncaught error:",e,s)}render(){var e;return this.state.hasError?l.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 max-w-md w-full text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong."}),l.jsx("p",{className:"text-gray-400 mb-6",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred."}),l.jsx("button",{onClick:this.handleRetry,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition-colors",children:"Try Again"})]})}):this.props.children}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),z=(t,e)=>{const s=w.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:c,...u},d)=>w.createElement("svg",{ref:d,...Pd,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${Ad(t)}`,a].join(" "),...u},[...e.map(([h,f])=>w.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=z("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=z("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=z("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=z("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=z("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=z("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=z("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=z("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=z("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=z("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=z("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=z("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=z("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=z("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=z("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),cr=w.createContext({});function ur(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ws=w.createContext(null),dr=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Fd extends w.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Bd({children:t,isPresent:e}){const s=w.useId(),n=w.useRef(null),r=w.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=w.useContext(dr);return w.useInsertionEffect(()=>{const{width:o,height:a,top:c,left:u}=r.current;if(e||!n.current||!o||!a)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),l.jsx(Fd,{isPresent:e,childRef:n,sizeRef:r,children:w.cloneElement(t,{ref:n})})}const Ud=({children:t,initial:e,isPresent:s,onExitComplete:n,custom:r,presenceAffectsLayout:i,mode:o})=>{const a=ur(Gd),c=w.useId(),u=w.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;n&&n()},[a,n]),d=w.useMemo(()=>({id:c,initial:e,isPresent:s,custom:r,onExitComplete:u,register:h=>(a.set(h,!1),()=>a.delete(h))}),i?[Math.random(),u]:[s,u]);return w.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[s]),w.useEffect(()=>{!s&&!a.size&&n&&n()},[s]),o==="popLayout"&&(t=l.jsx(Bd,{isPresent:s,children:t})),l.jsx(Ws.Provider,{value:d,children:t})};function Gd(){return new Map}function ma(t=!0){const e=w.useContext(Ws);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:r}=e,i=w.useId();w.useEffect(()=>{t&&r(i)},[t]);const o=w.useCallback(()=>t&&n&&n(i),[i,n,t]);return!s&&n?[!1,o]:[!0]}const vs=t=>t.key||"";function ci(t){const e=[];return w.Children.forEach(t,s=>{w.isValidElement(s)&&e.push(s)}),e}const hr=typeof window<"u",pa=hr?w.useLayoutEffect:w.useEffect,Te=({children:t,custom:e,initial:s=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:i="sync",propagate:o=!1})=>{const[a,c]=ma(o),u=w.useMemo(()=>ci(t),[t]),d=o&&!a?[]:u.map(vs),h=w.useRef(!0),f=w.useRef(u),m=ur(()=>new Map),[v,y]=w.useState(u),[g,b]=w.useState(u);pa(()=>{h.current=!1,f.current=u;for(let C=0;C<g.length;C++){const S=vs(g[C]);d.includes(S)?m.delete(S):m.get(S)!==!0&&m.set(S,!1)}},[g,d.length,d.join("-")]);const j=[];if(u!==v){let C=[...u];for(let S=0;S<g.length;S++){const A=g[S],F=vs(A);d.includes(F)||(C.splice(S,0,A),j.push(A))}i==="wait"&&j.length&&(C=j),b(ci(C)),y(u);return}const{forceRender:_}=w.useContext(cr);return l.jsx(l.Fragment,{children:g.map(C=>{const S=vs(C),A=o&&!a?!1:u===g||d.includes(S),F=()=>{if(m.has(S))m.set(S,!0);else return;let k=!0;m.forEach(U=>{U||(k=!1)}),k&&(_==null||_(),b(f.current),o&&(c==null||c()),n&&n())};return l.jsx(Ud,{isPresent:A,initial:!h.current||s?void 0:!1,custom:A?void 0:e,presenceAffectsLayout:r,mode:i,onExitComplete:A?void 0:F,children:C},S)})})},Se=t=>t;let Vn=Se;function fr(t){let e;return()=>(e===void 0&&(e=t()),e)}const St=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n},Ve=t=>t*1e3,Fe=t=>t/1e3,qd={skipAnimations:!1,useManualTiming:!1};function zd(t){let e=new Set,s=new Set,n=!1,r=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){i.has(u)&&(c.schedule(u),t()),u(o)}const c={schedule:(u,d=!1,h=!1)=>{const m=h&&n?e:s;return d&&i.add(u),m.has(u)||m.add(u),u},cancel:u=>{s.delete(u),i.delete(u)},process:u=>{if(o=u,n){r=!0;return}n=!0,[e,s]=[s,e],e.forEach(a),e.clear(),n=!1,r&&(r=!1,c.process(u))}};return c}const xs=["read","resolveKeyframes","update","preRender","render","postRender"],Hd=40;function ga(t,e){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=xs.reduce((b,j)=>(b[j]=zd(i),b),{}),{read:a,resolveKeyframes:c,update:u,preRender:d,render:h,postRender:f}=o,m=()=>{const b=performance.now();s=!1,r.delta=n?1e3/60:Math.max(Math.min(b-r.timestamp,Hd),1),r.timestamp=b,r.isProcessing=!0,a.process(r),c.process(r),u.process(r),d.process(r),h.process(r),f.process(r),r.isProcessing=!1,s&&e&&(n=!1,t(m))},v=()=>{s=!0,n=!0,r.isProcessing||t(m)};return{schedule:xs.reduce((b,j)=>{const _=o[j];return b[j]=(C,S=!1,A=!1)=>(s||v(),_.schedule(C,S,A)),b},{}),cancel:b=>{for(let j=0;j<xs.length;j++)o[xs[j]].cancel(b)},state:r,steps:o}}const{schedule:te,cancel:Qe,state:he,steps:un}=ga(typeof requestAnimationFrame<"u"?requestAnimationFrame:Se,!0),ya=w.createContext({strict:!1}),ui={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kt={};for(const t in ui)kt[t]={isEnabled:e=>ui[t].some(s=>!!e[s])};function Wd(t){for(const e in t)kt[e]={...kt[e],...t[e]}}const Kd=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cs(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Kd.has(t)}let va=t=>!Cs(t);function Jd(t){t&&(va=e=>e.startsWith("on")?!Cs(e):t(e))}try{Jd(require("@emotion/is-prop-valid").default)}catch{}function Qd(t,e,s){const n={};for(const r in t)r==="values"&&typeof t.values=="object"||(va(r)||s===!0&&Cs(r)||!e&&!Cs(r)||t.draggable&&r.startsWith("onDrag"))&&(n[r]=t[r]);return n}function Yd(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...n)=>t(...n);return new Proxy(s,{get:(n,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Ks=w.createContext({});function Jt(t){return typeof t=="string"||Array.isArray(t)}function Js(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const mr=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pr=["initial",...mr];function Qs(t){return Js(t.animate)||pr.some(e=>Jt(t[e]))}function xa(t){return!!(Qs(t)||t.variants)}function Xd(t,e){if(Qs(t)){const{initial:s,animate:n}=t;return{initial:s===!1||Jt(s)?s:void 0,animate:Jt(n)?n:void 0}}return t.inherit!==!1?e:{}}function Zd(t){const{initial:e,animate:s}=Xd(t,w.useContext(Ks));return w.useMemo(()=>({initial:e,animate:s}),[di(e),di(s)])}function di(t){return Array.isArray(t)?t.join(" "):t}const eh=Symbol.for("motionComponentSymbol");function yt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function th(t,e,s){return w.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):yt(s)&&(s.current=n))},[e])}const gr=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sh="framerAppearId",wa="data-"+gr(sh),{schedule:yr,cancel:t0}=ga(queueMicrotask,!1),ba=w.createContext({});function nh(t,e,s,n,r){var i,o;const{visualElement:a}=w.useContext(Ks),c=w.useContext(ya),u=w.useContext(Ws),d=w.useContext(dr).reducedMotion,h=w.useRef(null);n=n||c.renderer,!h.current&&n&&(h.current=n(t,{visualState:e,parent:a,props:s,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,m=w.useContext(ba);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&rh(h.current,s,r,m);const v=w.useRef(!1);w.useInsertionEffect(()=>{f&&v.current&&f.update(s,u)});const y=s[wa],g=w.useRef(!!y&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return pa(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),yr.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),w.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,y)}),g.current=!1))}),f}function rh(t,e,s,n){const{layoutId:r,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:u}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:ja(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||a&&yt(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function ja(t){if(t)return t.options.allowProjection!==!1?t.projection:ja(t.parent)}function ih({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:n,Component:r}){var i,o;t&&Wd(t);function a(u,d){let h;const f={...w.useContext(dr),...u,layoutId:oh(u)},{isStatic:m}=f,v=Zd(u),y=n(u,m);if(!m&&hr){ah();const g=lh(f);h=g.MeasureLayout,v.visualElement=nh(r,y,f,e,g.ProjectionNode)}return l.jsxs(Ks.Provider,{value:v,children:[h&&v.visualElement?l.jsx(h,{visualElement:v.visualElement,...f}):null,s(r,u,th(y,v.visualElement,d),y,m,v.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(i=r.displayName)!==null&&i!==void 0?i:r.name)!==null&&o!==void 0?o:""})`}`;const c=w.forwardRef(a);return c[eh]=r,c}function oh({layoutId:t}){const e=w.useContext(cr).id;return e&&t!==void 0?e+"-"+t:t}function ah(t,e){w.useContext(ya).strict}function lh(t){const{drag:e,layout:s}=kt;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const ch=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vr(t){return typeof t!="string"||t.includes("-")?!1:!!(ch.indexOf(t)>-1||/[A-Z]/u.test(t))}function hi(t){const e=[{},{}];return t==null||t.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function xr(t,e,s,n){if(typeof e=="function"){const[r,i]=hi(n);e=e(s!==void 0?s:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=hi(n);e=e(s!==void 0?s:t.custom,r,i)}return e}const Fn=t=>Array.isArray(t),uh=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),dh=t=>Fn(t)?t[t.length-1]||0:t,pe=t=>!!(t&&t.getVelocity);function js(t){const e=pe(t)?t.get():t;return uh(e)?e.toValue():e}function hh({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},n,r,i){const o={latestValues:fh(n,r,i,t),renderState:e()};return s&&(o.onMount=a=>s({props:n,current:a,...o}),o.onUpdate=a=>s(a)),o}const _a=t=>(e,s)=>{const n=w.useContext(Ks),r=w.useContext(Ws),i=()=>hh(t,e,n,r);return s?i():ur(i)};function fh(t,e,s,n){const r={},i=n(t,{});for(const f in i)r[f]=js(i[f]);let{initial:o,animate:a}=t;const c=Qs(t),u=xa(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=s?s.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!Js(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const v=xr(t,f[m]);if(v){const{transitionEnd:y,transition:g,...b}=v;for(const j in b){let _=b[j];if(Array.isArray(_)){const C=d?_.length-1:0;_=_[C]}_!==null&&(r[j]=_)}for(const j in y)r[j]=y[j]}}}return r}const Et=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ht=new Set(Et),Ta=t=>e=>typeof e=="string"&&e.startsWith(t),Sa=Ta("--"),mh=Ta("var(--"),wr=t=>mh(t)?ph.test(t.split("/*")[0].trim()):!1,ph=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ka=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Be=(t,e,s)=>s>e?e:s<t?t:s,Nt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Qt={...Nt,transform:t=>Be(0,1,t)},ws={...Nt,default:1},rs=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),He=rs("deg"),Oe=rs("%"),O=rs("px"),gh=rs("vh"),yh=rs("vw"),fi={...Oe,parse:t=>Oe.parse(t)/100,transform:t=>Oe.transform(t*100)},vh={borderWidth:O,borderTopWidth:O,borderRightWidth:O,borderBottomWidth:O,borderLeftWidth:O,borderRadius:O,radius:O,borderTopLeftRadius:O,borderTopRightRadius:O,borderBottomRightRadius:O,borderBottomLeftRadius:O,width:O,maxWidth:O,height:O,maxHeight:O,top:O,right:O,bottom:O,left:O,padding:O,paddingTop:O,paddingRight:O,paddingBottom:O,paddingLeft:O,margin:O,marginTop:O,marginRight:O,marginBottom:O,marginLeft:O,backgroundPositionX:O,backgroundPositionY:O},xh={rotate:He,rotateX:He,rotateY:He,rotateZ:He,scale:ws,scaleX:ws,scaleY:ws,scaleZ:ws,skew:He,skewX:He,skewY:He,distance:O,translateX:O,translateY:O,translateZ:O,x:O,y:O,z:O,perspective:O,transformPerspective:O,opacity:Qt,originX:fi,originY:fi,originZ:O},mi={...Nt,transform:Math.round},br={...vh,...xh,zIndex:mi,size:O,fillOpacity:Qt,strokeOpacity:Qt,numOctaves:mi},wh={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bh=Et.length;function jh(t,e,s){let n="",r=!0;for(let i=0;i<bh;i++){const o=Et[i],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||s){const u=ka(a,br[o]);if(!c){r=!1;const d=wh[o]||o;n+=`${d}(${u}) `}s&&(e[o]=u)}}return n=n.trim(),s?n=s(e,r?"":n):r&&(n="none"),n}function jr(t,e,s){const{style:n,vars:r,transformOrigin:i}=t;let o=!1,a=!1;for(const c in e){const u=e[c];if(ht.has(c)){o=!0;continue}else if(Sa(c)){r[c]=u;continue}else{const d=ka(u,br[c]);c.startsWith("origin")?(a=!0,i[c]=d):n[c]=d}}if(e.transform||(o||s?n.transform=jh(e,t.transform,s):n.transform&&(n.transform="none")),a){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;n.transformOrigin=`${c} ${u} ${d}`}}const _h={offset:"stroke-dashoffset",array:"stroke-dasharray"},Th={offset:"strokeDashoffset",array:"strokeDasharray"};function Sh(t,e,s=1,n=0,r=!0){t.pathLength=1;const i=r?_h:Th;t[i.offset]=O.transform(-n);const o=O.transform(e),a=O.transform(s);t[i.array]=`${o} ${a}`}function pi(t,e,s){return typeof t=="string"?t:O.transform(e+s*t)}function kh(t,e,s){const n=pi(e,t.x,t.width),r=pi(s,t.y,t.height);return`${n} ${r}`}function _r(t,{attrX:e,attrY:s,attrScale:n,originX:r,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},d,h){if(jr(t,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:v}=t;f.transform&&(v&&(m.transform=f.transform),delete f.transform),v&&(r!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=kh(v,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),s!==void 0&&(f.y=s),n!==void 0&&(f.scale=n),o!==void 0&&Sh(f,o,a,c,!1)}const Tr=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Ca=()=>({...Tr(),attrs:{}}),Sr=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Pa(t,{style:e,vars:s},n,r){Object.assign(t.style,e,r&&r.getProjectionStyles(n));for(const i in s)t.style.setProperty(i,s[i])}const Aa=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ea(t,e,s,n){Pa(t,e,void 0,n);for(const r in e.attrs)t.setAttribute(Aa.has(r)?r:gr(r),e.attrs[r])}const Ps={};function Ch(t){Object.assign(Ps,t)}function Na(t,{layout:e,layoutId:s}){return ht.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Ps[t]||t==="opacity")}function kr(t,e,s){var n;const{style:r}=t,i={};for(const o in r)(pe(r[o])||e.style&&pe(e.style[o])||Na(o,t)||((n=s==null?void 0:s.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=r[o]);return i}function Ra(t,e,s){const n=kr(t,e,s);for(const r in t)if(pe(t[r])||pe(e[r])){const i=Et.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Ph(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const gi=["x","y","width","height","cx","cy","r"],Ah={useVisualState:_a({scrapeMotionValuesFromProps:Ra,createRenderState:Ca,onUpdate:({props:t,prevProps:e,current:s,renderState:n,latestValues:r})=>{if(!s)return;let i=!!t.drag;if(!i){for(const a in r)if(ht.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<gi.length;a++){const c=gi[a];t[c]!==e[c]&&(o=!0)}o&&te.read(()=>{Ph(s,n),te.render(()=>{_r(n,r,Sr(s.tagName),t.transformTemplate),Ea(s,n)})})}})},Eh={useVisualState:_a({scrapeMotionValuesFromProps:kr,createRenderState:Tr})};function Ma(t,e,s){for(const n in e)!pe(e[n])&&!Na(n,s)&&(t[n]=e[n])}function Nh({transformTemplate:t},e){return w.useMemo(()=>{const s=Tr();return jr(s,e,t),Object.assign({},s.vars,s.style)},[e])}function Rh(t,e){const s=t.style||{},n={};return Ma(n,s,t),Object.assign(n,Nh(t,e)),n}function Mh(t,e){const s={},n=Rh(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}function Ih(t,e,s,n){const r=w.useMemo(()=>{const i=Ca();return _r(i,e,Sr(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Ma(i,t.style,t),r.style={...i,...r.style}}return r}function Oh(t=!1){return(s,n,r,{latestValues:i},o)=>{const c=(vr(s)?Ih:Mh)(n,i,o,s),u=Qd(n,typeof s=="string",t),d=s!==w.Fragment?{...u,...c,ref:r}:{},{children:h}=n,f=w.useMemo(()=>pe(h)?h.get():h,[h]);return w.createElement(s,{...d,children:f})}}function Dh(t,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...vr(n)?Ah:Eh,preloadedFeatures:t,useRender:Oh(r),createVisualElement:e,Component:n};return ih(o)}}function Ia(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}function Ys(t,e,s){const n=t.getProps();return xr(n,e,s!==void 0?s:n.custom,t)}const Lh=fr(()=>window.ScrollTimeline!==void 0);class $h{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=s}attachTimeline(e,s){const n=this.animations.map(r=>{if(Lh()&&r.attachTimeline)return r.attachTimeline(e);if(typeof s=="function")return s(r)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Vh extends $h{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function Cr(t,e){return t?t[e]||t.default||t:void 0}const Bn=2e4;function Oa(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<Bn;)e+=s,n=t.next(e);return e>=Bn?1/0:e}function Pr(t){return typeof t=="function"}function yi(t,e){t.timeline=e,t.onfinish=null}const Ar=t=>Array.isArray(t)&&typeof t[0]=="number",Fh={linearEasing:void 0};function Bh(t,e){const s=fr(t);return()=>{var n;return(n=Fh[e])!==null&&n!==void 0?n:s()}}const As=Bh(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Da=(t,e,s=10)=>{let n="";const r=Math.max(Math.round(e/s),2);for(let i=0;i<r;i++)n+=t(St(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function La(t){return!!(typeof t=="function"&&As()||!t||typeof t=="string"&&(t in Un||As())||Ar(t)||Array.isArray(t)&&t.every(La))}const $t=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,Un={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$t([0,.65,.55,1]),circOut:$t([.55,0,1,.45]),backIn:$t([.31,.01,.66,-.59]),backOut:$t([.33,1.53,.69,.99])};function $a(t,e){if(t)return typeof t=="function"&&As()?Da(t,e):Ar(t)?$t(t):Array.isArray(t)?t.map(s=>$a(s,e)||Un.easeOut):Un[t]}const Re={x:!1,y:!1};function Va(){return Re.x||Re.y}function Uh(t,e,s){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const i=(n=void 0)!==null&&n!==void 0?n:r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function Fa(t,e){const s=Uh(t),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[s,r,()=>n.abort()]}function vi(t){return e=>{e.pointerType==="touch"||Va()||t(e)}}function Gh(t,e,s={}){const[n,r,i]=Fa(t,s),o=vi(a=>{const{target:c}=a,u=e(a);if(typeof u!="function"||!c)return;const d=vi(h=>{u(h),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,r)});return n.forEach(a=>{a.addEventListener("pointerenter",o,r)}),i}const Ba=(t,e)=>e?t===e?!0:Ba(t,e.parentElement):!1,Er=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,qh=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zh(t){return qh.has(t.tagName)||t.tabIndex!==-1}const Vt=new WeakSet;function xi(t){return e=>{e.key==="Enter"&&t(e)}}function dn(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Hh=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=xi(()=>{if(Vt.has(s))return;dn(s,"down");const r=xi(()=>{dn(s,"up")}),i=()=>dn(s,"cancel");s.addEventListener("keyup",r,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function wi(t){return Er(t)&&!Va()}function Wh(t,e,s={}){const[n,r,i]=Fa(t,s),o=a=>{const c=a.currentTarget;if(!wi(a)||Vt.has(c))return;Vt.add(c);const u=e(a),d=(m,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!wi(m)||!Vt.has(c))&&(Vt.delete(c),typeof u=="function"&&u(m,{success:v}))},h=m=>{d(m,s.useGlobalTarget||Ba(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",f,r)};return n.forEach(a=>{!zh(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(s.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",u=>Hh(u,r),r)}),i}function Kh(t){return t==="x"||t==="y"?Re[t]?null:(Re[t]=!0,()=>{Re[t]=!1}):Re.x||Re.y?null:(Re.x=Re.y=!0,()=>{Re.x=Re.y=!1})}const Ua=new Set(["width","height","top","left","right","bottom",...Et]);let _s;function Jh(){_s=void 0}const De={now:()=>(_s===void 0&&De.set(he.isProcessing||qd.useManualTiming?he.timestamp:performance.now()),_s),set:t=>{_s=t,queueMicrotask(Jh)}};function Nr(t,e){t.indexOf(e)===-1&&t.push(e)}function Rr(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class Mr{constructor(){this.subscriptions=[]}add(e){return Nr(this.subscriptions,e),()=>Rr(this.subscriptions,e)}notify(e,s,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,s,n);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Ga(t,e){return e?t*(1e3/e):0}const bi=30,Qh=t=>!isNaN(parseFloat(t));class Yh{constructor(e,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{const i=De.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=De.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Qh(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Mr);const n=this.events[e].add(s);return e==="change"?()=>{n(),te.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=De.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>bi)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,bi);return Ga(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yt(t,e){return new Yh(t,e)}function Xh(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Yt(s))}function Zh(t,e){const s=Ys(t,e);let{transitionEnd:n={},transition:r={},...i}=s||{};i={...i,...n};for(const o in i){const a=dh(i[o]);Xh(t,o,a)}}function ef(t){return!!(pe(t)&&t.add)}function Gn(t,e){const s=t.getValue("willChange");if(ef(s))return s.add(e)}function qa(t){return t.props[wa]}const za=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,tf=1e-7,sf=12;function nf(t,e,s,n,r){let i,o,a=0;do o=e+(s-e)/2,i=za(o,n,r)-t,i>0?s=o:e=o;while(Math.abs(i)>tf&&++a<sf);return o}function is(t,e,s,n){if(t===e&&s===n)return Se;const r=i=>nf(i,0,1,t,s);return i=>i===0||i===1?i:za(r(i),e,n)}const Ha=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Wa=t=>e=>1-t(1-e),Ka=is(.33,1.53,.69,.99),Ir=Wa(Ka),Ja=Ha(Ir),Qa=t=>(t*=2)<1?.5*Ir(t):.5*(2-Math.pow(2,-10*(t-1))),Or=t=>1-Math.sin(Math.acos(t)),Ya=Wa(Or),Xa=Ha(Or),Za=t=>/^0[^.\s]+$/u.test(t);function rf(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Za(t):!0}const qt=t=>Math.round(t*1e5)/1e5,Dr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function of(t){return t==null}const af=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lr=(t,e)=>s=>!!(typeof s=="string"&&af.test(s)&&s.startsWith(t)||e&&!of(s)&&Object.prototype.hasOwnProperty.call(s,e)),el=(t,e,s)=>n=>{if(typeof n!="string")return n;const[r,i,o,a]=n.match(Dr);return{[t]:parseFloat(r),[e]:parseFloat(i),[s]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},lf=t=>Be(0,255,t),hn={...Nt,transform:t=>Math.round(lf(t))},at={test:Lr("rgb","red"),parse:el("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+hn.transform(t)+", "+hn.transform(e)+", "+hn.transform(s)+", "+qt(Qt.transform(n))+")"};function cf(t){let e="",s="",n="",r="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),r=t.substring(4,5),e+=e,s+=s,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const qn={test:Lr("#"),parse:cf,transform:at.transform},vt={test:Lr("hsl","hue"),parse:el("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+Oe.transform(qt(e))+", "+Oe.transform(qt(s))+", "+qt(Qt.transform(n))+")"},me={test:t=>at.test(t)||qn.test(t)||vt.test(t),parse:t=>at.test(t)?at.parse(t):vt.test(t)?vt.parse(t):qn.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?at.transform(t):vt.transform(t)},uf=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function df(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Dr))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(uf))===null||s===void 0?void 0:s.length)||0)>0}const tl="number",sl="color",hf="var",ff="var(",ji="${}",mf=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xt(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},r=[];let i=0;const a=e.replace(mf,c=>(me.test(c)?(n.color.push(i),r.push(sl),s.push(me.parse(c))):c.startsWith(ff)?(n.var.push(i),r.push(hf),s.push(c)):(n.number.push(i),r.push(tl),s.push(parseFloat(c))),++i,ji)).split(ji);return{values:s,split:a,indexes:n,types:r}}function nl(t){return Xt(t).values}function rl(t){const{split:e,types:s}=Xt(t),n=e.length;return r=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],r[o]!==void 0){const a=s[o];a===tl?i+=qt(r[o]):a===sl?i+=me.transform(r[o]):i+=r[o]}return i}}const pf=t=>typeof t=="number"?0:t;function gf(t){const e=nl(t);return rl(t)(e.map(pf))}const Ye={test:df,parse:nl,createTransformer:rl,getAnimatableNone:gf},yf=new Set(["brightness","contrast","saturate","opacity"]);function vf(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(Dr)||[];if(!n)return t;const r=s.replace(n,"");let i=yf.has(e)?1:0;return n!==s&&(i*=100),e+"("+i+r+")"}const xf=/\b([a-z-]*)\(.*?\)/gu,zn={...Ye,getAnimatableNone:t=>{const e=t.match(xf);return e?e.map(vf).join(" "):t}},wf={...br,color:me,backgroundColor:me,outlineColor:me,fill:me,stroke:me,borderColor:me,borderTopColor:me,borderRightColor:me,borderBottomColor:me,borderLeftColor:me,filter:zn,WebkitFilter:zn},$r=t=>wf[t];function il(t,e){let s=$r(t);return s!==zn&&(s=Ye),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const bf=new Set(["auto","none","0"]);function jf(t,e,s){let n=0,r;for(;n<t.length&&!r;){const i=t[n];typeof i=="string"&&!bf.has(i)&&Xt(i).values.length&&(r=t[n]),n++}if(r&&s)for(const i of e)t[i]=il(s,r)}const _i=t=>t===Nt||t===O,Ti=(t,e)=>parseFloat(t.split(", ")[e]),Si=(t,e)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/u);if(r)return Ti(r[1],e);{const i=n.match(/^matrix\((.+)\)$/u);return i?Ti(i[1],t):0}},_f=new Set(["x","y","z"]),Tf=Et.filter(t=>!_f.has(t));function Sf(t){const e=[];return Tf.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const Ct={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Si(4,13),y:Si(5,14)};Ct.translateX=Ct.x;Ct.translateY=Ct.y;const lt=new Set;let Hn=!1,Wn=!1;function ol(){if(Wn){const t=Array.from(lt).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const r=Sf(n);r.length&&(s.set(n,r),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=s.get(n);r&&r.forEach(([i,o])=>{var a;(a=n.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Wn=!1,Hn=!1,lt.forEach(t=>t.complete()),lt.clear()}function al(){lt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Wn=!0)})}function kf(){al(),ol()}class Vr{constructor(e,s,n,r,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(lt.add(this),Hn||(Hn=!0,te.read(al),te.resolveKeyframes(ol))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:r}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&s){const c=n.readValue(s,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),lt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,lt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ll=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Cf=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Pf(t){const e=Cf.exec(t);if(!e)return[,];const[,s,n,r]=e;return[`--${s??n}`,r]}function cl(t,e,s=1){const[n,r]=Pf(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return ll(o)?parseFloat(o):o}return wr(r)?cl(r,e,s+1):r}const ul=t=>e=>e.test(t),Af={test:t=>t==="auto",parse:t=>t},dl=[Nt,O,Oe,He,yh,gh,Af],ki=t=>dl.find(ul(t));class hl extends Vr{constructor(e,s,n,r,i){super(e,s,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),wr(u))){const d=cl(u,s.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Ua.has(n)||e.length!==2)return;const[r,i]=e,o=ki(r),a=ki(i);if(o!==a)if(_i(o)&&_i(a))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let r=0;r<e.length;r++)rf(e[r])&&n.push(r);n.length&&jf(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ct[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const r=s[s.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:s,name:n,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const i=s.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Ct[n](s.measureViewportBox(),window.getComputedStyle(s.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{s.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const Ci=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ye.test(t)||t==="0")&&!t.startsWith("url("));function Ef(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function Nf(t,e,s,n){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Ci(r,e),a=Ci(i,e);return!o||!a?!1:Ef(t)||(s==="spring"||Pr(s))&&n}const Rf=t=>t!==null;function Xs(t,{repeat:e,repeatType:s="loop"},n){const r=t.filter(Rf),i=e&&s!=="loop"&&e%2===1?0:r.length-1;return!i||n===void 0?r[i]:n}const Mf=40;class fl{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=De.now(),this.options={autoplay:e,delay:s,type:n,repeat:r,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Mf?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&kf(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=De.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:i,delay:o,onComplete:a,onUpdate:c,isGenerator:u}=this.options;if(!u&&!Nf(e,n,r,i))if(o)this.options.duration=0;else{c&&c(Xs(e,this.options,s)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,s);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...d},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ne=(t,e,s)=>t+(e-t)*s;function fn(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function If({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let r=0,i=0,o=0;if(!e)r=i=o=s;else{const a=s<.5?s*(1+e):s+e-s*e,c=2*s-a;r=fn(c,a,t+1/3),i=fn(c,a,t),o=fn(c,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Es(t,e){return s=>s>0?e:t}const mn=(t,e,s)=>{const n=t*t,r=s*(e*e-n)+n;return r<0?0:Math.sqrt(r)},Of=[qn,at,vt],Df=t=>Of.find(e=>e.test(t));function Pi(t){const e=Df(t);if(!e)return!1;let s=e.parse(t);return e===vt&&(s=If(s)),s}const Ai=(t,e)=>{const s=Pi(t),n=Pi(e);if(!s||!n)return Es(t,e);const r={...s};return i=>(r.red=mn(s.red,n.red,i),r.green=mn(s.green,n.green,i),r.blue=mn(s.blue,n.blue,i),r.alpha=ne(s.alpha,n.alpha,i),at.transform(r))},Lf=(t,e)=>s=>e(t(s)),os=(...t)=>t.reduce(Lf),Kn=new Set(["none","hidden"]);function $f(t,e){return Kn.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function Vf(t,e){return s=>ne(t,e,s)}function Fr(t){return typeof t=="number"?Vf:typeof t=="string"?wr(t)?Es:me.test(t)?Ai:Uf:Array.isArray(t)?ml:typeof t=="object"?me.test(t)?Ai:Ff:Es}function ml(t,e){const s=[...t],n=s.length,r=t.map((i,o)=>Fr(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)s[o]=r[o](i);return s}}function Ff(t,e){const s={...t,...e},n={};for(const r in s)t[r]!==void 0&&e[r]!==void 0&&(n[r]=Fr(t[r])(t[r],e[r]));return r=>{for(const i in n)s[i]=n[i](r);return s}}function Bf(t,e){var s;const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][r[o]],c=(s=t.values[a])!==null&&s!==void 0?s:0;n[i]=c,r[o]++}return n}const Uf=(t,e)=>{const s=Ye.createTransformer(e),n=Xt(t),r=Xt(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?Kn.has(t)&&!r.values.length||Kn.has(e)&&!n.values.length?$f(t,e):os(ml(Bf(n,r),r.values),s):Es(t,e)};function pl(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?ne(t,e,s):Fr(t)(t,e)}const Gf=5;function gl(t,e,s){const n=Math.max(e-Gf,0);return Ga(s-t(n),e-n)}const re={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pn=.001;function qf({duration:t=re.duration,bounce:e=re.bounce,velocity:s=re.velocity,mass:n=re.mass}){let r,i,o=1-e;o=Be(re.minDamping,re.maxDamping,o),t=Be(re.minDuration,re.maxDuration,Fe(t)),o<1?(r=u=>{const d=u*o,h=d*t,f=d-s,m=Jn(u,o),v=Math.exp(-h);return pn-f/m*v},i=u=>{const h=u*o*t,f=h*s+s,m=Math.pow(o,2)*Math.pow(u,2)*t,v=Math.exp(-h),y=Jn(Math.pow(u,2),o);return(-r(u)+pn>0?-1:1)*((f-m)*v)/y}):(r=u=>{const d=Math.exp(-u*t),h=(u-s)*t+1;return-pn+d*h},i=u=>{const d=Math.exp(-u*t),h=(s-u)*(t*t);return d*h});const a=5/t,c=Hf(r,i,a);if(t=Ve(t),isNaN(c))return{stiffness:re.stiffness,damping:re.damping,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const zf=12;function Hf(t,e,s){let n=s;for(let r=1;r<zf;r++)n=n-t(n)/e(n);return n}function Jn(t,e){return t*Math.sqrt(1-e*e)}const Wf=["duration","bounce"],Kf=["stiffness","damping","mass"];function Ei(t,e){return e.some(s=>t[s]!==void 0)}function Jf(t){let e={velocity:re.velocity,stiffness:re.stiffness,damping:re.damping,mass:re.mass,isResolvedFromDuration:!1,...t};if(!Ei(t,Kf)&&Ei(t,Wf))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),r=n*n,i=2*Be(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:re.mass,stiffness:r,damping:i}}else{const s=qf(t);e={...e,...s,mass:re.mass},e.isResolvedFromDuration=!0}return e}function yl(t=re.visualDuration,e=re.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:r}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=Jf({...s,velocity:-Fe(s.velocity||0)}),v=f||0,y=u/(2*Math.sqrt(c*d)),g=o-i,b=Fe(Math.sqrt(c/d)),j=Math.abs(g)<5;n||(n=j?re.restSpeed.granular:re.restSpeed.default),r||(r=j?re.restDelta.granular:re.restDelta.default);let _;if(y<1){const S=Jn(b,y);_=A=>{const F=Math.exp(-y*b*A);return o-F*((v+y*b*g)/S*Math.sin(S*A)+g*Math.cos(S*A))}}else if(y===1)_=S=>o-Math.exp(-b*S)*(g+(v+b*g)*S);else{const S=b*Math.sqrt(y*y-1);_=A=>{const F=Math.exp(-y*b*A),k=Math.min(S*A,300);return o-F*((v+y*b*g)*Math.sinh(k)+S*g*Math.cosh(k))/S}}const C={calculatedDuration:m&&h||null,next:S=>{const A=_(S);if(m)a.done=S>=h;else{let F=0;y<1&&(F=S===0?Ve(v):gl(_,S,A));const k=Math.abs(F)<=n,U=Math.abs(o-A)<=r;a.done=k&&U}return a.value=a.done?o:A,a},toString:()=>{const S=Math.min(Oa(C),Bn),A=Da(F=>C.next(S*F).value,S,30);return S+"ms "+A}};return C}function Ni({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},m=k=>a!==void 0&&k<a||c!==void 0&&k>c,v=k=>a===void 0?c:c===void 0||Math.abs(a-k)<Math.abs(c-k)?a:c;let y=s*e;const g=h+y,b=o===void 0?g:o(g);b!==g&&(y=b-h);const j=k=>-y*Math.exp(-k/n),_=k=>b+j(k),C=k=>{const U=j(k),K=_(k);f.done=Math.abs(U)<=u,f.value=f.done?b:K};let S,A;const F=k=>{m(f.value)&&(S=k,A=yl({keyframes:[f.value,v(f.value)],velocity:gl(_,k,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return F(0),{calculatedDuration:null,next:k=>{let U=!1;return!A&&S===void 0&&(U=!0,C(k),F(k)),S!==void 0&&k>=S?A.next(k-S):(!U&&C(k),f)}}}const Qf=is(.42,0,1,1),Yf=is(0,0,.58,1),vl=is(.42,0,.58,1),Xf=t=>Array.isArray(t)&&typeof t[0]!="number",Ri={linear:Se,easeIn:Qf,easeInOut:vl,easeOut:Yf,circIn:Or,circInOut:Xa,circOut:Ya,backIn:Ir,backInOut:Ja,backOut:Ka,anticipate:Qa},Mi=t=>{if(Ar(t)){Vn(t.length===4);const[e,s,n,r]=t;return is(e,s,n,r)}else if(typeof t=="string")return Vn(Ri[t]!==void 0),Ri[t];return t};function Zf(t,e,s){const n=[],r=s||pl,i=t.length-1;for(let o=0;o<i;o++){let a=r(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Se:e;a=os(c,a)}n.push(a)}return n}function em(t,e,{clamp:s=!0,ease:n,mixer:r}={}){const i=t.length;if(Vn(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Zf(e,n,r),c=a.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=St(t[h],t[h+1],d);return a[h](f)};return s?d=>u(Be(t[0],t[i-1],d)):u}function tm(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const r=St(0,e,n);t.push(ne(s,1,r))}}function sm(t){const e=[0];return tm(e,t.length-1),e}function nm(t,e){return t.map(s=>s*e)}function rm(t,e){return t.map(()=>e||vl).splice(0,t.length-1)}function Ns({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const r=Xf(n)?n.map(Mi):Mi(n),i={done:!1,value:e[0]},o=nm(s&&s.length===e.length?s:sm(e),t),a=em(o,e,{ease:Array.isArray(r)?r:rm(e,r)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}const im=t=>{const e=({timestamp:s})=>t(s);return{start:()=>te.update(e,!0),stop:()=>Qe(e),now:()=>he.isProcessing?he.timestamp:De.now()}},om={decay:Ni,inertia:Ni,tween:Ns,keyframes:Ns,spring:yl},am=t=>t/100;class Br extends fl{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:s,motionValue:n,element:r,keyframes:i}=this.options,o=(r==null?void 0:r.KeyframeResolver)||Vr,a=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new o(i,a,s,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=this.options,a=Pr(s)?s:om[s]||Ns;let c,u;a!==Ns&&typeof e[0]!="number"&&(c=os(am,pl(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});i==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Oa(d));const{calculatedDuration:h}=d,f=h+r,m=f*(n+1)-r;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:n}=this;if(!n){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=n;if(this.startTime===null)return i.next(0);const{delay:f,repeat:m,repeatType:v,repeatDelay:y,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-f*(this.speed>=0?1:-1),j=this.speed>=0?b<0:b>d;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let _=this.currentTime,C=i;if(m){const k=Math.min(this.currentTime,d)/h;let U=Math.floor(k),K=k%1;!K&&k>=1&&(K=1),K===1&&U--,U=Math.min(U,m+1),!!(U%2)&&(v==="reverse"?(K=1-K,y&&(K-=y/h)):v==="mirror"&&(C=o)),_=Be(0,1,K)*h}const S=j?{done:!1,value:c[0]}:C.next(_);a&&(S.value=a(S.value));let{done:A}=S;!j&&u!==null&&(A=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return F&&r!==void 0&&(S.value=Xs(c,this.options,r)),g&&g(S.value),F&&this.finish(),S}get duration(){const{resolved:e}=this;return e?Fe(e.calculatedDuration):0}get time(){return Fe(this.currentTime)}set time(e){e=Ve(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Fe(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=im,onPlay:s,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),s&&s();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const lm=new Set(["opacity","clipPath","filter","transform"]);function cm(t,e,s,{delay:n=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:c}={}){const u={[e]:s};c&&(u.offset=c);const d=$a(a,r);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:n,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const um=fr(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Rs=10,dm=2e4;function hm(t){return Pr(t.type)||t.type==="spring"||!La(t.ease)}function fm(t,e){const s=new Br({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const r=[];let i=0;for(;!n.done&&i<dm;)n=s.sample(i),r.push(n.value),i+=Rs;return{times:void 0,keyframes:r,duration:i-Rs,ease:"linear"}}const xl={anticipate:Qa,backInOut:Ja,circInOut:Xa};function mm(t){return t in xl}class Ii extends fl{constructor(e){super(e);const{name:s,motionValue:n,element:r,keyframes:i}=this.options;this.resolver=new hl(i,(o,a)=>this.onKeyframesResolved(o,a),s,n,r),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:n=300,times:r,ease:i,type:o,motionValue:a,name:c,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&As()&&mm(i)&&(i=xl[i]),hm(this.options)){const{onComplete:h,onUpdate:f,motionValue:m,element:v,...y}=this.options,g=fm(e,y);e=g.keyframes,e.length===1&&(e[1]=e[0]),n=g.duration,r=g.times,i=g.ease,o="keyframes"}const d=cm(a.owner.current,c,e,{...this.options,duration:n,times:r,ease:i});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(yi(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(Xs(e,this.options,s)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:r,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return Fe(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return Fe(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.currentTime=Ve(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return Se;const{animation:n}=s;yi(n,e)}return Se}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:n,duration:r,type:i,ease:o,times:a}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:f,...m}=this.options,v=new Br({...m,keyframes:n,duration:r,type:i,ease:o,times:a,isGenerator:!0}),y=Ve(this.time);u.setWithVelocity(v.sample(y-Rs).value,v.sample(y).value,Rs)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=s.owner.getProps();return um()&&n&&lm.has(n)&&!c&&!u&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}}const pm={type:"spring",stiffness:500,damping:25,restSpeed:10},gm=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ym={type:"keyframes",duration:.8},vm={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xm=(t,{keyframes:e})=>e.length>2?ym:ht.has(t)?t.startsWith("scale")?gm(e[1]):pm:vm;function wm({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Ur=(t,e,s,n={},r,i)=>o=>{const a=Cr(n,t)||{},c=a.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Ve(c);let d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:r};wm(a)||(d={...d,...xm(t,d)}),d.duration&&(d.duration=Ve(d.duration)),d.repeatDelay&&(d.repeatDelay=Ve(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!i&&e.get()!==void 0){const f=Xs(d.keyframes,a);if(f!==void 0)return te.update(()=>{d.onUpdate(f),d.onComplete()}),new Vh([])}return!i&&Ii.supports(d)?new Ii(d):new Br(d)};function bm({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function wl(t,e,{delay:s=0,transitionOverride:n,type:r}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...c}=e;n&&(o=n);const u=[],d=r&&t.animationState&&t.animationState.getState()[r];for(const h in c){const f=t.getValue(h,(i=t.latestValues[h])!==null&&i!==void 0?i:null),m=c[h];if(m===void 0||d&&bm(d,h))continue;const v={delay:s,...Cr(o||{},h)};let y=!1;if(window.MotionHandoffAnimation){const b=qa(t);if(b){const j=window.MotionHandoffAnimation(b,h,te);j!==null&&(v.startTime=j,y=!0)}}Gn(t,h),f.start(Ur(h,f,m,t.shouldReduceMotion&&Ua.has(h)?{type:!1}:v,t,y));const g=f.animation;g&&u.push(g)}return a&&Promise.all(u).then(()=>{te.update(()=>{a&&Zh(t,a)})}),u}function Qn(t,e,s={}){var n;const r=Ys(t,e,s.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(i=s.transitionOverride);const o=r?()=>Promise.all(wl(t,r,s)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return jm(t,e,d+u,h,f,s)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[o,a]:[a,o];return u().then(()=>d())}else return Promise.all([o(),a(s.delay)])}function jm(t,e,s=0,n=0,r=1,i){const o=[],a=(t.variantChildren.size-1)*n,c=r===1?(u=0)=>u*n:(u=0)=>a-u*n;return Array.from(t.variantChildren).sort(_m).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(Qn(u,e,{...i,delay:s+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function _m(t,e){return t.sortNodePosition(e)}function Tm(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(i=>Qn(t,i,s));n=Promise.all(r)}else if(typeof e=="string")n=Qn(t,e,s);else{const r=typeof e=="function"?Ys(t,e,s.custom):e;n=Promise.all(wl(t,r,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}const Sm=pr.length;function bl(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?bl(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<Sm;s++){const n=pr[s],r=t.props[n];(Jt(r)||r===!1)&&(e[n]=r)}return e}const km=[...mr].reverse(),Cm=mr.length;function Pm(t){return e=>Promise.all(e.map(({animation:s,options:n})=>Tm(t,s,n)))}function Am(t){let e=Pm(t),s=Oi(),n=!0;const r=c=>(u,d)=>{var h;const f=Ys(t,d,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:v,...y}=f;u={...u,...y,...v}}return u};function i(c){e=c(t)}function o(c){const{props:u}=t,d=bl(t.parent)||{},h=[],f=new Set;let m={},v=1/0;for(let g=0;g<Cm;g++){const b=km[g],j=s[b],_=u[b]!==void 0?u[b]:d[b],C=Jt(_),S=b===c?j.isActive:null;S===!1&&(v=g);let A=_===d[b]&&_!==u[b]&&C;if(A&&n&&t.manuallyAnimateOnMount&&(A=!1),j.protectedKeys={...m},!j.isActive&&S===null||!_&&!j.prevProp||Js(_)||typeof _=="boolean")continue;const F=Em(j.prevProp,_);let k=F||b===c&&j.isActive&&!A&&C||g>v&&C,U=!1;const K=Array.isArray(_)?_:[_];let ie=K.reduce(r(b),{});S===!1&&(ie={});const{prevResolvedValues:X={}}=j,oe={...X,...ie},J=E=>{k=!0,f.has(E)&&(U=!0,f.delete(E)),j.needsAnimating[E]=!0;const G=t.getValue(E);G&&(G.liveStyle=!1)};for(const E in oe){const G=ie[E],Ee=X[E];if(m.hasOwnProperty(E))continue;let x=!1;Fn(G)&&Fn(Ee)?x=!Ia(G,Ee):x=G!==Ee,x?G!=null?J(E):f.add(E):G!==void 0&&f.has(E)?J(E):j.protectedKeys[E]=!0}j.prevProp=_,j.prevResolvedValues=ie,j.isActive&&(m={...m,...ie}),n&&t.blockInitialAnimation&&(k=!1),k&&(!(A&&F)||U)&&h.push(...K.map(E=>({animation:E,options:{type:b}})))}if(f.size){const g={};f.forEach(b=>{const j=t.getBaseTarget(b),_=t.getValue(b);_&&(_.liveStyle=!0),g[b]=j??null}),h.push({animation:g})}let y=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(h):Promise.resolve()}function a(c,u){var d;if(s[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),s[c].isActive=u;const h=o(c);for(const f in s)s[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>s,reset:()=>{s=Oi(),n=!0}}}function Em(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ia(e,t):!1}function st(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Oi(){return{animate:st(!0),whileInView:st(),whileHover:st(),whileTap:st(),whileDrag:st(),whileFocus:st(),exit:st()}}class Ze{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Nm extends Ze{constructor(e){super(e),e.animationState||(e.animationState=Am(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Js(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Rm=0;class Mm extends Ze{constructor(){super(...arguments),this.id=Rm++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);s&&!e&&r.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Im={animation:{Feature:Nm},exit:{Feature:Mm}};function Zt(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function as(t){return{point:{x:t.pageX,y:t.pageY}}}const Om=t=>e=>Er(e)&&t(e,as(e));function zt(t,e,s,n){return Zt(t,e,Om(s),n)}const Di=(t,e)=>Math.abs(t-e);function Dm(t,e){const s=Di(t.x,e.x),n=Di(t.y,e.y);return Math.sqrt(s**2+n**2)}class jl{constructor(e,s,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=yn(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Dm(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:v}=h,{timestamp:y}=he;this.history.push({...v,timestamp:y});const{onStart:g,onMove:b}=this.handlers;f||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=gn(f,this.transformPagePoint),te.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=yn(h.type==="pointercancel"?this.lastMoveEventInfo:gn(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,g),v&&v(h,g)},!Er(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.contextWindow=r||window;const o=as(e),a=gn(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=he;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=s;d&&d(e,yn(a,this.history)),this.removeListeners=os(zt(this.contextWindow,"pointermove",this.handlePointerMove),zt(this.contextWindow,"pointerup",this.handlePointerUp),zt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qe(this.updatePoint)}}function gn(t,e){return e?{point:e(t.point)}:t}function Li(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yn({point:t},e){return{point:t,delta:Li(t,_l(e)),offset:Li(t,Lm(e)),velocity:$m(e,.1)}}function Lm(t){return t[0]}function _l(t){return t[t.length-1]}function $m(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const r=_l(t);for(;s>=0&&(n=t[s],!(r.timestamp-n.timestamp>Ve(e)));)s--;if(!n)return{x:0,y:0};const i=Fe(r.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-n.x)/i,y:(r.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Tl=1e-4,Vm=1-Tl,Fm=1+Tl,Sl=.01,Bm=0-Sl,Um=0+Sl;function ke(t){return t.max-t.min}function Gm(t,e,s){return Math.abs(t-e)<=s}function $i(t,e,s,n=.5){t.origin=n,t.originPoint=ne(e.min,e.max,t.origin),t.scale=ke(s)/ke(e),t.translate=ne(s.min,s.max,t.origin)-t.originPoint,(t.scale>=Vm&&t.scale<=Fm||isNaN(t.scale))&&(t.scale=1),(t.translate>=Bm&&t.translate<=Um||isNaN(t.translate))&&(t.translate=0)}function Ht(t,e,s,n){$i(t.x,e.x,s.x,n?n.originX:void 0),$i(t.y,e.y,s.y,n?n.originY:void 0)}function Vi(t,e,s){t.min=s.min+e.min,t.max=t.min+ke(e)}function qm(t,e,s){Vi(t.x,e.x,s.x),Vi(t.y,e.y,s.y)}function Fi(t,e,s){t.min=e.min-s.min,t.max=t.min+ke(e)}function Wt(t,e,s){Fi(t.x,e.x,s.x),Fi(t.y,e.y,s.y)}function zm(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?ne(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?ne(s,t,n.max):Math.min(t,s)),t}function Bi(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function Hm(t,{top:e,left:s,bottom:n,right:r}){return{x:Bi(t.x,s,r),y:Bi(t.y,e,n)}}function Ui(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function Wm(t,e){return{x:Ui(t.x,e.x),y:Ui(t.y,e.y)}}function Km(t,e){let s=.5;const n=ke(t),r=ke(e);return r>n?s=St(e.min,e.max-n,t.min):n>r&&(s=St(t.min,t.max-r,e.min)),Be(0,1,s)}function Jm(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Yn=.35;function Qm(t=Yn){return t===!1?t=0:t===!0&&(t=Yn),{x:Gi(t,"left","right"),y:Gi(t,"top","bottom")}}function Gi(t,e,s){return{min:qi(t,e),max:qi(t,s)}}function qi(t,e){return typeof t=="number"?t:t[e]||0}const zi=()=>({translate:0,scale:1,origin:0,originPoint:0}),xt=()=>({x:zi(),y:zi()}),Hi=()=>({min:0,max:0}),le=()=>({x:Hi(),y:Hi()});function Pe(t){return[t("x"),t("y")]}function kl({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function Ym({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Xm(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function vn(t){return t===void 0||t===1}function Xn({scale:t,scaleX:e,scaleY:s}){return!vn(t)||!vn(e)||!vn(s)}function rt(t){return Xn(t)||Cl(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Cl(t){return Wi(t.x)||Wi(t.y)}function Wi(t){return t&&t!=="0%"}function Ms(t,e,s){const n=t-s,r=e*n;return s+r}function Ki(t,e,s,n,r){return r!==void 0&&(t=Ms(t,r,n)),Ms(t,s,n)+e}function Zn(t,e=0,s=1,n,r){t.min=Ki(t.min,e,s,n,r),t.max=Ki(t.max,e,s,n,r)}function Pl(t,{x:e,y:s}){Zn(t.x,e.translate,e.scale,e.originPoint),Zn(t.y,s.translate,s.scale,s.originPoint)}const Ji=.999999999999,Qi=1.0000000000001;function Zm(t,e,s,n=!1){const r=s.length;if(!r)return;e.x=e.y=1;let i,o;for(let a=0;a<r;a++){i=s[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&bt(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Pl(t,o)),n&&rt(i.latestValues)&&bt(t,i.latestValues))}e.x<Qi&&e.x>Ji&&(e.x=1),e.y<Qi&&e.y>Ji&&(e.y=1)}function wt(t,e){t.min=t.min+e,t.max=t.max+e}function Yi(t,e,s,n,r=.5){const i=ne(t.min,t.max,r);Zn(t,e,s,i,n)}function bt(t,e){Yi(t.x,e.x,e.scaleX,e.scale,e.originX),Yi(t.y,e.y,e.scaleY,e.scale,e.originY)}function Al(t,e){return kl(Xm(t.getBoundingClientRect(),e))}function ep(t,e,s){const n=Al(t,s),{scroll:r}=e;return r&&(wt(n.x,r.offset.x),wt(n.y,r.offset.y)),n}const El=({current:t})=>t?t.ownerDocument.defaultView:null,tp=new WeakMap;class sp{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=le(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(as(d).point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:v}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Kh(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pe(g=>{let b=this.getAxisMotionValue(g).get()||0;if(Oe.test(b)){const{projection:j}=this.visualElement;if(j&&j.layout){const _=j.layout.layoutBox[g];_&&(b=ke(_)*(parseFloat(b)/100))}}this.originPoint[g]=b}),v&&te.postRender(()=>v(d,h)),Gn(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:v,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:g}=h;if(m&&this.currentDirection===null){this.currentDirection=np(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),y&&y(d,h)},a=(d,h)=>this.stop(d,h),c=()=>Pe(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new jl(e,{onSessionStart:r,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:El(this.visualElement)})}stop(e,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=s;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&te.postRender(()=>i(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:r}=this.getProps();if(!n||!bs(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=zm(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;s&&yt(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=Hm(r.layoutBox,s):this.constraints=!1,this.elastic=Qm(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pe(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Jm(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!yt(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=ep(n,r.root,this.visualElement.getTransformPagePoint());let o=Wm(r.layout.layoutBox,i);if(s){const a=s(Ym(o));this.hasMutatedConstraints=!!a,a&&(o=kl(a))}return o}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=Pe(d=>{if(!bs(d,s,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:n?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(a)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return Gn(this.visualElement,e),n.start(Ur(e,n,0,s,this.visualElement,!1))}stopAnimation(){Pe(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pe(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[s];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Pe(s=>{const{drag:n}=this.getProps();if(!bs(s,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(s);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[s];i.set(e[s]-ne(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!yt(s)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Pe(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();r[o]=Km({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Pe(o=>{if(!bs(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(ne(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;tp.set(this.visualElement,this);const e=this.visualElement.current,s=zt(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();yt(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),te.read(n);const o=Zt(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Pe(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=Yn,dragMomentum:a=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function bs(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function np(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class rp extends Ze{constructor(e){super(e),this.removeGroupControls=Se,this.removeListeners=Se,this.controls=new sp(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Se}unmount(){this.removeGroupControls(),this.removeListeners()}}const Xi=t=>(e,s)=>{t&&te.postRender(()=>t(e,s))};class ip extends Ze{constructor(){super(...arguments),this.removePointerDownListener=Se}onPointerDown(e){this.session=new jl(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:El(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Xi(e),onStart:Xi(s),onMove:n,onEnd:(i,o)=>{delete this.session,r&&te.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=zt(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ts={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zi(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const It={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(O.test(t))t=parseFloat(t);else return t;const s=Zi(t,e.target.x),n=Zi(t,e.target.y);return`${s}% ${n}%`}},op={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,r=Ye.parse(t);if(r.length>5)return n;const i=Ye.createTransformer(t),o=typeof r[0]!="number"?1:0,a=s.x.scale*e.x,c=s.y.scale*e.y;r[0+o]/=a,r[1+o]/=c;const u=ne(a,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),i(r)}};class ap extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;Ch(lp),i&&(s.group&&s.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ts.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,r||e.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||te.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yr.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Nl(t){const[e,s]=ma(),n=w.useContext(cr);return l.jsx(ap,{...t,layoutGroup:n,switchLayoutGroup:w.useContext(ba),isPresent:e,safeToRemove:s})}const lp={borderRadius:{...It,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:It,borderTopRightRadius:It,borderBottomLeftRadius:It,borderBottomRightRadius:It,boxShadow:op};function cp(t,e,s){const n=pe(t)?t:Yt(t);return n.start(Ur("",n,e,s)),n.animation}function up(t){return t instanceof SVGElement&&t.tagName!=="svg"}const dp=(t,e)=>t.depth-e.depth;class hp{constructor(){this.children=[],this.isDirty=!1}add(e){Nr(this.children,e),this.isDirty=!0}remove(e){Rr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dp),this.isDirty=!1,this.children.forEach(e)}}function fp(t,e){const s=De.now(),n=({timestamp:r})=>{const i=r-s;i>=e&&(Qe(n),t(i-e))};return te.read(n,!0),()=>Qe(n)}const Rl=["TopLeft","TopRight","BottomLeft","BottomRight"],mp=Rl.length,eo=t=>typeof t=="string"?parseFloat(t):t,to=t=>typeof t=="number"||O.test(t);function pp(t,e,s,n,r,i){r?(t.opacity=ne(0,s.opacity!==void 0?s.opacity:1,gp(n)),t.opacityExit=ne(e.opacity!==void 0?e.opacity:1,0,yp(n))):i&&(t.opacity=ne(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<mp;o++){const a=`border${Rl[o]}Radius`;let c=so(e,a),u=so(s,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||to(c)===to(u)?(t[a]=Math.max(ne(eo(c),eo(u),n),0),(Oe.test(u)||Oe.test(c))&&(t[a]+="%")):t[a]=u}(e.rotate||s.rotate)&&(t.rotate=ne(e.rotate||0,s.rotate||0,n))}function so(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const gp=Ml(0,.5,Ya),yp=Ml(.5,.95,Se);function Ml(t,e,s){return n=>n<t?0:n>e?1:s(St(t,e,n))}function no(t,e){t.min=e.min,t.max=e.max}function Ce(t,e){no(t.x,e.x),no(t.y,e.y)}function ro(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function io(t,e,s,n,r){return t-=e,t=Ms(t,1/s,n),r!==void 0&&(t=Ms(t,1/r,n)),t}function vp(t,e=0,s=1,n=.5,r,i=t,o=t){if(Oe.test(e)&&(e=parseFloat(e),e=ne(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ne(i.min,i.max,n);t===i&&(a-=e),t.min=io(t.min,e,s,a,r),t.max=io(t.max,e,s,a,r)}function oo(t,e,[s,n,r],i,o){vp(t,e[s],e[n],e[r],e.scale,i,o)}const xp=["x","scaleX","originX"],wp=["y","scaleY","originY"];function ao(t,e,s,n){oo(t.x,e,xp,s?s.x:void 0,n?n.x:void 0),oo(t.y,e,wp,s?s.y:void 0,n?n.y:void 0)}function lo(t){return t.translate===0&&t.scale===1}function Il(t){return lo(t.x)&&lo(t.y)}function co(t,e){return t.min===e.min&&t.max===e.max}function bp(t,e){return co(t.x,e.x)&&co(t.y,e.y)}function uo(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Ol(t,e){return uo(t.x,e.x)&&uo(t.y,e.y)}function ho(t){return ke(t.x)/ke(t.y)}function fo(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class jp{constructor(){this.members=[]}add(e){Nr(this.members,e),e.scheduleRender()}remove(e){if(Rr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(r=>e===r);if(s===0)return!1;let n;for(let r=s;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _p(t,e,s){let n="";const r=t.x.translate/e.x,i=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((r||i||o)&&(n=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:v}=s;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),m&&(n+=`skewX(${m}deg) `),v&&(n+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(n+=`scale(${a}, ${c})`),n||"none"}const it={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ft=typeof window<"u"&&window.MotionDebug!==void 0,xn=["","X","Y","Z"],Tp={visibility:"hidden"},mo=1e3;let Sp=0;function wn(t,e,s,n){const{latestValues:r}=e;r[t]&&(s[t]=r[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Dl(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=qa(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",te,!(r||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Dl(n)}function Ll({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Sp++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ft&&(it.totalNodes=it.resolvedTargetDeltas=it.recalculatedProjection=0),this.nodes.forEach(Pp),this.nodes.forEach(Mp),this.nodes.forEach(Ip),this.nodes.forEach(Ap),Ft&&window.MotionDebug.record(it)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new hp)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Mr),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=up(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=fp(f,250),Ts.hasAnimatedSinceResize&&(Ts.hasAnimatedSinceResize=!1,this.nodes.forEach(go))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||Vp,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=d.getProps(),j=!this.targetLayout||!Ol(this.targetLayout,v)||m,_=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||f&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,_);const C={...Cr(y,"layout"),onPlay:g,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||go(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qe(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Op),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Dl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(po);return}this.isUpdating||this.nodes.forEach(Np),this.isUpdating=!1,this.nodes.forEach(Rp),this.nodes.forEach(kp),this.nodes.forEach(Cp),this.clearAllSnapshots();const a=De.now();he.delta=Be(0,1e3/60,a-he.timestamp),he.timestamp=a,he.isProcessing=!0,un.update.process(he),un.preRender.process(he),un.render.process(he),he.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ep),this.sharedNodes.forEach(Dp)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,te.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){te.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Il(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||rt(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),Fp(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return le();const c=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Bp))){const{scroll:d}=this.root;d&&(wt(c.x,d.offset.x),wt(c.y,d.offset.y))}return c}removeElementScroll(o){var a;const c=le();if(Ce(c,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ce(c,o),wt(c.x,h.offset.x),wt(c.y,h.offset.y))}return c}applyTransform(o,a=!1){const c=le();Ce(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&bt(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),rt(d.latestValues)&&bt(c,d.latestValues)}return rt(this.latestValues)&&bt(c,this.latestValues),c}removeTransform(o){const a=le();Ce(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!rt(u.latestValues))continue;Xn(u.latestValues)&&u.updateSnapshot();const d=le(),h=u.measurePageBox();Ce(d,h),ao(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return rt(this.latestValues)&&ao(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==he.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=he.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=le(),this.relativeTargetOrigin=le(),Wt(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ce(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=le(),this.targetWithTransforms=le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qm(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ce(this.target,this.layout.layoutBox),Pl(this.target,this.targetDelta)):Ce(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=le(),this.relativeTargetOrigin=le(),Wt(this.relativeTargetOrigin,this.target,m.target),Ce(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ft&&it.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xn(this.parent.latestValues)||Cl(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===he.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Ce(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;Zm(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=le());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ro(this.prevProjectionDelta.x,this.projectionDelta.x),ro(this.prevProjectionDelta.y,this.projectionDelta.y)),Ht(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!fo(this.projectionDelta.x,this.prevProjectionDelta.x)||!fo(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Ft&&it.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xt(),this.projectionDelta=xt(),this.projectionDeltaWithTransform=xt()}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=xt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=le(),m=c?c.source:void 0,v=this.layout?this.layout.source:void 0,y=m!==v,g=this.getStack(),b=!g||g.members.length<=1,j=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some($p));this.animationProgress=0;let _;this.mixTargetDelta=C=>{const S=C/1e3;yo(h.x,o.x,S),yo(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wt(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lp(this.relativeTarget,this.relativeTargetOrigin,f,S),_&&bp(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=le()),Ce(_,this.relativeTarget)),y&&(this.animationValues=d,pp(d,u,this.latestValues,S,j,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qe(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=te.update(()=>{Ts.hasAnimatedSinceResize=!0,this.currentAnimation=cp(0,mo,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mo),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:d}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&$l(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||le();const h=ke(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=ke(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Ce(a,c),bt(a,d),Ht(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new jp),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const u={};c.z&&wn("z",o,u,this.animationValues);for(let d=0;d<xn.length;d++)wn(`rotate${xn[d]}`,o,u,this.animationValues),wn(`skew${xn[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Tp;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=js(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=js(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!rt(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=_p(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in Ps){if(f[y]===void 0)continue;const{correct:g,applyTo:b}=Ps[y],j=u.transform==="none"?f[y]:g(f[y],h);if(b){const _=b.length;for(let C=0;C<_;C++)u[b[C]]=j}else u[y]=j}return this.options.layoutId&&(u.pointerEvents=h===this?js(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(po),this.root.sharedNodes.clear()}}}function kp(t){t.updateLayout()}function Cp(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,o=s.source!==t.layout.source;i==="size"?Pe(h=>{const f=o?s.measuredBox[h]:s.layoutBox[h],m=ke(f);f.min=n[h].min,f.max=f.min+m}):$l(i,s.layoutBox,n)&&Pe(h=>{const f=o?s.measuredBox[h]:s.layoutBox[h],m=ke(n[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=xt();Ht(a,n,s.layoutBox);const c=xt();o?Ht(c,t.applyTransform(r,!0),s.measuredBox):Ht(c,n,s.layoutBox);const u=!Il(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const v=le();Wt(v,s.layoutBox,f.layoutBox);const y=le();Wt(y,n,m.layoutBox),Ol(v,y)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Pp(t){Ft&&it.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Ap(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Ep(t){t.clearSnapshot()}function po(t){t.clearMeasurements()}function Np(t){t.isLayoutDirty=!1}function Rp(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function go(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Mp(t){t.resolveTargetDelta()}function Ip(t){t.calcProjection()}function Op(t){t.resetSkewAndRotation()}function Dp(t){t.removeLeadSnapshot()}function yo(t,e,s){t.translate=ne(e.translate,0,s),t.scale=ne(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function vo(t,e,s,n){t.min=ne(e.min,s.min,n),t.max=ne(e.max,s.max,n)}function Lp(t,e,s,n){vo(t.x,e.x,s.x,n),vo(t.y,e.y,s.y,n)}function $p(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Vp={duration:.45,ease:[.4,0,.1,1]},xo=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wo=xo("applewebkit/")&&!xo("chrome/")?Math.round:Se;function bo(t){t.min=wo(t.min),t.max=wo(t.max)}function Fp(t){bo(t.x),bo(t.y)}function $l(t,e,s){return t==="position"||t==="preserve-aspect"&&!Gm(ho(e),ho(s),.2)}function Bp(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Up=Ll({attachResizeListener:(t,e)=>Zt(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bn={current:void 0},Vl=Ll({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bn.current){const t=new Up({});t.mount(window),t.setOptions({layoutScroll:!0}),bn.current=t}return bn.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Gp={pan:{Feature:ip},drag:{Feature:rp,ProjectionNode:Vl,MeasureLayout:Nl}};function jo(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const r="onHover"+s,i=n[r];i&&te.postRender(()=>i(e,as(e)))}class qp extends Ze{mount(){const{current:e}=this.node;e&&(this.unmount=Gh(e,s=>(jo(this.node,s,"Start"),n=>jo(this.node,n,"End"))))}unmount(){}}class zp extends Ze{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=os(Zt(this.node.current,"focus",()=>this.onFocus()),Zt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _o(t,e,s){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const r="onTap"+(s==="End"?"":s),i=n[r];i&&te.postRender(()=>i(e,as(e)))}class Hp extends Ze{mount(){const{current:e}=this.node;e&&(this.unmount=Wh(e,s=>(_o(this.node,s,"Start"),(n,{success:r})=>_o(this.node,n,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const er=new WeakMap,jn=new WeakMap,Wp=t=>{const e=er.get(t.target);e&&e(t)},Kp=t=>{t.forEach(Wp)};function Jp({root:t,...e}){const s=t||document;jn.has(s)||jn.set(s,{});const n=jn.get(s),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(Kp,{root:t,...e})),n[r]}function Qp(t,e,s){const n=Jp(e);return er.set(t,s),n.observe(t),()=>{er.delete(t),n.unobserve(t)}}const Yp={some:0,all:1};class Xp extends Ze{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:r="some",once:i}=e,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:Yp[r]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return Qp(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(Zp(e,s))&&this.startObserver()}unmount(){}}function Zp({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const eg={inView:{Feature:Xp},tap:{Feature:Hp},focus:{Feature:zp},hover:{Feature:qp}},tg={layout:{ProjectionNode:Vl,MeasureLayout:Nl}},tr={current:null},Fl={current:!1};function sg(){if(Fl.current=!0,!!hr)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>tr.current=t.matches;t.addListener(e),e()}else tr.current=!1}const ng=[...dl,me,Ye],rg=t=>ng.find(ul(t)),To=new WeakMap;function ig(t,e,s){for(const n in e){const r=e[n],i=s[n];if(pe(r))t.addValue(n,r);else if(pe(i))t.addValue(n,Yt(r,{owner:t}));else if(i!==r)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(n);t.addValue(n,Yt(o!==void 0?o:r,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const So=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class og{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=De.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,te.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Qs(s),this.isVariantNode=xa(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const m in f){const v=f[m];c[m]!==void 0&&pe(v)&&v.set(c[m],!1)}}mount(e){this.current=e,To.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Fl.current||sg(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tr.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){To.delete(this.current),this.projection&&this.projection.unmount(),Qe(this.notifyUpdate),Qe(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ht.has(e),r=s.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&te.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{r(),i(),o&&o(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kt){const s=kt[e];if(!s)continue;const{isEnabled:n,Feature:r}=s;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):le()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<So.length;n++){const r=So[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=ig(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=Yt(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){var n;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ll(r)||Za(r))?r=parseFloat(r):!rg(r)&&Ye.test(s)&&(r=il(e,s)),this.setBaseTarget(e,pe(r)?r.get():r)),pe(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=xr(this.props,n,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!pe(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Mr),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class Bl extends og{constructor(){super(...arguments),this.KeyframeResolver=hl}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pe(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function ag(t){return window.getComputedStyle(t)}class lg extends Bl{constructor(){super(...arguments),this.type="html",this.renderInstance=Pa}readValueFromInstance(e,s){if(ht.has(s)){const n=$r(s);return n&&n.default||0}else{const n=ag(e),r=(Sa(s)?n.getPropertyValue(s):n[s])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:s}){return Al(e,s)}build(e,s,n){jr(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return kr(e,s,n)}}class cg extends Bl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=le}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(ht.has(s)){const n=$r(s);return n&&n.default||0}return s=Aa.has(s)?s:gr(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return Ra(e,s,n)}build(e,s,n){_r(e,s,this.isSVGTag,n.transformTemplate)}renderInstance(e,s,n,r){Ea(e,s,n,r)}mount(e){this.isSVGTag=Sr(e.tagName),super.mount(e)}}const ug=(t,e)=>vr(t)?new cg(e):new lg(e,{allowProjection:t!==w.Fragment}),dg=Dh({...Im,...eg,...Gp,...tg},ug),T=Yd(dg),hg=({onStart:t})=>{const[e,s]=w.useState(""),[n,r]=w.useState(!1),[i,o]=w.useState(!1),[a,c]=w.useState(0),[u,d]=w.useState(!1),[h,f]=w.useState(!1),m=["The first Olympic Games were held in Ancient Greece in 776 BC","A regulation NBA basketball hoop is exactly 10 feet (3.05m) high","The longest tennis match lasted 11 hours and 5 minutes at Wimbledon 2010","Soccer balls were originally made from inflated pig bladders","Michael Phelps has won more Olympic medals (28) than 100 countries","The Yankees have won the World Series 27 times—more than any other team","Golf is the only sport that has been played on the moon","The NHL's Stanley Cup has been used as a cereal bowl by players","The average lifespan of an NFL career is just 3.3 years","The most expensive soccer transfer was €222 million for Neymar in 2017"],v=[{title:"Multiple Categories",description:"Test your knowledge across Football, Basketball, Tennis, Olympics, and Mixed sports",icon:Je},{title:"Solo Challenge",description:"Practice at your own pace and improve your sports knowledge",icon:Rd},{title:"1v1 Duels",description:"Challenge friends in real-time competitive matches",icon:ca},{title:"Fresh Content",description:"New questions added every day to keep challenges exciting",icon:$d},{title:"Performance Stats",description:"Track your response times and accuracy",icon:Ed}],y=[{title:"Enter username",description:"Enter your username to get started"},{title:"Choose Game Mode",description:"Select Solo Play or challenge a friend in 1v1 Mode"},{title:"Select Category",description:"Pick from Football, Basketball, Tennis, Olympics, or Mixed Sports"},{title:"Answer Questions",description:"Test your knowledge with challenging sports trivia"},{title:"Earn Points",description:"Get 10 points for correct answers plus speed bonuses"}];w.useEffect(()=>{const j=setInterval(()=>{c(C=>(C+1)%m.length)},6e3),_=setTimeout(()=>{o(!0)},300);return()=>{clearInterval(j),clearTimeout(_)}},[]);const g=()=>{if(e.trim().length===0){r(!0);return}t(e.trim())},b=["⚽","🏀","🎾","🏈","⚾","🏆","🥇","🏅"];return l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#0c1220] to-[#1a1a2e] flex flex-col items-center justify-center p-4 overflow-hidden relative",children:[b.map((j,_)=>l.jsx(T.div,{className:"absolute text-4xl opacity-5 pointer-events-none",initial:{x:Math.random()*window.innerWidth,y:-100},animate:{y:window.innerHeight+100,rotate:[0,180,360],x:`calc(${Math.random()*100}vw)`},transition:{duration:20+Math.random()*15,repeat:1/0,delay:Math.random()*5,ease:"linear"},children:j},_)),l.jsxs("div",{className:"w-full max-w-lg text-center z-10",children:[l.jsx(Te,{children:i&&l.jsxs(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"mb-8",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[l.jsx(T.div,{animate:{rotate:[0,10,0,-10,0]},transition:{duration:5,repeat:1/0},className:"text-5xl",children:"🏆"}),l.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white leading-tight tracking-tight",children:l.jsxs("span",{className:"text-blue-400",children:["Sport",l.jsx("span",{className:"text-white",children:"IQ"})]})}),l.jsx(T.div,{animate:{rotate:[0,-10,0,10,0]},transition:{duration:5,repeat:1/0,delay:.5},className:"text-5xl",children:"🧠"})]}),l.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:l.jsx("p",{className:"text-xl text-gray-300 italic",children:"Test Your Sports Knowledge"})})]})}),l.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mb-4",children:[l.jsxs(T.button,{onClick:()=>d(!u),className:"flex items-center justify-center gap-2 text-blue-400 hover:text-blue-300 transition-colors mx-auto",whileHover:{scale:1.05},whileTap:{scale:.95},children:[l.jsx(Lt,{size:16}),l.jsx("span",{children:"About SportIQ"}),u?l.jsx(Ln,{size:16}):l.jsx(Dn,{size:16})]}),l.jsx(Te,{children:u&&l.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:l.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm rounded-xl p-4 my-3 text-left",children:[l.jsxs("p",{className:"text-gray-300 text-sm",children:[l.jsx("span",{className:"font-bold text-blue-400",children:"SportIQ"})," is the ultimate sports trivia challenge that tests your knowledge across multiple sports categories. Whether you're a casual fan or a sports expert, our carefully crafted questions will challenge and entertain you."]}),l.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:v.slice(0,4).map((j,_)=>l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(j.icon,{size:16,className:"text-blue-400 mt-0.5 flex-shrink-0"}),l.jsx("span",{className:"text-xs text-gray-300",children:j.title})]},_))})]})})})]}),l.jsxs(T.div,{className:"bg-gray-800/80 backdrop-blur-md rounded-2xl p-8 shadow-2xl border border-gray-700 mb-4",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:20,delay:.2},children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Enter the Quiz Arena"}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"Your Username",value:e,onChange:j=>{s(j.target.value),r(!1)},className:`w-full p-4 pr-12 text-lg rounded-lg bg-gray-700 text-white placeholder-gray-400 
                          border-2 ${n?"border-red-500":"border-gray-600"} 
                          focus:border-blue-500 focus:outline-none transition-colors`}),l.jsx(ks,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),n&&l.jsx(T.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm mt-2 text-left",children:"Please enter a username to continue"})]}),l.jsxs(T.button,{onClick:g,whileHover:{scale:1.03},whileTap:{scale:.97},className:`w-full p-4 text-xl font-bold rounded-lg bg-blue-600
                      hover:bg-blue-700
                      text-white transition-all duration-200 flex items-center justify-center gap-3 shadow-lg`,children:[l.jsx(Ld,{size:24,className:"fill-white"}),"TEST YOUR SPORTIQ"]}),l.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"Select game mode on the next screen"})]}),l.jsxs(T.div,{className:"grid grid-cols-3 gap-3 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:[l.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-lg flex flex-col items-center",children:[l.jsx(Je,{size:20,className:"text-yellow-400 mb-1"}),l.jsx("span",{className:"text-sm text-gray-300",children:"Solo Quiz"})]}),l.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-lg flex flex-col items-center",children:[l.jsx(ks,{size:20,className:"text-blue-400 mb-1"}),l.jsx("span",{className:"text-sm text-gray-300",children:"1v1 Duels"})]}),l.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-lg flex flex-col items-center",children:[l.jsx(ar,{size:20,className:"text-green-400 mb-1"}),l.jsx("span",{className:"text-sm text-gray-300",children:"Leaderboard"})]})]}),l.jsx(T.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-gray-300 text-sm mb-3 font-medium",children:"Quiz Categories:"}),l.jsxs(T.div,{className:"grid grid-cols-3 sm:grid-cols-5 gap-1 sm:gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:[l.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[l.jsx("span",{className:"text-xl sm:text-2xl",children:"⚽"}),l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Football"})]}),l.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[l.jsx("span",{className:"text-xl sm:text-2xl",children:"🏀"}),l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Basketball"})]}),l.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[l.jsx("span",{className:"text-xl sm:text-2xl",children:"🎾"}),l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Tennis"})]}),l.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[l.jsx("span",{className:"text-xl sm:text-2xl",children:"🏅"}),l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Olympics"})]}),l.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[l.jsx("span",{className:"text-xl sm:text-2xl",children:"🎯"}),l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Mixed"})]})]})]}),l.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mb-4",children:[l.jsxs(T.button,{onClick:()=>f(!h),className:"flex items-center justify-center gap-2 text-green-400 hover:text-green-300 transition-colors mx-auto",whileHover:{scale:1.05},whileTap:{scale:.95},children:[l.jsx(Id,{size:16}),l.jsx("span",{children:"How to Play"}),h?l.jsx(Ln,{size:16}):l.jsx(Dn,{size:16})]}),l.jsx(Te,{children:h&&l.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:l.jsx("div",{className:"bg-gray-800/60 backdrop-blur-sm rounded-xl p-4 my-3",children:l.jsx("div",{className:"space-y-3",children:y.map((j,_)=>l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:"w-6 h-6 bg-green-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-green-400 text-xs font-bold",children:_+1})}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"text-sm font-medium text-white",children:j.title}),l.jsx("p",{className:"text-xs text-gray-400",children:j.description})]})]},_))})})})})]}),l.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-6 bg-gray-800/60 backdrop-blur-sm rounded-xl w-full overflow-hidden relative",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-50"}),l.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-400"}),l.jsxs("div",{className:"p-3 relative",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(T.div,{animate:{scale:[1,1.1,1],rotate:[0,5,0,-5,0]},transition:{duration:3,repeat:1/0},children:"🔍"}),l.jsx(T.p,{className:"text-blue-400 font-bold text-xs uppercase tracking-wider",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:"SPORTS FACT"})]}),l.jsx("div",{className:"min-h-[3.5em] flex items-center",children:l.jsx(Te,{mode:"wait",children:l.jsx(T.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",stiffness:100,damping:12,duration:.7},className:"text-gray-300 text-xs sm:text-sm italic break-words",children:m[a]},a)})}),l.jsxs("div",{className:"flex justify-center flex-wrap gap-1 mt-2",children:[m.slice(0,Math.min(5,m.length)).map((j,_)=>l.jsx(T.div,{className:`h-1 rounded-full ${_===a%5?"w-4 bg-blue-400":"w-1 bg-gray-600"}`,animate:_===a%5?{scale:[1,1.2,1],backgroundColor:["#60a5fa","#818cf8","#60a5fa"]}:{},transition:{duration:2,repeat:_===a%5?1/0:0}},_)),m.length>5&&l.jsx(T.div,{className:"h-1 w-4 rounded-full bg-gray-600",animate:{opacity:[.4,.8,.4]},transition:{duration:2,repeat:1/0}})]})]})]}),l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},className:"mt-6 text-center",children:l.jsx("p",{className:"text-gray-500 text-xs",children:"© 2025 SportIQ - v1.2.0 - The Ultimate Sports Trivia Challenge"})})]})]})},fg={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},_n={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},Tn={hover:{scale:1.2,rotate:360,transition:{type:"spring",stiffness:260,damping:20}}},mg=({onStart:t})=>{const e=localStorage.getItem("username")||"",[s,n]=w.useState(null),[r,i]=w.useState(!1),[o,a]=w.useState(null),c=h=>{n(h),setTimeout(()=>{if(!e){console.error("Username not found");return}t(e,h)},300)},u=(h,f)=>{f.stopPropagation(),a(o===h?null:h)},d={solo:{title:"Solo Play",description:"Test your sports knowledge at your own pace. Answer 10 questions across your chosen category and earn points for correct answers. The faster you answer, the more bonus points you receive!",perfectFor:"Practice, learning new sports facts, and improving your response time.",color:"text-green-400",bgColor:"bg-green-600/10",btnBgColor:"bg-green-500/20",btnHoverColor:"hover:bg-green-500/30",borderColor:"border-green-500/30"},create:{title:"Create 1v1 Game",description:"Be the host! Create a game, choose the category, and get a shareable code to invite a friend. Challenge them to see who has better sports knowledge.",perfectFor:"Challenging friends, picking your favorite sports category, and proving you're the champion.",color:"text-blue-400",bgColor:"bg-blue-600/10",btnBgColor:"bg-blue-500/20",btnHoverColor:"hover:bg-blue-500/30",borderColor:"border-blue-500/30"},join:{title:"Join 1v1 Game",description:"Got an invite code? Use it to quickly join a friend's game and compete in real-time. The host has already selected the category - just enter the code and play!",perfectFor:"Accepting challenges, quick play, and jumping straight into competition.",color:"text-purple-400",bgColor:"bg-purple-600/10",btnBgColor:"bg-purple-500/20",btnHoverColor:"hover:bg-purple-500/30",borderColor:"border-purple-500/30"}};return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-[#0c1220] to-[#1a1a2e]",children:[l.jsx(T.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},className:"text-center mb-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx("span",{className:"text-3xl",children:"🏆"}),l.jsxs("h1",{className:"text-3xl font-bold text-white",children:[l.jsx("span",{className:"text-blue-400",children:"Sport"}),l.jsx("span",{className:"text-white",children:"IQ"})]}),l.jsx("span",{className:"text-3xl",children:"🧠"})]})}),l.jsxs(T.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},className:"text-center mb-4",children:[l.jsx(T.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200},children:"Select Game Mode"}),l.jsx(T.div,{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-2xl sm:text-3xl mt-2",children:"⚽ 🎾"})]}),l.jsxs(T.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},onClick:()=>i(!r),className:"flex items-center gap-1 text-blue-400 hover:text-blue-300 mb-4 text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:[l.jsx(Lt,{size:16}),l.jsx("span",{children:r?"Hide Guide":"How It Works"}),r?l.jsx(Ln,{size:16}):l.jsx(Dn,{size:16})]}),l.jsx(Te,{children:r&&l.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"w-full max-w-lg mb-6 overflow-hidden",children:l.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-4",children:[l.jsx("h3",{className:"text-white font-bold mb-2",children:"How To Play"}),l.jsxs("ol",{className:"space-y-2 list-decimal list-inside text-sm text-gray-300 mb-4",children:[l.jsx("li",{children:"Select your preferred game mode (Solo, Create Game, or Join Game)"}),l.jsx("li",{children:"Choose a sports category that interests you (when creating a game)"}),l.jsx("li",{children:"Answer 10 questions as quickly and accurately as possible"}),l.jsx("li",{children:"Earn 10 points for each correct answer plus time bonuses"}),l.jsx("li",{children:"View your performance stats and challenge others to beat your score!"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"All game modes feature the same categories: Football ⚽, Basketball 🏀, Tennis 🎾, Olympics 🏅, and Mixed Sports 🎯"})]})})}),l.jsxs(T.div,{variants:fg,initial:"hidden",animate:"show",className:"w-full max-w-4xl grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-4",children:[l.jsxs(T.div,{variants:_n,className:"relative bg-gray-800 rounded-xl p-6 pb-14 overflow-hidden",children:[l.jsx(T.div,{className:"absolute inset-0 bg-gradient-to-br from-green-600 to-green-400 opacity-0 hover:opacity-10 transition-opacity duration-300"}),l.jsxs(T.div,{whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>c("solo"),className:`flex flex-col items-center gap-3 relative z-10 ${s==="solo"?"ring-2 ring-green-400 rounded-xl p-2":""}`,children:[l.jsx(T.div,{variants:Tn,whileHover:"hover",className:"w-16 h-16 flex items-center justify-center bg-gradient-to-br from-green-600 to-green-400 rounded-full mb-2",children:l.jsx(Je,{size:32,className:"text-white"})}),l.jsxs(T.h2,{className:"text-xl font-bold text-white flex items-center gap-2",whileHover:{scale:1.05},children:["Solo Play",l.jsx(T.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl",children:"🏀"})]}),l.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Practice at your own pace"})]}),l.jsxs(T.button,{onClick:h=>u("solo",h),whileHover:{scale:1.05},whileTap:{scale:.95},className:`absolute bottom-3 left-0 right-0 mx-auto w-3/4 py-2 px-4 rounded-lg ${d.solo.btnBgColor} ${d.solo.btnHoverColor} ${d.solo.color} font-medium text-sm flex items-center justify-center gap-2 border ${d.solo.borderColor} transition-colors`,children:[l.jsx(Lt,{size:16}),o==="solo"?"Hide Details":"Learn More"]})]}),l.jsxs(T.div,{variants:_n,className:"relative bg-gray-800 rounded-xl p-6 pb-14 overflow-hidden",children:[l.jsx(T.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-600 to-blue-400 opacity-0 hover:opacity-10 transition-opacity duration-300"}),l.jsxs(T.div,{whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>c("create"),className:`flex flex-col items-center gap-3 relative z-10 ${s==="create"?"ring-2 ring-blue-400 rounded-xl p-2":""}`,children:[l.jsx(T.div,{variants:Tn,whileHover:"hover",className:"w-16 h-16 flex items-center justify-center bg-gradient-to-br from-blue-600 to-blue-400 rounded-full mb-2",children:l.jsx(ca,{size:32,className:"text-white"})}),l.jsxs(T.h2,{className:"text-xl font-bold text-white flex items-center gap-2",whileHover:{scale:1.05},children:["Create 1v1 Game",l.jsx(T.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl",children:"⚔️"})]}),l.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Host a game & invite a friend"})]}),l.jsxs(T.button,{onClick:h=>u("create",h),whileHover:{scale:1.05},whileTap:{scale:.95},className:`absolute bottom-3 left-0 right-0 mx-auto w-3/4 py-2 px-4 rounded-lg ${d.create.btnBgColor} ${d.create.btnHoverColor} ${d.create.color} font-medium text-sm flex items-center justify-center gap-2 border ${d.create.borderColor} transition-colors`,children:[l.jsx(Lt,{size:16}),o==="create"?"Hide Details":"Learn More"]})]}),l.jsxs(T.div,{variants:_n,className:"relative bg-gray-800 rounded-xl p-6 pb-14 overflow-hidden",children:[l.jsx(T.div,{className:"absolute inset-0 bg-gradient-to-br from-purple-600 to-purple-400 opacity-0 hover:opacity-10 transition-opacity duration-300"}),l.jsxs(T.div,{whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>c("join"),className:`flex flex-col items-center gap-3 relative z-10 ${s==="join"?"ring-2 ring-purple-400 rounded-xl p-2":""}`,children:[l.jsx(T.div,{variants:Tn,whileHover:"hover",className:"w-16 h-16 flex items-center justify-center bg-gradient-to-br from-purple-600 to-purple-400 rounded-full mb-2",children:l.jsx(da,{size:32,className:"text-white"})}),l.jsxs(T.h2,{className:"text-xl font-bold text-white flex items-center gap-2",whileHover:{scale:1.05},children:["Join 1v1 Game",l.jsx(T.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl",children:"🎮"})]}),l.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Join with an invite code"})]}),l.jsxs(T.button,{onClick:h=>u("join",h),whileHover:{scale:1.05},whileTap:{scale:.95},className:`absolute bottom-3 left-0 right-0 mx-auto w-3/4 py-2 px-4 rounded-lg ${d.join.btnBgColor} ${d.join.btnHoverColor} ${d.join.color} font-medium text-sm flex items-center justify-center gap-2 border ${d.join.borderColor} transition-colors`,children:[l.jsx(Lt,{size:16}),o==="join"?"Hide Details":"Learn More"]})]})]}),l.jsx(Te,{children:o&&l.jsxs(T.div,{initial:{opacity:0,y:10,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-10,height:0},transition:{duration:.3},className:`w-full max-w-lg mb-6 ${d[o].bgColor} rounded-xl p-5 overflow-hidden border ${d[o].borderColor}`,children:[l.jsxs("h3",{className:`text-xl font-bold ${d[o].color} mb-3`,children:["About ",d[o].title]}),l.jsx("p",{className:"text-gray-300 text-sm mb-3",children:d[o].description}),l.jsxs("div",{className:"text-xs text-gray-400",children:[l.jsx("span",{className:`${d[o].color} font-medium`,children:"Perfect for:"})," ",d[o].perfectFor]})]})}),l.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-6 sm:mt-8 text-center",children:l.jsxs("p",{className:"text-gray-400 text-sm sm:text-base",children:["Playing as: "," ",l.jsx(T.span,{className:"text-green-400 font-semibold",whileHover:{scale:1.1},children:e})]})})]})},pg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Is=(t=21)=>{let e="",s=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=pg[s[t]&63];return e};const gg=()=>window.location.hostname.includes("netlify")?"https://quiz-render-tests.onrender.com":window.location.origin;let P;window._globalSocket?(console.log("Using existing global socket"),P=window._globalSocket):(P=ec(gg(),{transports:["websocket","polling"],withCredentials:!0,reconnection:!0,reconnectionAttempts:20,reconnectionDelay:1e3,timeout:6e4,autoConnect:!1,path:"/socket.io/"}),window._globalSocket=P);const yg=()=>{if(!P._debugEventsAttached){P._debugEventsAttached=!0;const t=P.on.bind(P);P.on=function(s,n){return console.log(`[SOCKET-DEBUG] Adding listener for: ${s}`),t(s,n)};const e=P.emit.bind(P);P.emit=function(s,...n){return console.log(`[SOCKET-DEBUG] Emitting event: ${s}`,n[0]?"(with data)":"(no data)"),e(s,...n)},P.onAny((s,...n)=>{console.log(`[SOCKET-DEBUG] Received event: ${s}`,n[0]?"(with data)":"(no data)")})}},Sn={gameId:"",category:"mixed",players:[],currentQuestion:0,questions:[],isGameStarted:!1,isGameEnded:!1,chatMessages:[],startCountdown:null,answeredPlayers:new Set,finishedPlayers:new Set,startTime:Date.now(),questionStartTime:Date.now(),questionResponseTimes:[],playerResponseTimes:new Map,scores:new Map,waitingForPlayers:!0,currentPlayerId:"",socket:P,isConnecting:!1,hasJoinedGame:!1,isGameCreationInProgress:!1},Rt=ko((t,e)=>(yg(),P.on("connect",()=>{console.log("Socket connected:",P.id),t(s=>({...s,currentPlayerId:P.id,isConnecting:!1}))}),P.on("connect_error",s=>{console.error("Socket connection error:",s),t(n=>({...n,isConnecting:!1,isGameCreationInProgress:!1}))}),P.on("gameCreated",s=>{console.log("Game created:",s),t(n=>({...n,gameId:s.gameId,category:s.category,questions:s.questions,players:s.players,waitingForPlayers:!0,hasJoinedGame:!0,isGameCreationInProgress:!1,playerResponseTimes:new Map,scores:new Map(s.players.map(r=>[r.id,r.score||0]))}))}),P.on("gameUpdated",s=>{console.log("Game updated:",s);const n=s.players.some(r=>r.id===P.id);t(r=>{const i=new Map(r.playerResponseTimes);s.players.forEach(a=>{a.responseTimes&&i.set(a.id,a.responseTimes)});const o=new Map(s.players.map(a=>[a.id,a.score||0]));return{...r,players:s.players,category:s.category,questions:s.questions||r.questions,waitingForPlayers:s.waitingForPlayers,startCountdown:s.startCountdown,hasJoinedGame:n||r.hasJoinedGame,playerResponseTimes:i,scores:o,isGameCreationInProgress:!1}})}),P.on("playerReadyUpdate",s=>{console.log("Player ready update:",s),t(n=>({...n,players:s.players,startCountdown:s.startCountdown}))}),P.on("gameStarted",s=>{console.log("Game started:",s),t(n=>({...n,isGameStarted:!0,startTime:Date.now(),questionStartTime:Date.now(),waitingForPlayers:!1,startCountdown:null,category:s.category,questions:s.questions,playerResponseTimes:new Map,scores:new Map(s.players.map(r=>[r.id,r.score||0]))})),window.dispatchEvent(new CustomEvent("sportiq:gameStarted"))}),P.on("scoreUpdate",s=>{console.log("Score update received:",s);const{playerId:n,score:r,responseTime:i,correctAnswers:o}=s;t(a=>{const c=new Map(a.scores);c.set(n,r);const u=new Map(a.playerResponseTimes),d=u.get(n)||[];u.set(n,[...d,i]);const h=a.players.map(f=>f.id===n?{...f,score:r,responseTimes:[...d,i],correctAnswers:o!==void 0?o:f.correctAnswers}:f);return{...a,scores:c,playerResponseTimes:u,players:h}})}),P.on("nextQuestion",s=>{console.log("Next question:",s),t(n=>({...n,currentQuestion:s.currentQuestion,questionStartTime:Date.now(),answeredPlayers:new Set}))}),P.on("gameOver",s=>{console.log("Game over:",s);const n=Date.now(),r=e().startTime,i=(n-r)/1e3;t(o=>{const a=new Map(s.players.map(u=>[u.id,u.score||0])),c=new Map(o.playerResponseTimes);return s.players.forEach(u=>{u.responseTimes&&c.set(u.id,u.responseTimes)}),{...o,isGameStarted:!1,isGameEnded:!0,scores:a,playerResponseTimes:c,players:s.players,completionTime:i}})}),P.on("categoryUpdated",s=>{console.log("Category updated:",s),t(n=>({...n,category:s.category,questions:s.questions}))}),P.on("playerAnswered",s=>{console.log("Player answered:",s);const{playerId:n,score:r,responseTime:i,isCorrect:o,correctAnswers:a}=s;t(c=>{const u=new Map(c.playerResponseTimes),d=u.get(n)||[];u.set(n,[...d,i]);const h=new Map(c.scores);h.set(n,r);const f=c.players.map(m=>{if(m.id===n){const v=a!==void 0?a:m.correctAnswers!==void 0?o?m.correctAnswers+1:m.correctAnswers:0;return{...m,score:r,responseTimes:[...d,i],correctAnswers:v}}return m});return{...c,playerResponseTimes:u,scores:h,players:f,answeredPlayers:new Set([...c.answeredPlayers,n])}})}),P.on("error",s=>{console.error("Socket error:",s),t(n=>({...n,isConnecting:!1,isGameCreationInProgress:!1}))}),P.on("disconnect",()=>{console.log("Socket disconnected"),t(s=>({...s,isConnecting:!1,isGameCreationInProgress:!1}))}),{...Sn,socket:P,initializeGame:async()=>{const s=e(),n=Date.now();if(window._socketInitializeAttempt&&n-window._socketInitializeAttempt<5e3&&(console.log("Socket initialization attempted recently, using existing socket"),P.connected))return t(i=>({...i,currentPlayerId:P.id,isConnecting:!1})),Promise.resolve();if(window._socketInitializeAttempt=n,s._initializationPromise)return console.log("Initialization already in progress, returning existing promise"),s._initializationPromise;if(P.connected)return console.log("Socket already connected, skipping initialization"),s.currentPlayerId!==P.id&&t({currentPlayerId:P.id,isConnecting:!1}),Promise.resolve();console.log("Initializing game, connecting socket..."),t({isConnecting:!0});const r=new Promise((i,o)=>{const a=setTimeout(()=>{P.off("connect",c),P.off("connect_error",u),t(d=>({...d,isConnecting:!1,_initializationPromise:null})),o(new Error("Socket connection timeout"))},1e4),c=()=>{console.log("Socket connected for 1v1 game with ID:",P.id),clearTimeout(a),P.off("connect",c),P.off("connect_error",u),window._globalSocket=P,t({...Sn,socket:P,currentPlayerId:P.id,isConnecting:!1,gameId:"",hasJoinedGame:!1,playerResponseTimes:new Map,scores:new Map,_initializationPromise:null}),i()},u=d=>{console.error("Socket connection error:",d),clearTimeout(a),P.off("connect",c),P.off("connect_error",u),t(h=>({...h,isConnecting:!1,_initializationPromise:null,isGameCreationInProgress:!1})),o(d)};P.connected?c():(P.once("connect",c),P.once("connect_error",u),P.connect())});return t(i=>({...i,_initializationPromise:r})),r},createGame:async s=>{const n=localStorage.getItem("username")||"Guest",r=e();if(r.isGameCreationInProgress)return console.log("Game creation already in progress, ignoring duplicate request"),Promise.resolve();if(r.hasJoinedGame)return console.log("Already joined a game, updating category instead"),e().setCategory(s),Promise.resolve();t(i=>({...i,isGameCreationInProgress:!0}));try{if(!P.connected){console.log("Socket not connected, attempting to connect before creating game");try{await e().initializeGame()}catch(o){throw console.error("Failed to initialize socket connection:",o),t(a=>({...a,isGameCreationInProgress:!1})),new Error("Failed to connect to game server")}}if(console.log("Creating game with category:",s,"Socket connected:",P.connected),window._gameCreationPromise)return console.log("Game creation already in progress globally"),window._gameCreationPromise;const i=new Promise((o,a)=>{const c=setTimeout(()=>{P.off("gameCreated"),window._gameCreationPromise=void 0,t(u=>({...u,isGameCreationInProgress:!1})),a(new Error("Game creation timeout"))},5e3);P.once("gameCreated",()=>{clearTimeout(c),window._gameCreationPromise=void 0,t(u=>({...u,hasJoinedGame:!0,isGameCreationInProgress:!1})),o()}),console.log("Emitting createGame event:",{mode:"1v1",category:s,username:n}),P.emit("createGame",{mode:"1v1",category:s,username:n})});return window._gameCreationPromise=i,i}catch(i){throw window._gameCreationPromise=void 0,t(o=>({...o,isGameCreationInProgress:!1})),i}},joinGame:async(s,n)=>{try{return P.connected||await e().initializeGame(),new Promise((r,i)=>{const o=setTimeout(()=>{P.off("gameUpdated"),i(new Error("Join game timeout"))},5e3),a=c=>{c.players.some(d=>d.id===P.id)&&(t(d=>({...d,gameId:s.trim(),hasJoinedGame:!0,players:c.players,scores:new Map(c.players.map(h=>[h.id,h.score||0])),playerResponseTimes:new Map})),clearTimeout(o),P.off("gameUpdated",a),r())};P.on("gameUpdated",a),console.log("Joining game:",s),P.emit("joinGame",{gameId:s.trim(),username:n})})}catch(r){throw console.error("Error joining game:",r),r}},setPlayerReady:()=>{const{gameId:s}=e();!s||!P.connected||P.emit("playerReady",{gameId:s})},submitAnswer:(s,n,r,i)=>{const o=e(),a=o.getCurrentPlayer();if(!a||!P.connected)return;const c=15-n,u=[...o.questionResponseTimes,c],d=o.questions[o.currentQuestion],h=d&&d.correctAnswer===s,f=a.correctAnswers||0,m=h?f+1:f;P.emit("submitAnswer",{gameId:o.gameId,playerId:a.id,answer:s,timeRemaining:n,points:r,totalScore:i,responseTime:c,allResponseTimes:u,isCorrect:h,correctAnswers:m}),t(v=>{const y=new Map(v.playerResponseTimes);y.set(a.id,u);const g=new Map(v.scores);g.set(a.id,i);const b=v.players.map(j=>j.id===a.id?{...j,score:i,responseTimes:u,correctAnswers:m}:j);return{...v,questionResponseTimes:u,playerResponseTimes:y,scores:g,players:b,answeredPlayers:new Set([...v.answeredPlayers,a.id])}})},getCurrentPlayer:()=>{const s=e();return s.players.find(n=>n.id===s.currentPlayerId)},getPlayerResponseTimes:s=>{var o;const n=e(),r=n.players.find(a=>a.id===s);if((o=r==null?void 0:r.responseTimes)!=null&&o.length)return r.responseTimes;const i=n.playerResponseTimes.get(s);return i!=null&&i.length?i:[]},addChatMessage:(s,n)=>{const{gameId:r}=e();if(!r||!P.connected)return;const i=e().players.find(a=>a.id===s);if(!i)return;P.emit("chatMessage",{gameId:r,message:n});const o={id:Is(),playerId:s,playerName:i.username,message:n,timestamp:Date.now()};t(a=>({...a,chatMessages:[...a.chatMessages,o]}))},resetGame:()=>{P.connected&&P.disconnect(),t(Sn)},endGame:()=>{const{gameId:s,socket:n}=e();if(!s||!n.connected)return;console.log("Manually ending game:",s),n.emit("gameOver",{gameId:s});const r=Date.now(),i=e().startTime,o=(r-i)/1e3;t({isGameStarted:!1,isGameEnded:!0,completionTime:o})},setCategory:s=>{const n=e(),r=n.getCurrentPlayer();if(!(r!=null&&r.isHost)){console.warn("Only host can change category");return}if(!P.connected){console.error("Socket not connected");return}console.log("Setting category to:",s),P.emit("updateCategory",{gameId:n.gameId,category:s}),t(i=>({...i,category:s}))}})),ct=({icon:t,label:e,onClick:s,disabled:n=!1,tooltip:r,delay:i=0})=>l.jsxs("div",{className:"relative group",children:[l.jsxs(T.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i},whileHover:n?{}:{scale:1.05},whileTap:n?{}:{scale:.95},onClick:n?void 0:s,disabled:n,className:`flex items-center gap-2 px-4 py-3 rounded-full shadow-lg transition-colors
                   ${n?"bg-gray-800/50 cursor-not-allowed text-gray-500 opacity-70":"bg-gray-800/90 hover:bg-gray-700 text-white"}`,children:[l.jsx(t,{className:`w-5 h-5 ${n?"":"group-hover:-translate-x-1 transition-transform"}`}),l.jsx("span",{className:"hidden sm:inline",children:e}),l.jsx("span",{className:"sm:hidden",children:e.split(" ").pop()})]}),r&&n&&l.jsx("div",{className:`absolute bottom-full left-0 mb-2 p-2 bg-gray-800 rounded text-xs text-white
                      opacity-0 group-hover:opacity-100 transition-opacity w-48 z-50`,children:r})]}),Gr=({isOpen:t,onConfirm:e,onCancel:s,title:n,message:r,confirmText:i,cancelText:o="Cancel"})=>l.jsx(Te,{children:t&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs(T.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:n}),l.jsx("p",{className:"text-gray-300 mb-6",children:r}),l.jsxs("div",{className:"flex gap-4 justify-end",children:[l.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:o}),l.jsx("button",{onClick:e,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white transition-colors",children:i})]})]})})}),_e={HOME:"Back to Home",MODES:"Back to Mode Selection",CATEGORIES:"Back to Categories",STAY:"Stay in Game",LEAVE:"Leave Game"},Os={LEAVE_GAME:"Your current game progress will be lost if you leave.",HOST_LEAVE:"As the host, leaving will affect all players in the game.",LEAVE_LOBBY:"Are you sure you want to leave the game lobby?",HOST_LEAVE_LOBBY:"As the host, leaving will end the game for all players."},vg={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},xg={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},wg={hover:{scale:1.2,rotate:360,transition:{type:"spring",stiffness:260,damping:20}}},bg=({onSelect:t,mode:e,onBack:s})=>{const{hasJoinedGame:n,getCurrentPlayer:r}=Rt(),i=r(),o=i==null?void 0:i.isHost,[a,c]=w.useState(!1);if(w.useEffect(()=>{e!=="solo"&&n&&(o||(console.log("Non-host player in category selection, redirecting to lobby"),t("mixed")))},[e,n,o,t]),e!=="solo"&&n&&!o)return l.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:l.jsxs(T.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-md bg-gray-800 rounded-2xl p-8 text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Joining game..."}),l.jsx("p",{className:"text-gray-400 mb-6",children:"You'll be redirected to the lobby shortly"}),l.jsx(T.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1.5,repeat:1/0},className:"h-2 bg-green-600 rounded-full"})]})});const u=[{id:"football",name:"Football",emoji:"⚽",icon:Je,color:"from-yellow-600 to-yellow-400"},{id:"basketball",name:"Basketball",emoji:"🏀",icon:Hs,color:"from-orange-600 to-orange-400"},{id:"tennis",name:"Tennis",emoji:"🎾",icon:sa,color:"from-green-600 to-green-400"},{id:"olympics",name:"Olympics",emoji:"🏅",icon:ar,color:"from-blue-600 to-blue-400"},{id:"mixed",name:"Mixed Sports",emoji:"🎯",icon:ra,color:"from-purple-600 to-purple-400"}],d=h=>{if(a){console.log("Selection already in progress, ignoring");return}if(c(!0),console.log(`Selected category: ${h} for mode: ${e}`),e!=="solo"&&n&&!o){console.log("Non-host attempted to select category, redirecting"),t(h),setTimeout(()=>{c(!1)},1e3);return}t(h),setTimeout(()=>{c(!1)},1e3)};return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 pb-20",children:[s&&l.jsx("div",{className:"fixed bottom-6 left-6 z-10",children:l.jsx(ct,{icon:zs,label:_e.MODES,onClick:s})}),l.jsxs("div",{className:"w-full max-w-4xl",children:[l.jsxs(T.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white text-center mb-2 sm:mb-4",children:"Choose Your Category"}),l.jsx("p",{className:"text-gray-400 text-center text-sm sm:text-base mb-6 sm:mb-12",children:e==="solo"?"Practice mode - Test your knowledge!":"Challenge a friend in this category!"})]}),l.jsx(T.div,{variants:vg,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:u.map(({id:h,name:f,emoji:m,icon:v,color:y})=>l.jsxs(T.button,{variants:xg,whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>d(h),disabled:a,className:`group relative bg-gray-800 rounded-2xl p-6 sm:p-8 overflow-hidden ${a?"opacity-70 cursor-not-allowed":""}`,children:[l.jsx(T.div,{className:`absolute inset-0 bg-gradient-to-br ${y} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),l.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4 relative z-10",children:[l.jsxs(T.div,{variants:wg,whileHover:"hover",className:`w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center bg-gradient-to-br ${y} rounded-full`,children:[l.jsx(v,{size:24,className:"text-white sm:hidden"}),l.jsx(v,{size:32,className:"text-white hidden sm:block"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs(T.h2,{className:"text-xl sm:text-2xl font-bold text-white flex items-center justify-center gap-2",whileHover:{scale:1.05},children:[l.jsx("span",{children:f}),l.jsx(T.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl sm:text-3xl",children:m})]}),l.jsxs("p",{className:"mt-2 text-gray-400 text-xs sm:text-sm",children:["Test your ",f.toLowerCase()," knowledge"]})]})]}),l.jsx(T.div,{initial:{scaleX:0},whileHover:{scaleX:1},transition:{duration:.3},className:`absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r ${y}`})]},h))})]})]})},jg=({onBackToCategory:t,onBackToMode:e})=>{const{gameId:s,players:n,setPlayerReady:r,category:i,startCountdown:o,getCurrentPlayer:a,waitingForPlayers:c,isGameStarted:u,socket:d,resetGame:h}=Rt(),[f,m]=w.useState({isOpen:!1,type:null}),v=a(),y=v==null?void 0:v.isHost,g=n.length,b=2,j=g===b,_=()=>{s&&navigator.clipboard.writeText(s).then(()=>{console.log("Invite code copied to clipboard!")}).catch(k=>{console.error("Failed to copy invite code: ",k)})},C=()=>{v&&j&&r()},S=k=>{if(k==="category"&&!y){console.warn("Non-host attempted to navigate back to categories.");return}m({isOpen:!0,type:k})},A=()=>{y&&(d!=null&&d.connected)?(console.log("Host is leaving the game, notifying server"),d.emit("leaveGame",{gameId:s,isHost:!0})):!y&&(d!=null&&d.connected)?(console.log("Player is leaving the game, notifying server"),d.emit("leaveGame",{gameId:s,isHost:!1})):console.warn("Socket not connected while trying to leave game."),f.type==="category"&&t?t():f.type==="mode"&&e&&e(),h(),m({isOpen:!1,type:null})},F=j&&n.every(k=>k.isReady);return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-[#1a1a1a] text-white",children:[" ",l.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col gap-3",children:[t&&l.jsx(ct,{icon:zs,label:_e.CATEGORIES,onClick:()=>S("category"),disabled:!y,tooltip:y?void 0:"Only the host can change category/go back"}),e&&l.jsx(ct,{icon:ss,label:_e.MODES,onClick:()=>S("mode"),delay:.1})]}),y&&l.jsxs("div",{className:"fixed top-4 right-4 px-3 py-1 rounded-full text-sm bg-yellow-500/20 text-yellow-400 flex items-center gap-1",children:[l.jsx(na,{size:14})," Host"]}),l.jsx(Gr,{isOpen:f.isOpen,onConfirm:A,onCancel:()=>m({isOpen:!1,type:null}),title:"Leave Lobby?",message:y?Os.HOST_LEAVE_LOBBY:Os.LEAVE_LOBBY,confirmText:f.type==="category"?`Go to ${_e.CATEGORIES}`:`Go to ${_e.MODES}`,cancelText:_e.STAY}),l.jsxs("div",{className:"w-full max-w-2xl bg-gray-800 rounded-lg p-6 shadow-xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"1v1 Game Lobby"}),s?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:s,readOnly:!0,className:"bg-gray-700 text-white px-3 py-1 rounded font-mono text-sm w-24 sm:w-auto"}),l.jsx("button",{onClick:_,className:"p-2 rounded bg-green-600 hover:bg-green-700 text-white transition-colors",title:"Copy invite code",children:l.jsx(ut,{size:20})})]}):l.jsx("span",{className:"text-sm text-gray-400",children:"Generating code..."})]}),l.jsx("div",{className:"mb-6 flex items-center justify-center",children:l.jsxs("div",{className:"bg-gray-700 rounded-full px-4 py-2 flex items-center gap-2",children:[l.jsx(ks,{size:20,className:"text-green-400"}),l.jsxs("span",{className:"text-white font-medium",children:[g,"/",b," Players"]})]})}),c&&g<b&&l.jsxs("div",{className:"text-center mb-8 animate-pulse",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 text-yellow-400",children:[l.jsx(Od,{className:"w-6 h-6 animate-spin"}),l.jsx("span",{className:"text-lg font-medium",children:"Waiting for opponent..."})]}),l.jsxs("p",{className:"text-gray-400 mt-2 text-sm sm:text-base",children:[" ","Share the game code above with your opponent to start!"]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-xl text-white flex items-center gap-2 mb-4",children:[l.jsx(ks,{size:24}),"Players"]}),l.jsxs("div",{className:"grid gap-3",children:[n.map(k=>l.jsxs("div",{className:`flex items-center justify-between p-3 sm:p-4 rounded-lg ${k.id===(v==null?void 0:v.id)?"bg-gray-700":"bg-gray-700/50"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 overflow-hidden mr-2",children:[" ",l.jsx("span",{className:"text-white font-medium truncate",children:k.username})," ",k.id===(v==null?void 0:v.id)&&l.jsxs("span",{className:"text-xs bg-green-600/20 text-green-400 px-2 py-1 rounded flex-shrink-0",children:[" ","You"]})]}),l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[" ",k.id===(v==null?void 0:v.id)&&!k.isReady&&j&&l.jsxs("button",{onClick:C,className:"px-3 py-1.5 sm:px-4 sm:py-2 text-sm sm:text-base bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o!==null,children:[l.jsx(li,{size:16}),"Ready Up"]}),k.isReady?l.jsxs("span",{className:"text-green-400 flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:[l.jsx(Vd,{size:16}),"Ready"]}):l.jsxs("span",{className:"text-gray-400 flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:[l.jsx(li,{size:16}),"Not Ready"]})]})]},k.id)),g<b&&l.jsx("div",{className:"p-4 rounded-lg bg-gray-700/30 border-2 border-dashed border-gray-600",children:l.jsx("div",{className:"text-gray-400 text-center",children:"Waiting for opponent..."})})]})]}),o!==null&&o>0&&l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl text-green-400 font-bold",children:[l.jsx($n,{className:"w-6 h-6 animate-pulse"}),l.jsxs("span",{className:"animate-pulse",children:["Game starting in ",o,"..."]})]})}),o===null&&l.jsxs("div",{className:"text-center text-gray-400 h-6",children:[" ",F?l.jsx("p",{children:"All players ready! Starting game..."}):j?l.jsx("p",{children:"Waiting for players to be ready..."}):l.jsx("p",{children:" "})]})]})]})},kn={gameId:"",mode:"solo",category:"mixed",players:[],currentQuestion:0,questions:[],timeRemaining:15,isGameStarted:!1,isGameEnded:!1,chatMessages:[],startCountdown:null,finishedPlayers:new Set,answeredPlayers:new Set,startTime:Date.now(),questionStartTimes:[],questionResponseTimes:[],playerResponseTimes:new Map,isTransitioning:!1,waitingForPlayers:!1,currentPlayerId:Is(),scores:new Map,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1,nextQuestionPending:null,lastSyncTime:Date.now(),questionStartTime:Date.now(),socket:null},qr=ko((t,e)=>{let s=null;const n=()=>{s&&clearTimeout(s)};return{...kn,resetGame:()=>{n(),t({...kn,startTime:Date.now(),questionStartTime:Date.now(),currentPlayerId:Is()})},initializeGame:async r=>{if(r!=="solo")return console.log("Non-solo mode requested, deferring to oneVsOneStore"),Promise.resolve();n();const i=Is();t({...kn,mode:r,currentPlayerId:i,startTime:Date.now(),questionStartTime:Date.now(),waitingForPlayers:!1,isGameStarted:!1})},addPlayer:r=>{const o=e().currentPlayerId;t(a=>({...a,players:[{id:o,username:r,score:0,correctAnswers:0,isReady:!1,hasFinished:!1}],scores:new Map([[o,0]])}))},setTimeRemaining:r=>{t({timeRemaining:r})},setCategory:async r=>{const i=e();if(console.log("Setting category:",r,"Mode:",i.mode),i.mode!=="solo")return console.log("Non-solo mode requested, deferring to oneVsOneStore"),Promise.resolve();if(i._categoryFetchInProgress){console.log("Category fetch already in progress, ignoring duplicate request");return}if(i.category===r&&i.questions.length>0){console.log("Category already set and questions loaded. Skipping duplicate fetch."),i.isGameStarted||setTimeout(()=>{t({isGameStarted:!0})},50);return}try{t(a=>({...a,_categoryFetchInProgress:!0})),t(a=>({...a,category:r}));const o=await kd(r);console.log("Fetched questions for category:",r,o),t(a=>({...a,questions:o,currentQuestion:0,timeRemaining:15,questionResponseTimes:[],startTime:Date.now(),questionStartTime:Date.now(),questionStartTimes:[Date.now()],waitingForPlayers:!1,isGameEnded:!1,isTransitioning:!1,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1,scores:new Map([[a.currentPlayerId,0]]),players:a.players.map(c=>({...c,score:0,correctAnswers:0,isReady:!1,hasFinished:!1})),_categoryFetchInProgress:!1})),setTimeout(()=>{t({isGameStarted:!0})},50)}catch(o){throw t(a=>({...a,_categoryFetchInProgress:!1})),console.error("Error in setCategory:",o),o}},getCurrentPlayer:()=>{const r=e();return r.players.find(i=>i.id===r.currentPlayerId)},startGame:()=>{e().mode==="solo"&&t({isGameStarted:!0})},endGame:()=>{const r=e();if(r.mode==="solo"){const o=(Date.now()-r.startTime)/1e3;t({isGameStarted:!1,isGameEnded:!0,completionTime:o})}},nextQuestion:()=>{n(),t(r=>({currentQuestion:r.currentQuestion+1,timeRemaining:15,answeredPlayers:new Set,questionStartTimes:[...r.questionStartTimes,Date.now()],isTransitioning:!1,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1}))},checkAnswer:r=>{const i=e();return i.questions[i.currentQuestion].correctAnswer===r},submitAnswer:(r,i,o,a)=>{var v;const c=e(),u=(v=c.getCurrentPlayer)==null?void 0:v.call(c);if(!u)return;const d=15-i,h=[...c.questionResponseTimes,d],m=c.questions[c.currentQuestion].correctAnswer===r;c.mode==="solo"&&(t(y=>({...y,questionResponseTimes:h,scores:new Map(y.scores).set(u.id,a),players:y.players.map(g=>g.id===u.id?{...g,score:a,correctAnswers:m?g.correctAnswers+1:g.correctAnswers}:g),isTransitioning:!0})),s&&clearTimeout(s),s=setTimeout(()=>{const y=e();y.currentQuestion<y.questions.length-1?t({currentQuestion:y.currentQuestion+1,timeRemaining:15,isTransitioning:!1}):t({isGameEnded:!0,completionTime:(Date.now()-y.startTime)/1e3})},2e3))},setPlayerReady:()=>{},addChatMessage:()=>{},setIsTransitioning:r=>{t({isTransitioning:r})},handleRematch:()=>{},getPlayerResponseTimes:r=>{const i=e();return r===i.currentPlayerId?i.questionResponseTimes:i.playerResponseTimes.get(r)||[]},joinGame:()=>Promise.resolve()}}),_g=[{emoji:"⚽",text:"Great shot!"},{emoji:"👍",text:"Nice one!"},{emoji:"🎯",text:"Perfect answer!"},{emoji:"🔥",text:"On fire!"},{emoji:"💪",text:"Keep it up!"}],Cn=[{threshold:12,points:5,label:"Lightning Fast",emoji:"⚡"},{threshold:10,points:4,label:"Quick",emoji:"🚀"},{threshold:8,points:3,label:"Normal",emoji:"✨"},{threshold:6,points:2,label:"Measured",emoji:"🎯"},{threshold:3,points:1,label:"Delayed",emoji:"⏳"},{threshold:0,points:0,label:"Slow",emoji:"🐌"}],Tg={hidden:{x:-20,opacity:0},visible:t=>({x:0,opacity:1,transition:{delay:t*.1,type:"spring",stiffness:100,damping:10}}),exit:{x:20,opacity:0}},Sg=({mode:t,onBackToCategory:e,onBackToMode:s})=>{w.useEffect(()=>(console.log("QuizGame component mounted for mode:",t),()=>{console.log("QuizGame component unmounting")}),[t]);const n=qr(),r=Rt(),i=t==="solo"?n:r,{currentQuestion:o,questions:a,category:c,players:u,chatMessages:d,addChatMessage:h,isGameEnded:f,submitAnswer:m,getCurrentPlayer:v,getPlayerResponseTimes:y,endGame:g,socket:b,gameId:j,resetGame:_}=i,[C,S]=w.useState(null),[A,F]=w.useState(!1),[k,U]=w.useState(!1),[K,ie]=w.useState(15),[X,oe]=w.useState(!1),[J,fe]=w.useState(!0),[Y,E]=w.useState(0),[G,Ee]=w.useState(null),[x,p]=w.useState(!1),[M,L]=w.useState(null),[$,V]=w.useState({isOpen:!1,type:null}),N=v(),I=N==null?void 0:N.isHost,R=a[o],H=t!=="solo";w.useEffect(()=>{R?console.log(`Current question (${o}):`,R.question.substring(0,30)+"..."):console.log("No question available yet")},[R,o]);const ee={football:{icon:Je,emoji:"⚽",color:"text-yellow-400"},basketball:{icon:Hs,emoji:"🏀",color:"text-orange-400"},tennis:{icon:sa,emoji:"🎾",color:"text-green-400"},olympics:{icon:ar,emoji:"🏅",color:"text-blue-400"},mixed:{icon:ra,emoji:"🎯",color:"text-purple-400"}},Q=ee[c]||ee.mixed,se=Q.icon,ae=N?y(N.id):[],q=ae[ae.length-1],de=ae.reduce((D,ce)=>D+ce,0),xe=()=>{V({isOpen:!0,type:"category"})},we=()=>{V({isOpen:!0,type:"mode"})},Ne=()=>{V({isOpen:!0,type:"leave"})},Le=()=>{H&&(b!=null&&b.connected)&&(console.log("Multiplayer mode: notifying server about leaving the game"),b.emit("leaveGame",{gameId:j,isHost:I||!1}),_()),$.type==="category"&&e?e():($.type==="mode"||$.type==="leave")&&s&&s(),V({isOpen:!1,type:null})};w.useEffect(()=>{if(!H||!R||f||x)return;if(o===a.length-1&&A){console.log("Last question answered by current player, checking end game conditions...");const ce=setTimeout(()=>{console.log("Forcing game end after last question"),p(!0),g()},3e3);return()=>clearTimeout(ce)}},[o,a.length,A,H,R,g,f,x]),w.useEffect(()=>{R&&(console.log("Question changed, resetting state for question:",o),fe(!0),S(null),F(!1),U(!1),ie(15),E(0),Ee(null),L(null))},[o,R]);const be=w.useCallback(D=>{for(const ce of Cn)if(D>=ce.threshold)return ce;return Cn[Cn.length-1]},[]),Zs=w.useCallback(D=>{if(!J||!N||!R)return;fe(!1),S(D);const ce=D===R.correctAnswer;U(ce),F(!0),L(R.correctAnswer);let ge=0,Ge=null;ce&&(ge=10,Ge=be(K),ge+=Ge.points,Ee(Ge)),E(ge);const sn=(N.score||0)+ge;m(D,K,ge,sn),o===a.length-1&&console.log("This was the last question!")},[N,K,R,m,J,o,a.length,be]),cs=w.useCallback(()=>{if(!A&&J&&N){fe(!1),F(!0),U(!1),E(0);const D=N.score||0;m("",0,0,D)}},[A,m,J,N]);w.useEffect(()=>{let D;if(!A&&!f&&J&&R){const ce=Date.now();return D=setInterval(()=>{const Ge=(Date.now()-ce)/1e3,et=Math.max(15-Ge,0);ie(et),et<=0&&(clearInterval(D),cs())},50),()=>clearInterval(D)}},[A,cs,f,J,R]);const en=D=>D<3?"text-green-400":D<7?"text-yellow-400":"text-orange-400",us=D=>D>10?"text-green-400":D>5?"text-yellow-400":"text-red-400",tn=D=>D.points>=5?"text-purple-400":D.points>=4?"text-blue-400":D.points>=3?"text-green-400":D.points>=2?"text-yellow-400":D.points>=1?"text-orange-400":"text-gray-400";if(f)return l.jsx("div",{className:"text-white text-center p-8 flex flex-col items-center justify-center min-h-screen",children:l.jsxs(T.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"card p-8 max-w-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Game completed!"}),l.jsx("p",{className:"mb-4",children:"Loading results..."}),l.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:l.jsx(T.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1},className:"h-2 bg-green-500 rounded-full"})})]})});if(!R)return l.jsx("div",{className:"text-white text-center p-8 flex flex-col items-center justify-center min-h-screen",children:l.jsxs(T.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"card p-8 max-w-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."}),l.jsx("p",{className:"mb-4",children:"Preparing questions"}),l.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:l.jsx(T.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1},className:"h-2 bg-blue-500 rounded-full w-1/2"})})]})});const ds=o+1;return l.jsxs("div",{className:"min-h-screen bg-background p-4",children:[l.jsx(Gr,{isOpen:$.isOpen,onConfirm:Le,onCancel:()=>V({isOpen:!1,type:null}),title:"Are you sure?",message:H&&I?Os.HOST_LEAVE:Os.LEAVE_GAME,confirmText:$.type==="category"?_e.CATEGORIES:$.type==="leave"?"Leave Game":_e.MODES,cancelText:_e.STAY}),l.jsx(T.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"fixed top-0 left-0 right-0 bg-gray-800/90 backdrop-blur-sm border-b border-gray-700/50 z-40",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mx-auto",children:[l.jsx(T.div,{whileHover:{scale:1.1,rotate:360},transition:{duration:.5},className:`p-2 rounded-lg bg-gray-700/50 ${Q.color}`,children:l.jsx(se,{className:"w-6 h-6"})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("h2",{className:"text-white font-medium capitalize flex items-center gap-1 justify-center",children:[c," Quiz",l.jsx("span",{className:"text-xl ml-1",children:Q.emoji})]}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Question ",ds," of ",a.length]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[H&&l.jsx("div",{className:"flex gap-2",children:u.map(D=>l.jsxs(T.div,{className:`px-3 py-1 rounded-full ${D.id===(N==null?void 0:N.id)?"bg-green-600/20":"bg-gray-700/20"}`,whileHover:{scale:1.05},children:[l.jsx("span",{className:"text-white font-medium",children:D.score||0}),l.jsx("span",{className:"text-gray-400 text-sm ml-1",children:D.username})]},D.id))}),l.jsxs(T.div,{className:`flex items-center gap-2 bg-gray-700/30 px-4 py-2 rounded-full ${us(K)}`,animate:{scale:K<=5?[1,1.1,1]:1,transition:{duration:.5,repeat:K<=5?1/0:0,repeatType:"reverse"}},children:[l.jsx(T.div,{animate:{rotate:360,transition:{duration:2,repeat:1/0,ease:"linear"}},children:l.jsx($n,{className:"w-5 h-5"})}),l.jsx("span",{className:"font-medium min-w-[4ch] text-right",children:K.toFixed(2)})]})]})]})}),H?l.jsx("div",{className:"fixed bottom-6 left-6 z-50",children:l.jsx(ct,{icon:Dd,label:"Leave Game",onClick:Ne})}):l.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col gap-3",children:[e&&l.jsx(ct,{icon:zs,label:_e.CATEGORIES,onClick:xe}),s&&l.jsx(ct,{icon:ss,label:_e.MODES,onClick:we,delay:.1})]}),H&&I&&l.jsxs("div",{className:"fixed top-4 right-4 px-3 py-1 rounded-full text-sm bg-yellow-500/20 text-yellow-400 flex items-center gap-1",children:[l.jsx(Je,{size:14})," Host"]}),l.jsxs("div",{className:"container-game pt-20",children:[l.jsxs(T.div,{className:"card",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30},children:[l.jsx(Te,{mode:"wait",children:l.jsx(T.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},className:"text-2xl font-bold text-white mb-8",children:R.question},R.question)}),l.jsx(Te,{mode:"wait",children:l.jsx(T.div,{className:"grid gap-4",initial:"hidden",animate:"visible",exit:"exit",children:R.options.map((D,ce)=>{let ge="p-4 rounded-xl text-left w-full transition-colors duration-300 ";return A?D===R.correctAnswer?ge+="bg-green-600 text-white":D===C?ge+="bg-red-600 text-white":ge+="bg-gray-700 text-gray-400":ge+="bg-gray-700 hover:bg-gray-600 text-white",l.jsx(T.button,{custom:ce,variants:Tg,onClick:()=>Zs(D),disabled:!J,className:ge,whileHover:J?{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}}:{},whileTap:J?{scale:.98,transition:{type:"spring",stiffness:400,damping:10}}:{},children:l.jsx(T.div,{initial:!1,animate:{color:A?D===R.correctAnswer?"#10B981":D===C?"#EF4444":"#9CA3AF":"#FFFFFF"},transition:{duration:.3},children:D})},D)})},o)}),l.jsx(Te,{children:A&&l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mt-6 space-y-2",children:[l.jsxs(T.div,{className:`flex items-center gap-2 ${k?"text-green-500":"text-red-500"}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10},children:[l.jsx(ut,{size:20}),l.jsx("span",{children:k?`Correct! +${Y} points`:`Wrong! The correct answer was ${M||R.correctAnswer}`})]}),k&&G&&l.jsx(T.div,{className:`flex items-center gap-2 ${tn(G)}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10,delay:.1},children:l.jsxs("span",{className:"text-sm",children:[G.emoji," ",G.label," bonus: +",G.points," points"]})}),q!==void 0&&l.jsxs(T.div,{className:`flex items-center gap-2 ${en(q)}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10,delay:.2},children:[l.jsx($n,{size:16}),l.jsxs("span",{className:"text-sm",children:["Response time: ",q.toFixed(2),"s",de>0&&` (total ${de.toFixed(2)}s)`]})]})]})})]}),H&&l.jsxs("div",{className:"fixed bottom-4 right-4 flex flex-col items-end",children:[l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>oe(!X),className:"mb-2 p-3 rounded-full bg-green-600 hover:bg-green-700 text-white transition-colors",children:X?l.jsx(ns,{size:24}):l.jsx(lr,{size:24})}),l.jsx(Te,{children:X&&l.jsxs(T.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"space-y-2",children:[l.jsx("div",{className:"mb-2 w-64 card max-h-40 overflow-y-auto",children:d.map(D=>l.jsxs("div",{className:`mb-2 text-sm ${D.playerId===(N==null?void 0:N.id)?"text-green-400":"text-white"}`,children:[l.jsxs("span",{className:"font-bold",children:[D.playerName,":"]})," ",D.message]},D.id))}),l.jsx("div",{className:"grid grid-cols-2 gap-2 w-64",children:_g.map(({emoji:D,text:ce})=>l.jsxs(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N&&h(N.id,`${D} ${ce}`),className:"p-2 text-sm bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[D," ",ce]},ce))})]})})]}),!H&&l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center text-gray-300",children:["Score: ",l.jsx("span",{className:"text-green-500 font-bold",children:(N==null?void 0:N.score)||0})]})]})]})};var ls={};(function t(e,s,n,r){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var x=new OffscreenCanvas(1,1),p=x.getContext("2d");p.fillRect(0,0,1,1);var M=x.transferToImageBitmap();try{p.createPattern(M,"no-repeat")}catch{return!1}return!0}();function c(){}function u(x){var p=s.exports.Promise,M=p!==void 0?p:e.Promise;return typeof M=="function"?new M(x):(x(c,c),null)}var d=function(x,p){return{transform:function(M){if(x)return M;if(p.has(M))return p.get(M);var L=new OffscreenCanvas(M.width,M.height),$=L.getContext("2d");return $.drawImage(M,0,0),p.set(M,L),L},clear:function(){p.clear()}}}(a,new Map),h=function(){var x=Math.floor(16.666666666666668),p,M,L={},$=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(p=function(V){var N=Math.random();return L[N]=requestAnimationFrame(function I(R){$===R||$+x-1<R?($=R,delete L[N],V()):L[N]=requestAnimationFrame(I)}),N},M=function(V){L[V]&&cancelAnimationFrame(L[V])}):(p=function(V){return setTimeout(V,x)},M=function(V){return clearTimeout(V)}),{frame:p,cancel:M}}(),f=function(){var x,p,M={};function L($){function V(N,I){$.postMessage({options:N||{},callback:I})}$.init=function(I){var R=I.transferControlToOffscreen();$.postMessage({canvas:R},[R])},$.fire=function(I,R,H){if(p)return V(I,null),p;var ee=Math.random().toString(36).slice(2);return p=u(function(Q){function se(ae){ae.data.callback===ee&&(delete M[ee],$.removeEventListener("message",se),p=null,d.clear(),H(),Q())}$.addEventListener("message",se),V(I,ee),M[ee]=se.bind(null,{data:{callback:ee}})}),p},$.reset=function(){$.postMessage({reset:!0});for(var I in M)M[I](),delete M[I]}}return function(){if(x)return x;if(!n&&i){var $=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{x=new Worker(URL.createObjectURL(new Blob([$])))}catch(V){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",V),null}L(x)}return x}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(x,p){return p?p(x):x}function y(x){return x!=null}function g(x,p,M){return v(x&&y(x[p])?x[p]:m[p],M)}function b(x){return x<0?0:Math.floor(x)}function j(x,p){return Math.floor(Math.random()*(p-x))+x}function _(x){return parseInt(x,16)}function C(x){return x.map(S)}function S(x){var p=String(x).replace(/[^0-9a-f]/gi,"");return p.length<6&&(p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]),{r:_(p.substring(0,2)),g:_(p.substring(2,4)),b:_(p.substring(4,6))}}function A(x){var p=g(x,"origin",Object);return p.x=g(p,"x",Number),p.y=g(p,"y",Number),p}function F(x){x.width=document.documentElement.clientWidth,x.height=document.documentElement.clientHeight}function k(x){var p=x.getBoundingClientRect();x.width=p.width,x.height=p.height}function U(x){var p=document.createElement("canvas");return p.style.position="fixed",p.style.top="0px",p.style.left="0px",p.style.pointerEvents="none",p.style.zIndex=x,p}function K(x,p,M,L,$,V,N,I,R){x.save(),x.translate(p,M),x.rotate(V),x.scale(L,$),x.arc(0,0,1,N,I,R),x.restore()}function ie(x){var p=x.angle*(Math.PI/180),M=x.spread*(Math.PI/180);return{x:x.x,y:x.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:x.startVelocity*.5+Math.random()*x.startVelocity,angle2D:-p+(.5*M-Math.random()*M),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:x.color,shape:x.shape,tick:0,totalTicks:x.ticks,decay:x.decay,drift:x.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:x.gravity*3,ovalScalar:.6,scalar:x.scalar,flat:x.flat}}function X(x,p){p.x+=Math.cos(p.angle2D)*p.velocity+p.drift,p.y+=Math.sin(p.angle2D)*p.velocity+p.gravity,p.velocity*=p.decay,p.flat?(p.wobble=0,p.wobbleX=p.x+10*p.scalar,p.wobbleY=p.y+10*p.scalar,p.tiltSin=0,p.tiltCos=0,p.random=1):(p.wobble+=p.wobbleSpeed,p.wobbleX=p.x+10*p.scalar*Math.cos(p.wobble),p.wobbleY=p.y+10*p.scalar*Math.sin(p.wobble),p.tiltAngle+=.1,p.tiltSin=Math.sin(p.tiltAngle),p.tiltCos=Math.cos(p.tiltAngle),p.random=Math.random()+2);var M=p.tick++/p.totalTicks,L=p.x+p.random*p.tiltCos,$=p.y+p.random*p.tiltSin,V=p.wobbleX+p.random*p.tiltCos,N=p.wobbleY+p.random*p.tiltSin;if(x.fillStyle="rgba("+p.color.r+", "+p.color.g+", "+p.color.b+", "+(1-M)+")",x.beginPath(),o&&p.shape.type==="path"&&typeof p.shape.path=="string"&&Array.isArray(p.shape.matrix))x.fill(E(p.shape.path,p.shape.matrix,p.x,p.y,Math.abs(V-L)*.1,Math.abs(N-$)*.1,Math.PI/10*p.wobble));else if(p.shape.type==="bitmap"){var I=Math.PI/10*p.wobble,R=Math.abs(V-L)*.1,H=Math.abs(N-$)*.1,ee=p.shape.bitmap.width*p.scalar,Q=p.shape.bitmap.height*p.scalar,se=new DOMMatrix([Math.cos(I)*R,Math.sin(I)*R,-Math.sin(I)*H,Math.cos(I)*H,p.x,p.y]);se.multiplySelf(new DOMMatrix(p.shape.matrix));var ae=x.createPattern(d.transform(p.shape.bitmap),"no-repeat");ae.setTransform(se),x.globalAlpha=1-M,x.fillStyle=ae,x.fillRect(p.x-ee/2,p.y-Q/2,ee,Q),x.globalAlpha=1}else if(p.shape==="circle")x.ellipse?x.ellipse(p.x,p.y,Math.abs(V-L)*p.ovalScalar,Math.abs(N-$)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI):K(x,p.x,p.y,Math.abs(V-L)*p.ovalScalar,Math.abs(N-$)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI);else if(p.shape==="star")for(var q=Math.PI/2*3,de=4*p.scalar,xe=8*p.scalar,we=p.x,Ne=p.y,Le=5,be=Math.PI/Le;Le--;)we=p.x+Math.cos(q)*xe,Ne=p.y+Math.sin(q)*xe,x.lineTo(we,Ne),q+=be,we=p.x+Math.cos(q)*de,Ne=p.y+Math.sin(q)*de,x.lineTo(we,Ne),q+=be;else x.moveTo(Math.floor(p.x),Math.floor(p.y)),x.lineTo(Math.floor(p.wobbleX),Math.floor($)),x.lineTo(Math.floor(V),Math.floor(N)),x.lineTo(Math.floor(L),Math.floor(p.wobbleY));return x.closePath(),x.fill(),p.tick<p.totalTicks}function oe(x,p,M,L,$){var V=p.slice(),N=x.getContext("2d"),I,R,H=u(function(ee){function Q(){I=R=null,N.clearRect(0,0,L.width,L.height),d.clear(),$(),ee()}function se(){n&&!(L.width===r.width&&L.height===r.height)&&(L.width=x.width=r.width,L.height=x.height=r.height),!L.width&&!L.height&&(M(x),L.width=x.width,L.height=x.height),N.clearRect(0,0,L.width,L.height),V=V.filter(function(ae){return X(N,ae)}),V.length?I=h.frame(se):Q()}I=h.frame(se),R=Q});return{addFettis:function(ee){return V=V.concat(ee),H},canvas:x,promise:H,reset:function(){I&&h.cancel(I),R&&R()}}}function J(x,p){var M=!x,L=!!g(p||{},"resize"),$=!1,V=g(p,"disableForReducedMotion",Boolean),N=i&&!!g(p||{},"useWorker"),I=N?f():null,R=M?F:k,H=x&&I?!!x.__confetti_initialized:!1,ee=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Q;function se(q,de,xe){for(var we=g(q,"particleCount",b),Ne=g(q,"angle",Number),Le=g(q,"spread",Number),be=g(q,"startVelocity",Number),Zs=g(q,"decay",Number),cs=g(q,"gravity",Number),en=g(q,"drift",Number),us=g(q,"colors",C),tn=g(q,"ticks",Number),ds=g(q,"shapes"),D=g(q,"scalar"),ce=!!g(q,"flat"),ge=A(q),Ge=we,et=[],sn=x.width*ge.x,Ql=x.height*ge.y;Ge--;)et.push(ie({x:sn,y:Ql,angle:Ne,spread:Le,startVelocity:be,color:us[Ge%us.length],shape:ds[j(0,ds.length)],ticks:tn,decay:Zs,gravity:cs,drift:en,scalar:D,flat:ce}));return Q?Q.addFettis(et):(Q=oe(x,et,R,de,xe),Q.promise)}function ae(q){var de=V||g(q,"disableForReducedMotion",Boolean),xe=g(q,"zIndex",Number);if(de&&ee)return u(function(be){be()});M&&Q?x=Q.canvas:M&&!x&&(x=U(xe),document.body.appendChild(x)),L&&!H&&R(x);var we={width:x.width,height:x.height};I&&!H&&I.init(x),H=!0,I&&(x.__confetti_initialized=!0);function Ne(){if(I){var be={getBoundingClientRect:function(){if(!M)return x.getBoundingClientRect()}};R(be),I.postMessage({resize:{width:be.width,height:be.height}});return}we.width=we.height=null}function Le(){Q=null,L&&($=!1,e.removeEventListener("resize",Ne)),M&&x&&(document.body.contains(x)&&document.body.removeChild(x),x=null,H=!1)}return L&&!$&&($=!0,e.addEventListener("resize",Ne,!1)),I?I.fire(q,we,Le):se(q,we,Le)}return ae.reset=function(){I&&I.reset(),Q&&Q.reset()},ae}var fe;function Y(){return fe||(fe=J(null,{useWorker:!0,resize:!0})),fe}function E(x,p,M,L,$,V,N){var I=new Path2D(x),R=new Path2D;R.addPath(I,new DOMMatrix(p));var H=new Path2D;return H.addPath(R,new DOMMatrix([Math.cos(N)*$,Math.sin(N)*$,-Math.sin(N)*V,Math.cos(N)*V,M,L])),H}function G(x){if(!o)throw new Error("path confetti are not supported in this browser");var p,M;typeof x=="string"?p=x:(p=x.path,M=x.matrix);var L=new Path2D(p),$=document.createElement("canvas"),V=$.getContext("2d");if(!M){for(var N=1e3,I=N,R=N,H=0,ee=0,Q,se,ae=0;ae<N;ae+=2)for(var q=0;q<N;q+=2)V.isPointInPath(L,ae,q,"nonzero")&&(I=Math.min(I,ae),R=Math.min(R,q),H=Math.max(H,ae),ee=Math.max(ee,q));Q=H-I,se=ee-R;var de=10,xe=Math.min(de/Q,de/se);M=[xe,0,0,xe,-Math.round(Q/2+I)*xe,-Math.round(se/2+R)*xe]}return{type:"path",path:p,matrix:M}}function Ee(x){var p,M=1,L="#000000",$='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof x=="string"?p=x:(p=x.text,M="scalar"in x?x.scalar:M,$="fontFamily"in x?x.fontFamily:$,L="color"in x?x.color:L);var V=10*M,N=""+V+"px "+$,I=new OffscreenCanvas(V,V),R=I.getContext("2d");R.font=N;var H=R.measureText(p),ee=Math.ceil(H.actualBoundingBoxRight+H.actualBoundingBoxLeft),Q=Math.ceil(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent),se=2,ae=H.actualBoundingBoxLeft+se,q=H.actualBoundingBoxAscent+se;ee+=se+se,Q+=se+se,I=new OffscreenCanvas(ee,Q),R=I.getContext("2d"),R.font=N,R.fillStyle=L,R.fillText(p,ae,q);var de=1/M;return{type:"bitmap",bitmap:I.transferToImageBitmap(),matrix:[de,0,0,de,-ee*de/2,-Q*de/2]}}s.exports=function(){return Y().apply(this,arguments)},s.exports.reset=function(){Y().reset()},s.exports.create=J,s.exports.shapeFromPath=G,s.exports.shapeFromText=Ee})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ls,!1);const Ds=ls.exports;ls.exports.create;const kg=({size:t=20,className:e=""})=>l.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",className:e,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M17.1907 4H19.9333L13.73 11.0533L20.8 20H15.0267L10.7027 14.4667L5.74933 20H3.00267L9.66667 12.4533L2.93333 4H8.84L12.7533 9.0467L17.1907 4ZM15.72 18.4667H17.0667L8.15733 5.46667H6.70933L15.72 18.4667Z"})}),Cg={football:"⚽",basketball:"🏀",tennis:"🎾",olympics:"🏅",mixed:"🎯"},Pg=t=>t>=90?"Outstanding! 🌟":t>=80?"Excellent! 🎯":t>=70?"Great Job! 👏":t>=60?"Well Done! 💪":t>=50?"Good Effort! 👍":"Keep Practicing! 💫",Ag=({message:t,onClose:e})=>l.jsxs(T.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50",children:[l.jsx("span",{children:t}),l.jsx("button",{onClick:e,className:"ml-2 text-white/80 hover:text-white",children:l.jsx(ns,{size:16})})]}),Ul=Ue.memo(({correctAnswers:t,incorrectAnswers:e,totalQuestions:s})=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[l.jsx(ta,{size:16})," Correct"]}),l.jsx("span",{className:"text-green-400 font-bold",children:t})]}),l.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500 transition-all duration-1000",style:{width:`${t/s*100}%`}})})]}),l.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(t/s*100).toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[l.jsx(ha,{size:16})," Incorrect"]}),l.jsx("span",{className:"text-red-400 font-bold",children:e})]}),l.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:`${e/s*100}%`}})})]}),l.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(e/s*100).toFixed(0),"%"]})]})]}));Ul.displayName="AnswerDistributionChart";const Gl=Ue.memo(({score:t,accuracy:e,totalQuestions:s,correctAnswers:n,incorrectAnswers:r,fastestResponse:i,slowestResponse:o,avgTimePerQuestion:a,totalResponseTime:c})=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Final Score"}),l.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent",children:t}),l.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 transition-all duration-1000",style:{width:`${t/(s*15)*100}%`}})}),l.jsxs("div",{className:"text-gray-400 text-sm mt-1",children:["Max: ",s*15]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Accuracy"}),l.jsxs("div",{className:"text-4xl font-bold text-green-400",children:[e.toFixed(1),"%"]}),l.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 transition-all duration-1000",style:{width:`${Math.min(e,100)}%`}})})]})]})}),l.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:[l.jsxs("h3",{className:"text-xl text-white mb-4 flex items-center gap-2",children:[l.jsx(Hs,{className:"w-5 h-5 text-green-400"}),"Answer Distribution"]}),l.jsx(Ul,{correctAnswers:n,incorrectAnswers:r,totalQuestions:s})]}),l.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:[l.jsxs("h3",{className:"text-xl text-white mb-4 flex items-center gap-2",children:[l.jsx(fa,{className:"w-5 h-5 text-yellow-400"}),"Response Times"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Fastest Response"}),l.jsxs("span",{className:"text-green-400 font-bold",children:[i.toFixed(2),"s"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Slowest Response"}),l.jsxs("span",{className:"text-yellow-400 font-bold",children:[o.toFixed(2),"s"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Average Response"}),l.jsxs("span",{className:"text-blue-400 font-bold",children:[a.toFixed(2),"s"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Total Response Time"}),l.jsxs("span",{className:"text-purple-400 font-bold",children:[c.toFixed(2),"s"]})]})]})]})]}));Gl.displayName="StatsDisplay";const Eg=({shareText:t,shareUrl:e,onClose:s,onShowToast:n})=>{const r=async()=>{try{await navigator.clipboard.writeText(t),n("Text copied to clipboard!")}catch(o){console.error("Failed to copy text:",o)}},i=async()=>{try{await navigator.clipboard.writeText(e),n("Link copied to clipboard!")}catch(o){console.error("Failed to copy link:",o)}};return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:l.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 w-full max-w-md animate-scaleIn",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"Share Your Results"}),l.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",children:l.jsx(ns,{size:20})})]}),l.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg mb-6 relative group",children:[l.jsx("p",{className:"sport-share-text text-white",children:t}),l.jsx("button",{onClick:r,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1 bg-gray-800/50 rounded-md hover:bg-gray-800",title:"Copy text",children:l.jsx(ut,{size:14,className:"text-gray-300"})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-gray-300 text-sm",children:"Challenge link:"}),l.jsxs("button",{onClick:i,className:"flex items-center gap-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm text-gray-300 transition-colors",children:[l.jsx(ut,{size:14})," Copy"]})]}),l.jsx("div",{className:"bg-gray-700/30 p-2 rounded text-green-400 text-sm font-mono truncate",children:e})]}),l.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[l.jsx("button",{onClick:()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(e)}`,"_blank"),className:"p-3 bg-black hover:bg-gray-900 rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on X",children:l.jsx(kg,{size:20})}),l.jsx("button",{onClick:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}&quote=${encodeURIComponent(t)}`,"_blank"),className:"p-3 bg-[#4267B2]/90 hover:bg-[#4267B2] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on Facebook",children:l.jsx(ia,{size:20})}),l.jsx("button",{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(t+" "+e)}`,"_blank"),className:"p-3 bg-[#25D366]/90 hover:bg-[#25D366] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on WhatsApp",children:l.jsx(lr,{size:20})}),l.jsx("button",{onClick:i,className:"p-3 bg-gray-600/90 hover:bg-gray-600 rounded-lg text-white transition-colors flex items-center justify-center",title:"Copy link",children:l.jsx(oa,{size:20})})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("p",{className:"text-sm text-gray-400",children:"Share with friends and challenge them to beat your score!"})})]})})},ql=Ue.memo(({onPlayAgain:t,onHome:e,onShare:s})=>l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("button",{onClick:t,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-green-600 
               hover:bg-green-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[l.jsx(aa,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"Play Again"]}),l.jsxs("button",{onClick:e,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-gray-700 
               hover:bg-gray-600 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[l.jsx(ss,{className:"w-5 h-5 group-hover:-translate-y-1 transition-transform"}),"Home"]}),l.jsxs("button",{onClick:s,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-blue-600 
               hover:bg-blue-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[l.jsx(la,{className:"w-5 h-5 group-hover:rotate-45 transition-transform"}),"Share"]})]}));ql.displayName="ActionButtons";const zl=Ue.memo(({onPlayAgain:t,onHome:e})=>{const{players:s,category:n,questions:r,questionResponseTimes:i}=qr(),o=s[0],a=Cg[n],[c,u]=w.useState(!1),[d,h]=w.useState(null),f=r.length,m=(o==null?void 0:o.score)||0,v=f*15,y=m/v*100,g=(o==null?void 0:o.correctAnswers)||0,b=f-g,j=i.filter(X=>X>0&&X<=15),_=j.length>0?Math.min(...j):0,C=j.length>0?Math.max(...j):0,S=j.length>0?j.reduce((X,oe)=>X+oe,0)/j.length:0,A=j.reduce((X,oe)=>X+oe,0),F=Pg(y),k=`I scored ${m}/${v} points with ${y.toFixed(1)}% accuracy in the ${n} quiz on SportIQ! Can you beat my score? #SportIQ`,U="https://sportiq.games",K=X=>{h(X),setTimeout(()=>h(null),3e3)};w.useEffect(()=>{const oe=Date.now()+3e3,J={startVelocity:30,spread:360,ticks:60,zIndex:0},fe=(E,G)=>Math.random()*(G-E)+E,Y=setInterval(()=>{const E=oe-Date.now();if(E<=0)return clearInterval(Y);const G=50*(E/3e3);Ds({...J,particleCount:G,origin:{x:fe(.1,.3),y:Math.random()-.2}}),Ds({...J,particleCount:G,origin:{x:fe(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(Y)},[]);const ie=w.useCallback(async()=>{try{if(navigator.share&&navigator.canShare&&navigator.canShare({text:k,url:U})){await navigator.share({title:"SportIQ Challenge",text:k,url:U}),K("Score shared successfully!");return}}catch(X){console.error("Native share failed:",X)}u(!0)},[k,U]);return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-gray-900 to-gray-800",children:[l.jsxs("div",{className:"w-full max-w-xl bg-gray-800/50 backdrop-blur-lg rounded-2xl p-8 shadow-xl border border-gray-700/50",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsxs("div",{className:"relative inline-block",children:[l.jsx(Je,{className:"w-24 h-24 text-yellow-400 animate-bounce filter drop-shadow-lg"}),l.jsx("span",{className:"absolute top-12 right-0 text-4xl animate-pulse",children:a}),l.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"})]}),l.jsx("h2",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Game Complete!"}),l.jsx("p",{className:"text-2xl text-green-400 font-bold mb-2",children:F}),l.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[l.jsx(ua,{className:"w-4 h-4"}),l.jsxs("span",{children:["Total response time: ",A.toFixed(2),"s"]})]})]}),l.jsx(Gl,{score:m,accuracy:y,totalQuestions:f,correctAnswers:g,incorrectAnswers:b,fastestResponse:_,slowestResponse:C,avgTimePerQuestion:S,totalResponseTime:A}),l.jsx("div",{className:"mt-8",children:l.jsx(ql,{onPlayAgain:t,onHome:e,onShare:ie})}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("p",{className:"text-gray-400 text-sm",children:"Challenge your friends to beat your score! 🏆"})})]}),c&&l.jsx(Eg,{shareText:k,shareUrl:U,onClose:()=>u(!1),onShowToast:K}),l.jsx(Te,{children:d&&l.jsx(Ag,{message:d,onClose:()=>h(null)})}),l.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes scaleIn {
          from { transform: scale(0.95); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        
        .animate-scaleIn {
          animation: scaleIn 0.3s ease-out;
        }
        
        /* Almarena-like font styling */
        .sport-share-text {
          font-family: "Almarena Neue", "Montserrat", "Segoe UI", sans-serif;
          font-weight: 700;
          letter-spacing: -0.02em;
          font-size: 1.1rem;
          line-height: 1.4;
          text-transform: none;
        }
      `})]})});zl.displayName="SoloResultsScreen";const Ng={football:"⚽",basketball:"🏀",tennis:"🎾",olympics:"🏅",mixed:"🎯"},Rg=t=>t>=90?"Outstanding! 🌟":t>=80?"Excellent! 🎯":t>=70?"Great Job! 👏":t>=60?"Well Done! 💪":t>=50?"Good Effort! 👍":"Keep Practicing! 💫",Mg=({size:t=20,className:e=""})=>l.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",className:e,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M17.1907 4H19.9333L13.73 11.0533L20.8 20H15.0267L10.7027 14.4667L5.74933 20H3.00267L9.66667 12.4533L2.93333 4H8.84L12.7533 9.0467L17.1907 4ZM15.72 18.4667H17.0667L8.15733 5.46667H6.70933L15.72 18.4667Z"})}),Ig=({message:t,onClose:e})=>l.jsxs(T.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50",children:[l.jsx("span",{children:t}),l.jsx("button",{onClick:e,className:"ml-2 text-white/80 hover:text-white",children:l.jsx(ns,{size:16})})]}),Hl=Ue.memo(({correctAnswers:t,incorrectAnswers:e,totalQuestions:s})=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[l.jsx(ta,{size:16})," Correct"]}),l.jsx("span",{className:"text-green-400 font-bold",children:t})]}),l.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500 transition-all duration-1000",style:{width:`${t/s*100}%`}})})]}),l.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(t/s*100).toFixed(0),"%"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[l.jsx(ha,{size:16})," Incorrect"]}),l.jsx("span",{className:"text-red-400 font-bold",children:e})]}),l.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:`${e/s*100}%`}})})]}),l.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(e/s*100).toFixed(0),"%"]})]})]}));Hl.displayName="AnswerDistributionChart";const Og=({shareText:t,shareUrl:e,onClose:s,onShowToast:n})=>{const r=async()=>{try{await navigator.clipboard.writeText(t),n("Text copied to clipboard!")}catch(o){console.error("Failed to copy text:",o)}},i=async()=>{try{await navigator.clipboard.writeText(e),n("Link copied to clipboard!")}catch(o){console.error("Failed to copy link:",o)}};return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:l.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 w-full max-w-md animate-scaleIn",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"Share Your Results"}),l.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",children:l.jsx(ns,{size:20})})]}),l.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg mb-6 relative group",children:[l.jsx("p",{className:"sport-share-text text-white",children:t}),l.jsx("button",{onClick:r,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1 bg-gray-800/50 rounded-md hover:bg-gray-800",title:"Copy text",children:l.jsx(ut,{size:14,className:"text-gray-300"})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-gray-300 text-sm",children:"Website:"}),l.jsxs("button",{onClick:i,className:"flex items-center gap-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm text-gray-300 transition-colors",children:[l.jsx(ut,{size:14})," Copy"]})]}),l.jsx("div",{className:"bg-gray-700/30 p-2 rounded text-green-400 text-sm font-mono truncate",children:e})]}),l.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[l.jsx("button",{onClick:()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(e)}`,"_blank"),className:"p-3 bg-black hover:bg-gray-900 rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on X",children:l.jsx(Mg,{size:20})}),l.jsx("button",{onClick:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}&quote=${encodeURIComponent(t)}`,"_blank"),className:"p-3 bg-[#4267B2]/90 hover:bg-[#4267B2] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on Facebook",children:l.jsx(ia,{size:20})}),l.jsx("button",{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(t+" "+e)}`,"_blank"),className:"p-3 bg-[#25D366]/90 hover:bg-[#25D366] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on WhatsApp",children:l.jsx(lr,{size:20})}),l.jsx("button",{onClick:i,className:"p-3 bg-gray-600/90 hover:bg-gray-600 rounded-lg text-white transition-colors flex items-center justify-center",title:"Copy link",children:l.jsx(oa,{size:20})})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("p",{className:"text-sm text-gray-400",children:"Share with friends and challenge them to beat your score!"})})]})})},Wl=Ue.memo(({player:t,isWinner:e,totalQuestions:s,maxPossibleScore:n,playerResponseTimes:r})=>{const i=t.score||0;let o=t.correctAnswers;o===void 0&&(o=Math.floor(i/15));const a=s-o,c=i/n*100,u=r.filter(y=>y>0&&y<=15),d=u.length>0?Math.min(...u):0,h=u.length>0?Math.max(...u):0,f=u.length>0?u.reduce((y,g)=>y+g,0)/u.length:0,m=u.reduce((y,g)=>y+g,0),v=Rg(c);return l.jsxs("div",{className:`bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 ${e?"ring-2 ring-yellow-400":""}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[e&&l.jsx(na,{className:"w-6 h-6 text-yellow-400"}),l.jsx("h3",{className:"text-xl font-bold text-white",children:t.username}),e&&l.jsx("div",{className:"bg-yellow-400/10 text-yellow-400 px-2 py-1 rounded-full text-xs font-bold",children:"Winner!"})]}),l.jsx("div",{className:"text-xl text-gray-300",children:v})]}),l.jsx("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm mb-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Final Score"}),l.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent",children:i}),l.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 transition-all duration-1000",style:{width:`${i/n*100}%`}})}),l.jsxs("div",{className:"text-gray-400 text-sm mt-1",children:["Max: ",n]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Accuracy"}),l.jsxs("div",{className:"text-3xl font-bold text-green-400",children:[c.toFixed(1),"%"]}),l.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 transition-all duration-1000",style:{width:`${Math.min(c,100)}%`}})})]})]})}),l.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm mb-4",children:[l.jsxs("h3",{className:"text-lg text-white mb-3 flex items-center gap-2",children:[l.jsx(Hs,{className:"w-5 h-5 text-green-400"}),"Answer Distribution"]}),l.jsx(Hl,{correctAnswers:o,incorrectAnswers:a,totalQuestions:s})]}),l.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm",children:[l.jsxs("h3",{className:"text-lg text-white mb-3 flex items-center gap-2",children:[l.jsx(fa,{className:"w-5 h-5 text-yellow-400"}),"Response Times"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Fastest Response"}),l.jsxs("span",{className:"text-green-400 font-bold",children:[d.toFixed(2),"s"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Slowest Response"}),l.jsxs("span",{className:"text-yellow-400 font-bold",children:[h.toFixed(2),"s"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Average Response"}),l.jsxs("span",{className:"text-blue-400 font-bold",children:[f.toFixed(2),"s"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:"Total Response Time"}),l.jsxs("span",{className:"text-purple-400 font-bold",children:[m.toFixed(2),"s"]})]})]})]})]})});Wl.displayName="PlayerStats";const Kl=Ue.memo(({onPlayAgain:t,onHome:e,onShare:s})=>l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("button",{onClick:t,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-green-600 
               hover:bg-green-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[l.jsx(aa,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"Play Again"]}),l.jsxs("button",{onClick:e,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-gray-700 
               hover:bg-gray-600 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[l.jsx(ss,{className:"w-5 h-5 group-hover:-translate-y-1 transition-transform"}),"Home"]}),l.jsxs("button",{onClick:s,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-blue-600 
               hover:bg-blue-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[l.jsx(la,{className:"w-5 h-5 group-hover:rotate-45 transition-transform"}),"Share"]})]}));Kl.displayName="ActionButtons";const Dg=({onPlayAgain:t,onHome:e})=>{const{players:s,category:n,questions:r,completionTime:i=0,getCurrentPlayer:o,getPlayerResponseTimes:a}=Rt(),[c,u]=w.useState(!1),[d,h]=w.useState(null),f=o(),m=Ng[n],v=r.length*15,y=Ue.useMemo(()=>[...s].sort((k,U)=>U.score-k.score),[s]),g=y[0],b=y[1],j=(g==null?void 0:g.score)===(b==null?void 0:b.score),_=w.useCallback(k=>a(k),[a]),C=j?`I tied ${g==null?void 0:g.score}-${b==null?void 0:b.score} in the ${n} quiz on SportIQ! Can you beat our scores? #SportIQ`:`I ${(g==null?void 0:g.username)===(f==null?void 0:f.username)?"won":"lost"} ${g==null?void 0:g.score}-${b==null?void 0:b.score} in the ${n} quiz on SportIQ! Challenge me! #SportIQ`,S="https://sportiq.games",A=k=>{h(k),setTimeout(()=>h(null),3e3)},F=w.useCallback(async()=>{try{if(navigator.share&&navigator.canShare&&navigator.canShare({text:C,url:S})){await navigator.share({title:"SportIQ Match Result",text:C,url:S}),A("Result shared successfully!");return}}catch(k){console.error("Native share failed:",k)}u(!0)},[C,S]);return w.useEffect(()=>{if(!j&&g){const U=Date.now()+3e3,K={startVelocity:30,spread:360,ticks:60,zIndex:0},ie=(oe,J)=>Math.random()*(J-oe)+oe,X=setInterval(()=>{const oe=U-Date.now();if(oe<=0)return clearInterval(X);const J=50*(oe/3e3);Ds({...K,particleCount:J,origin:{x:ie(.1,.3),y:Math.random()-.2}}),Ds({...K,particleCount:J,origin:{x:ie(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(X)}},[j,g]),y.length?l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-gray-900 to-gray-800",children:[l.jsxs("div",{className:"w-full max-w-3xl bg-gray-800/50 backdrop-blur-lg rounded-2xl p-8 shadow-xl border border-gray-700/50",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsxs("div",{className:"relative inline-block",children:[l.jsx(Je,{className:"w-24 h-24 text-yellow-400 animate-bounce filter drop-shadow-lg"}),l.jsx("span",{className:"absolute top-12 right-0 text-4xl animate-pulse",children:m}),l.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"})]}),l.jsx("h2",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Match Complete!"}),j?l.jsx("p",{className:"text-2xl text-blue-400 font-bold mb-2",children:"It's a tie! 🤝"}):l.jsxs("p",{className:"text-2xl text-green-400 font-bold mb-2",children:[g==null?void 0:g.username," wins! 🏆"]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[l.jsx(ua,{className:"w-4 h-4"}),l.jsxs("span",{children:["Match duration: ",i.toFixed(1),"s"]})]})]}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:y.map((k,U)=>l.jsx(Wl,{player:k,isWinner:U===0&&!j,totalQuestions:r.length,maxPossibleScore:v,playerResponseTimes:_(k.id)},k.id))}),l.jsx(Kl,{onPlayAgain:t,onHome:e,onShare:F}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("p",{className:"text-gray-400 text-sm",children:"Share your results with friends! 🎮"})})]}),c&&l.jsx(Og,{shareText:C,shareUrl:S,onClose:()=>u(!1),onShowToast:A}),l.jsx(Te,{children:d&&l.jsx(Ig,{message:d,onClose:()=>h(null)})}),l.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes scaleIn {
          from { transform: scale(0.95); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        
        .animate-scaleIn {
          animation: scaleIn 0.3s ease-out;
        }
        
        /* Almarena-like font styling */
        .sport-share-text {
          font-family: "Almarena Neue", "Montserrat", "Segoe UI", sans-serif;
          font-weight: 700;
          letter-spacing: -0.02em;
          font-size: 1.1rem;
          line-height: 1.4;
          text-transform: none;
        }
      `})]}):l.jsx("div",{className:"text-white text-center p-8",children:"Loading results..."})},Lg=({onJoinSuccess:t,onBackToMode:e,selectedCategory:s="mixed"})=>{const[n,r]=w.useState(()=>localStorage.getItem("showJoinUI")==="true"?(localStorage.removeItem("showJoinUI"),!0):!1),[i,o]=w.useState(""),[a,c]=w.useState(""),[u,d]=w.useState(!1),[h,f]=w.useState(!1),{gameId:m,joinGame:v,socket:y,players:g,getCurrentPlayer:b,hasJoinedGame:j,resetGame:_,createGame:C}=Rt(),S=localStorage.getItem("username")||"",A=b();A==null||A.isHost;const[F,k]=w.useState({isOpen:!1,type:null});w.useEffect(()=>{(async()=>{if(!n&&!j&&!h&&!m&&s)try{f(!0),console.log("Automatically creating game with category:",s),await C(s),f(!1)}catch(E){console.error("Failed to create game:",E),f(!1)}})()},[j,m,s,C,h,n]);const U=()=>{t()};w.useEffect(()=>{if(!y)return;const Y=G=>{c(G.message)},E=G=>{G.players.some(x=>x.id===y.id)&&(console.log("Game updated and player is in the game, triggering success callback"),setTimeout(()=>{t()},100))};return y.on("error",Y),y.on("gameUpdated",E),()=>{y.off("error",Y),y.off("gameUpdated",E)}},[y,t]);const K=async()=>{if(m)try{await navigator.clipboard.writeText(m),d(!0),setTimeout(()=>d(!1),2e3)}catch(Y){console.error("Failed to copy code:",Y),c("Failed to copy code to clipboard")}},ie=()=>{if(c(""),!i.trim()){c("Please enter a game code");return}try{console.log("Attempting to join game:",i),v(i,S).then(()=>{console.log("Successfully joined game:",i)}).catch(Y=>{console.error("Error joining game:",Y),c(Y.message||"Failed to join game")})}catch(Y){console.error("Exception joining game:",Y),c("An error occurred while joining the game")}},X=()=>{k({isOpen:!0,type:"mode"})},oe=()=>{localStorage.setItem("goToCategory","true"),_(),e&&e()},J=()=>{_(),e&&e(),k({isOpen:!1,type:null})},fe=Y=>{if(!Y)return"";switch(Y){case"football":return" ⚽";case"basketball":return" 🏀";case"tennis":return" 🎾";case"olympics":return" 🏅";case"mixed":default:return" 🎯"}};return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-[#1a1a1a]",children:[l.jsx(Gr,{isOpen:F.isOpen,onConfirm:J,onCancel:()=>k({isOpen:!1,type:null}),title:"Go Back?",message:"Are you sure you want to go back to mode selection? Any game setup in progress will be lost.",confirmText:_e.MODES,cancelText:"Stay Here"}),l.jsx("div",{className:"fixed bottom-6 left-6 z-50",children:e&&l.jsx(ct,{icon:ss,label:_e.MODES,onClick:X})}),l.jsxs("div",{className:"w-full max-w-md",children:[l.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-4",children:n?"Join Game 🎮":"Create Game 🎮"}),s&&!n&&l.jsx("div",{className:"text-center mb-6",children:l.jsxs("span",{className:"px-4 py-2 bg-gray-800 rounded-full text-blue-400 text-sm inline-block",children:[`Category: ${s.charAt(0).toUpperCase()+s.slice(1)}`,fe(s)]})}),n?l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Enter game code"}),l.jsx("input",{type:"text",value:i,onChange:Y=>{o(Y.target.value),c("")},placeholder:"Enter code",className:`w-full p-3 rounded-lg bg-gray-700 text-white font-mono text-lg 
                         border-2 ${a?"border-red-500":"border-transparent"} 
                         focus:border-green-500 focus:outline-none`,maxLength:6}),a&&l.jsxs("div",{className:"mt-2 text-red-500 text-sm flex items-center gap-2",children:[l.jsx(Nd,{size:16}),a]})]}),l.jsx("div",{className:"flex justify-end items-center",children:l.jsxs("button",{onClick:ie,className:`px-6 py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white 
                         transition-colors flex items-center gap-2`,children:[l.jsx(da,{size:20}),"Join Game"]})})]}):l.jsx("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl",children:h?l.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[l.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500 mb-4"}),l.jsx("p",{className:"text-gray-300",children:"Creating game..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Share this code with your friend"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:m,readOnly:!0,className:"flex-1 p-3 rounded-lg bg-gray-700 text-white font-mono text-lg select-all"}),l.jsxs("button",{onClick:K,disabled:!m,className:`p-3 rounded-lg ${u?"bg-green-600":"bg-blue-600 hover:bg-blue-700"} text-white transition-colors relative group ${m?"":"opacity-50 cursor-not-allowed"}`,title:"Copy code",children:[l.jsx(ut,{size:24}),l.jsx("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:u?"Copied!":"Copy code"})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("button",{onClick:oe,className:`px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white 
                             transition-colors flex items-center gap-2`,children:[l.jsx(zs,{size:18}),"Change Category"]}),l.jsxs("button",{onClick:U,disabled:!m,className:`px-6 py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white 
                              transition-colors flex items-center gap-2 group ${m?"":"opacity-50 cursor-not-allowed"}`,children:["Continue to Lobby",l.jsx(Md,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})})]})]})};function $g(){var Y;const[t,e]=w.useState("home"),[s,n]=w.useState("solo"),[r,i]=w.useState(!1),[o,a]=w.useState(null),{initializeGame:c,addPlayer:u,setCategory:d,isGameStarted:h,isGameEnded:f,resetGame:m,players:v}=qr(),{initializeGame:y,createGame:g,isGameStarted:b,isGameEnded:j,resetGame:_,setCategory:C,players:S,getCurrentPlayer:A,socket:F,hasJoinedGame:k}=Rt(),U=E=>{localStorage.setItem("username",E),m(),_(),e("welcome")},K=async(E,G)=>{try{n(G==="solo"?"solo":"1v1"),G==="solo"?(m(),await c("solo"),u(E),e("category")):G==="create"?(_(),await y(),e("category")):G==="join"&&(_(),await y(),localStorage.setItem("showJoinUI","true"),e("invite"))}catch(Ee){console.error("Error starting game:",Ee)}},ie=async()=>{const E=localStorage.getItem("username")||"Guest";if(ea(),s==="solo")m(),c(s),u(E),e("category");else try{_(),await y(),F&&F.connected?e("category"):(console.log("Socket connection not established, redirecting to welcome screen"),e("welcome"))}catch(G){console.error("Error restarting 1v1 game:",G),e("welcome")}},X=()=>{e("lobby")},oe=async E=>{if(r){console.log("Category selection already in progress, ignoring");return}try{if(i(!0),console.log(`App handling category selection: ${E} for mode: ${s}`),s==="solo")try{e("loading"),await d(E)}catch(G){console.error("Error setting solo category:",G),e("category")}else a(E),k?(console.log("Already joined game, updating category"),C(E),e("lobby")):(console.log("Selected category for new game:",E),e("invite"))}finally{setTimeout(()=>{i(!1)},1e3)}},J=()=>{const E=localStorage.getItem("goToCategory")==="true";localStorage.removeItem("goToCategory"),m(),_(),a(null),E?(console.log("Redirecting to category selection from invite screen"),e("category")):e("welcome")},fe=()=>{if(s==="solo")e("category");else{const E=A();E&&E.isHost?e("category"):e("lobby")}};return w.useEffect(()=>{const E=()=>{console.log("Custom game started event received, forcing transition to game"),t==="lobby"&&e("game")};return window.addEventListener("sportiq:gameStarted",E),()=>{window.removeEventListener("sportiq:gameStarted",E)}},[t]),w.useEffect(()=>{t==="loading"&&(s==="solo"&&h||s==="1v1"&&b)&&(console.log("Game started while in loading screen, transitioning to game screen"),e("game"))},[h,b,s,t]),w.useEffect(()=>{t==="lobby"&&s==="1v1"&&b&&!j&&(console.log("1v1 game started while in lobby state, transitioning to game screen"),e("game"))},[b,j,s,t]),w.useEffect(()=>{s==="solo"&&f?(console.log("Solo game ended, transitioning to results screen"),e("results")):s==="1v1"&&j&&(console.log("1v1 game ended, transitioning to results screen"),e("results"))},[f,j,s]),w.useEffect(()=>{if(F&&s==="1v1"){const E=G=>{console.log("Game over event received in App.tsx:",G),e("results"),setTimeout(()=>{t!=="results"&&j&&(console.log("Forcing transition to results screen"),e("results"))},1e3)};return F.on("gameOver",E),()=>{F.off("gameOver",E)}}},[F,s,j,t]),w.useEffect(()=>{if(s==="1v1"&&j&&t!=="results"){console.log("Game ended but UI not in results state, forcing transition");const E=setTimeout(()=>{e("results")},500);return()=>clearTimeout(E)}},[s,j,t]),w.useEffect(()=>{var E;console.log("Current game state:",{mode:s,state:t,isSoloGameStarted:h,isSoloGameEnded:f,is1v1GameStarted:b,is1v1GameEnded:j,soloPlayersCount:v.length,multiPlayersCount:S.length,hasJoinedGame:k,categorySelectionInProgress:r,selectedCategory:o,isHost:(E=A())==null?void 0:E.isHost,goToCategory:localStorage.getItem("goToCategory")})},[t,s,h,f,b,j,v.length,S.length,k,r,o,A]),l.jsx(Cd,{children:l.jsxs("div",{className:"min-h-screen bg-[#1a1a1a]",children:[t==="home"&&l.jsx(hg,{onStart:U}),t==="welcome"&&l.jsx(mg,{onStart:K}),t==="invite"&&l.jsx(Lg,{onJoinSuccess:X,onBackToMode:J,selectedCategory:o}),t==="category"&&l.jsx(bg,{onSelect:oe,mode:s,onBack:J}),t==="loading"&&l.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:l.jsxs("div",{className:"text-white text-center p-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading Quiz..."}),l.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-green-500 rounded-full animate-pulse w-1/2"})})]})}),t==="lobby"&&s==="1v1"&&l.jsx(jg,{onBackToCategory:fe,onBackToMode:J}),t==="game"&&l.jsx(Sg,{mode:s,onBackToCategory:fe,onBackToMode:J},`game-${s}-${((Y=v[0])==null?void 0:Y.id)||"solo"}`),t==="results"&&(s==="solo"?l.jsx(zl,{onPlayAgain:ie,onHome:J}):l.jsx(Dg,{onPlayAgain:ie,onHome:J}))]})})}const Jl=document.getElementById("root");if(!Jl)throw new Error("Failed to find the root element");const Vg=Ao(Jl);Vg.render(l.jsx(Ue.StrictMode,{children:l.jsx($g,{})}))});export default Fg();

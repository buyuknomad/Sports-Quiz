const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-De7yo5w0.js","assets/vendor-Bg0znbu-.js"])))=>i.map(i=>d[i]);
var cd=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);import{r as p,a as dd,R as ud,g as hd,c as Re,b as $e,d as _a}from"./vendor-Bg0znbu-.js";import{l as fd}from"./socket-TjCxX7sJ.js";var Ix=cd((Yx,As)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();var ka={exports:{}},cn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md=p,pd=Symbol.for("react.element"),gd=Symbol.for("react.fragment"),yd=Object.prototype.hasOwnProperty,xd=md.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vd={key:!0,ref:!0,__self:!0,__source:!0};function Ca(t,e,s){var n,r={},o=null,a=null;s!==void 0&&(o=""+s),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)yd.call(e,n)&&!vd.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:pd,type:t,key:o,ref:a,props:r,_owner:xd.current}}cn.Fragment=gd;cn.jsx=Ca;cn.jsxs=Ca;ka.exports=cn;var i=ka.exports,Ta,Ei=dd;Ta=Ei.createRoot,Ei.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hs(){return hs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},hs.apply(this,arguments)}var st;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(st||(st={}));const Ri="popstate";function bd(t){t===void 0&&(t={});function e(n,r){let{pathname:o,search:a,hash:l}=n.location;return ir("",{pathname:o,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function s(n,r){return typeof r=="string"?r:Ks(r)}return jd(e,s,null,t)}function ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Na(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wd(){return Math.random().toString(36).substr(2,8)}function Mi(t,e){return{usr:t.state,key:t.key,idx:e}}function ir(t,e,s,n){return s===void 0&&(s=null),hs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qt(e):e,{state:s,key:e&&e.key||n||wd()})}function Ks(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function qt(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function jd(t,e,s,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:o=!1}=n,a=r.history,l=st.Pop,c=null,d=u();d==null&&(d=0,a.replaceState(hs({},a.state,{idx:d}),""));function u(){return(a.state||{idx:null}).idx}function h(){l=st.Pop;let g=u(),b=g==null?null:g-d;d=g,c&&c({action:l,location:x.location,delta:b})}function f(g,b){l=st.Push;let w=ir(x.location,g,b);d=u()+1;let _=Mi(w,d),A=x.createHref(w);try{a.pushState(_,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(A)}o&&c&&c({action:l,location:x.location,delta:1})}function m(g,b){l=st.Replace;let w=ir(x.location,g,b);d=u();let _=Mi(w,d),A=x.createHref(w);a.replaceState(_,"",A),o&&c&&c({action:l,location:x.location,delta:0})}function y(g){let b=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof g=="string"?g:Ks(g);return w=w.replace(/ $/,"%20"),ce(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let x={get action(){return l},get location(){return t(r,a)},listen(g){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Ri,h),c=g,()=>{r.removeEventListener(Ri,h),c=null}},createHref(g){return e(r,g)},createURL:y,encodeLocation(g){let b=y(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(g){return a.go(g)}};return x}var Ii;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ii||(Ii={}));function Sd(t,e,s){s===void 0&&(s="/");let n=typeof e=="string"?qt(e):e,r=Ir(n.pathname||"/",s);if(r==null)return null;let o=Pa(t);_d(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Ld(r);a=Md(o[l],c)}return a}function Pa(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let r=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ce(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=nt([n,c.relativePath]),u=s.concat(c);o.children&&o.children.length>0&&(ce(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Pa(o.children,e,u,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:Ed(d,o.index),routesMeta:u})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))r(o,a);else for(let c of Aa(o.path))r(o,a,c)}),e}function Aa(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,r=s.endsWith("?"),o=s.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let a=Aa(n.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),r&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function _d(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:Rd(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const kd=/^:[\w-]+$/,Cd=3,Td=2,Nd=1,Pd=10,Ad=-2,Oi=t=>t==="*";function Ed(t,e){let s=t.split("/"),n=s.length;return s.some(Oi)&&(n+=Ad),e&&(n+=Td),s.filter(r=>!Oi(r)).reduce((r,o)=>r+(kd.test(o)?Cd:o===""?Nd:Pd),n)}function Rd(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function Md(t,e){let{routesMeta:s}=t,n={},r="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,d=r==="/"?e:e.slice(r.length)||"/",u=Id({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d);if(!u)return null;Object.assign(n,u.params);let h=l.route;o.push({params:n,pathname:nt([r,u.pathname]),pathnameBase:Vd(nt([r,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(r=nt([r,u.pathnameBase]))}return o}function Id(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=Od(t.path,t.caseSensitive,t.end),r=e.match(s);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let x=l[h]||"";a=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const y=l[h];return m&&!y?d[f]=void 0:d[f]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function Od(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Na(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function Ld(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Na(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ir(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function Dd(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:r=""}=typeof t=="string"?qt(t):t;return{pathname:s?s.startsWith("/")?s:$d(s,e):e,search:Bd(n),hash:Ud(r)}}function $d(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function Rn(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fd(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Or(t,e){let s=Fd(t);return e?s.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Lr(t,e,s,n){n===void 0&&(n=!1);let r;typeof t=="string"?r=qt(t):(r=hs({},t),ce(!r.pathname||!r.pathname.includes("?"),Rn("?","pathname","search",r)),ce(!r.pathname||!r.pathname.includes("#"),Rn("#","pathname","hash",r)),ce(!r.search||!r.search.includes("#"),Rn("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,l;if(a==null)l=s;else{let h=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=Dd(r,l),d=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const nt=t=>t.join("/").replace(/\/\/+/g,"/"),Vd=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bd=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ud=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qd(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ea=["post","put","patch","delete"];new Set(Ea);const zd=["get",...Ea];new Set(zd);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fs(){return fs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},fs.apply(this,arguments)}const Dr=p.createContext(null),Gd=p.createContext(null),ot=p.createContext(null),dn=p.createContext(null),at=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Ra=p.createContext(null);function Hd(t,e){let{relative:s}=e===void 0?{}:e;zt()||ce(!1);let{basename:n,navigator:r}=p.useContext(ot),{hash:o,pathname:a,search:l}=Ia(t,{relative:s}),c=a;return n!=="/"&&(c=a==="/"?n:nt([n,a])),r.createHref({pathname:c,search:l,hash:o})}function zt(){return p.useContext(dn)!=null}function Je(){return zt()||ce(!1),p.useContext(dn).location}function Ma(t){p.useContext(ot).static||p.useLayoutEffect(t)}function lt(){let{isDataRoute:t}=p.useContext(at);return t?iu():Wd()}function Wd(){zt()||ce(!1);let t=p.useContext(Dr),{basename:e,future:s,navigator:n}=p.useContext(ot),{matches:r}=p.useContext(at),{pathname:o}=Je(),a=JSON.stringify(Or(r,s.v7_relativeSplatPath)),l=p.useRef(!1);return Ma(()=>{l.current=!0}),p.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=Lr(d,JSON.parse(a),o,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:nt([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,a,o,t])}function Ia(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=p.useContext(ot),{matches:r}=p.useContext(at),{pathname:o}=Je(),a=JSON.stringify(Or(r,n.v7_relativeSplatPath));return p.useMemo(()=>Lr(t,JSON.parse(a),o,s==="path"),[t,a,o,s])}function Kd(t,e){return Jd(t,e)}function Jd(t,e,s,n){zt()||ce(!1);let{navigator:r}=p.useContext(ot),{matches:o}=p.useContext(at),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Je(),u;if(e){var h;let g=typeof e=="string"?qt(e):e;c==="/"||(h=g.pathname)!=null&&h.startsWith(c)||ce(!1),u=g}else u=d;let f=u.pathname||"/",m=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let y=Sd(t,{pathname:m}),x=eu(y&&y.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:nt([c,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:nt([c,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,s,n);return e&&x?p.createElement(dn.Provider,{value:{location:fs({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:st.Pop}},x):x}function Qd(){let t=ru(),e=qd(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),s?p.createElement("pre",{style:r},s):null,null)}const Yd=p.createElement(Qd,null);class Xd extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?p.createElement(at.Provider,{value:this.props.routeContext},p.createElement(Ra.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zd(t){let{routeContext:e,match:s,children:n}=t,r=p.useContext(Dr);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),p.createElement(at.Provider,{value:e},n)}function eu(t,e,s,n){var r;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var o;if((o=s)!=null&&o.errors)t=s.matches;else return null}let a=t,l=(r=s)==null?void 0:r.errors;if(l!=null){let u=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id]));u>=0||ce(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:m}=s,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let m,y=!1,x=null,g=null;s&&(m=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||Yd,c&&(d<0&&f===0?(y=!0,g=null):d===f&&(y=!0,g=h.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,f+1)),w=()=>{let _;return m?_=x:y?_=g:h.route.Component?_=p.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=u,p.createElement(Zd,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:s!=null},children:_})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(Xd,{location:s.location,revalidation:s.revalidation,component:x,error:m,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var Oa=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Oa||{}),Js=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Js||{});function tu(t){let e=p.useContext(Dr);return e||ce(!1),e}function su(t){let e=p.useContext(Gd);return e||ce(!1),e}function nu(t){let e=p.useContext(at);return e||ce(!1),e}function La(t){let e=nu(),s=e.matches[e.matches.length-1];return s.route.id||ce(!1),s.route.id}function ru(){var t;let e=p.useContext(Ra),s=su(Js.UseRouteError),n=La(Js.UseRouteError);return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function iu(){let{router:t}=tu(Oa.UseNavigateStable),e=La(Js.UseNavigateStable),s=p.useRef(!1);return Ma(()=>{s.current=!0}),p.useCallback(function(r,o){o===void 0&&(o={}),s.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,fs({fromRouteId:e},o)))},[t,e])}function ou(t){let{to:e,replace:s,state:n,relative:r}=t;zt()||ce(!1);let{future:o,static:a}=p.useContext(ot),{matches:l}=p.useContext(at),{pathname:c}=Je(),d=lt(),u=Lr(e,Or(l,o.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(u);return p.useEffect(()=>d(JSON.parse(h),{replace:s,state:n,relative:r}),[d,h,r,s,n]),null}function Ie(t){ce(!1)}function au(t){let{basename:e="/",children:s=null,location:n,navigationType:r=st.Pop,navigator:o,static:a=!1,future:l}=t;zt()&&ce(!1);let c=e.replace(/^\/*/,"/"),d=p.useMemo(()=>({basename:c,navigator:o,static:a,future:fs({v7_relativeSplatPath:!1},l)}),[c,l,o,a]);typeof n=="string"&&(n=qt(n));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:y="default"}=n,x=p.useMemo(()=>{let g=Ir(u,c);return g==null?null:{location:{pathname:g,search:h,hash:f,state:m,key:y},navigationType:r}},[c,u,h,f,m,y,r]);return x==null?null:p.createElement(ot.Provider,{value:d},p.createElement(dn.Provider,{children:s,value:x}))}function lu(t){let{children:e,location:s}=t;return Kd(or(e),s)}new Promise(()=>{});function or(t,e){e===void 0&&(e=[]);let s=[];return p.Children.forEach(t,(n,r)=>{if(!p.isValidElement(n))return;let o=[...e,r];if(n.type===p.Fragment){s.push.apply(s,or(n.props.children,o));return}n.type!==Ie&&ce(!1),!n.props.index||!n.props.children||ce(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=or(n.props.children,o)),s.push(a)}),s}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ar(){return ar=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ar.apply(this,arguments)}function cu(t,e){if(t==null)return{};var s={},n=Object.keys(t),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(s[r]=t[r]);return s}function du(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uu(t,e){return t.button===0&&(!e||e==="_self")&&!du(t)}const hu=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],fu="6";try{window.__reactRouterVersion=fu}catch{}const mu="startTransition",Li=ud[mu];function pu(t){let{basename:e,children:s,future:n,window:r}=t,o=p.useRef();o.current==null&&(o.current=bd({window:r,v5Compat:!0}));let a=o.current,[l,c]=p.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},u=p.useCallback(h=>{d&&Li?Li(()=>c(h)):c(h)},[c,d]);return p.useLayoutEffect(()=>a.listen(u),[a,u]),p.createElement(au,{basename:e,children:s,location:l.location,navigationType:l.action,navigator:a,future:n})}const gu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yu=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=p.forwardRef(function(e,s){let{onClick:n,relative:r,reloadDocument:o,replace:a,state:l,target:c,to:d,preventScrollReset:u,unstable_viewTransition:h}=e,f=cu(e,hu),{basename:m}=p.useContext(ot),y,x=!1;if(typeof d=="string"&&yu.test(d)&&(y=d,gu))try{let _=new URL(window.location.href),A=d.startsWith("//")?new URL(_.protocol+d):new URL(d),C=Ir(A.pathname,m);A.origin===_.origin&&C!=null?d=C+A.search+A.hash:x=!0}catch{}let g=Hd(d,{relative:r}),b=xu(d,{replace:a,state:l,target:c,preventScrollReset:u,relative:r,unstable_viewTransition:h});function w(_){n&&n(_),_.defaultPrevented||b(_)}return p.createElement("a",ar({},f,{href:y||g,onClick:x||o?n:w,ref:s,target:c}))});var Di;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Di||(Di={}));var $i;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($i||($i={}));function xu(t,e){let{target:s,replace:n,state:r,preventScrollReset:o,relative:a,unstable_viewTransition:l}=e===void 0?{}:e,c=lt(),d=Je(),u=Ia(t,{relative:a});return p.useCallback(h=>{if(uu(h,s)){h.preventDefault();let f=n!==void 0?n:Ks(d)===Ks(u);c(t,{replace:f,state:r,preventScrollReset:o,relative:a,unstable_viewTransition:l})}},[d,c,u,n,r,s,t,o,a,l])}const vu="modulepreload",bu=function(t){return"/"+t},Fi={},Lt=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=bu(c),c in Fi)return;Fi[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":vu,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},wu=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Lt(async()=>{const{default:n}=await Promise.resolve().then(()=>Gt);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class $r extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class ju extends $r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Su extends $r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _u extends $r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(lr||(lr={}));var ku=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?o(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Cu{constructor(e,{headers:s={},customFetch:n,region:r=lr.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=wu(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return ku(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:a}=s;let l={},{region:c}=s;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:d}).catch(y=>{throw new ju(y)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Su(u);if(!u.ok)throw new _u(u);let f=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield u.json():f==="application/octet-stream"?m=yield u.blob():f==="text/event-stream"?m=u:f==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(r){return{data:null,error:r}}})}}var Se={},Fr={},un={},ws={},hn={},fn={},Tu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dt=Tu();const Nu=Dt.fetch,Da=Dt.fetch.bind(Dt),$a=Dt.Headers,Pu=Dt.Request,Au=Dt.Response,Gt=Object.freeze(Object.defineProperty({__proto__:null,Headers:$a,Request:Pu,Response:Au,default:Da,fetch:Nu},Symbol.toStringTag,{value:"Module"})),Eu=hd(Gt);var mn={};Object.defineProperty(mn,"__esModule",{value:!0});let Ru=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};mn.default=Ru;var Fa=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fn,"__esModule",{value:!0});const Mu=Fa(Eu),Iu=Fa(mn);let Ou=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Mu.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var a,l,c;let d=null,u=null,h=null,f=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){const b=await o.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const x=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),g=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await o.text();try{d=JSON.parse(x),Array.isArray(d)&&o.status===404&&(u=[],d=null,f=200,m="OK")}catch{o.status===404&&x===""?(f=204,m="No Content"):d={message:x}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new Iu.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(o=>{var a,l,c;return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};fn.default=Ou;var Lu=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hn,"__esModule",{value:!0});const Du=Lu(fn);let $u=class extends Du.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}={}){const a=o?`${o}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};hn.default=$u;var Fu=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ws,"__esModule",{value:!0});const Vu=Fu(hn);let Bu=class extends Vu.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};ws.default=Bu;var Uu=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(un,"__esModule",{value:!0});const Qt=Uu(ws);let qu=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let o=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Qt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Qt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Qt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Qt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Qt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};un.default=qu;var pn={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.version=void 0;gn.version="0.0.0-automated";Object.defineProperty(pn,"__esModule",{value:!0});pn.DEFAULT_HEADERS=void 0;const zu=gn;pn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${zu.version}`};var Va=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fr,"__esModule",{value:!0});const Gu=Va(un),Hu=Va(ws),Wu=pn;let Ku=class Ba{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Wu.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new Gu.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ba(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:o}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(a=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(a="POST",c=s);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new Hu.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Fr.default=Ku;var Ht=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Se,"__esModule",{value:!0});Se.PostgrestError=Se.PostgrestBuilder=Se.PostgrestTransformBuilder=Se.PostgrestFilterBuilder=Se.PostgrestQueryBuilder=Se.PostgrestClient=void 0;const Ua=Ht(Fr);Se.PostgrestClient=Ua.default;const qa=Ht(un);Se.PostgrestQueryBuilder=qa.default;const za=Ht(ws);Se.PostgrestFilterBuilder=za.default;const Ga=Ht(hn);Se.PostgrestTransformBuilder=Ga.default;const Ha=Ht(fn);Se.PostgrestBuilder=Ha.default;const Wa=Ht(mn);Se.PostgrestError=Wa.default;var Ju=Se.default={PostgrestClient:Ua.default,PostgrestQueryBuilder:qa.default,PostgrestFilterBuilder:za.default,PostgrestTransformBuilder:Ga.default,PostgrestBuilder:Ha.default,PostgrestError:Wa.default};const{PostgrestClient:Qu,PostgrestQueryBuilder:qx,PostgrestFilterBuilder:zx,PostgrestTransformBuilder:Gx,PostgrestBuilder:Hx,PostgrestError:Wx}=Ju,Yu="2.11.2",Xu={"X-Client-Info":`realtime-js/${Yu}`},Zu="1.0.0",Ka=1e4,eh=1e3;var Ot;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ot||(Ot={}));var Te;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Te||(Te={}));var Le;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Le||(Le={}));var cr;(function(t){t.websocket="websocket"})(cr||(cr={}));var vt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(vt||(vt={}));class th{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),o=s.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+r));a=a+r;const c=n.decode(e.slice(a,a+o));a=a+o;const d=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}let Ja=class{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var te;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(te||(te={}));const Vi=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((o,a)=>(o[a]=sh(a,t,e,r),o),{})},sh=(t,e,s,n)=>{const r=e.find(l=>l.name===t),o=r==null?void 0:r.type,a=s[t];return o&&!n.includes(o)?Qa(o,a):dr(a)},Qa=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return oh(e,s)}switch(t){case te.bool:return nh(e);case te.float4:case te.float8:case te.int2:case te.int4:case te.int8:case te.numeric:case te.oid:return rh(e);case te.json:case te.jsonb:return ih(e);case te.timestamp:return ah(e);case te.abstime:case te.date:case te.daterange:case te.int4range:case te.int8range:case te.money:case te.reltime:case te.text:case te.time:case te.timestamptz:case te.timetz:case te.tsrange:case te.tstzrange:return dr(e);default:return dr(e)}},dr=t=>t,nh=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},rh=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ih=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},oh=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let o;const a=t.slice(1,s);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>Qa(e,l))}return t},ah=t=>typeof t=="string"?t.replace(" ","T"):t,Ya=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Mn{constructor(e,s,n={},r=Ka){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Bi;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Bi||(Bi={}));class is{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=is.syncState(this.state,r,o,a),this.pendingDiffs.forEach(c=>{this.state=is.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=is.syncDiff(this.state,r,o,a),l())}),this.onJoin((r,o,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:a})}),this.onLeave((r,o,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const o=this.cloneDeep(e),a=this.transformState(s),l={},c={};return this.map(o,(d,u)=>{a[d]||(c[d]=u)}),this.map(a,(d,u)=>{const h=o[d];if(h){const f=u.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),y=u.filter(g=>m.indexOf(g.presence_ref)<0),x=h.filter(g=>f.indexOf(g.presence_ref)<0);y.length>0&&(l[d]=y),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:o,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ui;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ui||(Ui={}));var qi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(qi||(qi={}));var qe;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qe||(qe={}));class Vr{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Mn(this,Le.join,this.params,this.timeout),this.rejoinTimer=new Ja(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Le.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new is(this),this.broadcastEndpointURL=Ya(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:a,private:l}}=this.params;this._onError(u=>e==null?void 0:e(qe.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(qe.CLOSED));const c={},d={broadcast:o,presence:a,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(qe.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,y=[];for(let x=0;x<m;x++){const g=f[x],{filter:{event:b,schema:w,table:_,filter:A}}=g,C=u&&u[x];if(C&&C.event===b&&C.schema===w&&C.table===_&&C.filter===A)y.push(Object.assign(Object.assign({},g),{id:C.id}));else{this.unsubscribe(),e==null||e(qe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(qe.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(qe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Te.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Le.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new Mn(this,Le.leave,{},e);r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,s,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(o),a}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Mn(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,o;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Le;if(n&&[l,c,d,u].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var y,x,g;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((g=(x=m.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(o=this.bindings[a])===null||o===void 0||o.filter(m=>{var y,x,g,b,w,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const A=m.id,C=(y=m.filter)===null||y===void 0?void 0:y.event;return A&&((x=s.ids)===null||x===void 0?void 0:x.includes(A))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((g=s.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const A=(w=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return A==="*"||A===((_=s==null?void 0:s.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:x,table:g,commit_timestamp:b,type:w,errors:_}=y;f=Object.assign(Object.assign({},{schema:x,table:g,commit_timestamp:b,eventType:w,new:{},old:{},errors:_}),this._getPayloadRecords(y))}m.callback(f,n)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),o={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Vr.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Le.close,{},e)}_onError(e){this._on(Le.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Vi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Vi(e.columns,e.old_record)),s}}const lh=()=>{},ch=typeof WebSocket<"u",dh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uh{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Xu,this.params={},this.timeout=Ka,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=lh,this.conn=null,this.sendBuffer=[],this.serializer=new th,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>Lt(async()=>{const{default:c}=await Promise.resolve().then(()=>Gt);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${cr.websocket}`,this.httpEndpoint=Ya(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,a)=>a(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ja(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(ch){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new hh(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Lt(async()=>{const{default:e}=await import("./browser-De7yo5w0.js").then(s=>s.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Zu}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ot.connecting:return vt.Connecting;case Ot.open:return vt.Open;case Ot.closing:return vt.Closing;default:return vt.Closed}}isConnected(){return this.connectionState()===vt.Open}channel(e,s={config:{}}){const n=new Vr(`realtime:${e}`,s,this);return this.channels.push(n),n}push(e){const{topic:s,event:n,payload:r,ref:o}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${o})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s}),r.joinedOnce&&r._isJoined()&&r._push(Le.access_token,{access_token:s})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(eh,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:o,ref:a}=s;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${r} ${a&&"("+a+")"||""}`,o),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,o,a)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Le.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([dh],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class hh{constructor(e,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ot.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Br extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function fe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class fh extends Br{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ur extends Br{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var mh=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?o(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Xa=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Lt(async()=>{const{default:n}=await Promise.resolve().then(()=>Gt);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},ph=()=>mh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Lt(()=>Promise.resolve().then(()=>Gt),void 0)).Response:Response}),hr=t=>{if(Array.isArray(t))return t.map(s=>hr(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[r]=hr(n)}),e};var jt=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?o(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const In=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gh=(t,e,s)=>jt(void 0,void 0,void 0,function*(){const n=yield ph();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{e(new fh(In(r),t.status||500))}).catch(r=>{e(new ur(In(r),r))}):e(new ur(In(t),t))}),yh=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function js(t,e,s,n,r,o){return jt(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(s,yh(e,n,r,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>gh(c,l,n))})})}function Qs(t,e,s,n){return jt(this,void 0,void 0,function*(){return js(t,"GET",e,s,n)})}function et(t,e,s,n,r){return jt(this,void 0,void 0,function*(){return js(t,"POST",e,n,r,s)})}function xh(t,e,s,n,r){return jt(this,void 0,void 0,function*(){return js(t,"PUT",e,n,r,s)})}function vh(t,e,s,n){return jt(this,void 0,void 0,function*(){return js(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Za(t,e,s,n,r){return jt(this,void 0,void 0,function*(){return js(t,"DELETE",e,n,r,s)})}var je=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?o(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const bh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wh{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=Xa(r)}uploadOrUpdate(e,s,n,r){return je(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},zi),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(fe(o))return{data:null,error:o};throw o}})}upload(e,s,n){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return je(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:zi.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(fe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return je(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const o=yield et(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new Br("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}update(e,s,n){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return je(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}copy(e,s,n){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield et(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return je(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield et(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return je(this,void 0,void 0,function*(){try{const r=yield et(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}download(e,s){return je(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=o?`?${o}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Qs(this.fetch,`${this.url}/${r}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(fe(l))return{data:null,error:l};throw l}})}info(e){return je(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Qs(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:hr(n),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}exists(e){return je(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield vh(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(fe(n)&&n instanceof ur){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&r.push(o);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return je(this,void 0,void 0,function*(){try{return{data:yield Za(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}list(e,s,n){return je(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},bh),s),{prefix:e||""});return{data:yield et(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const jh="2.7.1",Sh={"X-Client-Info":`storage-js/${jh}`};var kt=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?o(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class _h{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},Sh),s),this.fetch=Xa(n)}listBuckets(){return kt(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}})}getBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return kt(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return kt(this,void 0,void 0,function*(){try{return{data:yield xh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return kt(this,void 0,void 0,function*(){try{return{data:yield Za(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}}class kh extends _h{constructor(e,s={},n){super(e,s,n)}from(e){return new wh(this.url,this.headers,e,this.fetch)}}const Ch="2.49.3";let es="";typeof Deno<"u"?es="deno":typeof document<"u"?es="web":typeof navigator<"u"&&navigator.product==="ReactNative"?es="react-native":es="node";const Th={"X-Client-Info":`supabase-js-${es}/${Ch}`},Nh={headers:Th},Ph={schema:"public"},Ah={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Eh={};var Rh=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?o(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Mh=t=>{let e;return t?e=t:typeof fetch>"u"?e=Da:e=fetch,(...s)=>e(...s)},Ih=()=>typeof Headers>"u"?$a:Headers,Oh=(t,e,s)=>{const n=Mh(s),r=Ih();return(o,a)=>Rh(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new r(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},a),{headers:d}))})};var Lh=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?o(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function Dh(t){return t.replace(/\/$/,"")}function $h(t,e){const{db:s,auth:n,realtime:r,global:o}=t,{db:a,auth:l,realtime:c,global:d}=e,u={db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},d),o),accessToken:()=>Lh(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const el="2.69.1",Nt=30*1e3,fr=3,On=fr*Nt,Fh="http://localhost:9999",Vh="supabase.auth.token",Bh={"X-Client-Info":`gotrue-js/${el}`},mr="X-Supabase-Api-Version",tl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Uh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qh=6e5;class Ur extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zh extends Ur{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Gh(t){return q(t)&&t.name==="AuthApiError"}class sl extends Ur{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class ct extends Ur{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Ye extends ct{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hh(t){return q(t)&&t.name==="AuthSessionMissingError"}class Ln extends ct{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Is extends ct{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Os extends ct{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wh(t){return q(t)&&t.name==="AuthImplicitGrantRedirectError"}class Gi extends ct{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pr extends ct{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Dn(t){return q(t)&&t.name==="AuthRetryableFetchError"}class Hi extends ct{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class os extends ct{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ki=` 	
\r=`.split(""),Kh=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ki.length;e+=1)t[Ki[e].charCodeAt(0)]=-2;for(let e=0;e<Wi.length;e+=1)t[Wi[e].charCodeAt(0)]=e;return t})();function nl(t,e,s){const n=Kh[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ji(t){const e=[],s=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=a=>{Yh(a,n,s)};for(let a=0;a<t.length;a+=1)nl(t.charCodeAt(a),r,o);return e.join("")}function Jh(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Qh(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}Jh(n,e)}}function Yh(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Xh(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)nl(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Zh(t){const e=[];return Qh(t,s=>e.push(s)),new Uint8Array(e)}function ef(t){return Math.round(Date.now()/1e3)+t}function tf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Fe=()=>typeof window<"u"&&typeof document<"u",mt={tested:!1,writable:!1},as=()=>{if(!Fe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mt.tested)return mt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),mt.tested=!0,mt.writable=!0}catch{mt.tested=!0,mt.writable=!1}return mt.writable};function sf(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,o)=>{e[o]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const rl=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Lt(async()=>{const{default:n}=await Promise.resolve().then(()=>Gt);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},nf=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",il=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Ls=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ds=async(t,e)=>{await t.removeItem(e)};class yn{constructor(){this.promise=new yn.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}yn.promiseConstructor=Promise;function $n(t){const e=t.split(".");if(e.length!==3)throw new os("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Uh.test(e[n]))throw new os("JWT not in base64url format");return{header:JSON.parse(Ji(e[0])),payload:JSON.parse(Ji(e[1])),signature:Xh(e[2]),raw:{header:e[0],payload:e[1]}}}async function rf(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function of(t,e){return new Promise((n,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){n(a);return}}catch(a){if(!e(o,a)){r(a);return}}})()})}function af(t){return("0"+t.toString(16)).substr(-2)}function lf(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let o=0;o<56;o++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,af).join("")}async function cf(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function df(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await cf(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ct(t,e,s=!1){const n=lf();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await il(t,`${e}-code-verifier`,r);const o=await df(n);return[o,n===o?"plain":"s256"]}const uf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hf(t){const e=t.headers.get(mr);if(!e||!e.match(uf))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ff(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mf(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var pf=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const gt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gf=[502,503,504];async function Qi(t){var e;if(!nf(t))throw new pr(gt(t),0);if(gf.includes(t.status))throw new pr(gt(t),t.status);let s;try{s=await t.json()}catch(o){throw new sl(gt(o),o)}let n;const r=hf(t);if(r&&r.getTime()>=tl["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Hi(gt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ye}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Hi(gt(s),t.status,s.weak_password.reasons);throw new zh(gt(s),t.status||500,n)}const yf=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function J(t,e,s,n){var r;const o=Object.assign({},n==null?void 0:n.headers);o[mr]||(o[mr]=tl["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await xf(t,e,s+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function xf(t,e,s,n,r,o){const a=yf(e,n,r,o);let l;try{l=await t(s,Object.assign({},a))}catch(c){throw console.error(c),new pr(gt(c),0)}if(l.ok||await Qi(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Qi(c)}}function Xe(t){var e;let s=null;jf(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=ef(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function Yi(t){const e=Xe(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function tt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function vf(t){return{data:t,error:null}}function bf(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:o}=t,a=pf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function wf(t){return t}function jf(t){return t.access_token&&t.refresh_token&&t.expires_in}var Sf=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class _f{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=rl(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:tt})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Sf(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:bf,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(q(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tt})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,o,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:wf});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(y.split(";")[1].split("=")[1]);d[`${g}Page`]=x}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(q(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await J(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tt})}catch(s){if(q(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:tt})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:tt})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:s,error:n}=await J(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(q(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}}}const kf={getItem:t=>as()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{as()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{as()&&globalThis.localStorage.removeItem(t)}};function Xi(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Cf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Tt={debug:!!(globalThis&&as()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ol extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Tf extends ol{}async function Nf(t,e,s){Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Tf(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Tt.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Cf();const Pf={url:Fh,storageKey:Vh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Bh,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Zi(t,e,s){return await s()}class ms{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ms.nextInstanceID,ms.nextInstanceID+=1,this.instanceID>0&&Fe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Pf),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new _f({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=rl(r.fetch),this.lock=r.lock||Zi,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Fe()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Nf:this.lock=Zi,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:as()?this.storage=kf:(this.memoryStorage={},this.storage=Xi(this.memoryStorage)):(this.memoryStorage={},this.storage=Xi(this.memoryStorage)),Fe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${el}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=sf(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Fe()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Wh(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return q(s)?{error:s}:{error:new sl("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Xe}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,n,r;try{let o;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Ct(this.storage,this.storageKey)),o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:y},xform:Xe})}else if("phone"in e){const{phone:u,password:h,options:f}=e;o=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Xe})}else throw new Is("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(q(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:a,options:l}=e;s=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Yi})}else if("phone"in e){const{phone:o,password:a,options:l}=e;s=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Yi})}else throw new Is("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ln}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await Ls(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:o,error:a}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Xe});if(await Ds(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ln}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:a})}catch(o){if(q(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:o,nonce:a}=e,l=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Xe}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ln}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,o,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ct(this.storage,this.storageKey));const{error:h}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Is("You must provide either an email or phone number.")}catch(l){if(q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,o;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:Xe});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await Ct(this.storage,this.storageKey)),await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:vf})}catch(o){if(q(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Ye;const{error:r}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:o}=e,{error:a}=await J(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:o}=e,{data:a,error:l}=await J(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Is("You must provide either an email or phone number and a type")}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Ls(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<On:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tt}):await this._useSession(async s=>{var n,r,o;const{data:a,error:l}=s;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ye}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:tt})})}catch(s){if(q(s))return Hh(s)&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:o}=n;if(o)throw o;if(!r.session)throw new Ye;const a=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ct(this.storage,this.storageKey));const{data:d,error:u}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:tt});if(u)throw u;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ye;const s=Date.now()/1e3;let n=s,r=!0,o=null;const{payload:a}=$n(e.access_token);if(a.exp&&(n=a.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(q(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:a,error:l}=s;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ye;const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Fe())throw new Os("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Os(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Gi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Os("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gi("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!o||!l||!a||!d)throw new Os("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=Nt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const y=f-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:x,error:g}=await this._getUser(o);if(g)throw g;const b={provider_token:n,provider_refresh_token:r,access_token:o,expires_in:h,expires_at:f,refresh_token:a,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(q(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Ls(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:o}=s;if(o)return{error:o};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Gh(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=tf(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:o},error:a}=s;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Ct(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(q(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async o=>{var a,l,c,d,u;const{data:h,error:f}=o;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Fe()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(q(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:o,error:a}=s;if(a)throw a;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(q(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await of(async r=>(r>0&&await rf(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xe})),(r,o)=>{const a=200*Math.pow(2,r);return o&&Dn(o)&&Date.now()+a-n<Nt})}catch(n){if(this._debug(s,"error",n),q(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Fe()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Ls(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<On;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${On}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Dn(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Ye;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new yn;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Ye;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(r,"error",o),q(o)){const a={session:null,error:o};return Dn(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await il(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ds(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Fe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Nt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Nt}ms, refresh threshold is ${fr} ticks`),r<=fr&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ol)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await Ct(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);r.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;return o?{data:null,error:o}:await J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(q(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:o,error:a}=s;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await J(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(q(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;if(o)return{data:null,error:o};const{data:a,error:l}=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(s){if(q(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;return o?{data:null,error:o}:await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(q(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:o}=e;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=$n(r.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(a=>a.kid===e);if(n||(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+qh>Date.now()))return n;const{data:r,error:o}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!r.keys||r.keys.length===0)throw new os("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(a=>a.kid===e),!n)throw new os("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};n=m.session.access_token}const{header:r,payload:o,signature:a,raw:{header:l,payload:c}}=$n(n);if(ff(o.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:o,header:r,signature:a},error:null}}const d=mf(r.alg),u=await this.fetchJwk(r.kid,s),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,Zh(`${l}.${c}`)))throw new os("Invalid JWT signature");return{data:{claims:o,header:r,signature:a},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}}ms.nextInstanceID=0;const Af=ms;class Ef extends Af{constructor(e){super(e)}}var Rf=function(t,e,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?o(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Mf{constructor(e,s,n){var r,o,a;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=Dh(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:Ph,realtime:Eh,auth:Object.assign(Object.assign({},Ah),{storageKey:c}),global:Nh},u=$h(n??{},d);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=Oh(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Qu(`${l}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Cu(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new kh(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Rf(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:o,flowType:a,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ef({url:this.authUrl,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:a,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new uh(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const If=(t,e,s)=>new Mf(t,e,s),Of="https://zfkjvbhkroowlyqebvyh.supabase.co",Lf="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpma2p2Ymhrcm9vd2x5cWVidnloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1NTY2NTYsImV4cCI6MjA1ODEzMjY1Nn0.ULHVkpGVQOqMckICZUsdhnPu4TMQYBxLkzZW4eVNOw4",me=If(Of,Lf,{auth:{autoRefreshToken:!0,persistSession:!0},global:{headers:{"X-Client-Info":"sports-quiz-app"}}}),Df=()=>{const t=window.location.hostname;return t.includes("netlify.app")||t.includes("onrender.com")||t==="sportiq.games"||t==="www.sportiq.games"?"https://"+t:window.location.origin},$f=async(t,e,s)=>{const{data:n,error:r}=await me.auth.signUp({email:t,password:e,options:{data:{display_name:s}}});return{data:n,error:r}},Ff=async(t,e)=>{const{data:s,error:n}=await me.auth.signInWithPassword({email:t,password:e});return{data:s,error:n}},Vf=async()=>{const{error:t}=await me.auth.signOut();return{error:t}},Bf=async()=>{const{data:t,error:e}=await me.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${Df()}/auth/callback`}});return{data:t,error:e}},Uf=async()=>{const{data:t,error:e}=await me.auth.getSession();return{data:t,error:e}},qf=t=>me.auth.onAuthStateChange((e,s)=>{t(s)}),ts=new Map,zf=5*60*1e3,$s=new Map,Fs={football:[{id:"fb1",category:"football",question:"Which country won the 2022 FIFA World Cup?",options:["France","Brazil","Argentina","Germany"],correctAnswer:"Argentina"},{id:"fb2",category:"football",question:"Who holds the record for most goals in World Cup history?",options:["Pelé","Miroslav Klose","Ronaldo","Just Fontaine"],correctAnswer:"Miroslav Klose"},{id:"fb3",category:"football",question:"Which team has won the most UEFA Champions League titles?",options:["Real Madrid","AC Milan","Bayern Munich","Liverpool"],correctAnswer:"Real Madrid"},{id:"fb4",category:"football",question:"Which player has won the most Ballon d'Or awards?",options:["Cristiano Ronaldo","Lionel Messi","Michel Platini","Johan Cruyff"],correctAnswer:"Lionel Messi"},{id:"fb5",category:"football",question:"Which club has won the most Premier League titles?",options:["Liverpool","Arsenal","Chelsea","Manchester United"],correctAnswer:"Manchester United"}],basketball:[{id:"bb1",category:"basketball",question:"Which NBA team has won the most championships?",options:["Los Angeles Lakers","Boston Celtics","Chicago Bulls","Golden State Warriors"],correctAnswer:"Boston Celtics"},{id:"bb2",category:"basketball",question:"Who holds the NBA record for most points in a single game?",options:["Michael Jordan","Kobe Bryant","Wilt Chamberlain","LeBron James"],correctAnswer:"Wilt Chamberlain"},{id:"bb3",category:"basketball",question:"Who is the NBA's all-time leading scorer?",options:["Kareem Abdul-Jabbar","LeBron James","Michael Jordan","Karl Malone"],correctAnswer:"LeBron James"},{id:"bb4",category:"basketball",question:"Which player has the most NBA MVP awards?",options:["Michael Jordan","Kareem Abdul-Jabbar","LeBron James","Bill Russell"],correctAnswer:"Kareem Abdul-Jabbar"},{id:"bb5",category:"basketball",question:"How many points is a standard field goal worth in basketball?",options:["1","2","3","4"],correctAnswer:"2"}],tennis:[{id:"tn1",category:"tennis",question:"Who has won the most Grand Slam singles titles in tennis history?",options:["Roger Federer","Rafael Nadal","Novak Djokovic","Serena Williams"],correctAnswer:"Novak Djokovic"},{id:"tn2",category:"tennis",question:"Which Grand Slam tournament is played on clay courts?",options:["Wimbledon","US Open","French Open","Australian Open"],correctAnswer:"French Open"},{id:"tn3",category:"tennis",question:"Who holds the record for most Wimbledon singles titles?",options:["Roger Federer","Novak Djokovic","Pete Sampras","Björn Borg"],correctAnswer:"Roger Federer"},{id:"tn4",category:"tennis",question:'Which of these players is known as the "King of Clay"?',options:["Andy Murray","Roger Federer","Rafael Nadal","Novak Djokovic"],correctAnswer:"Rafael Nadal"},{id:"tn5",category:"tennis",question:"How many Grand Slam singles titles has Serena Williams won?",options:["20","23","25","19"],correctAnswer:"23"}],olympics:[{id:"ol1",category:"olympics",question:"Which city hosted the 2020 Summer Olympics (held in 2021)?",options:["Paris","Tokyo","London","Rio de Janeiro"],correctAnswer:"Tokyo"},{id:"ol2",category:"olympics",question:"Who is the most decorated Olympian of all time?",options:["Usain Bolt","Michael Phelps","Simone Biles","Carl Lewis"],correctAnswer:"Michael Phelps"},{id:"ol3",category:"olympics",question:"Which country has won the most Summer Olympic medals?",options:["Soviet Union","United States","China","Germany"],correctAnswer:"United States"},{id:"ol4",category:"olympics",question:"Which of these sports is NOT in the Summer Olympics?",options:["Archery","Cricket","Skateboarding","Breakdancing"],correctAnswer:"Cricket"},{id:"ol5",category:"olympics",question:"In which year were the first modern Olympic Games held?",options:["1886","1896","1900","1904"],correctAnswer:"1896"}],mixed:[{id:"mx1",category:"mixed",question:"Which sport uses a shuttlecock?",options:["Tennis","Badminton","Cricket","Hockey"],correctAnswer:"Badminton"},{id:"mx2",category:"mixed",question:"In which sport would you perform a slam dunk?",options:["Volleyball","Basketball","Tennis","Football"],correctAnswer:"Basketball"},{id:"mx3",category:"mixed",question:"What is the diameter of a basketball hoop in inches?",options:["16 inches","18 inches","20 inches","24 inches"],correctAnswer:"18 inches"},{id:"mx4",category:"mixed",question:"Which of these sports does NOT use a ball?",options:["Hockey","Polo","Volleyball","Badminton"],correctAnswer:"Badminton"},{id:"mx5",category:"mixed",question:"How many players are there in a standard baseball team?",options:["9","11","5","7"],correctAnswer:"9"}]};function eo(t){if(t==="mixed"){const s=[],n=["football","basketball","tennis","olympics"];for(const r of n){const a=[...Fs[r]].sort(()=>Math.random()-.5);s.push(...a.slice(0,2))}return s.push(...Fs.mixed),s.sort(()=>Math.random()-.5).slice(0,10).map(r=>({...r,category:"mixed"}))}const e=[...Fs[t]];if(e.length<10){const s=10-e.length,n=Object.entries(Fs).filter(([r])=>r!==t).flatMap(([,r])=>r).sort(()=>Math.random()-.5).slice(0,s).map(r=>({...r,category:t}));e.push(...n)}return e.slice(0,10).map(s=>({...s,category:t}))}async function Gf(t){console.log(`Fetching questions for category: ${t}`);const e=`pending_${t}`;if($s.has(e))return console.log("Request already in progress for category:",t),$s.get(e);const s=`questions_${t}`,n=ts.get(s);if(n&&Date.now()-n.timestamp<zf)return console.log("Using cached questions for category:",t),n.data;const r=(async()=>{try{console.log("Fetching questions from Supabase...");let o=me.from("questions").select("*").eq("active",!0);t!=="mixed"&&(o=o.eq("category",t));const{data:a,error:l}=await o;if(l)throw console.error("Supabase query error:",l),l;if(!a||a.length===0){console.warn("No questions found in Supabase, using fallback questions");const d=eo(t);return ts.set(s,{data:d,timestamp:Date.now()}),d}const c=a.map(d=>({id:d.id,category:d.category,question:d.question,options:d.options,correctAnswer:d.correct_answer})).sort(()=>Math.random()-.5).slice(0,10);return ts.set(s,{data:c,timestamp:Date.now()}),c}catch(o){console.error("Error fetching questions:",o);const a=eo(t);return ts.set(s,{data:a,timestamp:Date.now()}),a}finally{$s.delete(e)}})();return $s.set(e,r),r}function al(){ts.clear(),console.log("Question cache cleared")}class Hf extends p.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleRetry=()=>{al(),this.setState({hasError:!1,error:null}),window.location.reload()}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Uncaught error:",e,s)}render(){var e;return this.state.hasError?i.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 max-w-md w-full text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong."}),i.jsx("p",{className:"text-gray-400 mb-6",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred."}),i.jsx("button",{onClick:this.handleRetry,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition-colors",children:"Try Again"})]})}):this.props.children}}const qr=p.createContext({});function zr(t){const e=p.useRef(null);return e.current===null&&(e.current=t()),e.current}const xn=p.createContext(null),Gr=p.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Wf extends p.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Kf({children:t,isPresent:e}){const s=p.useId(),n=p.useRef(null),r=p.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=p.useContext(Gr);return p.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:d}=r.current;if(e||!n.current||!a||!l)return;n.current.dataset.motionPopId=s;const u=document.createElement("style");return o&&(u.nonce=o),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),i.jsx(Wf,{isPresent:e,childRef:n,sizeRef:r,children:p.cloneElement(t,{ref:n})})}const Jf=({children:t,initial:e,isPresent:s,onExitComplete:n,custom:r,presenceAffectsLayout:o,mode:a})=>{const l=zr(Qf),c=p.useId(),d=p.useCallback(h=>{l.set(h,!0);for(const f of l.values())if(!f)return;n&&n()},[l,n]),u=p.useMemo(()=>({id:c,initial:e,isPresent:s,custom:r,onExitComplete:d,register:h=>(l.set(h,!1),()=>l.delete(h))}),o?[Math.random(),d]:[s,d]);return p.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[s]),p.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),a==="popLayout"&&(t=i.jsx(Kf,{isPresent:s,children:t})),i.jsx(xn.Provider,{value:u,children:t})};function Qf(){return new Map}function ll(t=!0){const e=p.useContext(xn);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:r}=e,o=p.useId();p.useEffect(()=>{t&&r(o)},[t]);const a=p.useCallback(()=>t&&n&&n(o),[o,n,t]);return!s&&n?[!1,a]:[!0]}const Vs=t=>t.key||"";function to(t){const e=[];return p.Children.forEach(t,s=>{p.isValidElement(s)&&e.push(s)}),e}const Hr=typeof window<"u",cl=Hr?p.useLayoutEffect:p.useEffect,De=({children:t,custom:e,initial:s=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1})=>{const[l,c]=ll(a),d=p.useMemo(()=>to(t),[t]),u=a&&!l?[]:d.map(Vs),h=p.useRef(!0),f=p.useRef(d),m=zr(()=>new Map),[y,x]=p.useState(d),[g,b]=p.useState(d);cl(()=>{h.current=!1,f.current=d;for(let A=0;A<g.length;A++){const C=Vs(g[A]);u.includes(C)?m.delete(C):m.get(C)!==!0&&m.set(C,!1)}},[g,u.length,u.join("-")]);const w=[];if(d!==y){let A=[...d];for(let C=0;C<g.length;C++){const T=g[C],E=Vs(T);u.includes(E)||(A.splice(C,0,T),w.push(T))}o==="wait"&&w.length&&(A=w),b(to(A)),x(d);return}const{forceRender:_}=p.useContext(qr);return i.jsx(i.Fragment,{children:g.map(A=>{const C=Vs(A),T=a&&!l?!1:d===g||u.includes(C),E=()=>{if(m.has(C))m.set(C,!0);else return;let P=!0;m.forEach(N=>{N||(P=!1)}),P&&(_==null||_(),b(f.current),a&&(c==null||c()),n&&n())};return i.jsx(Jf,{isPresent:T,initial:!h.current||s?void 0:!1,custom:T?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:T?void 0:E,children:A},C)})})},Ne=t=>t;let gr=Ne;function Wr(t){let e;return()=>(e===void 0&&(e=t()),e)}const $t=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n},ze=t=>t*1e3,Ge=t=>t/1e3,Yf={skipAnimations:!1,useManualTiming:!1};function Xf(t){let e=new Set,s=new Set,n=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){o.has(d)&&(c.schedule(d),t()),d(a)}const c={schedule:(d,u=!1,h=!1)=>{const m=h&&n?e:s;return u&&o.add(d),m.has(d)||m.add(d),d},cancel:d=>{s.delete(d),o.delete(d)},process:d=>{if(a=d,n){r=!0;return}n=!0,[e,s]=[s,e],e.forEach(l),e.clear(),n=!1,r&&(r=!1,c.process(d))}};return c}const Bs=["read","resolveKeyframes","update","preRender","render","postRender"],Zf=40;function dl(t,e){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>s=!0,a=Bs.reduce((b,w)=>(b[w]=Xf(o),b),{}),{read:l,resolveKeyframes:c,update:d,preRender:u,render:h,postRender:f}=a,m=()=>{const b=performance.now();s=!1,r.delta=n?1e3/60:Math.max(Math.min(b-r.timestamp,Zf),1),r.timestamp=b,r.isProcessing=!0,l.process(r),c.process(r),d.process(r),u.process(r),h.process(r),f.process(r),r.isProcessing=!1,s&&e&&(n=!1,t(m))},y=()=>{s=!0,n=!0,r.isProcessing||t(m)};return{schedule:Bs.reduce((b,w)=>{const _=a[w];return b[w]=(A,C=!1,T=!1)=>(s||y(),_.schedule(A,C,T)),b},{}),cancel:b=>{for(let w=0;w<Bs.length;w++)a[Bs[w]].cancel(b)},state:r,steps:a}}const{schedule:ne,cancel:rt,state:ge,steps:Fn}=dl(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ne,!0),ul=p.createContext({strict:!1}),so={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ft={};for(const t in so)Ft[t]={isEnabled:e=>so[t].some(s=>!!e[s])};function em(t){for(const e in t)Ft[e]={...Ft[e],...t[e]}}const tm=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ys(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||tm.has(t)}let hl=t=>!Ys(t);function sm(t){t&&(hl=e=>e.startsWith("on")?!Ys(e):t(e))}try{sm(require("@emotion/is-prop-valid").default)}catch{}function nm(t,e,s){const n={};for(const r in t)r==="values"&&typeof t.values=="object"||(hl(r)||s===!0&&Ys(r)||!e&&!Ys(r)||t.draggable&&r.startsWith("onDrag"))&&(n[r]=t[r]);return n}function rm(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...n)=>t(...n);return new Proxy(s,{get:(n,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const vn=p.createContext({});function ps(t){return typeof t=="string"||Array.isArray(t)}function bn(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Kr=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Jr=["initial",...Kr];function wn(t){return bn(t.animate)||Jr.some(e=>ps(t[e]))}function fl(t){return!!(wn(t)||t.variants)}function im(t,e){if(wn(t)){const{initial:s,animate:n}=t;return{initial:s===!1||ps(s)?s:void 0,animate:ps(n)?n:void 0}}return t.inherit!==!1?e:{}}function om(t){const{initial:e,animate:s}=im(t,p.useContext(vn));return p.useMemo(()=>({initial:e,animate:s}),[no(e),no(s)])}function no(t){return Array.isArray(t)?t.join(" "):t}const am=Symbol.for("motionComponentSymbol");function Pt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function lm(t,e,s){return p.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):Pt(s)&&(s.current=n))},[e])}const Qr=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cm="framerAppearId",ml="data-"+Qr(cm),{schedule:Yr,cancel:Jx}=dl(queueMicrotask,!1),pl=p.createContext({});function dm(t,e,s,n,r){var o,a;const{visualElement:l}=p.useContext(vn),c=p.useContext(ul),d=p.useContext(xn),u=p.useContext(Gr).reducedMotion,h=p.useRef(null);n=n||c.renderer,!h.current&&n&&(h.current=n(t,{visualState:e,parent:l,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,m=p.useContext(pl);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&um(h.current,s,r,m);const y=p.useRef(!1);p.useInsertionEffect(()=>{f&&y.current&&f.update(s,d)});const x=s[ml],g=p.useRef(!!x&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,x))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,x)));return cl(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Yr.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),p.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,x)}),g.current=!1))}),f}function um(t,e,s,n){const{layoutId:r,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:d}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:gl(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||l&&Pt(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function gl(t){if(t)return t.options.allowProjection!==!1?t.projection:gl(t.parent)}function hm({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:n,Component:r}){var o,a;t&&em(t);function l(d,u){let h;const f={...p.useContext(Gr),...d,layoutId:fm(d)},{isStatic:m}=f,y=om(d),x=n(d,m);if(!m&&Hr){mm();const g=pm(f);h=g.MeasureLayout,y.visualElement=dm(r,x,f,e,g.ProjectionNode)}return i.jsxs(vn.Provider,{value:y,children:[h&&y.visualElement?i.jsx(h,{visualElement:y.visualElement,...f}):null,s(r,d,lm(x,y.visualElement,u),x,m,y.visualElement)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${(a=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&a!==void 0?a:""})`}`;const c=p.forwardRef(l);return c[am]=r,c}function fm({layoutId:t}){const e=p.useContext(qr).id;return e&&t!==void 0?e+"-"+t:t}function mm(t,e){p.useContext(ul).strict}function pm(t){const{drag:e,layout:s}=Ft;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const gm=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xr(t){return typeof t!="string"||t.includes("-")?!1:!!(gm.indexOf(t)>-1||/[A-Z]/u.test(t))}function ro(t){const e=[{},{}];return t==null||t.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function Zr(t,e,s,n){if(typeof e=="function"){const[r,o]=ro(n);e=e(s!==void 0?s:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=ro(n);e=e(s!==void 0?s:t.custom,r,o)}return e}const yr=t=>Array.isArray(t),ym=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),xm=t=>yr(t)?t[t.length-1]||0:t,ve=t=>!!(t&&t.getVelocity);function Gs(t){const e=ve(t)?t.get():t;return ym(e)?e.toValue():e}function vm({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},n,r,o){const a={latestValues:bm(n,r,o,t),renderState:e()};return s&&(a.onMount=l=>s({props:n,current:l,...a}),a.onUpdate=l=>s(l)),a}const yl=t=>(e,s)=>{const n=p.useContext(vn),r=p.useContext(xn),o=()=>vm(t,e,n,r);return s?o():zr(o)};function bm(t,e,s,n){const r={},o=n(t,{});for(const f in o)r[f]=Gs(o[f]);let{initial:a,animate:l}=t;const c=wn(t),d=fl(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let u=s?s.initial===!1:!1;u=u||a===!1;const h=u?l:a;if(h&&typeof h!="boolean"&&!bn(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const y=Zr(t,f[m]);if(y){const{transitionEnd:x,transition:g,...b}=y;for(const w in b){let _=b[w];if(Array.isArray(_)){const A=u?_.length-1:0;_=_[A]}_!==null&&(r[w]=_)}for(const w in x)r[w]=x[w]}}}return r}const Wt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],St=new Set(Wt),xl=t=>e=>typeof e=="string"&&e.startsWith(t),vl=xl("--"),wm=xl("var(--"),ei=t=>wm(t)?jm.test(t.split("/*")[0].trim()):!1,jm=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bl=(t,e)=>e&&typeof t=="number"?e.transform(t):t,We=(t,e,s)=>s>e?e:s<t?t:s,Kt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gs={...Kt,transform:t=>We(0,1,t)},Us={...Kt,default:1},Ss=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ze=Ss("deg"),Ve=Ss("%"),V=Ss("px"),Sm=Ss("vh"),_m=Ss("vw"),io={...Ve,parse:t=>Ve.parse(t)/100,transform:t=>Ve.transform(t*100)},km={borderWidth:V,borderTopWidth:V,borderRightWidth:V,borderBottomWidth:V,borderLeftWidth:V,borderRadius:V,radius:V,borderTopLeftRadius:V,borderTopRightRadius:V,borderBottomRightRadius:V,borderBottomLeftRadius:V,width:V,maxWidth:V,height:V,maxHeight:V,top:V,right:V,bottom:V,left:V,padding:V,paddingTop:V,paddingRight:V,paddingBottom:V,paddingLeft:V,margin:V,marginTop:V,marginRight:V,marginBottom:V,marginLeft:V,backgroundPositionX:V,backgroundPositionY:V},Cm={rotate:Ze,rotateX:Ze,rotateY:Ze,rotateZ:Ze,scale:Us,scaleX:Us,scaleY:Us,scaleZ:Us,skew:Ze,skewX:Ze,skewY:Ze,distance:V,translateX:V,translateY:V,translateZ:V,x:V,y:V,z:V,perspective:V,transformPerspective:V,opacity:gs,originX:io,originY:io,originZ:V},oo={...Kt,transform:Math.round},ti={...km,...Cm,zIndex:oo,size:V,fillOpacity:gs,strokeOpacity:gs,numOctaves:oo},Tm={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nm=Wt.length;function Pm(t,e,s){let n="",r=!0;for(let o=0;o<Nm;o++){const a=Wt[o],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const d=bl(l,ti[a]);if(!c){r=!1;const u=Tm[a]||a;n+=`${u}(${d}) `}s&&(e[a]=d)}}return n=n.trim(),s?n=s(e,r?"":n):r&&(n="none"),n}function si(t,e,s){const{style:n,vars:r,transformOrigin:o}=t;let a=!1,l=!1;for(const c in e){const d=e[c];if(St.has(c)){a=!0;continue}else if(vl(c)){r[c]=d;continue}else{const u=bl(d,ti[c]);c.startsWith("origin")?(l=!0,o[c]=u):n[c]=u}}if(e.transform||(a||s?n.transform=Pm(e,t.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=o;n.transformOrigin=`${c} ${d} ${u}`}}const Am={offset:"stroke-dashoffset",array:"stroke-dasharray"},Em={offset:"strokeDashoffset",array:"strokeDasharray"};function Rm(t,e,s=1,n=0,r=!0){t.pathLength=1;const o=r?Am:Em;t[o.offset]=V.transform(-n);const a=V.transform(e),l=V.transform(s);t[o.array]=`${a} ${l}`}function ao(t,e,s){return typeof t=="string"?t:V.transform(e+s*t)}function Mm(t,e,s){const n=ao(e,t.x,t.width),r=ao(s,t.y,t.height);return`${n} ${r}`}function ni(t,{attrX:e,attrY:s,attrScale:n,originX:r,originY:o,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...d},u,h){if(si(t,d,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:y}=t;f.transform&&(y&&(m.transform=f.transform),delete f.transform),y&&(r!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=Mm(y,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(f.x=e),s!==void 0&&(f.y=s),n!==void 0&&(f.scale=n),a!==void 0&&Rm(f,a,l,c,!1)}const ri=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),wl=()=>({...ri(),attrs:{}}),ii=t=>typeof t=="string"&&t.toLowerCase()==="svg";function jl(t,{style:e,vars:s},n,r){Object.assign(t.style,e,r&&r.getProjectionStyles(n));for(const o in s)t.style.setProperty(o,s[o])}const Sl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _l(t,e,s,n){jl(t,e,void 0,n);for(const r in e.attrs)t.setAttribute(Sl.has(r)?r:Qr(r),e.attrs[r])}const Xs={};function Im(t){Object.assign(Xs,t)}function kl(t,{layout:e,layoutId:s}){return St.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Xs[t]||t==="opacity")}function oi(t,e,s){var n;const{style:r}=t,o={};for(const a in r)(ve(r[a])||e.style&&ve(e.style[a])||kl(a,t)||((n=s==null?void 0:s.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(o[a]=r[a]);return o}function Cl(t,e,s){const n=oi(t,e,s);for(const r in t)if(ve(t[r])||ve(e[r])){const o=Wt.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=t[r]}return n}function Om(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const lo=["x","y","width","height","cx","cy","r"],Lm={useVisualState:yl({scrapeMotionValuesFromProps:Cl,createRenderState:wl,onUpdate:({props:t,prevProps:e,current:s,renderState:n,latestValues:r})=>{if(!s)return;let o=!!t.drag;if(!o){for(const l in r)if(St.has(l)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let l=0;l<lo.length;l++){const c=lo[l];t[c]!==e[c]&&(a=!0)}a&&ne.read(()=>{Om(s,n),ne.render(()=>{ni(n,r,ii(s.tagName),t.transformTemplate),_l(s,n)})})}})},Dm={useVisualState:yl({scrapeMotionValuesFromProps:oi,createRenderState:ri})};function Tl(t,e,s){for(const n in e)!ve(e[n])&&!kl(n,s)&&(t[n]=e[n])}function $m({transformTemplate:t},e){return p.useMemo(()=>{const s=ri();return si(s,e,t),Object.assign({},s.vars,s.style)},[e])}function Fm(t,e){const s=t.style||{},n={};return Tl(n,s,t),Object.assign(n,$m(t,e)),n}function Vm(t,e){const s={},n=Fm(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}function Bm(t,e,s,n){const r=p.useMemo(()=>{const o=wl();return ni(o,e,ii(n),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Tl(o,t.style,t),r.style={...o,...r.style}}return r}function Um(t=!1){return(s,n,r,{latestValues:o},a)=>{const c=(Xr(s)?Bm:Vm)(n,o,a,s),d=nm(n,typeof s=="string",t),u=s!==p.Fragment?{...d,...c,ref:r}:{},{children:h}=n,f=p.useMemo(()=>ve(h)?h.get():h,[h]);return p.createElement(s,{...u,children:f})}}function qm(t,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...Xr(n)?Lm:Dm,preloadedFeatures:t,useRender:Um(r),createVisualElement:e,Component:n};return hm(a)}}function Nl(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}function jn(t,e,s){const n=t.getProps();return Zr(n,e,s!==void 0?s:n.custom,t)}const zm=Wr(()=>window.ScrollTimeline!==void 0);class Gm{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=s}attachTimeline(e,s){const n=this.animations.map(r=>{if(zm()&&r.attachTimeline)return r.attachTimeline(e);if(typeof s=="function")return s(r)});return()=>{n.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Hm extends Gm{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function ai(t,e){return t?t[e]||t.default||t:void 0}const xr=2e4;function Pl(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<xr;)e+=s,n=t.next(e);return e>=xr?1/0:e}function li(t){return typeof t=="function"}function co(t,e){t.timeline=e,t.onfinish=null}const ci=t=>Array.isArray(t)&&typeof t[0]=="number",Wm={linearEasing:void 0};function Km(t,e){const s=Wr(t);return()=>{var n;return(n=Wm[e])!==null&&n!==void 0?n:s()}}const Zs=Km(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Al=(t,e,s=10)=>{let n="";const r=Math.max(Math.round(e/s),2);for(let o=0;o<r;o++)n+=t($t(0,r-1,o))+", ";return`linear(${n.substring(0,n.length-2)})`};function El(t){return!!(typeof t=="function"&&Zs()||!t||typeof t=="string"&&(t in vr||Zs())||ci(t)||Array.isArray(t)&&t.every(El))}const ss=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,vr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ss([0,.65,.55,1]),circOut:ss([.55,0,1,.45]),backIn:ss([.31,.01,.66,-.59]),backOut:ss([.33,1.53,.69,.99])};function Rl(t,e){if(t)return typeof t=="function"&&Zs()?Al(t,e):ci(t)?ss(t):Array.isArray(t)?t.map(s=>Rl(s,e)||vr.easeOut):vr[t]}const Oe={x:!1,y:!1};function Ml(){return Oe.x||Oe.y}function Jm(t,e,s){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(n=void 0)!==null&&n!==void 0?n:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function Il(t,e){const s=Jm(t),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[s,r,()=>n.abort()]}function uo(t){return e=>{e.pointerType==="touch"||Ml()||t(e)}}function Qm(t,e,s={}){const[n,r,o]=Il(t,s),a=uo(l=>{const{target:c}=l,d=e(l);if(typeof d!="function"||!c)return;const u=uo(h=>{d(h),c.removeEventListener("pointerleave",u)});c.addEventListener("pointerleave",u,r)});return n.forEach(l=>{l.addEventListener("pointerenter",a,r)}),o}const Ol=(t,e)=>e?t===e?!0:Ol(t,e.parentElement):!1,di=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Ym=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Xm(t){return Ym.has(t.tagName)||t.tabIndex!==-1}const ns=new WeakSet;function ho(t){return e=>{e.key==="Enter"&&t(e)}}function Vn(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Zm=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=ho(()=>{if(ns.has(s))return;Vn(s,"down");const r=ho(()=>{Vn(s,"up")}),o=()=>Vn(s,"cancel");s.addEventListener("keyup",r,e),s.addEventListener("blur",o,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function fo(t){return di(t)&&!Ml()}function ep(t,e,s={}){const[n,r,o]=Il(t,s),a=l=>{const c=l.currentTarget;if(!fo(l)||ns.has(c))return;ns.add(c);const d=e(l),u=(m,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!fo(m)||!ns.has(c))&&(ns.delete(c),typeof d=="function"&&d(m,{success:y}))},h=m=>{u(m,s.useGlobalTarget||Ol(c,m.target))},f=m=>{u(m,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",f,r)};return n.forEach(l=>{!Xm(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(s.useGlobalTarget?window:l).addEventListener("pointerdown",a,r),l.addEventListener("focus",d=>Zm(d,r),r)}),o}function tp(t){return t==="x"||t==="y"?Oe[t]?null:(Oe[t]=!0,()=>{Oe[t]=!1}):Oe.x||Oe.y?null:(Oe.x=Oe.y=!0,()=>{Oe.x=Oe.y=!1})}const Ll=new Set(["width","height","top","left","right","bottom",...Wt]);let Hs;function sp(){Hs=void 0}const Be={now:()=>(Hs===void 0&&Be.set(ge.isProcessing||Yf.useManualTiming?ge.timestamp:performance.now()),Hs),set:t=>{Hs=t,queueMicrotask(sp)}};function ui(t,e){t.indexOf(e)===-1&&t.push(e)}function hi(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class fi{constructor(){this.subscriptions=[]}add(e){return ui(this.subscriptions,e),()=>hi(this.subscriptions,e)}notify(e,s,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,s,n);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Dl(t,e){return e?t*(1e3/e):0}const mo=30,np=t=>!isNaN(parseFloat(t));class rp{constructor(e,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{const o=Be.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Be.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=np(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new fi);const n=this.events[e].add(s);return e==="change"?()=>{n(),ne.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Be.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mo)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,mo);return Dl(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ys(t,e){return new rp(t,e)}function ip(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,ys(s))}function op(t,e){const s=jn(t,e);let{transitionEnd:n={},transition:r={},...o}=s||{};o={...o,...n};for(const a in o){const l=xm(o[a]);ip(t,a,l)}}function ap(t){return!!(ve(t)&&t.add)}function br(t,e){const s=t.getValue("willChange");if(ap(s))return s.add(e)}function $l(t){return t.props[ml]}const Fl=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,lp=1e-7,cp=12;function dp(t,e,s,n,r){let o,a,l=0;do a=e+(s-e)/2,o=Fl(a,n,r)-t,o>0?s=a:e=a;while(Math.abs(o)>lp&&++l<cp);return a}function _s(t,e,s,n){if(t===e&&s===n)return Ne;const r=o=>dp(o,0,1,t,s);return o=>o===0||o===1?o:Fl(r(o),e,n)}const Vl=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Bl=t=>e=>1-t(1-e),Ul=_s(.33,1.53,.69,.99),mi=Bl(Ul),ql=Vl(mi),zl=t=>(t*=2)<1?.5*mi(t):.5*(2-Math.pow(2,-10*(t-1))),pi=t=>1-Math.sin(Math.acos(t)),Gl=Bl(pi),Hl=Vl(pi),Wl=t=>/^0[^.\s]+$/u.test(t);function up(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Wl(t):!0}const ls=t=>Math.round(t*1e5)/1e5,gi=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hp(t){return t==null}const fp=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yi=(t,e)=>s=>!!(typeof s=="string"&&fp.test(s)&&s.startsWith(t)||e&&!hp(s)&&Object.prototype.hasOwnProperty.call(s,e)),Kl=(t,e,s)=>n=>{if(typeof n!="string")return n;const[r,o,a,l]=n.match(gi);return{[t]:parseFloat(r),[e]:parseFloat(o),[s]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},mp=t=>We(0,255,t),Bn={...Kt,transform:t=>Math.round(mp(t))},bt={test:yi("rgb","red"),parse:Kl("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+Bn.transform(t)+", "+Bn.transform(e)+", "+Bn.transform(s)+", "+ls(gs.transform(n))+")"};function pp(t){let e="",s="",n="",r="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),r=t.substring(4,5),e+=e,s+=s,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const wr={test:yi("#"),parse:pp,transform:bt.transform},At={test:yi("hsl","hue"),parse:Kl("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+Ve.transform(ls(e))+", "+Ve.transform(ls(s))+", "+ls(gs.transform(n))+")"},ye={test:t=>bt.test(t)||wr.test(t)||At.test(t),parse:t=>bt.test(t)?bt.parse(t):At.test(t)?At.parse(t):wr.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bt.transform(t):At.transform(t)},gp=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function yp(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(gi))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(gp))===null||s===void 0?void 0:s.length)||0)>0}const Jl="number",Ql="color",xp="var",vp="var(",po="${}",bp=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xs(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},r=[];let o=0;const l=e.replace(bp,c=>(ye.test(c)?(n.color.push(o),r.push(Ql),s.push(ye.parse(c))):c.startsWith(vp)?(n.var.push(o),r.push(xp),s.push(c)):(n.number.push(o),r.push(Jl),s.push(parseFloat(c))),++o,po)).split(po);return{values:s,split:l,indexes:n,types:r}}function Yl(t){return xs(t).values}function Xl(t){const{split:e,types:s}=xs(t),n=e.length;return r=>{let o="";for(let a=0;a<n;a++)if(o+=e[a],r[a]!==void 0){const l=s[a];l===Jl?o+=ls(r[a]):l===Ql?o+=ye.transform(r[a]):o+=r[a]}return o}}const wp=t=>typeof t=="number"?0:t;function jp(t){const e=Yl(t);return Xl(t)(e.map(wp))}const it={test:yp,parse:Yl,createTransformer:Xl,getAnimatableNone:jp},Sp=new Set(["brightness","contrast","saturate","opacity"]);function _p(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(gi)||[];if(!n)return t;const r=s.replace(n,"");let o=Sp.has(e)?1:0;return n!==s&&(o*=100),e+"("+o+r+")"}const kp=/\b([a-z-]*)\(.*?\)/gu,jr={...it,getAnimatableNone:t=>{const e=t.match(kp);return e?e.map(_p).join(" "):t}},Cp={...ti,color:ye,backgroundColor:ye,outlineColor:ye,fill:ye,stroke:ye,borderColor:ye,borderTopColor:ye,borderRightColor:ye,borderBottomColor:ye,borderLeftColor:ye,filter:jr,WebkitFilter:jr},xi=t=>Cp[t];function Zl(t,e){let s=xi(t);return s!==jr&&(s=it),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const Tp=new Set(["auto","none","0"]);function Np(t,e,s){let n=0,r;for(;n<t.length&&!r;){const o=t[n];typeof o=="string"&&!Tp.has(o)&&xs(o).values.length&&(r=t[n]),n++}if(r&&s)for(const o of e)t[o]=Zl(s,r)}const go=t=>t===Kt||t===V,yo=(t,e)=>parseFloat(t.split(", ")[e]),xo=(t,e)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/u);if(r)return yo(r[1],e);{const o=n.match(/^matrix\((.+)\)$/u);return o?yo(o[1],t):0}},Pp=new Set(["x","y","z"]),Ap=Wt.filter(t=>!Pp.has(t));function Ep(t){const e=[];return Ap.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const Vt={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:xo(4,13),y:xo(5,14)};Vt.translateX=Vt.x;Vt.translateY=Vt.y;const wt=new Set;let Sr=!1,_r=!1;function ec(){if(_r){const t=Array.from(wt).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const r=Ep(n);r.length&&(s.set(n,r),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=s.get(n);r&&r.forEach(([o,a])=>{var l;(l=n.getValue(o))===null||l===void 0||l.set(a)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}_r=!1,Sr=!1,wt.forEach(t=>t.complete()),wt.clear()}function tc(){wt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_r=!0)})}function Rp(){tc(),ec()}class vi{constructor(e,s,n,r,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(wt.add(this),Sr||(Sr=!0,ne.read(tc),ne.resolveKeyframes(ec))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=r==null?void 0:r.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&s){const c=n.readValue(s,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),r&&a===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),wt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,wt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sc=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Mp=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ip(t){const e=Mp.exec(t);if(!e)return[,];const[,s,n,r]=e;return[`--${s??n}`,r]}function nc(t,e,s=1){const[n,r]=Ip(t);if(!n)return;const o=window.getComputedStyle(e).getPropertyValue(n);if(o){const a=o.trim();return sc(a)?parseFloat(a):a}return ei(r)?nc(r,e,s+1):r}const rc=t=>e=>e.test(t),Op={test:t=>t==="auto",parse:t=>t},ic=[Kt,V,Ve,Ze,_m,Sm,Op],vo=t=>ic.find(rc(t));class oc extends vi{constructor(e,s,n,r,o){super(e,s,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),ei(d))){const u=nc(d,s.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Ll.has(n)||e.length!==2)return;const[r,o]=e,a=vo(r),l=vo(o);if(a!==l)if(go(a)&&go(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let r=0;r<e.length;r++)up(e[r])&&n.push(r);n.length&&Np(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vt[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const r=s[s.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:s,name:n,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const o=s.getValue(n);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=Vt[n](s.measureViewportBox(),window.getComputedStyle(s.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{s.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const bo=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(it.test(t)||t==="0")&&!t.startsWith("url("));function Lp(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function Dp(t,e,s,n){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=bo(r,e),l=bo(o,e);return!a||!l?!1:Lp(t)||(s==="spring"||li(s))&&n}const $p=t=>t!==null;function Sn(t,{repeat:e,repeatType:s="loop"},n){const r=t.filter($p),o=e&&s!=="loop"&&e%2===1?0:r.length-1;return!o||n===void 0?r[o]:n}const Fp=40;class ac{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Be.now(),this.options={autoplay:e,delay:s,type:n,repeat:r,repeatDelay:o,repeatType:a,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Fp?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Rp(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=Be.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:o,delay:a,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!Dp(e,n,r,o))if(a)this.options.duration=0;else{c&&c(Sn(e,this.options,s)),l&&l(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,s);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...u},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ie=(t,e,s)=>t+(e-t)*s;function Un(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function Vp({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let r=0,o=0,a=0;if(!e)r=o=a=s;else{const l=s<.5?s*(1+e):s+e-s*e,c=2*s-l;r=Un(c,l,t+1/3),o=Un(c,l,t),a=Un(c,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}function en(t,e){return s=>s>0?e:t}const qn=(t,e,s)=>{const n=t*t,r=s*(e*e-n)+n;return r<0?0:Math.sqrt(r)},Bp=[wr,bt,At],Up=t=>Bp.find(e=>e.test(t));function wo(t){const e=Up(t);if(!e)return!1;let s=e.parse(t);return e===At&&(s=Vp(s)),s}const jo=(t,e)=>{const s=wo(t),n=wo(e);if(!s||!n)return en(t,e);const r={...s};return o=>(r.red=qn(s.red,n.red,o),r.green=qn(s.green,n.green,o),r.blue=qn(s.blue,n.blue,o),r.alpha=ie(s.alpha,n.alpha,o),bt.transform(r))},qp=(t,e)=>s=>e(t(s)),ks=(...t)=>t.reduce(qp),kr=new Set(["none","hidden"]);function zp(t,e){return kr.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function Gp(t,e){return s=>ie(t,e,s)}function bi(t){return typeof t=="number"?Gp:typeof t=="string"?ei(t)?en:ye.test(t)?jo:Kp:Array.isArray(t)?lc:typeof t=="object"?ye.test(t)?jo:Hp:en}function lc(t,e){const s=[...t],n=s.length,r=t.map((o,a)=>bi(o)(o,e[a]));return o=>{for(let a=0;a<n;a++)s[a]=r[a](o);return s}}function Hp(t,e){const s={...t,...e},n={};for(const r in s)t[r]!==void 0&&e[r]!==void 0&&(n[r]=bi(t[r])(t[r],e[r]));return r=>{for(const o in n)s[o]=n[o](r);return s}}function Wp(t,e){var s;const n=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],l=t.indexes[a][r[a]],c=(s=t.values[l])!==null&&s!==void 0?s:0;n[o]=c,r[a]++}return n}const Kp=(t,e)=>{const s=it.createTransformer(e),n=xs(t),r=xs(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?kr.has(t)&&!r.values.length||kr.has(e)&&!n.values.length?zp(t,e):ks(lc(Wp(n,r),r.values),s):en(t,e)};function cc(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?ie(t,e,s):bi(t)(t,e)}const Jp=5;function dc(t,e,s){const n=Math.max(e-Jp,0);return Dl(s-t(n),e-n)}const oe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zn=.001;function Qp({duration:t=oe.duration,bounce:e=oe.bounce,velocity:s=oe.velocity,mass:n=oe.mass}){let r,o,a=1-e;a=We(oe.minDamping,oe.maxDamping,a),t=We(oe.minDuration,oe.maxDuration,Ge(t)),a<1?(r=d=>{const u=d*a,h=u*t,f=u-s,m=Cr(d,a),y=Math.exp(-h);return zn-f/m*y},o=d=>{const h=d*a*t,f=h*s+s,m=Math.pow(a,2)*Math.pow(d,2)*t,y=Math.exp(-h),x=Cr(Math.pow(d,2),a);return(-r(d)+zn>0?-1:1)*((f-m)*y)/x}):(r=d=>{const u=Math.exp(-d*t),h=(d-s)*t+1;return-zn+u*h},o=d=>{const u=Math.exp(-d*t),h=(s-d)*(t*t);return u*h});const l=5/t,c=Xp(r,o,l);if(t=ze(t),isNaN(c))return{stiffness:oe.stiffness,damping:oe.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:a*2*Math.sqrt(n*d),duration:t}}}const Yp=12;function Xp(t,e,s){let n=s;for(let r=1;r<Yp;r++)n=n-t(n)/e(n);return n}function Cr(t,e){return t*Math.sqrt(1-e*e)}const Zp=["duration","bounce"],eg=["stiffness","damping","mass"];function So(t,e){return e.some(s=>t[s]!==void 0)}function tg(t){let e={velocity:oe.velocity,stiffness:oe.stiffness,damping:oe.damping,mass:oe.mass,isResolvedFromDuration:!1,...t};if(!So(t,eg)&&So(t,Zp))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),r=n*n,o=2*We(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:oe.mass,stiffness:r,damping:o}}else{const s=Qp(t);e={...e,...s,mass:oe.mass},e.isResolvedFromDuration=!0}return e}function uc(t=oe.visualDuration,e=oe.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:r}=s;const o=s.keyframes[0],a=s.keyframes[s.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:d,mass:u,duration:h,velocity:f,isResolvedFromDuration:m}=tg({...s,velocity:-Ge(s.velocity||0)}),y=f||0,x=d/(2*Math.sqrt(c*u)),g=a-o,b=Ge(Math.sqrt(c/u)),w=Math.abs(g)<5;n||(n=w?oe.restSpeed.granular:oe.restSpeed.default),r||(r=w?oe.restDelta.granular:oe.restDelta.default);let _;if(x<1){const C=Cr(b,x);_=T=>{const E=Math.exp(-x*b*T);return a-E*((y+x*b*g)/C*Math.sin(C*T)+g*Math.cos(C*T))}}else if(x===1)_=C=>a-Math.exp(-b*C)*(g+(y+b*g)*C);else{const C=b*Math.sqrt(x*x-1);_=T=>{const E=Math.exp(-x*b*T),P=Math.min(C*T,300);return a-E*((y+x*b*g)*Math.sinh(P)+C*g*Math.cosh(P))/C}}const A={calculatedDuration:m&&h||null,next:C=>{const T=_(C);if(m)l.done=C>=h;else{let E=0;x<1&&(E=C===0?ze(y):dc(_,C,T));const P=Math.abs(E)<=n,N=Math.abs(a-T)<=r;l.done=P&&N}return l.value=l.done?a:T,l},toString:()=>{const C=Math.min(Pl(A),xr),T=Al(E=>A.next(C*E).value,C,30);return C+"ms "+T}};return A}function _o({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},m=P=>l!==void 0&&P<l||c!==void 0&&P>c,y=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let x=s*e;const g=h+x,b=a===void 0?g:a(g);b!==g&&(x=b-h);const w=P=>-x*Math.exp(-P/n),_=P=>b+w(P),A=P=>{const N=w(P),I=_(P);f.done=Math.abs(N)<=d,f.value=f.done?b:I};let C,T;const E=P=>{m(f.value)&&(C=P,T=uc({keyframes:[f.value,y(f.value)],velocity:dc(_,P,f.value),damping:r,stiffness:o,restDelta:d,restSpeed:u}))};return E(0),{calculatedDuration:null,next:P=>{let N=!1;return!T&&C===void 0&&(N=!0,A(P),E(P)),C!==void 0&&P>=C?T.next(P-C):(!N&&A(P),f)}}}const sg=_s(.42,0,1,1),ng=_s(0,0,.58,1),hc=_s(.42,0,.58,1),rg=t=>Array.isArray(t)&&typeof t[0]!="number",ko={linear:Ne,easeIn:sg,easeInOut:hc,easeOut:ng,circIn:pi,circInOut:Hl,circOut:Gl,backIn:mi,backInOut:ql,backOut:Ul,anticipate:zl},Co=t=>{if(ci(t)){gr(t.length===4);const[e,s,n,r]=t;return _s(e,s,n,r)}else if(typeof t=="string")return gr(ko[t]!==void 0),ko[t];return t};function ig(t,e,s){const n=[],r=s||cc,o=t.length-1;for(let a=0;a<o;a++){let l=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Ne:e;l=ks(c,l)}n.push(l)}return n}function og(t,e,{clamp:s=!0,ease:n,mixer:r}={}){const o=t.length;if(gr(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=ig(e,n,r),c=l.length,d=u=>{if(a&&u<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=$t(t[h],t[h+1],u);return l[h](f)};return s?u=>d(We(t[0],t[o-1],u)):d}function ag(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const r=$t(0,e,n);t.push(ie(s,1,r))}}function lg(t){const e=[0];return ag(e,t.length-1),e}function cg(t,e){return t.map(s=>s*e)}function dg(t,e){return t.map(()=>e||hc).splice(0,t.length-1)}function tn({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const r=rg(n)?n.map(Co):Co(n),o={done:!1,value:e[0]},a=cg(s&&s.length===e.length?s:lg(e),t),l=og(a,e,{ease:Array.isArray(r)?r:dg(e,r)});return{calculatedDuration:t,next:c=>(o.value=l(c),o.done=c>=t,o)}}const ug=t=>{const e=({timestamp:s})=>t(s);return{start:()=>ne.update(e,!0),stop:()=>rt(e),now:()=>ge.isProcessing?ge.timestamp:Be.now()}},hg={decay:_o,inertia:_o,tween:tn,keyframes:tn,spring:uc},fg=t=>t/100;class wi extends ac{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:s,motionValue:n,element:r,keyframes:o}=this.options,a=(r==null?void 0:r.KeyframeResolver)||vi,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new a(o,l,s,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=this.options,l=li(s)?s:hg[s]||tn;let c,d;l!==tn&&typeof e[0]!="number"&&(c=ks(fg,cc(e[0],e[1])),e=[0,100]);const u=l({...this.options,keyframes:e});o==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=Pl(u));const{calculatedDuration:h}=u,f=h+r,m=f*(n+1)-r;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:n}=this;if(!n){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:a,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:h}=n;if(this.startTime===null)return o.next(0);const{delay:f,repeat:m,repeatType:y,repeatDelay:x,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-f*(this.speed>=0?1:-1),w=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let _=this.currentTime,A=o;if(m){const P=Math.min(this.currentTime,u)/h;let N=Math.floor(P),I=P%1;!I&&P>=1&&(I=1),I===1&&N--,N=Math.min(N,m+1),!!(N%2)&&(y==="reverse"?(I=1-I,x&&(I-=x/h)):y==="mirror"&&(A=a)),_=We(0,1,I)*h}const C=w?{done:!1,value:c[0]}:A.next(_);l&&(C.value=l(C.value));let{done:T}=C;!w&&d!==null&&(T=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return E&&r!==void 0&&(C.value=Sn(c,this.options,r)),g&&g(C.value),E&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Ge(e.calculatedDuration):0}get time(){return Ge(this.currentTime)}set time(e){e=ze(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Ge(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=ug,onPlay:s,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),s&&s();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const mg=new Set(["opacity","clipPath","filter","transform"]);function pg(t,e,s,{delay:n=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:l="easeInOut",times:c}={}){const d={[e]:s};c&&(d.offset=c);const u=Rl(l,r);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:n,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const gg=Wr(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sn=10,yg=2e4;function xg(t){return li(t.type)||t.type==="spring"||!El(t.ease)}function vg(t,e){const s=new wi({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const r=[];let o=0;for(;!n.done&&o<yg;)n=s.sample(o),r.push(n.value),o+=sn;return{times:void 0,keyframes:r,duration:o-sn,ease:"linear"}}const fc={anticipate:zl,backInOut:ql,circInOut:Hl};function bg(t){return t in fc}class To extends ac{constructor(e){super(e);const{name:s,motionValue:n,element:r,keyframes:o}=this.options;this.resolver=new oc(o,(a,l)=>this.onKeyframesResolved(a,l),s,n,r),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:n=300,times:r,ease:o,type:a,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof o=="string"&&Zs()&&bg(o)&&(o=fc[o]),xg(this.options)){const{onComplete:h,onUpdate:f,motionValue:m,element:y,...x}=this.options,g=vg(e,x);e=g.keyframes,e.length===1&&(e[1]=e[0]),n=g.duration,r=g.times,o=g.ease,a="keyframes"}const u=pg(l.owner.current,c,e,{...this.options,duration:n,times:r,ease:o});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(co(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;l.set(Sn(e,this.options,s)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return Ge(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return Ge(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.currentTime=ze(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return Ne;const{animation:n}=s;co(n,e)}return Ne}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:n,duration:r,type:o,ease:a,times:l}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:h,element:f,...m}=this.options,y=new wi({...m,keyframes:n,duration:r,type:o,ease:a,times:l,isGenerator:!0}),x=ze(this.time);d.setWithVelocity(y.sample(x-sn).value,y.sample(x).value,sn)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:n,repeatDelay:r,repeatType:o,damping:a,type:l}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=s.owner.getProps();return gg()&&n&&mg.has(n)&&!c&&!d&&!r&&o!=="mirror"&&a!==0&&l!=="inertia"}}const wg={type:"spring",stiffness:500,damping:25,restSpeed:10},jg=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Sg={type:"keyframes",duration:.8},_g={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kg=(t,{keyframes:e})=>e.length>2?Sg:St.has(t)?t.startsWith("scale")?jg(e[1]):wg:_g;function Cg({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const ji=(t,e,s,n={},r,o)=>a=>{const l=ai(n,t)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-ze(c);let u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:r};Cg(l)||(u={...u,...kg(t,u)}),u.duration&&(u.duration=ze(u.duration)),u.repeatDelay&&(u.repeatDelay=ze(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!o&&e.get()!==void 0){const f=Sn(u.keyframes,l);if(f!==void 0)return ne.update(()=>{u.onUpdate(f),u.onComplete()}),new Hm([])}return!o&&To.supports(u)?new To(u):new wi(u)};function Tg({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function mc(t,e,{delay:s=0,transitionOverride:n,type:r}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:l,...c}=e;n&&(a=n);const d=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const h in c){const f=t.getValue(h,(o=t.latestValues[h])!==null&&o!==void 0?o:null),m=c[h];if(m===void 0||u&&Tg(u,h))continue;const y={delay:s,...ai(a||{},h)};let x=!1;if(window.MotionHandoffAnimation){const b=$l(t);if(b){const w=window.MotionHandoffAnimation(b,h,ne);w!==null&&(y.startTime=w,x=!0)}}br(t,h),f.start(ji(h,f,m,t.shouldReduceMotion&&Ll.has(h)?{type:!1}:y,t,x));const g=f.animation;g&&d.push(g)}return l&&Promise.all(d).then(()=>{ne.update(()=>{l&&op(t,l)})}),d}function Tr(t,e,s={}){var n;const r=jn(t,e,s.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(o=s.transitionOverride);const a=r?()=>Promise.all(mc(t,r,s)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=o;return Ng(t,e,u+d,h,f,s)}:()=>Promise.resolve(),{when:c}=o;if(c){const[d,u]=c==="beforeChildren"?[a,l]:[l,a];return d().then(()=>u())}else return Promise.all([a(),l(s.delay)])}function Ng(t,e,s=0,n=0,r=1,o){const a=[],l=(t.variantChildren.size-1)*n,c=r===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(t.variantChildren).sort(Pg).forEach((d,u)=>{d.notify("AnimationStart",e),a.push(Tr(d,e,{...o,delay:s+c(u)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function Pg(t,e){return t.sortNodePosition(e)}function Ag(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(o=>Tr(t,o,s));n=Promise.all(r)}else if(typeof e=="string")n=Tr(t,e,s);else{const r=typeof e=="function"?jn(t,e,s.custom):e;n=Promise.all(mc(t,r,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}const Eg=Jr.length;function pc(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?pc(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<Eg;s++){const n=Jr[s],r=t.props[n];(ps(r)||r===!1)&&(e[n]=r)}return e}const Rg=[...Kr].reverse(),Mg=Kr.length;function Ig(t){return e=>Promise.all(e.map(({animation:s,options:n})=>Ag(t,s,n)))}function Og(t){let e=Ig(t),s=No(),n=!0;const r=c=>(d,u)=>{var h;const f=jn(t,u,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:y,...x}=f;d={...d,...x,...y}}return d};function o(c){e=c(t)}function a(c){const{props:d}=t,u=pc(t.parent)||{},h=[],f=new Set;let m={},y=1/0;for(let g=0;g<Mg;g++){const b=Rg[g],w=s[b],_=d[b]!==void 0?d[b]:u[b],A=ps(_),C=b===c?w.isActive:null;C===!1&&(y=g);let T=_===u[b]&&_!==d[b]&&A;if(T&&n&&t.manuallyAnimateOnMount&&(T=!1),w.protectedKeys={...m},!w.isActive&&C===null||!_&&!w.prevProp||bn(_)||typeof _=="boolean")continue;const E=Lg(w.prevProp,_);let P=E||b===c&&w.isActive&&!T&&A||g>y&&A,N=!1;const I=Array.isArray(_)?_:[_];let z=I.reduce(r(b),{});C===!1&&(z={});const{prevResolvedValues:de={}}=w,he={...de,...z},X=Q=>{P=!0,f.has(Q)&&(N=!0,f.delete(Q)),w.needsAnimating[Q]=!0;const ee=t.getValue(Q);ee&&(ee.liveStyle=!1)};for(const Q in he){const ee=z[Q],Y=de[Q];if(m.hasOwnProperty(Q))continue;let j=!1;yr(ee)&&yr(Y)?j=!Nl(ee,Y):j=ee!==Y,j?ee!=null?X(Q):f.add(Q):ee!==void 0&&f.has(Q)?X(Q):w.protectedKeys[Q]=!0}w.prevProp=_,w.prevResolvedValues=z,w.isActive&&(m={...m,...z}),n&&t.blockInitialAnimation&&(P=!1),P&&(!(T&&E)||N)&&h.push(...I.map(Q=>({animation:Q,options:{type:b}})))}if(f.size){const g={};f.forEach(b=>{const w=t.getBaseTarget(b),_=t.getValue(b);_&&(_.liveStyle=!0),g[b]=w??null}),h.push({animation:g})}let x=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),n=!1,x?e(h):Promise.resolve()}function l(c,d){var u;if(s[c].isActive===d)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(c,d)}),s[c].isActive=d;const h=a(c);for(const f in s)s[f].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>s,reset:()=>{s=No(),n=!0}}}function Lg(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Nl(e,t):!1}function pt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function No(){return{animate:pt(!0),whileInView:pt(),whileHover:pt(),whileTap:pt(),whileDrag:pt(),whileFocus:pt(),exit:pt()}}class dt{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Dg extends dt{constructor(e){super(e),e.animationState||(e.animationState=Og(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bn(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let $g=0;class Fg extends dt{constructor(){super(...arguments),this.id=$g++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);s&&!e&&r.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Vg={animation:{Feature:Dg},exit:{Feature:Fg}};function vs(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function Cs(t){return{point:{x:t.pageX,y:t.pageY}}}const Bg=t=>e=>di(e)&&t(e,Cs(e));function cs(t,e,s,n){return vs(t,e,Bg(s),n)}const Po=(t,e)=>Math.abs(t-e);function Ug(t,e){const s=Po(t.x,e.x),n=Po(t.y,e.y);return Math.sqrt(s**2+n**2)}class gc{constructor(e,s,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Hn(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Ug(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:y}=h,{timestamp:x}=ge;this.history.push({...y,timestamp:x});const{onStart:g,onMove:b}=this.handlers;f||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Gn(f,this.transformPagePoint),ne.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Hn(h.type==="pointercancel"?this.lastMoveEventInfo:Gn(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,g),y&&y(h,g)},!di(e))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=n,this.contextWindow=r||window;const a=Cs(e),l=Gn(a,this.transformPagePoint),{point:c}=l,{timestamp:d}=ge;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=s;u&&u(e,Hn(l,this.history)),this.removeListeners=ks(cs(this.contextWindow,"pointermove",this.handlePointerMove),cs(this.contextWindow,"pointerup",this.handlePointerUp),cs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rt(this.updatePoint)}}function Gn(t,e){return e?{point:e(t.point)}:t}function Ao(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Hn({point:t},e){return{point:t,delta:Ao(t,yc(e)),offset:Ao(t,qg(e)),velocity:zg(e,.1)}}function qg(t){return t[0]}function yc(t){return t[t.length-1]}function zg(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const r=yc(t);for(;s>=0&&(n=t[s],!(r.timestamp-n.timestamp>ze(e)));)s--;if(!n)return{x:0,y:0};const o=Ge(r.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-n.x)/o,y:(r.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const xc=1e-4,Gg=1-xc,Hg=1+xc,vc=.01,Wg=0-vc,Kg=0+vc;function Pe(t){return t.max-t.min}function Jg(t,e,s){return Math.abs(t-e)<=s}function Eo(t,e,s,n=.5){t.origin=n,t.originPoint=ie(e.min,e.max,t.origin),t.scale=Pe(s)/Pe(e),t.translate=ie(s.min,s.max,t.origin)-t.originPoint,(t.scale>=Gg&&t.scale<=Hg||isNaN(t.scale))&&(t.scale=1),(t.translate>=Wg&&t.translate<=Kg||isNaN(t.translate))&&(t.translate=0)}function ds(t,e,s,n){Eo(t.x,e.x,s.x,n?n.originX:void 0),Eo(t.y,e.y,s.y,n?n.originY:void 0)}function Ro(t,e,s){t.min=s.min+e.min,t.max=t.min+Pe(e)}function Qg(t,e,s){Ro(t.x,e.x,s.x),Ro(t.y,e.y,s.y)}function Mo(t,e,s){t.min=e.min-s.min,t.max=t.min+Pe(e)}function us(t,e,s){Mo(t.x,e.x,s.x),Mo(t.y,e.y,s.y)}function Yg(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?ie(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?ie(s,t,n.max):Math.min(t,s)),t}function Io(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function Xg(t,{top:e,left:s,bottom:n,right:r}){return{x:Io(t.x,s,r),y:Io(t.y,e,n)}}function Oo(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function Zg(t,e){return{x:Oo(t.x,e.x),y:Oo(t.y,e.y)}}function e0(t,e){let s=.5;const n=Pe(t),r=Pe(e);return r>n?s=$t(e.min,e.max-n,t.min):n>r&&(s=$t(t.min,t.max-r,e.min)),We(0,1,s)}function t0(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Nr=.35;function s0(t=Nr){return t===!1?t=0:t===!0&&(t=Nr),{x:Lo(t,"left","right"),y:Lo(t,"top","bottom")}}function Lo(t,e,s){return{min:Do(t,e),max:Do(t,s)}}function Do(t,e){return typeof t=="number"?t:t[e]||0}const $o=()=>({translate:0,scale:1,origin:0,originPoint:0}),Et=()=>({x:$o(),y:$o()}),Fo=()=>({min:0,max:0}),le=()=>({x:Fo(),y:Fo()});function Ee(t){return[t("x"),t("y")]}function bc({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function n0({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function r0(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Wn(t){return t===void 0||t===1}function Pr({scale:t,scaleX:e,scaleY:s}){return!Wn(t)||!Wn(e)||!Wn(s)}function yt(t){return Pr(t)||wc(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wc(t){return Vo(t.x)||Vo(t.y)}function Vo(t){return t&&t!=="0%"}function nn(t,e,s){const n=t-s,r=e*n;return s+r}function Bo(t,e,s,n,r){return r!==void 0&&(t=nn(t,r,n)),nn(t,s,n)+e}function Ar(t,e=0,s=1,n,r){t.min=Bo(t.min,e,s,n,r),t.max=Bo(t.max,e,s,n,r)}function jc(t,{x:e,y:s}){Ar(t.x,e.translate,e.scale,e.originPoint),Ar(t.y,s.translate,s.scale,s.originPoint)}const Uo=.999999999999,qo=1.0000000000001;function i0(t,e,s,n=!1){const r=s.length;if(!r)return;e.x=e.y=1;let o,a;for(let l=0;l<r;l++){o=s[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Mt(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,jc(t,a)),n&&yt(o.latestValues)&&Mt(t,o.latestValues))}e.x<qo&&e.x>Uo&&(e.x=1),e.y<qo&&e.y>Uo&&(e.y=1)}function Rt(t,e){t.min=t.min+e,t.max=t.max+e}function zo(t,e,s,n,r=.5){const o=ie(t.min,t.max,r);Ar(t,e,s,o,n)}function Mt(t,e){zo(t.x,e.x,e.scaleX,e.scale,e.originX),zo(t.y,e.y,e.scaleY,e.scale,e.originY)}function Sc(t,e){return bc(r0(t.getBoundingClientRect(),e))}function o0(t,e,s){const n=Sc(t,s),{scroll:r}=e;return r&&(Rt(n.x,r.offset.x),Rt(n.y,r.offset.y)),n}const _c=({current:t})=>t?t.ownerDocument.defaultView:null,a0=new WeakMap;class l0{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=le(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Cs(u).point)},o=(u,h)=>{const{drag:f,dragPropagation:m,onDragStart:y}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tp(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ee(g=>{let b=this.getAxisMotionValue(g).get()||0;if(Ve.test(b)){const{projection:w}=this.visualElement;if(w&&w.layout){const _=w.layout.layoutBox[g];_&&(b=Pe(_)*(parseFloat(b)/100))}}this.originPoint[g]=b}),y&&ne.postRender(()=>y(u,h)),br(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(u,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:y,onDrag:x}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:g}=h;if(m&&this.currentDirection===null){this.currentDirection=c0(g),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),x&&x(u,h)},l=(u,h)=>this.stop(u,h),c=()=>Ee(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new gc(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:_c(this.visualElement)})}stop(e,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=s;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&ne.postRender(()=>o(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:r}=this.getProps();if(!n||!qs(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Yg(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;s&&Pt(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=Xg(r.layoutBox,s):this.constraints=!1,this.elastic=s0(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ee(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=t0(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Pt(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=o0(n,r.root,this.visualElement.getTransformPagePoint());let a=Zg(r.layout.layoutBox,o);if(s){const l=s(n0(a));this.hasMutatedConstraints=!!l,l&&(a=bc(l))}return a}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Ee(u=>{if(!qs(u,s,this.currentDirection))return;let h=c&&c[u]||{};a&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:n?e[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(d).then(l)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return br(this.visualElement,e),n.start(ji(e,n,0,s,this.visualElement,!1))}stopAnimation(){Ee(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ee(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[s];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ee(s=>{const{drag:n}=this.getProps();if(!qs(s,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(s);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[s];o.set(e[s]-ie(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Pt(s)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ee(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();r[a]=e0({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ee(a=>{if(!qs(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];l.set(ie(c,d,r[a]))})}addListeners(){if(!this.visualElement.current)return;a0.set(this.visualElement,this);const e=this.visualElement.current,s=cs(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Pt(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ne.read(n);const a=vs(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ee(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{a(),s(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Nr,dragMomentum:l=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function qs(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function c0(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class d0 extends dt{constructor(e){super(e),this.removeGroupControls=Ne,this.removeListeners=Ne,this.controls=new l0(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ne}unmount(){this.removeGroupControls(),this.removeListeners()}}const Go=t=>(e,s)=>{t&&ne.postRender(()=>t(e,s))};class u0 extends dt{constructor(){super(...arguments),this.removePointerDownListener=Ne}onPointerDown(e){this.session=new gc(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_c(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Go(e),onStart:Go(s),onMove:n,onEnd:(o,a)=>{delete this.session,r&&ne.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=cs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ws={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ho(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yt={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(V.test(t))t=parseFloat(t);else return t;const s=Ho(t,e.target.x),n=Ho(t,e.target.y);return`${s}% ${n}%`}},h0={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,r=it.parse(t);if(r.length>5)return n;const o=it.createTransformer(t),a=typeof r[0]!="number"?1:0,l=s.x.scale*e.x,c=s.y.scale*e.y;r[0+a]/=l,r[1+a]/=c;const d=ie(l,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=d),typeof r[3+a]=="number"&&(r[3+a]/=d),o(r)}};class f0 extends p.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=e;Im(m0),o&&(s.group&&s.group.add(o),n&&n.register&&r&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ws.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:r,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==s||s===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||ne.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Yr.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kc(t){const[e,s]=ll(),n=p.useContext(qr);return i.jsx(f0,{...t,layoutGroup:n,switchLayoutGroup:p.useContext(pl),isPresent:e,safeToRemove:s})}const m0={borderRadius:{...Yt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yt,borderTopRightRadius:Yt,borderBottomLeftRadius:Yt,borderBottomRightRadius:Yt,boxShadow:h0};function p0(t,e,s){const n=ve(t)?t:ys(t);return n.start(ji("",n,e,s)),n.animation}function g0(t){return t instanceof SVGElement&&t.tagName!=="svg"}const y0=(t,e)=>t.depth-e.depth;class x0{constructor(){this.children=[],this.isDirty=!1}add(e){ui(this.children,e),this.isDirty=!0}remove(e){hi(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(y0),this.isDirty=!1,this.children.forEach(e)}}function v0(t,e){const s=Be.now(),n=({timestamp:r})=>{const o=r-s;o>=e&&(rt(n),t(o-e))};return ne.read(n,!0),()=>rt(n)}const Cc=["TopLeft","TopRight","BottomLeft","BottomRight"],b0=Cc.length,Wo=t=>typeof t=="string"?parseFloat(t):t,Ko=t=>typeof t=="number"||V.test(t);function w0(t,e,s,n,r,o){r?(t.opacity=ie(0,s.opacity!==void 0?s.opacity:1,j0(n)),t.opacityExit=ie(e.opacity!==void 0?e.opacity:1,0,S0(n))):o&&(t.opacity=ie(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let a=0;a<b0;a++){const l=`border${Cc[a]}Radius`;let c=Jo(e,l),d=Jo(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Ko(c)===Ko(d)?(t[l]=Math.max(ie(Wo(c),Wo(d),n),0),(Ve.test(d)||Ve.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||s.rotate)&&(t.rotate=ie(e.rotate||0,s.rotate||0,n))}function Jo(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const j0=Tc(0,.5,Gl),S0=Tc(.5,.95,Ne);function Tc(t,e,s){return n=>n<t?0:n>e?1:s($t(t,e,n))}function Qo(t,e){t.min=e.min,t.max=e.max}function Ae(t,e){Qo(t.x,e.x),Qo(t.y,e.y)}function Yo(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Xo(t,e,s,n,r){return t-=e,t=nn(t,1/s,n),r!==void 0&&(t=nn(t,1/r,n)),t}function _0(t,e=0,s=1,n=.5,r,o=t,a=t){if(Ve.test(e)&&(e=parseFloat(e),e=ie(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=ie(o.min,o.max,n);t===o&&(l-=e),t.min=Xo(t.min,e,s,l,r),t.max=Xo(t.max,e,s,l,r)}function Zo(t,e,[s,n,r],o,a){_0(t,e[s],e[n],e[r],e.scale,o,a)}const k0=["x","scaleX","originX"],C0=["y","scaleY","originY"];function ea(t,e,s,n){Zo(t.x,e,k0,s?s.x:void 0,n?n.x:void 0),Zo(t.y,e,C0,s?s.y:void 0,n?n.y:void 0)}function ta(t){return t.translate===0&&t.scale===1}function Nc(t){return ta(t.x)&&ta(t.y)}function sa(t,e){return t.min===e.min&&t.max===e.max}function T0(t,e){return sa(t.x,e.x)&&sa(t.y,e.y)}function na(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Pc(t,e){return na(t.x,e.x)&&na(t.y,e.y)}function ra(t){return Pe(t.x)/Pe(t.y)}function ia(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class N0{constructor(){this.members=[]}add(e){ui(this.members,e),e.scheduleRender()}remove(e){if(hi(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(r=>e===r);if(s===0)return!1;let n;for(let r=s;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function P0(t,e,s){let n="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=(s==null?void 0:s.z)||0;if((r||o||a)&&(n=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:f,skewX:m,skewY:y}=s;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),m&&(n+=`skewX(${m}deg) `),y&&(n+=`skewY(${y}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const xt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},rs=typeof window<"u"&&window.MotionDebug!==void 0,Kn=["","X","Y","Z"],A0={visibility:"hidden"},oa=1e3;let E0=0;function Jn(t,e,s,n){const{latestValues:r}=e;r[t]&&(s[t]=r[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Ac(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=$l(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",ne,!(r||o))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Ac(n)}function Ec({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(a={},l=e==null?void 0:e()){this.id=E0++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,rs&&(xt.totalNodes=xt.resolvedTargetDeltas=xt.recalculatedProjection=0),this.nodes.forEach(I0),this.nodes.forEach(F0),this.nodes.forEach(V0),this.nodes.forEach(O0),rs&&window.MotionDebug.record(xt)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new x0)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new fi),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=g0(a),this.instance=a;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=v0(f,250),Ws.hasAnimatedSinceResize&&(Ws.hasAnimatedSinceResize=!1,this.nodes.forEach(la))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||G0,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=u.getProps(),w=!this.targetLayout||!Pc(this.targetLayout,y)||m,_=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,_);const A={...ai(x,"layout"),onPlay:g,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else f||la(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,rt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(B0),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ac(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aa);return}this.isUpdating||this.nodes.forEach(D0),this.isUpdating=!1,this.nodes.forEach($0),this.nodes.forEach(R0),this.nodes.forEach(M0),this.clearAllSnapshots();const l=Be.now();ge.delta=We(0,1e3/60,l-ge.timestamp),ge.timestamp=l,ge.isProcessing=!0,Fn.update.process(ge),Fn.preRender.process(ge),Fn.render.process(ge),ge.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(L0),this.sharedNodes.forEach(U0)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Nc(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;a&&(l||yt(this.latestValues)||u)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),H0(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:l}=this.options;if(!l)return le();const c=l.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(W0))){const{scroll:u}=this.root;u&&(Rt(c.x,u.offset.x),Rt(c.y,u.offset.y))}return c}removeElementScroll(a){var l;const c=le();if(Ae(c,a),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ae(c,a),Rt(c.x,h.offset.x),Rt(c.y,h.offset.y))}return c}applyTransform(a,l=!1){const c=le();Ae(c,a);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Mt(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),yt(u.latestValues)&&Mt(c,u.latestValues)}return yt(this.latestValues)&&Mt(c,this.latestValues),c}removeTransform(a){const l=le();Ae(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!yt(d.latestValues))continue;Pr(d.latestValues)&&d.updateSnapshot();const u=le(),h=d.measurePageBox();Ae(u,h),ea(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return yt(this.latestValues)&&ea(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ge.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=ge.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=le(),this.relativeTargetOrigin=le(),us(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ae(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=le(),this.targetWithTransforms=le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qg(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ae(this.target,this.layout.layoutBox),jc(this.target,this.targetDelta)):Ae(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=le(),this.relativeTargetOrigin=le(),us(this.relativeTargetOrigin,this.target,m.target),Ae(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}rs&&xt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Pr(this.parent.latestValues)||wc(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ge.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Ae(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;i0(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=le());const{target:y}=l;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Yo(this.prevProjectionDelta.x,this.projectionDelta.x),Yo(this.prevProjectionDelta.y,this.projectionDelta.y)),ds(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!ia(this.projectionDelta.x,this.prevProjectionDelta.x)||!ia(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),rs&&xt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Et(),this.projectionDelta=Et(),this.projectionDeltaWithTransform=Et()}setAnimationOrigin(a,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Et();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=le(),m=c?c.source:void 0,y=this.layout?this.layout.source:void 0,x=m!==y,g=this.getStack(),b=!g||g.members.length<=1,w=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(z0));this.animationProgress=0;let _;this.mixTargetDelta=A=>{const C=A/1e3;ca(h.x,a.x,C),ca(h.y,a.y,C),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(us(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),q0(this.relativeTarget,this.relativeTargetOrigin,f,C),_&&T0(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=le()),Ae(_,this.relativeTarget)),x&&(this.animationValues=u,w0(u,d,this.latestValues,C,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(rt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ne.update(()=>{Ws.hasAnimatedSinceResize=!0,this.currentAnimation=p0(0,oa,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oa),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=a;if(!(!l||!c||!d)){if(this!==a&&this.layout&&d&&Rc(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||le();const h=Pe(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=Pe(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}Ae(l,c),Mt(l,u),ds(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new N0),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Jn("z",a,d,this.animationValues);for(let u=0;u<Kn.length;u++)Jn(`rotate${Kn[u]}`,a,d,this.animationValues),Jn(`skew${Kn[u]}`,a,d,this.animationValues);a.render();for(const u in d)a.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return A0;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Gs(a==null?void 0:a.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Gs(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!yt(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=P0(this.projectionDeltaWithTransform,this.treeScale,f),u&&(d.transform=u(f,d.transform));const{x:m,y}=this.projectionDelta;d.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in Xs){if(f[x]===void 0)continue;const{correct:g,applyTo:b}=Xs[x],w=d.transform==="none"?f[x]:g(f[x],h);if(b){const _=b.length;for(let A=0;A<_;A++)d[b[A]]=w}else d[x]=w}return this.options.layoutId&&(d.pointerEvents=h===this?Gs(a==null?void 0:a.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(aa),this.root.sharedNodes.clear()}}}function R0(t){t.updateLayout()}function M0(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:o}=t.options,a=s.source!==t.layout.source;o==="size"?Ee(h=>{const f=a?s.measuredBox[h]:s.layoutBox[h],m=Pe(f);f.min=n[h].min,f.max=f.min+m}):Rc(o,s.layoutBox,n)&&Ee(h=>{const f=a?s.measuredBox[h]:s.layoutBox[h],m=Pe(n[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const l=Et();ds(l,n,s.layoutBox);const c=Et();a?ds(c,t.applyTransform(r,!0),s.measuredBox):ds(c,n,s.layoutBox);const d=!Nc(l);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const y=le();us(y,s.layoutBox,f.layoutBox);const x=le();us(x,n,m.layoutBox),Pc(y,x)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function I0(t){rs&&xt.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function O0(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function L0(t){t.clearSnapshot()}function aa(t){t.clearMeasurements()}function D0(t){t.isLayoutDirty=!1}function $0(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function la(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function F0(t){t.resolveTargetDelta()}function V0(t){t.calcProjection()}function B0(t){t.resetSkewAndRotation()}function U0(t){t.removeLeadSnapshot()}function ca(t,e,s){t.translate=ie(e.translate,0,s),t.scale=ie(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function da(t,e,s,n){t.min=ie(e.min,s.min,n),t.max=ie(e.max,s.max,n)}function q0(t,e,s,n){da(t.x,e.x,s.x,n),da(t.y,e.y,s.y,n)}function z0(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const G0={duration:.45,ease:[.4,0,.1,1]},ua=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ha=ua("applewebkit/")&&!ua("chrome/")?Math.round:Ne;function fa(t){t.min=ha(t.min),t.max=ha(t.max)}function H0(t){fa(t.x),fa(t.y)}function Rc(t,e,s){return t==="position"||t==="preserve-aspect"&&!Jg(ra(e),ra(s),.2)}function W0(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const K0=Ec({attachResizeListener:(t,e)=>vs(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qn={current:void 0},Mc=Ec({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qn.current){const t=new K0({});t.mount(window),t.setOptions({layoutScroll:!0}),Qn.current=t}return Qn.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),J0={pan:{Feature:u0},drag:{Feature:d0,ProjectionNode:Mc,MeasureLayout:kc}};function ma(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const r="onHover"+s,o=n[r];o&&ne.postRender(()=>o(e,Cs(e)))}class Q0 extends dt{mount(){const{current:e}=this.node;e&&(this.unmount=Qm(e,s=>(ma(this.node,s,"Start"),n=>ma(this.node,n,"End"))))}unmount(){}}class Y0 extends dt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ks(vs(this.node.current,"focus",()=>this.onFocus()),vs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function pa(t,e,s){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const r="onTap"+(s==="End"?"":s),o=n[r];o&&ne.postRender(()=>o(e,Cs(e)))}class X0 extends dt{mount(){const{current:e}=this.node;e&&(this.unmount=ep(e,s=>(pa(this.node,s,"Start"),(n,{success:r})=>pa(this.node,n,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Er=new WeakMap,Yn=new WeakMap,Z0=t=>{const e=Er.get(t.target);e&&e(t)},ey=t=>{t.forEach(Z0)};function ty({root:t,...e}){const s=t||document;Yn.has(s)||Yn.set(s,{});const n=Yn.get(s),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(ey,{root:t,...e})),n[r]}function sy(t,e,s){const n=ty(e);return Er.set(t,s),n.observe(t),()=>{Er.delete(t),n.unobserve(t)}}const ny={some:0,all:1};class ry extends dt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:r="some",once:o}=e,a={root:s?s.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:ny[r]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return sy(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(iy(e,s))&&this.startObserver()}unmount(){}}function iy({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const oy={inView:{Feature:ry},tap:{Feature:X0},focus:{Feature:Y0},hover:{Feature:Q0}},ay={layout:{ProjectionNode:Mc,MeasureLayout:kc}},Rr={current:null},Ic={current:!1};function ly(){if(Ic.current=!0,!!Hr)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rr.current=t.matches;t.addListener(e),e()}else Rr.current=!1}const cy=[...ic,ye,it],dy=t=>cy.find(rc(t)),ga=new WeakMap;function uy(t,e,s){for(const n in e){const r=e[n],o=s[n];if(ve(r))t.addValue(n,r);else if(ve(o))t.addValue(n,ys(r,{owner:t}));else if(o!==r)if(t.hasValue(n)){const a=t.getValue(n);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(n);t.addValue(n,ys(a!==void 0?a:r,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const ya=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hy{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vi,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Be.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ne.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:u}=a;this.onUpdate=u,this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=wn(s),this.isVariantNode=fl(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const m in f){const y=f[m];c[m]!==void 0&&ve(y)&&y.set(c[m],!1)}}mount(e){this.current=e,ga.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Ic.current||ly(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rr.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ga.delete(this.current),this.projection&&this.projection.unmount(),rt(this.notifyUpdate),rt(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=St.has(e),r=s.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&ne.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=s.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{r(),o(),a&&a(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ft){const s=Ft[e];if(!s)continue;const{isEnabled:n,Feature:r}=s;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):le()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<ya.length;n++){const r=ya[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=uy(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=ys(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){var n;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(sc(r)||Wl(r))?r=parseFloat(r):!dy(r)&&it.test(s)&&(r=Zl(e,s)),this.setBaseTarget(e,ve(r)?r.get():r)),ve(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Zr(this.props,n,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!ve(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new fi),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class Oc extends hy{constructor(){super(...arguments),this.KeyframeResolver=oc}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ve(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function fy(t){return window.getComputedStyle(t)}class my extends Oc{constructor(){super(...arguments),this.type="html",this.renderInstance=jl}readValueFromInstance(e,s){if(St.has(s)){const n=xi(s);return n&&n.default||0}else{const n=fy(e),r=(vl(s)?n.getPropertyValue(s):n[s])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:s}){return Sc(e,s)}build(e,s,n){si(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return oi(e,s,n)}}class py extends Oc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=le}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(St.has(s)){const n=xi(s);return n&&n.default||0}return s=Sl.has(s)?s:Qr(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return Cl(e,s,n)}build(e,s,n){ni(e,s,this.isSVGTag,n.transformTemplate)}renderInstance(e,s,n,r){_l(e,s,n,r)}mount(e){this.isSVGTag=ii(e.tagName),super.mount(e)}}const gy=(t,e)=>Xr(t)?new py(e):new my(e,{allowProjection:t!==p.Fragment}),yy=qm({...Vg,...oy,...J0,...ay},gy),S=rm(yy);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(t,e)=>{const s=p.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:l="",children:c,...d},u)=>p.createElement("svg",{ref:u,...xy,width:r,height:r,stroke:n,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${vy(t)}`,l].join(" "),...d},[...e.map(([h,f])=>p.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=$("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=$("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=$("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=$("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=$("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=$("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=$("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=$("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=$("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=$("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=$("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=$("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=$("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=$("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=$("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=$("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=$("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=$("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=$("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=$("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=$("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=$("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=$("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=$("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=$("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=$("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=$("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=$("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=$("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=$("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=$("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=$("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=$("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=$("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=$("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=$("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=$("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=$("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=$("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=$("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=$("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=$("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=$("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=$("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=$("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=$("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=$("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=$("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ry=()=>i.jsxs("div",{className:"mx-auto w-full max-w-xl bg-gray-800/80 backdrop-blur-sm rounded-xl p-5 text-left border border-gray-700/50",children:[i.jsx("h3",{className:"text-white font-semibold mb-3 text-center text-lg",children:"Quick Guide"}),i.jsxs("ol",{className:"space-y-2 list-decimal list-inside text-sm text-gray-300 marker:text-blue-400",children:[i.jsx("li",{children:"Enter your username and hit 'Test Your SportIQ'."}),i.jsx("li",{children:"Select your preferred game mode (Solo or 1v1)."}),i.jsx("li",{children:"Choose a sports category that interests you."}),i.jsx("li",{children:"Answer 10 questions as quickly and accurately as possible."}),i.jsx("li",{children:"Earn points for correct answers & speed bonuses. Check the leaderboard!"})]})]}),My=()=>{const t=new Date().getFullYear(),[e,s]=p.useState(!1);return i.jsx(S.footer,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"py-6 px-4 mt-auto bg-gray-900/50 backdrop-blur-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx("span",{className:"text-2xl",children:"🏆"}),i.jsxs("span",{className:"font-bold text-xl",children:[i.jsx("span",{className:"text-blue-400",children:"Sport"}),i.jsx("span",{className:"text-white",children:"IQ"})]}),i.jsx("span",{className:"text-2xl",children:"🧠"})]}),i.jsxs("div",{className:"flex items-center gap-6 flex-wrap justify-center",children:[i.jsxs(xe,{to:"/faq",className:"text-gray-300 hover:text-blue-400 transition-colors flex items-center gap-2 group cursor-pointer",children:[i.jsx(S.div,{whileHover:{rotate:15,scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:i.jsx(Mr,{size:16,className:"text-blue-400 group-hover:text-blue-300"})}),i.jsx("span",{children:"FAQ"})]}),i.jsxs(xe,{to:"/about",className:"text-gray-300 hover:text-blue-400 transition-colors flex items-center gap-2 group cursor-pointer",children:[i.jsx(S.div,{whileHover:{rotate:15,scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:i.jsx(It,{size:16,className:"text-blue-400 group-hover:text-blue-300"})}),i.jsx("span",{children:"About"})]}),i.jsxs("a",{href:"mailto:contact@sportiq.games",className:"text-gray-300 hover:text-blue-400 transition-colors flex items-center gap-2 group cursor-pointer",children:[i.jsx(S.div,{whileHover:{rotate:15,scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:i.jsx(_n,{size:16,className:"text-blue-400 group-hover:text-blue-300"})}),i.jsx("span",{children:"Contact"})]}),i.jsxs("button",{onClick:()=>s(!e),className:"text-gray-300 hover:text-blue-400 transition-colors flex items-center gap-2 group cursor-pointer",children:[i.jsx(S.div,{whileHover:{rotate:15,scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:i.jsx(Mr,{size:16,className:"text-blue-400 group-hover:text-blue-300"})}),i.jsx("span",{children:"How To Play"}),i.jsx(S.div,{animate:{rotate:e?180:0},children:e?i.jsx(Ci,{size:16}):i.jsx(ki,{size:16})})]})]})]}),i.jsx(De,{children:e&&i.jsx(S.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"mb-6 overflow-hidden",children:i.jsx(Ry,{})})}),i.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-gray-700 to-transparent mb-4"}),i.jsxs("div",{className:"text-center text-xs text-gray-500",children:[i.jsxs("p",{children:["© ",t," SportIQ - The Ultimate Sports Trivia Challenge"]}),i.jsx("p",{className:"mt-1",children:"v2.0.14"})]})]})})},Zc=p.createContext(void 0),Iy=({children:t})=>{const[e,s]=p.useState(null),[n,r]=p.useState(null),[o,a]=p.useState(null),[l,c]=p.useState(!0),d=async m=>{try{const{data:y,error:x}=await me.from("profiles").select("*").eq("id",m).single();return x?(console.error("Error fetching profile:",x),null):y}catch(y){return console.error("Error fetching profile:",y),null}},u=async()=>{if(n!=null&&n.id){const m=await d(n.id);a(m)}},h=async(m,y,x)=>{try{const{data:g,error:b}=await $f(m,y);return b?{error:b}:{error:null}}catch(g){return{error:g}}};p.useEffect(()=>{(async()=>{var x;c(!0);try{const{data:g}=await Uf();if(s(g.session),(x=g.session)!=null&&x.user){r(g.session.user);const b=await d(g.session.user.id);a(b)}}catch(g){console.error("Error initializing auth:",g)}finally{c(!1)}})();const{data:y}=qf(async x=>{if(s(x),r((x==null?void 0:x.user)||null),x!=null&&x.user){const g=await d(x.user.id);a(g)}else a(null)});return()=>{y.subscription.unsubscribe()}},[]);const f={session:e,user:n,profile:o,loading:l,signUp:h,signIn:async(m,y)=>{const{error:x}=await Ff(m,y);return{error:x}},signInWithGoogle:async()=>{const{error:m}=await Bf();return{error:m}},signOut:async()=>{const{error:m}=await Vf();return{error:m}},refreshProfile:u};return i.jsx(Zc.Provider,{value:f,children:t})},ht=()=>{const t=p.useContext(Zc);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Oy=()=>{const{user:t,profile:e,signOut:s}=ht(),n=async()=>{await s()};return i.jsx("div",{className:"fixed top-4 right-4 z-50",children:t?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(xe,{to:"/dashboard",children:i.jsxs(S.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg transition-colors",children:[i.jsx(Cn,{size:18}),i.jsx("span",{className:"hidden sm:inline",children:(e==null?void 0:e.username)||"Dashboard"})]})}),i.jsx(S.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded-full shadow-lg transition-colors",title:"Sign Out",children:i.jsx(Ti,{size:18})})]}):i.jsx(xe,{to:"/auth/signin",children:i.jsxs(S.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg transition-colors",children:[i.jsx(Hc,{size:18}),i.jsx("span",{children:"Sign In"})]})})})},Xt=[{question:"Which country won the 2022 FIFA World Cup?",category:"Football",emoji:"⚽",colorClass:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",options:["France","Brazil","Argentina","Germany"]},{question:"Who holds the NBA record for most points in a single game?",category:"Basketball",emoji:"🏀",colorClass:"bg-orange-500/20 text-orange-400 border-orange-500/30",options:["Michael Jordan","Kobe Bryant","Wilt Chamberlain","LeBron James"]},{question:"Which Grand Slam tournament is played on clay courts?",category:"Tennis",emoji:"🎾",colorClass:"bg-green-500/20 text-green-400 border-green-500/30",options:["Wimbledon","US Open","French Open","Australian Open"]},{question:"Who is the most decorated Olympian of all time?",category:"Olympics",emoji:"🏅",colorClass:"bg-blue-500/20 text-blue-400 border-blue-500/30",options:["Usain Bolt","Michael Phelps","Simone Biles","Carl Lewis"]},{question:"Usain Bolt broke which two world records at the 2008 Olympics?",category:"Mixed",emoji:"🎯",colorClass:"bg-purple-500/20 text-purple-400 border-purple-500/30",options:["100m & 200m","200m & 400m","100m & 4x100m","200m & long jump"]},{question:"Which team has won the most UEFA Champions League titles?",category:"Football",emoji:"⚽",colorClass:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",options:["Real Madrid","AC Milan","Bayern Munich","Liverpool"]}],Ly=[{id:"solo",title:"Solo Play",description:"Practice at your own pace",icon:Ke,iconBgColor:"bg-gradient-to-br from-green-600 to-green-400",hoverGradient:"from-green-600 to-green-400",emoji:"🏆"},{id:"versus",title:"1v1 Challenge",description:"Challenge a friend",icon:Jc,iconBgColor:"bg-gradient-to-br from-blue-600 to-blue-400",hoverGradient:"from-blue-600 to-blue-400",emoji:"⚔️"}],Dy=[{name:"Football",emoji:"⚽"},{name:"Basketball",emoji:"🏀"},{name:"Tennis",emoji:"🎾"},{name:"Olympics",emoji:"🏅"},{name:"Mixed Sports",emoji:"🎯"}],$y=["⚽","🏀","🎾","🏈","⚾","🏆","🥇","🏅"],Fy={shake:{x:[0,-8,8,-8,8,0],transition:{duration:.4}}},Vy={hover:{scale:1.2,rotate:360,transition:{type:"spring",stiffness:260,damping:20}}},By=$e.memo(()=>i.jsx("div",{className:"absolute inset-0 overflow-hidden z-0",children:$y.map((t,e)=>i.jsx(S.div,{className:"absolute text-4xl opacity-5 pointer-events-none",style:{top:"-100px",left:`${Math.random()*100}%`},animate:{y:"110vh",rotate:360},transition:{duration:20+Math.random()*15,repeat:1/0,repeatType:"loop",delay:Math.random()*5,ease:"linear"},children:t},e))})),Uy=()=>{const[t,e]=p.useState(0),[s,n]=p.useState(!0),[r,o]=p.useState(1);p.useEffect(()=>{if(!s)return;const h=setInterval(()=>{o(1),e(f=>f===Xt.length-1?0:f+1)},5e3);return()=>clearInterval(h)},[s]);const a=h=>{n(!h)},l=h=>{o(h),e(f=>{let m=f+h;return m<0?m=Xt.length-1:m>=Xt.length&&(m=0),m}),n(!1),setTimeout(()=>n(!0),7e3)},c=h=>{o(h>t?1:-1),e(h),n(!1),setTimeout(()=>n(!0),7e3)},d={enter:h=>({x:h>0?30:-30,opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:h=>({zIndex:0,x:h<0?30:-30,opacity:0})},u=Xt[t];return i.jsxs(S.div,{className:"max-w-xl mx-auto mt-8 relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[i.jsx("p",{className:"text-sm text-center text-blue-300/80 mb-2",children:"See Example Questions"}),i.jsxs("div",{className:`bg-gray-800/60 backdrop-blur-md border ${u.colorClass} p-4 md:p-5 rounded-xl relative overflow-hidden shadow-lg`,children:[i.jsxs("div",{className:`absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-xs font-medium ${u.colorClass} border-t-0 border-r-0 border border-gray-700/50`,children:[u.emoji," ",u.category]}),i.jsx("div",{className:"min-h-[130px] md:min-h-[100px] pr-10 pl-10 md:pr-4 md:pl-4 flex items-center",children:i.jsx(De,{initial:!1,custom:r,mode:"wait",children:i.jsxs(S.div,{custom:r,variants:d,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"w-full",children:[i.jsx("h3",{className:"text-white text-md md:text-lg font-semibold mb-3",children:u.question}),i.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:u.options.map((h,f)=>i.jsxs("span",{className:"text-gray-400 truncate",children:[String.fromCharCode(65+f),". ",h]},f))})]},t)})}),i.jsx("button",{onClick:()=>l(-1),className:"absolute left-1 md:left-2 top-1/2 transform -translate-y-1/2 p-2 rounded-full bg-gray-900/60 text-white hover:bg-gray-900/90 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Previous question",children:i.jsx(_t,{size:18})}),i.jsx("button",{onClick:()=>l(1),className:"absolute right-1 md:right-2 top-1/2 transform -translate-y-1/2 p-2 rounded-full bg-gray-900/60 text-white hover:bg-gray-900/90 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Next question",children:i.jsx(Si,{size:18})})]}),i.jsx("div",{className:"flex justify-center gap-2 mt-4",children:Xt.map((h,f)=>i.jsx("button",{onClick:()=>c(f),className:`w-2 h-2 rounded-full transition-all duration-300 ${t===f?"bg-blue-500 scale-125 w-4":"bg-gray-600 hover:bg-gray-500"}`,"aria-label":`Go to question ${f+1}`},f))})]})},qy=()=>i.jsxs(S.div,{className:"text-center mb-12",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7},children:[i.jsxs("div",{className:"relative inline-block mb-4",children:[i.jsxs("div",{className:"relative z-20 flex items-center justify-center gap-3",children:[i.jsx(S.div,{animate:{rotate:[0,5,0,-5,0],scale:[1,1.1,1]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"text-5xl md:text-6xl",children:"🏆"}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold leading-tight tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-white to-blue-400",children:["Sport",i.jsx("span",{className:"text-white",children:"IQ"})]}),i.jsx(S.div,{animate:{rotate:[0,-5,0,5,0],scale:[1,1.1,1]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:.5},className:"text-5xl md:text-6xl",children:"🧠"})]}),i.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full bg-blue-500 opacity-15 blur-2xl rounded-full z-10"})]}),i.jsx(S.p,{className:"text-xl md:text-2xl text-gray-300 italic relative z-20",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:"The Ultimate Sports Trivia Challenge"}),i.jsx(S.p,{className:"text-lg md:text-xl text-blue-400 font-semibold mt-2 relative z-20",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},children:"Challenge Your Sports Knowledge in Seconds"}),i.jsx(S.div,{className:"h-1 w-24 md:w-32 bg-gradient-to-r from-blue-500 to-green-500 rounded-full mx-auto mt-4 mb-8",initial:{scaleX:0,opacity:0},animate:{scaleX:1,opacity:1},transition:{duration:.7,delay:.5}}),i.jsx(Uy,{}),i.jsx(S.h3,{className:"text-lg font-semibold text-white mt-10 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:"Quiz Categories"}),i.jsx(S.div,{className:"flex flex-wrap justify-center gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:Dy.map((t,e)=>i.jsxs(S.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:1.1+e*.1},whileHover:{scale:1.05,backgroundColor:"rgba(55, 65, 81, 0.7)"},className:"px-3 py-1 bg-gray-800/50 backdrop-blur-sm rounded-full text-sm text-gray-300 flex items-center gap-1 cursor-default transition-colors",children:[i.jsx("span",{children:t.emoji}),i.jsx("span",{children:t.name})]},e))}),i.jsxs(S.p,{className:"text-sm text-blue-300/90 mt-6 flex items-center justify-center gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.5},children:[i.jsx(wa,{size:16,className:"text-yellow-400"}),"New questions added daily!",i.jsx(wa,{size:16,className:"text-yellow-400"})]})]}),zy=()=>i.jsxs(S.div,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[i.jsx("h2",{className:"text-2xl md:text-3xl text-white text-center font-semibold mb-8",children:"Game Modes"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 max-w-3xl mx-auto",children:Ly.map((t,e)=>i.jsxs(S.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6+e*.1},whileHover:{y:-5,scale:1.02,boxShadow:"0 10px 20px rgba(0, 0, 0, 0.3)",transition:{duration:.2}},className:"relative bg-gray-800/70 backdrop-blur-md rounded-xl p-6 pb-14 overflow-hidden group cursor-default",children:[i.jsx(S.div,{className:`absolute inset-0 bg-gradient-to-br ${t.hoverGradient} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),i.jsxs("div",{className:"flex flex-col items-center gap-3 relative z-10 text-center",children:[i.jsx(S.div,{variants:Vy,whileHover:"hover",className:`w-16 h-16 flex items-center justify-center ${t.iconBgColor} rounded-full mb-2 shadow-lg`,children:i.jsx(t.icon,{size:32,className:"text-white"})}),i.jsxs(S.h2,{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.title,i.jsx(S.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl",children:t.emoji})]}),i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:t.description})]}),i.jsx(S.div,{className:`absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r ${t.iconBgColor} origin-left`,initial:{scaleX:0},whileHover:{scaleX:1},transition:{duration:.3,ease:"easeOut"}})]},t.id))})]}),Gy=({username:t,setUsername:e,error:s,setError:n,handlePlay:r,isLoggedIn:o})=>{const[a,l]=p.useState(!1);return i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"max-w-md mx-auto bg-gray-800/80 backdrop-blur-lg rounded-2xl p-6 md:p-8 shadow-xl border border-gray-700/50",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Enter The Arena"}),i.jsxs(S.div,{className:"relative mb-6",variants:Fy,animate:s?"shake":"",children:[i.jsxs("div",{className:`relative border-2 rounded-lg overflow-hidden transition-colors duration-300 ${s?"border-red-500":a?"border-blue-500":"border-gray-600"}`,children:[i.jsx("input",{id:"usernameInput",type:"text",value:t,onChange:c=>{e(c.target.value),n(!1)},onFocus:()=>l(!0),onBlur:()=>l(!1),className:`w-full py-3 px-4 text-lg bg-gray-700/50 text-white placeholder-gray-400 focus:outline-none ${o?"opacity-80":""}`,placeholder:"Your Username",readOnly:o}),i.jsx(on,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:20})]}),s&&i.jsx(S.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm mt-2 ml-1",children:"Please enter a username to continue"})]}),i.jsxs(S.button,{onClick:r,whileHover:{scale:1.03,boxShadow:"0 10px 25px -5px rgba(59, 130, 246, 0.4)"},whileTap:{scale:.97},className:"w-full p-4 text-xl font-bold rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white transition-all duration-200 flex items-center justify-center gap-3 shadow-lg relative overflow-hidden group",children:[i.jsx(S.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"relative z-10",children:i.jsx(Cy,{size:24,className:"fill-white"})}),i.jsx("span",{className:"relative z-10",children:"TEST YOUR SPORTIQ"})]}),i.jsx("p",{className:"text-gray-400 text-xs mt-3 text-center",children:o?"Your progress will be saved to your account":"Select game mode on the next screen"})]})},Hy=({onStart:t})=>{const[e,s]=p.useState(""),[n,r]=p.useState(!1),{user:o,profile:a}=ht();p.useEffect(()=>{a!=null&&a.username&&s(a.username)},[a]);const l=p.useCallback(()=>{if(e.trim().length===0){r(!0);return}r(!1),t(e.trim())},[e,t]);return i.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-b from-[#0c1220] to-[#1a1a2e] text-white overflow-x-hidden isolate",children:[i.jsx(Oy,{}),i.jsx(By,{}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 md:py-16 relative z-10",children:[i.jsx(qy,{}),i.jsx(zy,{}),i.jsx(Gy,{username:e,setUsername:s,error:n,setError:r,handlePlay:l,isLoggedIn:!!o}),i.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.3},className:"mt-16",children:i.jsx(My,{})})]})]})},Wy={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},Xn={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},Zn={hover:{scale:1.2,rotate:360,transition:{type:"spring",stiffness:260,damping:20}}},Ky=({onStart:t})=>{const e=localStorage.getItem("username")||"",[s,n]=p.useState(null),[r,o]=p.useState(!1),[a,l]=p.useState(null),c=h=>{n(h),setTimeout(()=>{if(!e){console.error("Username not found");return}t(e,h)},300)},d=(h,f)=>{f.stopPropagation(),l(a===h?null:h)},u={solo:{title:"Solo Play",description:"Test your sports knowledge at your own pace. Answer 10 questions across your chosen category and earn points for correct answers. The faster you answer, the more bonus points you receive!",perfectFor:"Practice, learning new sports facts, and improving your response time.",color:"text-green-400",bgColor:"bg-green-600/10",btnBgColor:"bg-green-500/20",btnHoverColor:"hover:bg-green-500/30",borderColor:"border-green-500/30"},create:{title:"Create 1v1 Game",description:"Be the host! Create a game, choose the category, and get a shareable code to invite a friend. Challenge them to see who has better sports knowledge.",perfectFor:"Challenging friends, picking your favorite sports category, and proving you're the champion.",color:"text-blue-400",bgColor:"bg-blue-600/10",btnBgColor:"bg-blue-500/20",btnHoverColor:"hover:bg-blue-500/30",borderColor:"border-blue-500/30"},join:{title:"Join 1v1 Game",description:"Got an invite code? Use it to quickly join a friend's game and compete in real-time. The host has already selected the category - just enter the code and play!",perfectFor:"Accepting challenges, quick play, and jumping straight into competition.",color:"text-purple-400",bgColor:"bg-purple-600/10",btnBgColor:"bg-purple-500/20",btnHoverColor:"hover:bg-purple-500/30",borderColor:"border-purple-500/30"}};return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-[#0c1220] to-[#1a1a2e]",children:[i.jsx(S.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},className:"text-center mb-4",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[i.jsx("span",{className:"text-3xl",children:"🏆"}),i.jsxs("h1",{className:"text-3xl font-bold text-white",children:[i.jsx("span",{className:"text-blue-400",children:"Sport"}),i.jsx("span",{className:"text-white",children:"IQ"})]}),i.jsx("span",{className:"text-3xl",children:"🧠"})]})}),i.jsxs(S.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},className:"text-center mb-4",children:[i.jsx(S.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200},children:"Select Game Mode"}),i.jsx(S.div,{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-2xl sm:text-3xl mt-2",children:"⚽ 🎾"})]}),i.jsxs(S.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},onClick:()=>o(!r),className:"flex items-center gap-1 text-blue-400 hover:text-blue-300 mb-4 text-sm cursor-pointer",whileHover:{scale:1.05},whileTap:{scale:.95},children:[i.jsx(It,{size:16}),i.jsx("span",{children:r?"Hide Guide":"How It Works"}),r?i.jsx(Ci,{size:16}):i.jsx(ki,{size:16})]}),i.jsx(De,{children:r&&i.jsx(S.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"w-full max-w-lg mb-6 overflow-hidden",children:i.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-4",children:[i.jsx("h3",{className:"text-white font-bold mb-2",children:"How To Play"}),i.jsxs("ol",{className:"space-y-2 list-decimal list-inside text-sm text-gray-300 mb-4",children:[i.jsx("li",{children:"Select your preferred game mode (Solo, Create Game, or Join Game)"}),i.jsx("li",{children:"Choose a sports category that interests you (when creating a game)"}),i.jsx("li",{children:"Answer 10 questions as quickly and accurately as possible"}),i.jsx("li",{children:"Earn 10 points for each correct answer plus time bonuses"}),i.jsx("li",{children:"View your performance stats and challenge others to beat your score!"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"All game modes feature the same categories: Football ⚽, Basketball 🏀, Tennis 🎾, Olympics 🏅, and Mixed Sports 🎯"})]})})}),i.jsxs(S.div,{variants:Wy,initial:"hidden",animate:"show",className:"w-full max-w-4xl grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-4",children:[i.jsxs(S.div,{variants:Xn,className:"relative bg-gray-800 rounded-xl p-6 pb-14 overflow-hidden",children:[i.jsx(S.div,{className:"absolute inset-0 bg-gradient-to-br from-green-600 to-green-400 opacity-0 hover:opacity-10 transition-opacity duration-300"}),i.jsxs(S.div,{whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>c("solo"),className:`flex flex-col items-center gap-3 relative z-10 cursor-pointer ${s==="solo"?"ring-2 ring-green-400 rounded-xl p-2":""}`,children:[i.jsx(S.div,{variants:Zn,whileHover:"hover",className:"w-16 h-16 flex items-center justify-center bg-gradient-to-br from-green-600 to-green-400 rounded-full mb-2",children:i.jsx(Ke,{size:32,className:"text-white"})}),i.jsxs(S.h2,{className:"text-xl font-bold text-white flex items-center gap-2",whileHover:{scale:1.05},children:["Solo Play",i.jsx(S.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl",children:"🏀"})]}),i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Practice at your own pace"})]}),i.jsxs(S.button,{onClick:h=>d("solo",h),whileHover:{scale:1.05},whileTap:{scale:.95},className:`absolute bottom-3 left-0 right-0 mx-auto w-3/4 py-2 px-4 rounded-lg ${u.solo.btnBgColor} ${u.solo.btnHoverColor} ${u.solo.color} font-medium text-sm flex items-center justify-center gap-2 border ${u.solo.borderColor} transition-colors cursor-pointer`,children:[i.jsx(It,{size:16}),a==="solo"?"Hide Details":"Learn More"]})]}),i.jsxs(S.div,{variants:Xn,className:"relative bg-gray-800 rounded-xl p-6 pb-14 overflow-hidden",children:[i.jsx(S.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-600 to-blue-400 opacity-0 hover:opacity-10 transition-opacity duration-300"}),i.jsxs(S.div,{whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>c("create"),className:`flex flex-col items-center gap-3 relative z-10 cursor-pointer ${s==="create"?"ring-2 ring-blue-400 rounded-xl p-2":""}`,children:[i.jsx(S.div,{variants:Zn,whileHover:"hover",className:"w-16 h-16 flex items-center justify-center bg-gradient-to-br from-blue-600 to-blue-400 rounded-full mb-2",children:i.jsx(Jc,{size:32,className:"text-white"})}),i.jsxs(S.h2,{className:"text-xl font-bold text-white flex items-center gap-2",whileHover:{scale:1.05},children:["Create 1v1 Game",i.jsx(S.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl",children:"⚔️"})]}),i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Host a game & invite a friend"})]}),i.jsxs(S.button,{onClick:h=>d("create",h),whileHover:{scale:1.05},whileTap:{scale:.95},className:`absolute bottom-3 left-0 right-0 mx-auto w-3/4 py-2 px-4 rounded-lg ${u.create.btnBgColor} ${u.create.btnHoverColor} ${u.create.color} font-medium text-sm flex items-center justify-center gap-2 border ${u.create.borderColor} transition-colors cursor-pointer`,children:[i.jsx(It,{size:16}),a==="create"?"Hide Details":"Learn More"]})]}),i.jsxs(S.div,{variants:Xn,className:"relative bg-gray-800 rounded-xl p-6 pb-14 overflow-hidden",children:[i.jsx(S.div,{className:"absolute inset-0 bg-gradient-to-br from-purple-600 to-purple-400 opacity-0 hover:opacity-10 transition-opacity duration-300"}),i.jsxs(S.div,{whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>c("join"),className:`flex flex-col items-center gap-3 relative z-10 cursor-pointer ${s==="join"?"ring-2 ring-purple-400 rounded-xl p-2":""}`,children:[i.jsx(S.div,{variants:Zn,whileHover:"hover",className:"w-16 h-16 flex items-center justify-center bg-gradient-to-br from-purple-600 to-purple-400 rounded-full mb-2",children:i.jsx(Yc,{size:32,className:"text-white"})}),i.jsxs(S.h2,{className:"text-xl font-bold text-white flex items-center gap-2",whileHover:{scale:1.05},children:["Join 1v1 Game",i.jsx(S.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl",children:"🎮"})]}),i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Join with an invite code"})]}),i.jsxs(S.button,{onClick:h=>d("join",h),whileHover:{scale:1.05},whileTap:{scale:.95},className:`absolute bottom-3 left-0 right-0 mx-auto w-3/4 py-2 px-4 rounded-lg ${u.join.btnBgColor} ${u.join.btnHoverColor} ${u.join.color} font-medium text-sm flex items-center justify-center gap-2 border ${u.join.borderColor} transition-colors cursor-pointer`,children:[i.jsx(It,{size:16}),a==="join"?"Hide Details":"Learn More"]})]})]}),i.jsx(De,{children:a&&i.jsxs(S.div,{initial:{opacity:0,y:10,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-10,height:0},transition:{duration:.3},className:`w-full max-w-lg mb-6 ${u[a].bgColor} rounded-xl p-5 overflow-hidden border ${u[a].borderColor}`,children:[i.jsxs("h3",{className:`text-xl font-bold ${u[a].color} mb-3`,children:["About ",u[a].title]}),i.jsx("p",{className:"text-gray-300 text-sm mb-3",children:u[a].description}),i.jsxs("div",{className:"text-xs text-gray-400",children:[i.jsx("span",{className:`${u[a].color} font-medium`,children:"Perfect for:"})," ",u[a].perfectFor]})]})}),i.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-6 sm:mt-8 text-center",children:i.jsxs("p",{className:"text-gray-400 text-sm sm:text-base",children:["Playing as: "," ",i.jsx(S.span,{className:"text-green-400 font-semibold",whileHover:{scale:1.1},children:e})]})})]})},Jy="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let an=(t=21)=>{let e="",s=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=Jy[s[t]&63];return e};const Qy=()=>window.location.hostname.includes("netlify")?"https://quiz-render-tests.onrender.com":window.location.origin;let R;window._globalSocket?(console.log("Using existing global socket"),R=window._globalSocket):(R=fd(Qy(),{transports:["websocket","polling"],withCredentials:!0,reconnection:!0,reconnectionAttempts:20,reconnectionDelay:1e3,timeout:6e4,autoConnect:!1,path:"/socket.io/"}),window._globalSocket=R);const Yy=()=>{if(!R._debugEventsAttached){R._debugEventsAttached=!0;const t=R.on.bind(R);R.on=function(s,n){return console.log(`[SOCKET-DEBUG] Adding listener for: ${s}`),t(s,n)};const e=R.emit.bind(R);R.emit=function(s,...n){return console.log(`[SOCKET-DEBUG] Emitting event: ${s}`,n[0]?"(with data)":"(no data)"),e(s,...n)},R.onAny((s,...n)=>{console.log(`[SOCKET-DEBUG] Received event: ${s}`,n[0]?"(with data)":"(no data)")})}},er={gameId:"",category:"mixed",players:[],currentQuestion:0,questions:[],isGameStarted:!1,isGameEnded:!1,chatMessages:[],startCountdown:null,answeredPlayers:new Set,finishedPlayers:new Set,startTime:Date.now(),questionStartTime:Date.now(),questionResponseTimes:[],playerResponseTimes:new Map,scores:new Map,waitingForPlayers:!0,currentPlayerId:"",socket:R,isConnecting:!1,hasJoinedGame:!1,isGameCreationInProgress:!1},Jt=_a((t,e)=>(Yy(),R.on("connect",()=>{console.log("Socket connected:",R.id),t(s=>({...s,currentPlayerId:R.id,isConnecting:!1}))}),R.on("connect_error",s=>{console.error("Socket connection error:",s),t(n=>({...n,isConnecting:!1,isGameCreationInProgress:!1}))}),R.on("gameCreated",s=>{console.log("Game created:",s),t(n=>({...n,gameId:s.gameId,category:s.category,questions:s.questions,players:s.players,waitingForPlayers:!0,hasJoinedGame:!0,isGameCreationInProgress:!1,playerResponseTimes:new Map,scores:new Map(s.players.map(r=>[r.id,r.score||0]))}))}),R.on("gameUpdated",s=>{console.log("Game updated:",s);const n=s.players.some(r=>r.id===R.id);t(r=>{const o=new Map(r.playerResponseTimes);s.players.forEach(l=>{l.responseTimes&&o.set(l.id,l.responseTimes)});const a=new Map(s.players.map(l=>[l.id,l.score||0]));return{...r,players:s.players,category:s.category,questions:s.questions||r.questions,waitingForPlayers:s.waitingForPlayers,startCountdown:s.startCountdown,hasJoinedGame:n||r.hasJoinedGame,playerResponseTimes:o,scores:a,isGameCreationInProgress:!1}})}),R.on("playerReadyUpdate",s=>{console.log("Player ready update:",s),t(n=>({...n,players:s.players,startCountdown:s.startCountdown}))}),R.on("gameStarted",s=>{console.log("Game started:",s),t(n=>({...n,isGameStarted:!0,startTime:Date.now(),questionStartTime:Date.now(),waitingForPlayers:!1,startCountdown:null,category:s.category,questions:s.questions,playerResponseTimes:new Map,scores:new Map(s.players.map(r=>[r.id,r.score||0]))})),window.dispatchEvent(new CustomEvent("sportiq:gameStarted"))}),R.on("scoreUpdate",s=>{console.log("Score update received:",s);const{playerId:n,score:r,responseTime:o,correctAnswers:a}=s;t(l=>{const c=new Map(l.scores);c.set(n,r);const d=new Map(l.playerResponseTimes),u=d.get(n)||[];d.set(n,[...u,o]);const h=l.players.map(f=>f.id===n?{...f,score:r,responseTimes:[...u,o],correctAnswers:a!==void 0?a:f.correctAnswers}:f);return{...l,scores:c,playerResponseTimes:d,players:h}})}),R.on("nextQuestion",s=>{console.log("Next question:",s),t(n=>({...n,currentQuestion:s.currentQuestion,questionStartTime:Date.now(),answeredPlayers:new Set}))}),R.on("gameOver",s=>{console.log("Game over:",s);const n=Date.now(),r=e().startTime,o=(n-r)/1e3;t(a=>{const l=new Map(s.players.map(d=>[d.id,d.score||0])),c=new Map(a.playerResponseTimes);return s.players.forEach(d=>{d.responseTimes&&c.set(d.id,d.responseTimes)}),{...a,isGameStarted:!1,isGameEnded:!0,scores:l,playerResponseTimes:c,players:s.players,completionTime:o}})}),R.on("categoryUpdated",s=>{console.log("Category updated:",s),t(n=>({...n,category:s.category,questions:s.questions}))}),R.on("playerAnswered",s=>{console.log("Player answered:",s);const{playerId:n,score:r,responseTime:o,isCorrect:a,correctAnswers:l}=s;t(c=>{const d=new Map(c.playerResponseTimes),u=d.get(n)||[];d.set(n,[...u,o]);const h=new Map(c.scores);h.set(n,r);const f=c.players.map(m=>{if(m.id===n){const y=l!==void 0?l:m.correctAnswers!==void 0?a?m.correctAnswers+1:m.correctAnswers:0;return{...m,score:r,responseTimes:[...u,o],correctAnswers:y}}return m});return{...c,playerResponseTimes:d,scores:h,players:f,answeredPlayers:new Set([...c.answeredPlayers,n])}})}),R.on("rematchRequested",s=>{console.log("Rematch requested by player:",s.playerId),t(n=>{const r=n.players.map(o=>o.id===s.playerId?{...o,rematchReady:!0}:o);return{...n,players:r}})}),R.on("goToLobby",s=>{console.log("Going back to lobby with new game data:",s),t(n=>({...n,isGameStarted:!1,isGameEnded:!1,currentQuestion:0,questions:s.questions,players:s.players,scores:new Map(s.players.map(r=>[r.id,r.score||0])),questionResponseTimes:[],playerResponseTimes:new Map,finishedPlayers:new Set,answeredPlayers:new Set,startCountdown:null})),window.dispatchEvent(new CustomEvent("sportiq:returnToLobby"))}),R.on("error",s=>{console.error("Socket error:",s),t(n=>({...n,isConnecting:!1,isGameCreationInProgress:!1}))}),R.on("disconnect",()=>{console.log("Socket disconnected"),t(s=>({...s,isConnecting:!1,isGameCreationInProgress:!1}))}),{...er,socket:R,initializeGame:async()=>{const s=e(),n=Date.now();if(window._socketInitializeAttempt&&n-window._socketInitializeAttempt<5e3&&(console.log("Socket initialization attempted recently, using existing socket"),R.connected))return t(o=>({...o,currentPlayerId:R.id,isConnecting:!1})),Promise.resolve();if(window._socketInitializeAttempt=n,s._initializationPromise)return console.log("Initialization already in progress, returning existing promise"),s._initializationPromise;if(R.connected)return console.log("Socket already connected, skipping initialization"),s.currentPlayerId!==R.id&&t({currentPlayerId:R.id,isConnecting:!1}),Promise.resolve();console.log("Initializing game, connecting socket..."),t({isConnecting:!0});const r=new Promise((o,a)=>{const l=setTimeout(()=>{R.off("connect",c),R.off("connect_error",d),t(u=>({...u,isConnecting:!1,_initializationPromise:null})),a(new Error("Socket connection timeout"))},1e4),c=()=>{console.log("Socket connected for 1v1 game with ID:",R.id),clearTimeout(l),R.off("connect",c),R.off("connect_error",d),window._globalSocket=R,t({...er,socket:R,currentPlayerId:R.id,isConnecting:!1,gameId:"",hasJoinedGame:!1,playerResponseTimes:new Map,scores:new Map,_initializationPromise:null}),o()},d=u=>{console.error("Socket connection error:",u),clearTimeout(l),R.off("connect",c),R.off("connect_error",d),t(h=>({...h,isConnecting:!1,_initializationPromise:null,isGameCreationInProgress:!1})),a(u)};R.connected?c():(R.once("connect",c),R.once("connect_error",d),R.connect())});return t(o=>({...o,_initializationPromise:r})),r},createGame:async s=>{const n=localStorage.getItem("username")||"Guest",r=e();if(r.isGameCreationInProgress)return console.log("Game creation already in progress, ignoring duplicate request"),Promise.resolve();if(r.hasJoinedGame)return console.log("Already joined a game, updating category instead"),e().setCategory(s),Promise.resolve();t(o=>({...o,isGameCreationInProgress:!0}));try{if(!R.connected){console.log("Socket not connected, attempting to connect before creating game");try{await e().initializeGame()}catch(a){throw console.error("Failed to initialize socket connection:",a),t(l=>({...l,isGameCreationInProgress:!1})),new Error("Failed to connect to game server")}}if(console.log("Creating game with category:",s,"Socket connected:",R.connected),window._gameCreationPromise)return console.log("Game creation already in progress globally"),window._gameCreationPromise;const o=new Promise((a,l)=>{const c=setTimeout(()=>{R.off("gameCreated"),window._gameCreationPromise=void 0,t(d=>({...d,isGameCreationInProgress:!1})),l(new Error("Game creation timeout"))},5e3);R.once("gameCreated",()=>{clearTimeout(c),window._gameCreationPromise=void 0,t(d=>({...d,hasJoinedGame:!0,isGameCreationInProgress:!1})),a()}),console.log("Emitting createGame event:",{mode:"1v1",category:s,username:n}),R.emit("createGame",{mode:"1v1",category:s,username:n})});return window._gameCreationPromise=o,o}catch(o){throw window._gameCreationPromise=void 0,t(a=>({...a,isGameCreationInProgress:!1})),o}},joinGame:async(s,n)=>{try{return R.connected||await e().initializeGame(),new Promise((r,o)=>{const a=setTimeout(()=>{R.off("gameUpdated"),o(new Error("Join game timeout"))},5e3),l=c=>{c.players.some(u=>u.id===R.id)&&(t(u=>({...u,gameId:s.trim(),hasJoinedGame:!0,players:c.players,scores:new Map(c.players.map(h=>[h.id,h.score||0])),playerResponseTimes:new Map})),clearTimeout(a),R.off("gameUpdated",l),r())};R.on("gameUpdated",l),console.log("Joining game:",s),R.emit("joinGame",{gameId:s.trim(),username:n})})}catch(r){throw console.error("Error joining game:",r),r}},setPlayerReady:()=>{const{gameId:s}=e();!s||!R.connected||R.emit("playerReady",{gameId:s})},submitAnswer:(s,n,r,o)=>{const a=e(),l=a.getCurrentPlayer();if(!l||!R.connected)return;const c=15-n,d=[...a.questionResponseTimes,c],u=a.questions[a.currentQuestion],h=u&&u.correctAnswer===s,f=l.correctAnswers||0,m=h?f+1:f;R.emit("submitAnswer",{gameId:a.gameId,playerId:l.id,answer:s,timeRemaining:n,points:r,totalScore:o,responseTime:c,allResponseTimes:d,isCorrect:h,correctAnswers:m}),t(y=>{const x=new Map(y.playerResponseTimes);x.set(l.id,d);const g=new Map(y.scores);g.set(l.id,o);const b=y.players.map(w=>w.id===l.id?{...w,score:o,responseTimes:d,correctAnswers:m}:w);return{...y,questionResponseTimes:d,playerResponseTimes:x,scores:g,players:b,answeredPlayers:new Set([...y.answeredPlayers,l.id])}})},getCurrentPlayer:()=>{const s=e();return s.players.find(n=>n.id===s.currentPlayerId)},getPlayerResponseTimes:s=>{var a;const n=e(),r=n.players.find(l=>l.id===s);if((a=r==null?void 0:r.responseTimes)!=null&&a.length)return r.responseTimes;const o=n.playerResponseTimes.get(s);return o!=null&&o.length?o:[]},addChatMessage:(s,n)=>{const{gameId:r}=e();if(!r||!R.connected)return;const o=e().players.find(l=>l.id===s);if(!o)return;R.emit("chatMessage",{gameId:r,message:n});const a={id:an(),playerId:s,playerName:o.username,message:n,timestamp:Date.now()};t(l=>({...l,chatMessages:[...l.chatMessages,a]}))},resetGame:()=>{R.connected&&R.disconnect(),t(er)},endGame:()=>{const{gameId:s,socket:n}=e();if(!s||!n.connected)return;console.log("Manually ending game:",s),n.emit("gameOver",{gameId:s});const r=Date.now(),o=e().startTime,a=(r-o)/1e3;t({isGameStarted:!1,isGameEnded:!0,completionTime:a})},setCategory:s=>{const n=e(),r=n.getCurrentPlayer();if(!(r!=null&&r.isHost)){console.warn("Only host can change category");return}if(!R.connected){console.error("Socket not connected");return}console.log("Setting category to:",s),R.emit("updateCategory",{gameId:n.gameId,category:s}),t(o=>({...o,category:s}))},requestRematch:s=>{const{gameId:n,socket:r}=e();!n||!r.connected||(console.log("Requesting rematch:",{gameId:n,playerId:s}),r.emit("requestRematch",{gameId:n,playerId:s}),t(o=>{const a=o.players.map(l=>l.id===s?{...l,rematchReady:!0}:l);return{...o,players:a}}))}})),He=({icon:t,label:e,onClick:s,disabled:n=!1,tooltip:r,delay:o=0})=>i.jsxs("div",{className:"relative group",children:[i.jsxs(S.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o},whileHover:n?{}:{scale:1.05},whileTap:n?{}:{scale:.95},onClick:n?void 0:s,disabled:n,className:`flex items-center gap-2 px-4 py-3 rounded-full shadow-lg transition-colors
                   ${n?"bg-gray-800/50 cursor-not-allowed text-gray-500 opacity-70":"bg-gray-800/90 hover:bg-gray-700 text-white"}`,children:[i.jsx(t,{className:`w-5 h-5 ${n?"":"group-hover:-translate-x-1 transition-transform"}`}),i.jsx("span",{className:"hidden sm:inline",children:e}),i.jsx("span",{className:"sm:hidden",children:e.split(" ").pop()})]}),r&&n&&i.jsx("div",{className:`absolute bottom-full left-0 mb-2 p-2 bg-gray-800 rounded text-xs text-white
                      opacity-0 group-hover:opacity-100 transition-opacity w-48 z-50`,children:r})]}),Pi=({isOpen:t,onConfirm:e,onCancel:s,title:n,message:r,confirmText:o,cancelText:a="Cancel"})=>i.jsx(De,{children:t&&i.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:n}),i.jsx("p",{className:"text-gray-300 mb-6",children:r}),i.jsxs("div",{className:"flex gap-4 justify-end",children:[i.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:a}),i.jsx("button",{onClick:e,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white transition-colors",children:o})]})]})})}),we={HOME:"Back to Home",MODES:"Back to Mode Selection",CATEGORIES:"Back to Categories",STAY:"Stay in Game",LEAVE:"Leave Game"},ln={LEAVE_GAME:"Your current game progress will be lost if you leave.",HOST_LEAVE:"As the host, leaving will affect all players in the game.",LEAVE_LOBBY:"Are you sure you want to leave the game lobby?",HOST_LEAVE_LOBBY:"As the host, leaving will end the game for all players."},Xy={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Zy={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},ex={hover:{scale:1.2,rotate:360,transition:{type:"spring",stiffness:260,damping:20}}},tx=({onSelect:t,mode:e,onBack:s})=>{const{hasJoinedGame:n,getCurrentPlayer:r}=Jt(),o=r(),a=o==null?void 0:o.isHost,[l,c]=p.useState(!1);if(p.useEffect(()=>{e!=="solo"&&n&&(a||(console.log("Non-host player in category selection, redirecting to lobby"),t("mixed")))},[e,n,a,t]),e!=="solo"&&n&&!a)return i.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:i.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-md bg-gray-800 rounded-2xl p-8 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Joining game..."}),i.jsx("p",{className:"text-gray-400 mb-6",children:"You'll be redirected to the lobby shortly"}),i.jsx(S.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1.5,repeat:1/0},className:"h-2 bg-green-600 rounded-full"})]})});const d=[{id:"football",name:"Football",emoji:"⚽",icon:Ke,color:"from-yellow-600 to-yellow-400"},{id:"basketball",name:"Basketball",emoji:"🏀",icon:Ns,color:"from-orange-600 to-orange-400"},{id:"tennis",name:"Tennis",emoji:"🎾",icon:$c,color:"from-green-600 to-green-400"},{id:"olympics",name:"Olympics",emoji:"🏅",icon:Wc,color:"from-blue-600 to-blue-400"},{id:"mixed",name:"Mixed Sports",emoji:"🎯",icon:Vc,color:"from-purple-600 to-purple-400"}],u=h=>{if(l){console.log("Selection already in progress, ignoring");return}if(c(!0),console.log(`Selected category: ${h} for mode: ${e}`),e!=="solo"&&n&&!a){console.log("Non-host attempted to select category, redirecting"),t(h),setTimeout(()=>{c(!1)},1e3);return}t(h),setTimeout(()=>{c(!1)},1e3)};return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 pb-20",children:[s&&i.jsx("div",{className:"fixed bottom-6 left-6 z-10",children:i.jsx(He,{icon:_t,label:we.MODES,onClick:s})}),i.jsxs("div",{className:"w-full max-w-4xl",children:[i.jsxs(S.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},children:[i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white text-center mb-2 sm:mb-4",children:"Choose Your Category"}),i.jsx("p",{className:"text-gray-400 text-center text-sm sm:text-base mb-6 sm:mb-12",children:e==="solo"?"Practice mode - Test your knowledge!":"Challenge a friend in this category!"})]}),i.jsx(S.div,{variants:Xy,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:d.map(({id:h,name:f,emoji:m,icon:y,color:x})=>i.jsxs(S.button,{variants:Zy,whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>u(h),disabled:l,className:`group relative bg-gray-800 rounded-2xl p-6 sm:p-8 overflow-hidden ${l?"opacity-70 cursor-not-allowed":""}`,children:[i.jsx(S.div,{className:`absolute inset-0 bg-gradient-to-br ${x} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),i.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4 relative z-10",children:[i.jsxs(S.div,{variants:ex,whileHover:"hover",className:`w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center bg-gradient-to-br ${x} rounded-full`,children:[i.jsx(y,{size:24,className:"text-white sm:hidden"}),i.jsx(y,{size:32,className:"text-white hidden sm:block"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs(S.h2,{className:"text-xl sm:text-2xl font-bold text-white flex items-center justify-center gap-2",whileHover:{scale:1.05},children:[i.jsx("span",{children:f}),i.jsx(S.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl sm:text-3xl",children:m})]}),i.jsxs("p",{className:"mt-2 text-gray-400 text-xs sm:text-sm",children:["Test your ",f.toLowerCase()," knowledge"]})]})]}),i.jsx(S.div,{initial:{scaleX:0},whileHover:{scaleX:1},transition:{duration:.3},className:`absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r ${x}`})]},h))})]})]})},sx=({onBackToCategory:t,onBackToMode:e})=>{const{gameId:s,players:n,setPlayerReady:r,category:o,startCountdown:a,getCurrentPlayer:l,waitingForPlayers:c,isGameStarted:d,socket:u,resetGame:h}=Jt(),[f,m]=p.useState({isOpen:!1,type:null}),y=l(),x=y==null?void 0:y.isHost,g=n.length,b=2,w=g===b,_=()=>{s&&navigator.clipboard.writeText(s).then(()=>{console.log("Invite code copied to clipboard!")}).catch(P=>{console.error("Failed to copy invite code: ",P)})},A=()=>{y&&w&&r()},C=P=>{if(P==="category"&&!x){console.warn("Non-host attempted to navigate back to categories.");return}m({isOpen:!0,type:P})},T=()=>{x&&(u!=null&&u.connected)?(console.log("Host is leaving the game, notifying server"),u.emit("leaveGame",{gameId:s,isHost:!0})):!x&&(u!=null&&u.connected)?(console.log("Player is leaving the game, notifying server"),u.emit("leaveGame",{gameId:s,isHost:!1})):console.warn("Socket not connected while trying to leave game."),f.type==="category"&&t?t():f.type==="mode"&&e&&e(),h(),m({isOpen:!1,type:null})},E=w&&n.every(P=>P.isReady);return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-[#1a1a1a] text-white",children:[" ",i.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col gap-3",children:[t&&i.jsx(He,{icon:_t,label:we.CATEGORIES,onClick:()=>C("category"),disabled:!x,tooltip:x?void 0:"Only the host can change category/go back"}),e&&i.jsx(He,{icon:ut,label:we.MODES,onClick:()=>C("mode"),delay:.1})]}),x&&i.jsxs("div",{className:"fixed top-4 right-4 px-3 py-1 rounded-full text-sm bg-yellow-500/20 text-yellow-400 flex items-center gap-1",children:[i.jsx(Fc,{size:14})," Host"]}),i.jsx(Pi,{isOpen:f.isOpen,onConfirm:T,onCancel:()=>m({isOpen:!1,type:null}),title:"Leave Lobby?",message:x?ln.HOST_LEAVE_LOBBY:ln.LEAVE_LOBBY,confirmText:f.type==="category"?`Go to ${we.CATEGORIES}`:`Go to ${we.MODES}`,cancelText:we.STAY}),i.jsxs("div",{className:"w-full max-w-2xl bg-gray-800 rounded-lg p-6 shadow-xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"1v1 Game Lobby"}),s?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:s,readOnly:!0,className:"bg-gray-700 text-white px-3 py-1 rounded font-mono text-sm w-24 sm:w-auto"}),i.jsx("button",{onClick:_,className:"p-2 rounded bg-green-600 hover:bg-green-700 text-white transition-colors",title:"Copy invite code",children:i.jsx(Ts,{size:20})})]}):i.jsx("span",{className:"text-sm text-gray-400",children:"Generating code..."})]}),i.jsx("div",{className:"mb-6 flex items-center justify-center",children:i.jsxs("div",{className:"bg-gray-700 rounded-full px-4 py-2 flex items-center gap-2",children:[i.jsx(on,{size:20,className:"text-green-400"}),i.jsxs("span",{className:"text-white font-medium",children:[g,"/",b," Players"]})]})}),c&&g<b&&i.jsxs("div",{className:"text-center mb-8 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 text-yellow-400",children:[i.jsx(Bt,{className:"w-6 h-6 animate-spin"}),i.jsx("span",{className:"text-lg font-medium",children:"Waiting for opponent..."})]}),i.jsxs("p",{className:"text-gray-400 mt-2 text-sm sm:text-base",children:[" ","Share the game code above with your opponent to start!"]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"text-xl text-white flex items-center gap-2 mb-4",children:[i.jsx(on,{size:24}),"Players"]}),i.jsxs("div",{className:"grid gap-3",children:[n.map(P=>i.jsxs("div",{className:`flex items-center justify-between p-3 sm:p-4 rounded-lg ${P.id===(y==null?void 0:y.id)?"bg-gray-700":"bg-gray-700/50"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 overflow-hidden mr-2",children:[" ",i.jsx("span",{className:"text-white font-medium truncate",children:P.username})," ",P.id===(y==null?void 0:y.id)&&i.jsxs("span",{className:"text-xs bg-green-600/20 text-green-400 px-2 py-1 rounded flex-shrink-0",children:[" ","You"]})]}),i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[" ",P.id===(y==null?void 0:y.id)&&!P.isReady&&w&&i.jsxs("button",{onClick:A,className:"px-3 py-1.5 sm:px-4 sm:py-2 text-sm sm:text-base bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a!==null,children:[i.jsx(ba,{size:16}),"Ready Up"]}),P.isReady?i.jsxs("span",{className:"text-green-400 flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:[i.jsx(Ay,{size:16}),"Ready"]}):i.jsxs("span",{className:"text-gray-400 flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:[i.jsx(ba,{size:16}),"Not Ready"]})]})]},P.id)),g<b&&i.jsx("div",{className:"p-4 rounded-lg bg-gray-700/30 border-2 border-dashed border-gray-600",children:i.jsx("div",{className:"text-gray-400 text-center",children:"Waiting for opponent..."})})]})]}),a!==null&&a>0&&i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl text-green-400 font-bold",children:[i.jsx(rn,{className:"w-6 h-6 animate-pulse"}),i.jsxs("span",{className:"animate-pulse",children:["Game starting in ",a,"..."]})]})}),a===null&&i.jsxs("div",{className:"text-center text-gray-400 h-6",children:[" ",E?i.jsx("p",{children:"All players ready! Starting game..."}):w?i.jsx("p",{children:"Waiting for players to be ready..."}):i.jsx("p",{children:" "})]})]})]})},nx=async t=>{try{const{data:e,error:s}=await me.from("game_sessions").insert({user_id:t.userId,mode:t.mode,category:t.category,score:t.score,correct_answers:t.correctAnswers,total_questions:t.totalQuestions,completion_time:t.completionTime,opponent_id:t.opponentId||null,opponent_score:t.opponentScore||null,result:t.result||null}).select().single();if(s)throw s;if(t.questionDetails.length>0){const n=t.questionDetails.map(o=>({game_session_id:e.id,question_id:o.questionId,user_id:t.userId,user_answer:o.userAnswer,is_correct:o.isCorrect,response_time:o.responseTime})),{error:r}=await me.from("user_answers").insert(n);r&&console.error("Error saving question details:",r)}return{gameSession:e}}catch(e){return console.error("Error saving game results:",e),{error:e}}},tr={gameId:"",mode:"solo",category:"mixed",players:[],currentQuestion:0,questions:[],timeRemaining:15,isGameStarted:!1,isGameEnded:!1,chatMessages:[],startCountdown:null,finishedPlayers:new Set,answeredPlayers:new Set,startTime:Date.now(),questionStartTimes:[],questionResponseTimes:[],playerResponseTimes:new Map,isTransitioning:!1,waitingForPlayers:!1,currentPlayerId:an(),scores:new Map,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1,nextQuestionPending:null,lastSyncTime:Date.now(),questionStartTime:Date.now(),socket:null,userAnswers:[]},Ai=_a((t,e)=>{let s=null;const n=()=>{s&&clearTimeout(s)},r=async()=>{try{const{data:o}=await me.auth.getUser();return o.user}catch(o){return console.error("Error getting current user:",o),null}};return{...tr,userAnswers:[],resetGame:()=>{n(),t({...tr,startTime:Date.now(),questionStartTime:Date.now(),currentPlayerId:an(),userAnswers:[]})},initializeGame:async o=>{if(o!=="solo")return console.log("Non-solo mode requested, deferring to oneVsOneStore"),Promise.resolve();n();const a=an();t({...tr,mode:o,currentPlayerId:a,startTime:Date.now(),questionStartTime:Date.now(),waitingForPlayers:!1,isGameStarted:!1,userAnswers:[]})},addPlayer:o=>{const l=e().currentPlayerId;t(c=>({...c,players:[{id:l,username:o,score:0,correctAnswers:0,isReady:!1,hasFinished:!1}],scores:new Map([[l,0]])}))},setTimeRemaining:o=>{t({timeRemaining:o})},setCategory:async o=>{const a=e();if(console.log("Setting category:",o,"Mode:",a.mode),a.mode!=="solo")return console.log("Non-solo mode requested, deferring to oneVsOneStore"),Promise.resolve();if(a._categoryFetchInProgress){console.log("Category fetch already in progress, ignoring duplicate request");return}if(a.category===o&&a.questions.length>0){console.log("Category already set and questions loaded. Skipping duplicate fetch."),a.isGameStarted||setTimeout(()=>{t({isGameStarted:!0})},50);return}try{t(c=>({...c,_categoryFetchInProgress:!0})),t(c=>({...c,category:o}));const l=await Gf(o);console.log("Fetched questions for category:",o,l),t(c=>({...c,questions:l,currentQuestion:0,timeRemaining:15,questionResponseTimes:[],startTime:Date.now(),questionStartTime:Date.now(),questionStartTimes:[Date.now()],waitingForPlayers:!1,isGameEnded:!1,isTransitioning:!1,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1,userAnswers:[],scores:new Map([[c.currentPlayerId,0]]),players:c.players.map(d=>({...d,score:0,correctAnswers:0,isReady:!1,hasFinished:!1})),_categoryFetchInProgress:!1})),setTimeout(()=>{t({isGameStarted:!0})},50)}catch(l){throw t(c=>({...c,_categoryFetchInProgress:!1})),console.error("Error in setCategory:",l),l}},getCurrentPlayer:()=>{const o=e();return o.players.find(a=>a.id===o.currentPlayerId)},startGame:()=>{e().mode==="solo"&&t({isGameStarted:!0})},endGame:async()=>{const o=e();if(o.mode==="solo"){const l=(Date.now()-o.startTime)/1e3;t({isGameStarted:!1,isGameEnded:!0,completionTime:l});const c=await r();if(c){const d=o.players[0];if(d){const u=d.correctAnswers||0,h=o.userAnswers.map(f=>({questionId:f.questionId,userAnswer:f.answer,isCorrect:f.isCorrect,responseTime:f.responseTime}));try{await nx({userId:c.id,mode:o.mode,category:o.category,score:d.score,correctAnswers:u,totalQuestions:o.questions.length,completionTime:l,questionDetails:h}),console.log("Game results saved successfully")}catch(f){console.error("Failed to save game results:",f)}}}else console.log("User not logged in, skipping result saving")}},nextQuestion:()=>{n(),t(o=>({currentQuestion:o.currentQuestion+1,timeRemaining:15,answeredPlayers:new Set,questionStartTimes:[...o.questionStartTimes,Date.now()],isTransitioning:!1,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1}))},checkAnswer:o=>{const a=e();return a.questions[a.currentQuestion].correctAnswer===o},submitAnswer:(o,a,l,c)=>{var g;const d=e(),u=(g=d.getCurrentPlayer)==null?void 0:g.call(d);if(!u)return;const h=15-a,f=[...d.questionResponseTimes,h],m=d.questions[d.currentQuestion],y=m.correctAnswer===o,x={questionId:m.id,questionIndex:d.currentQuestion,question:m.question,answer:o,correctAnswer:m.correctAnswer,isCorrect:y,responseTime:h,timestamp:Date.now()};d.mode==="solo"&&(t(b=>({...b,questionResponseTimes:f,scores:new Map(b.scores).set(u.id,c),userAnswers:[...b.userAnswers,x],players:b.players.map(w=>w.id===u.id?{...w,score:c,correctAnswers:y?w.correctAnswers+1:w.correctAnswers}:w),isTransitioning:!0})),s&&clearTimeout(s),s=setTimeout(()=>{const b=e();b.currentQuestion<b.questions.length-1?t({currentQuestion:b.currentQuestion+1,timeRemaining:15,isTransitioning:!1,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1}):e().endGame()},2e3))},setPlayerReady:()=>{},addChatMessage:()=>{},setIsTransitioning:o=>{t({isTransitioning:o})},handleRematch:()=>{},getPlayerResponseTimes:o=>{const a=e();return o===a.currentPlayerId?a.questionResponseTimes:a.playerResponseTimes.get(o)||[]},joinGame:()=>Promise.resolve()}}),rx=[{emoji:"⚽",text:"Great shot!"},{emoji:"👍",text:"Nice one!"},{emoji:"🎯",text:"Perfect answer!"},{emoji:"🔥",text:"On fire!"},{emoji:"💪",text:"Keep it up!"}],sr=[{threshold:12,points:5,label:"Lightning Fast",emoji:"⚡"},{threshold:10,points:4,label:"Quick",emoji:"🚀"},{threshold:8,points:3,label:"Normal",emoji:"✨"},{threshold:6,points:2,label:"Measured",emoji:"🎯"},{threshold:3,points:1,label:"Delayed",emoji:"⏳"},{threshold:0,points:0,label:"Slow",emoji:"🐌"}],ix={hidden:{x:-20,opacity:0},visible:t=>({x:0,opacity:1,transition:{delay:t*.1,type:"spring",stiffness:100,damping:10}}),exit:{x:20,opacity:0}},ox=({mode:t,onBackToCategory:e,onBackToMode:s})=>{p.useEffect(()=>(console.log("QuizGame component mounted for mode:",t),()=>{console.log("QuizGame component unmounting")}),[t]);const n=Ai(),r=Jt(),o=t==="solo"?n:r,{currentQuestion:a,questions:l,category:c,players:d,chatMessages:u,addChatMessage:h,isGameEnded:f,submitAnswer:m,getCurrentPlayer:y,getPlayerResponseTimes:x,endGame:g,socket:b,gameId:w,resetGame:_}=o,[A,C]=p.useState(null),[T,E]=p.useState(!1),[P,N]=p.useState(!1),[I,z]=p.useState(15),[de,he]=p.useState(!1),[X,G]=p.useState(!0),[H,Q]=p.useState(0),[ee,Y]=p.useState(null),[j,v]=p.useState(!1),[k,M]=p.useState(null),[L,B]=p.useState({isOpen:!1,type:null}),O=y(),F=O==null?void 0:O.isHost,D=l[a],K=t!=="solo";p.useEffect(()=>{D?console.log(`Current question (${a}):`,D.question.substring(0,30)+"..."):console.log("No question available yet")},[D,a]);const se={football:{icon:Ke,emoji:"⚽",color:"text-yellow-400"},basketball:{icon:Ns,emoji:"🏀",color:"text-orange-400"},tennis:{icon:$c,emoji:"🎾",color:"text-green-400"},olympics:{icon:Wc,emoji:"🏅",color:"text-blue-400"},mixed:{icon:Vc,emoji:"🎯",color:"text-purple-400"}},Z=se[c]||se.mixed,re=Z.icon,ae=O?x(O.id):[],W=ae[ae.length-1],pe=ae.reduce((U,ue)=>U+ue,0),_e=()=>{B({isOpen:!0,type:"category"})},ke=()=>{B({isOpen:!0,type:"mode"})},Me=()=>{B({isOpen:!0,type:"leave"})},Ue=()=>{K&&(b!=null&&b.connected)&&(console.log("Multiplayer mode: notifying server about leaving the game"),b.emit("leaveGame",{gameId:w,isHost:F||!1}),_()),L.type==="category"&&e?e():(L.type==="mode"||L.type==="leave")&&s&&s(),B({isOpen:!1,type:null})};p.useEffect(()=>{if(!K||!D||f||j)return;if(a===l.length-1&&T){console.log("Last question answered by current player, checking end game conditions...");const ue=setTimeout(()=>{console.log("Forcing game end after last question"),v(!0),g()},3e3);return()=>clearTimeout(ue)}},[a,l.length,T,K,D,g,f,j]),p.useEffect(()=>{D&&(console.log("Question changed, resetting state for question:",a),G(!0),C(null),E(!1),N(!1),z(15),Q(0),Y(null),M(null))},[a,D]);const Ce=p.useCallback(U=>{for(const ue of sr)if(U>=ue.threshold)return ue;return sr[sr.length-1]},[]),Nn=p.useCallback(U=>{if(!X||!O||!D)return;G(!1),C(U);const ue=U===D.correctAnswer;N(ue),E(!0),M(D.correctAnswer);let be=0,Qe=null;ue&&(be=10,Qe=Ce(I),be+=Qe.points,Y(Qe)),Q(be);const En=(O.score||0)+be;m(U,I,be,En),a===l.length-1&&console.log("This was the last question!")},[O,I,D,m,X,a,l.length,Ce]),Es=p.useCallback(()=>{if(!T&&X&&O){G(!1),E(!0),N(!1),Q(0);const U=O.score||0;m("",0,0,U)}},[T,m,X,O]);p.useEffect(()=>{let U;if(!T&&!f&&X&&D){const ue=Date.now();return U=setInterval(()=>{const Qe=(Date.now()-ue)/1e3,ft=Math.max(15-Qe,0);z(ft),ft<=0&&(clearInterval(U),Es())},50),()=>clearInterval(U)}},[T,Es,f,X,D]);const Pn=U=>U<3?"text-green-400":U<7?"text-yellow-400":"text-orange-400",Rs=U=>U>10?"text-green-400":U>5?"text-yellow-400":"text-red-400",An=U=>U.points>=5?"text-purple-400":U.points>=4?"text-blue-400":U.points>=3?"text-green-400":U.points>=2?"text-yellow-400":U.points>=1?"text-orange-400":"text-gray-400";if(f)return i.jsx("div",{className:"text-white text-center p-8 flex flex-col items-center justify-center min-h-screen",children:i.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"card p-8 max-w-md",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Game completed!"}),i.jsx("p",{className:"mb-4",children:"Loading results..."}),i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx(S.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1},className:"h-2 bg-green-500 rounded-full"})})]})});if(!D)return i.jsx("div",{className:"text-white text-center p-8 flex flex-col items-center justify-center min-h-screen",children:i.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"card p-8 max-w-md",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."}),i.jsx("p",{className:"mb-4",children:"Preparing questions"}),i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx(S.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1},className:"h-2 bg-blue-500 rounded-full w-1/2"})})]})});const Ms=a+1;return i.jsxs("div",{className:"min-h-screen bg-background p-4",children:[i.jsx(Pi,{isOpen:L.isOpen,onConfirm:Ue,onCancel:()=>B({isOpen:!1,type:null}),title:"Are you sure?",message:K&&F?ln.HOST_LEAVE:ln.LEAVE_GAME,confirmText:L.type==="category"?we.CATEGORIES:L.type==="leave"?"Leave Game":we.MODES,cancelText:we.STAY}),i.jsx(S.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"fixed top-0 left-0 right-0 bg-gray-800/90 backdrop-blur-sm border-b border-gray-700/50 z-40",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mx-auto",children:[i.jsx(S.div,{whileHover:{scale:1.1,rotate:360},transition:{duration:.5},className:`p-2 rounded-lg bg-gray-700/50 ${Z.color}`,children:i.jsx(re,{className:"w-6 h-6"})}),i.jsxs("div",{className:"text-center",children:[i.jsxs("h2",{className:"text-white font-medium capitalize flex items-center gap-1 justify-center",children:[c," Quiz",i.jsx("span",{className:"text-xl ml-1",children:Z.emoji})]}),i.jsxs("p",{className:"text-sm text-gray-400",children:["Question ",Ms," of ",l.length]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[K&&i.jsx("div",{className:"flex gap-2",children:d.map(U=>i.jsxs(S.div,{className:`px-3 py-1 rounded-full ${U.id===(O==null?void 0:O.id)?"bg-green-600/20":"bg-gray-700/20"}`,whileHover:{scale:1.05},children:[i.jsx("span",{className:"text-white font-medium",children:U.score||0}),i.jsx("span",{className:"text-gray-400 text-sm ml-1",children:U.username})]},U.id))}),i.jsxs(S.div,{className:`flex items-center gap-2 bg-gray-700/30 px-4 py-2 rounded-full ${Rs(I)}`,animate:{scale:I<=5?[1,1.1,1]:1,transition:{duration:.5,repeat:I<=5?1/0:0,repeatType:"reverse"}},children:[i.jsx(S.div,{animate:{rotate:360,transition:{duration:2,repeat:1/0,ease:"linear"}},children:i.jsx(rn,{className:"w-5 h-5"})}),i.jsx("span",{className:"font-medium min-w-[4ch] text-right",children:I.toFixed(2)})]})]})]})}),K?i.jsx("div",{className:"fixed bottom-6 left-6 z-50",children:i.jsx(He,{icon:Ti,label:"Leave Game",onClick:Me})}):i.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col gap-3",children:[e&&i.jsx(He,{icon:_t,label:we.CATEGORIES,onClick:_e}),s&&i.jsx(He,{icon:ut,label:we.MODES,onClick:ke,delay:.1})]}),K&&F&&i.jsxs("div",{className:"fixed top-4 right-4 px-3 py-1 rounded-full text-sm bg-yellow-500/20 text-yellow-400 flex items-center gap-1",children:[i.jsx(Ke,{size:14})," Host"]}),i.jsxs("div",{className:"container-game pt-20",children:[i.jsxs(S.div,{className:"card",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30},children:[i.jsx(De,{mode:"wait",children:i.jsx(S.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},className:"text-2xl font-bold text-white mb-8",children:D.question},D.question)}),i.jsx(De,{mode:"wait",children:i.jsx(S.div,{className:"grid gap-4",initial:"hidden",animate:"visible",exit:"exit",children:D.options.map((U,ue)=>{let be="p-4 rounded-xl text-left w-full transition-colors duration-300 ";return T?U===D.correctAnswer?be+="bg-green-600 text-white":U===A?be+="bg-red-600 text-white":be+="bg-gray-700 text-gray-400":be+="bg-gray-700 hover:bg-gray-600 text-white",i.jsx(S.button,{custom:ue,variants:ix,onClick:()=>Nn(U),disabled:!X,className:be,whileHover:X?{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}}:{},whileTap:X?{scale:.98,transition:{type:"spring",stiffness:400,damping:10}}:{},children:i.jsx(S.div,{initial:!1,animate:{color:T?U===D.correctAnswer?"#10B981":U===A?"#EF4444":"#9CA3AF":"#FFFFFF"},transition:{duration:.3},children:U})},U)})},a)}),i.jsx(De,{children:T&&i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mt-6 space-y-2",children:[i.jsxs(S.div,{className:`flex items-center gap-2 ${P?"text-green-500":"text-red-500"}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10},children:[i.jsx(Ts,{size:20}),i.jsx("span",{children:P?`Correct! +${H} points`:`Wrong! The correct answer was ${k||D.correctAnswer}`})]}),P&&ee&&i.jsx(S.div,{className:`flex items-center gap-2 ${An(ee)}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10,delay:.1},children:i.jsxs("span",{className:"text-sm",children:[ee.emoji," ",ee.label," bonus: +",ee.points," points"]})}),W!==void 0&&i.jsxs(S.div,{className:`flex items-center gap-2 ${Pn(W)}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10,delay:.2},children:[i.jsx(rn,{size:16}),i.jsxs("span",{className:"text-sm",children:["Response time: ",W.toFixed(2),"s",pe>0&&` (total ${pe.toFixed(2)}s)`]})]})]})})]}),K&&i.jsxs("div",{className:"fixed bottom-4 right-4 flex flex-col items-end",children:[i.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>he(!de),className:"mb-2 p-3 rounded-full bg-green-600 hover:bg-green-700 text-white transition-colors",children:de?i.jsx(Ps,{size:24}):i.jsx(bs,{size:24})}),i.jsx(De,{children:de&&i.jsxs(S.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"space-y-2",children:[i.jsx("div",{className:"mb-2 w-64 card max-h-40 overflow-y-auto",children:u.map(U=>i.jsxs("div",{className:`mb-2 text-sm ${U.playerId===(O==null?void 0:O.id)?"text-green-400":"text-white"}`,children:[i.jsxs("span",{className:"font-bold",children:[U.playerName,":"]})," ",U.message]},U.id))}),i.jsx("div",{className:"grid grid-cols-2 gap-2 w-64",children:rx.map(({emoji:U,text:ue})=>i.jsxs(S.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O&&h(O.id,`${U} ${ue}`),className:"p-2 text-sm bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[U," ",ue]},ue))})]})})]}),!K&&i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center text-gray-300",children:["Score: ",i.jsx("span",{className:"text-green-500 font-bold",children:(O==null?void 0:O.score)||0})]})]})]})};var As={};(function t(e,s,n,r){var o=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!e.OffscreenCanvas)return!1;var j=new OffscreenCanvas(1,1),v=j.getContext("2d");v.fillRect(0,0,1,1);var k=j.transferToImageBitmap();try{v.createPattern(k,"no-repeat")}catch{return!1}return!0}();function c(){}function d(j){var v=s.exports.Promise,k=v!==void 0?v:e.Promise;return typeof k=="function"?new k(j):(j(c,c),null)}var u=function(j,v){return{transform:function(k){if(j)return k;if(v.has(k))return v.get(k);var M=new OffscreenCanvas(k.width,k.height),L=M.getContext("2d");return L.drawImage(k,0,0),v.set(k,M),M},clear:function(){v.clear()}}}(l,new Map),h=function(){var j=Math.floor(16.666666666666668),v,k,M={},L=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(v=function(B){var O=Math.random();return M[O]=requestAnimationFrame(function F(D){L===D||L+j-1<D?(L=D,delete M[O],B()):M[O]=requestAnimationFrame(F)}),O},k=function(B){M[B]&&cancelAnimationFrame(M[B])}):(v=function(B){return setTimeout(B,j)},k=function(B){return clearTimeout(B)}),{frame:v,cancel:k}}(),f=function(){var j,v,k={};function M(L){function B(O,F){L.postMessage({options:O||{},callback:F})}L.init=function(F){var D=F.transferControlToOffscreen();L.postMessage({canvas:D},[D])},L.fire=function(F,D,K){if(v)return B(F,null),v;var se=Math.random().toString(36).slice(2);return v=d(function(Z){function re(ae){ae.data.callback===se&&(delete k[se],L.removeEventListener("message",re),v=null,u.clear(),K(),Z())}L.addEventListener("message",re),B(F,se),k[se]=re.bind(null,{data:{callback:se}})}),v},L.reset=function(){L.postMessage({reset:!0});for(var F in k)k[F](),delete k[F]}}return function(){if(j)return j;if(!n&&o){var L=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{j=new Worker(URL.createObjectURL(new Blob([L])))}catch(B){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",B),null}M(j)}return j}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(j,v){return v?v(j):j}function x(j){return j!=null}function g(j,v,k){return y(j&&x(j[v])?j[v]:m[v],k)}function b(j){return j<0?0:Math.floor(j)}function w(j,v){return Math.floor(Math.random()*(v-j))+j}function _(j){return parseInt(j,16)}function A(j){return j.map(C)}function C(j){var v=String(j).replace(/[^0-9a-f]/gi,"");return v.length<6&&(v=v[0]+v[0]+v[1]+v[1]+v[2]+v[2]),{r:_(v.substring(0,2)),g:_(v.substring(2,4)),b:_(v.substring(4,6))}}function T(j){var v=g(j,"origin",Object);return v.x=g(v,"x",Number),v.y=g(v,"y",Number),v}function E(j){j.width=document.documentElement.clientWidth,j.height=document.documentElement.clientHeight}function P(j){var v=j.getBoundingClientRect();j.width=v.width,j.height=v.height}function N(j){var v=document.createElement("canvas");return v.style.position="fixed",v.style.top="0px",v.style.left="0px",v.style.pointerEvents="none",v.style.zIndex=j,v}function I(j,v,k,M,L,B,O,F,D){j.save(),j.translate(v,k),j.rotate(B),j.scale(M,L),j.arc(0,0,1,O,F,D),j.restore()}function z(j){var v=j.angle*(Math.PI/180),k=j.spread*(Math.PI/180);return{x:j.x,y:j.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:j.startVelocity*.5+Math.random()*j.startVelocity,angle2D:-v+(.5*k-Math.random()*k),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:j.color,shape:j.shape,tick:0,totalTicks:j.ticks,decay:j.decay,drift:j.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:j.gravity*3,ovalScalar:.6,scalar:j.scalar,flat:j.flat}}function de(j,v){v.x+=Math.cos(v.angle2D)*v.velocity+v.drift,v.y+=Math.sin(v.angle2D)*v.velocity+v.gravity,v.velocity*=v.decay,v.flat?(v.wobble=0,v.wobbleX=v.x+10*v.scalar,v.wobbleY=v.y+10*v.scalar,v.tiltSin=0,v.tiltCos=0,v.random=1):(v.wobble+=v.wobbleSpeed,v.wobbleX=v.x+10*v.scalar*Math.cos(v.wobble),v.wobbleY=v.y+10*v.scalar*Math.sin(v.wobble),v.tiltAngle+=.1,v.tiltSin=Math.sin(v.tiltAngle),v.tiltCos=Math.cos(v.tiltAngle),v.random=Math.random()+2);var k=v.tick++/v.totalTicks,M=v.x+v.random*v.tiltCos,L=v.y+v.random*v.tiltSin,B=v.wobbleX+v.random*v.tiltCos,O=v.wobbleY+v.random*v.tiltSin;if(j.fillStyle="rgba("+v.color.r+", "+v.color.g+", "+v.color.b+", "+(1-k)+")",j.beginPath(),a&&v.shape.type==="path"&&typeof v.shape.path=="string"&&Array.isArray(v.shape.matrix))j.fill(Q(v.shape.path,v.shape.matrix,v.x,v.y,Math.abs(B-M)*.1,Math.abs(O-L)*.1,Math.PI/10*v.wobble));else if(v.shape.type==="bitmap"){var F=Math.PI/10*v.wobble,D=Math.abs(B-M)*.1,K=Math.abs(O-L)*.1,se=v.shape.bitmap.width*v.scalar,Z=v.shape.bitmap.height*v.scalar,re=new DOMMatrix([Math.cos(F)*D,Math.sin(F)*D,-Math.sin(F)*K,Math.cos(F)*K,v.x,v.y]);re.multiplySelf(new DOMMatrix(v.shape.matrix));var ae=j.createPattern(u.transform(v.shape.bitmap),"no-repeat");ae.setTransform(re),j.globalAlpha=1-k,j.fillStyle=ae,j.fillRect(v.x-se/2,v.y-Z/2,se,Z),j.globalAlpha=1}else if(v.shape==="circle")j.ellipse?j.ellipse(v.x,v.y,Math.abs(B-M)*v.ovalScalar,Math.abs(O-L)*v.ovalScalar,Math.PI/10*v.wobble,0,2*Math.PI):I(j,v.x,v.y,Math.abs(B-M)*v.ovalScalar,Math.abs(O-L)*v.ovalScalar,Math.PI/10*v.wobble,0,2*Math.PI);else if(v.shape==="star")for(var W=Math.PI/2*3,pe=4*v.scalar,_e=8*v.scalar,ke=v.x,Me=v.y,Ue=5,Ce=Math.PI/Ue;Ue--;)ke=v.x+Math.cos(W)*_e,Me=v.y+Math.sin(W)*_e,j.lineTo(ke,Me),W+=Ce,ke=v.x+Math.cos(W)*pe,Me=v.y+Math.sin(W)*pe,j.lineTo(ke,Me),W+=Ce;else j.moveTo(Math.floor(v.x),Math.floor(v.y)),j.lineTo(Math.floor(v.wobbleX),Math.floor(L)),j.lineTo(Math.floor(B),Math.floor(O)),j.lineTo(Math.floor(M),Math.floor(v.wobbleY));return j.closePath(),j.fill(),v.tick<v.totalTicks}function he(j,v,k,M,L){var B=v.slice(),O=j.getContext("2d"),F,D,K=d(function(se){function Z(){F=D=null,O.clearRect(0,0,M.width,M.height),u.clear(),L(),se()}function re(){n&&!(M.width===r.width&&M.height===r.height)&&(M.width=j.width=r.width,M.height=j.height=r.height),!M.width&&!M.height&&(k(j),M.width=j.width,M.height=j.height),O.clearRect(0,0,M.width,M.height),B=B.filter(function(ae){return de(O,ae)}),B.length?F=h.frame(re):Z()}F=h.frame(re),D=Z});return{addFettis:function(se){return B=B.concat(se),K},canvas:j,promise:K,reset:function(){F&&h.cancel(F),D&&D()}}}function X(j,v){var k=!j,M=!!g(v||{},"resize"),L=!1,B=g(v,"disableForReducedMotion",Boolean),O=o&&!!g(v||{},"useWorker"),F=O?f():null,D=k?E:P,K=j&&F?!!j.__confetti_initialized:!1,se=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Z;function re(W,pe,_e){for(var ke=g(W,"particleCount",b),Me=g(W,"angle",Number),Ue=g(W,"spread",Number),Ce=g(W,"startVelocity",Number),Nn=g(W,"decay",Number),Es=g(W,"gravity",Number),Pn=g(W,"drift",Number),Rs=g(W,"colors",A),An=g(W,"ticks",Number),Ms=g(W,"shapes"),U=g(W,"scalar"),ue=!!g(W,"flat"),be=T(W),Qe=ke,ft=[],En=j.width*be.x,ld=j.height*be.y;Qe--;)ft.push(z({x:En,y:ld,angle:Me,spread:Ue,startVelocity:Ce,color:Rs[Qe%Rs.length],shape:Ms[w(0,Ms.length)],ticks:An,decay:Nn,gravity:Es,drift:Pn,scalar:U,flat:ue}));return Z?Z.addFettis(ft):(Z=he(j,ft,D,pe,_e),Z.promise)}function ae(W){var pe=B||g(W,"disableForReducedMotion",Boolean),_e=g(W,"zIndex",Number);if(pe&&se)return d(function(Ce){Ce()});k&&Z?j=Z.canvas:k&&!j&&(j=N(_e),document.body.appendChild(j)),M&&!K&&D(j);var ke={width:j.width,height:j.height};F&&!K&&F.init(j),K=!0,F&&(j.__confetti_initialized=!0);function Me(){if(F){var Ce={getBoundingClientRect:function(){if(!k)return j.getBoundingClientRect()}};D(Ce),F.postMessage({resize:{width:Ce.width,height:Ce.height}});return}ke.width=ke.height=null}function Ue(){Z=null,M&&(L=!1,e.removeEventListener("resize",Me)),k&&j&&(document.body.contains(j)&&document.body.removeChild(j),j=null,K=!1)}return M&&!L&&(L=!0,e.addEventListener("resize",Me,!1)),F?F.fire(W,ke,Ue):re(W,ke,Ue)}return ae.reset=function(){F&&F.reset(),Z&&Z.reset()},ae}var G;function H(){return G||(G=X(null,{useWorker:!0,resize:!0})),G}function Q(j,v,k,M,L,B,O){var F=new Path2D(j),D=new Path2D;D.addPath(F,new DOMMatrix(v));var K=new Path2D;return K.addPath(D,new DOMMatrix([Math.cos(O)*L,Math.sin(O)*L,-Math.sin(O)*B,Math.cos(O)*B,k,M])),K}function ee(j){if(!a)throw new Error("path confetti are not supported in this browser");var v,k;typeof j=="string"?v=j:(v=j.path,k=j.matrix);var M=new Path2D(v),L=document.createElement("canvas"),B=L.getContext("2d");if(!k){for(var O=1e3,F=O,D=O,K=0,se=0,Z,re,ae=0;ae<O;ae+=2)for(var W=0;W<O;W+=2)B.isPointInPath(M,ae,W,"nonzero")&&(F=Math.min(F,ae),D=Math.min(D,W),K=Math.max(K,ae),se=Math.max(se,W));Z=K-F,re=se-D;var pe=10,_e=Math.min(pe/Z,pe/re);k=[_e,0,0,_e,-Math.round(Z/2+F)*_e,-Math.round(re/2+D)*_e]}return{type:"path",path:v,matrix:k}}function Y(j){var v,k=1,M="#000000",L='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof j=="string"?v=j:(v=j.text,k="scalar"in j?j.scalar:k,L="fontFamily"in j?j.fontFamily:L,M="color"in j?j.color:M);var B=10*k,O=""+B+"px "+L,F=new OffscreenCanvas(B,B),D=F.getContext("2d");D.font=O;var K=D.measureText(v),se=Math.ceil(K.actualBoundingBoxRight+K.actualBoundingBoxLeft),Z=Math.ceil(K.actualBoundingBoxAscent+K.actualBoundingBoxDescent),re=2,ae=K.actualBoundingBoxLeft+re,W=K.actualBoundingBoxAscent+re;se+=re+re,Z+=re+re,F=new OffscreenCanvas(se,Z),D=F.getContext("2d"),D.font=O,D.fillStyle=M,D.fillText(v,ae,W);var pe=1/k;return{type:"bitmap",bitmap:F.transferToImageBitmap(),matrix:[pe,0,0,pe,-se*pe/2,-Z*pe/2]}}s.exports=function(){return H().apply(this,arguments)},s.exports.reset=function(){H().reset()},s.exports.create=X,s.exports.shapeFromPath=ee,s.exports.shapeFromText=Y})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),As,!1);const Ut=As.exports;As.exports.create;const ax={football:"⚽",basketball:"🏀",tennis:"🎾",olympics:"🏅",mixed:"🎯"},lx=t=>t>=90?"Outstanding! 🌟":t>=80?"Excellent! 🎯":t>=70?"Great Job! 👏":t>=60?"Well Done! 💪":t>=50?"Good Effort! 👍":"Keep Practicing! 💫",cx=({size:t=20,className:e=""})=>i.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",className:e,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.1907 4H19.9333L13.73 11.0533L20.8 20H15.0267L10.7027 14.4667L5.74933 20H3.00267L9.66667 12.4533L2.93333 4H8.84L12.7533 9.0467L17.1907 4ZM15.72 18.4667H17.0667L8.15733 5.46667H6.70933L15.72 18.4667Z"})}),dx=({message:t,onClose:e})=>i.jsxs(S.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50",children:[i.jsx("span",{children:t}),i.jsx("button",{onClick:e,className:"ml-2 text-white/80 hover:text-white",children:i.jsx(Ps,{size:16})})]}),ed=$e.memo(({correctAnswers:t,incorrectAnswers:e,totalQuestions:s})=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[i.jsx(_i,{size:16})," Correct"]}),i.jsx("span",{className:"text-green-400 font-bold",children:t})]}),i.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 transition-all duration-1000",style:{width:`${t/s*100}%`}})})]}),i.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(t/s*100).toFixed(0),"%"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[i.jsx(Xc,{size:16})," Incorrect"]}),i.jsx("span",{className:"text-red-400 font-bold",children:e})]}),i.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:`${e/s*100}%`}})})]}),i.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(e/s*100).toFixed(0),"%"]})]})]}));ed.displayName="AnswerDistributionChart";const ux=({shareText:t,shareUrl:e,onClose:s,onShowToast:n,player:r,score:o,maxScore:a,accuracy:l,category:c,categoryEmoji:d,setCustomShareText:u})=>{const[h,f]=p.useState(!1),m=async()=>{try{await navigator.clipboard.writeText(t),n("Text copied to clipboard!")}catch(b){console.error("Failed to copy text:",b)}},y=async()=>{try{await navigator.clipboard.writeText(e),n("Link copied to clipboard!")}catch(b){console.error("Failed to copy link:",b)}},x=()=>{f(!0),setTimeout(()=>{Ut({particleCount:100,spread:70,origin:{y:.6}}),n("Results shared successfully!"),f(!1),setTimeout(()=>{s()},1e3)},500)},g=b=>{let w;const _=t.includes("https://sportiq.games")?t:`${t} https://sportiq.games`;switch(b){case"x":w=`https://twitter.com/intent/tweet?text=${encodeURIComponent(_)}`;break;case"facebook":w=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent("https://sportiq.games")}&quote=${encodeURIComponent(t)}`;break;case"whatsapp":w=`https://wa.me/?text=${encodeURIComponent(_)}`;break;default:return}window.open(w,"_blank"),x()};return i.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 w-full max-w-md animate-scaleIn",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:"Share Challenge"}),i.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",disabled:h,children:i.jsx(Ps,{size:20})})]}),i.jsx("p",{className:"text-sm text-gray-400 mb-4 text-center",children:"Challenge your friends to beat your score!"}),i.jsxs("div",{className:"bg-gradient-to-b from-gray-800 to-gray-900 p-4 rounded-lg border border-gray-700 mb-6 relative group",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold",children:"S"}),i.jsx("span",{className:"text-blue-400 font-bold",children:"SportIQ"})]}),i.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between mb-3",children:[i.jsx("div",{className:"text-white font-bold",children:(r==null?void 0:r.username)||"You"}),i.jsx("div",{className:"bg-green-500/20 px-2 py-0.5 rounded text-green-400 text-sm",children:l>=80?"Master":l>=60?"Expert":"Challenger"})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 mb-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("div",{className:"text-gray-400 text-sm",children:"Score"}),i.jsxs("div",{className:"text-yellow-400 font-bold",children:[o,"/",a]})]}),i.jsx("div",{className:"mt-1 w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600",style:{width:`${Math.min(o/a*100,100)}%`}})})]}),i.jsxs("div",{className:"text-center text-sm text-gray-300",children:[c.charAt(0).toUpperCase()+c.slice(1)," Quiz ",d]})]}),i.jsx("div",{className:`absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 
                        flex items-center justify-center transition-opacity rounded-lg`,children:i.jsx("span",{className:"bg-white/20 backdrop-blur-sm px-3 py-1 rounded text-white text-sm",children:"Preview"})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"flex justify-between text-gray-300 text-sm mb-2",children:[i.jsx("span",{children:"Customize your message:"}),i.jsxs("button",{onClick:m,className:"text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[i.jsx(Ts,{size:14})," Copy"]})]}),i.jsx("textarea",{value:t,onChange:b=>u(b.target.value),className:"w-full p-3 bg-gray-700 rounded-lg text-white text-sm resize-none border border-gray-600 focus:border-blue-500 focus:outline-none",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[i.jsxs("button",{className:`flex items-center justify-center gap-2 p-3 bg-blue-600 
                     hover:bg-blue-700 rounded-lg text-white transition-colors`,onClick:()=>g("x"),disabled:h,children:[h?i.jsx(Bt,{size:18,className:"animate-spin"}):i.jsx(kn,{size:18}),i.jsx("span",{children:"Share to Social"})]}),i.jsxs("button",{className:`flex items-center justify-center gap-2 p-3 bg-green-600 
                     hover:bg-green-700 rounded-lg text-white transition-colors`,onClick:()=>{m(),x()},disabled:h,children:[h?i.jsx(Bt,{size:18,className:"animate-spin"}):i.jsx(bs,{size:18}),i.jsx("span",{children:"Share via Chat"})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[i.jsx("button",{onClick:()=>g("x"),className:"p-3 bg-black hover:bg-gray-900 rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on X",disabled:h,children:i.jsx(cx,{size:20})}),i.jsx("button",{onClick:()=>g("facebook"),className:"p-3 bg-[#4267B2]/90 hover:bg-[#4267B2] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on Facebook",disabled:h,children:i.jsx(qc,{size:20})}),i.jsx("button",{onClick:()=>g("whatsapp"),className:"p-3 bg-[#25D366]/90 hover:bg-[#25D366] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on WhatsApp",disabled:h,children:i.jsx(bs,{size:20})}),i.jsx("button",{onClick:()=>{y(),x()},className:"p-3 bg-gray-600/90 hover:bg-gray-600 rounded-lg text-white transition-colors flex items-center justify-center",title:"Copy link",disabled:h,children:i.jsx(zc,{size:20})})]})]})})},td=$e.memo(({score:t,accuracy:e,totalQuestions:s,correctAnswers:n,incorrectAnswers:r,fastestResponse:o,slowestResponse:a,avgTimePerQuestion:l,totalResponseTime:c})=>i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Final Score"}),i.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent",children:t}),i.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 transition-all duration-1000",style:{width:`${t/(s*15)*100}%`}})}),i.jsxs("div",{className:"text-gray-400 text-sm mt-1",children:["Max: ",s*15]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Accuracy"}),i.jsxs("div",{className:"text-4xl font-bold text-green-400",children:[e.toFixed(1),"%"]}),i.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 transition-all duration-1000",style:{width:`${Math.min(e,100)}%`}})})]})]})}),i.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:[i.jsxs("h3",{className:"text-xl text-white mb-4 flex items-center gap-2",children:[i.jsx(Ns,{className:"w-5 h-5 text-green-400"}),"Answer Distribution"]}),i.jsx(ed,{correctAnswers:n,incorrectAnswers:r,totalQuestions:s})]}),i.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:[i.jsxs("h3",{className:"text-xl text-white mb-4 flex items-center gap-2",children:[i.jsx(Ni,{className:"w-5 h-5 text-yellow-400"}),"Response Times"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Fastest Response"}),i.jsxs("span",{className:"text-green-400 font-bold",children:[o.toFixed(2),"s"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Slowest Response"}),i.jsxs("span",{className:"text-yellow-400 font-bold",children:[a.toFixed(2),"s"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Average Response"}),i.jsxs("span",{className:"text-blue-400 font-bold",children:[l.toFixed(2),"s"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Total Response Time"}),i.jsxs("span",{className:"text-purple-400 font-bold",children:[c.toFixed(2),"s"]})]})]})]})]}));td.displayName="StatsDisplay";const sd=$e.memo(({onPlayAgain:t,onHome:e,onShare:s})=>i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:t,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-green-600 
               hover:bg-green-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[i.jsx(Kc,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"Play Again"]}),i.jsxs("button",{onClick:e,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-gray-700 
               hover:bg-gray-600 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[i.jsx(ut,{className:"w-5 h-5 group-hover:-translate-y-1 transition-transform"}),"Home"]}),i.jsxs("button",{onClick:s,className:`flex flex-col items-center justify-center p-4 rounded-xl bg-blue-600 
               hover:bg-blue-700 text-white transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(kn,{className:"w-5 h-5 group-hover:rotate-45 transition-transform"}),i.jsx("span",{children:"Challenge"})]}),i.jsx("span",{className:"text-xs text-blue-200 mt-1",children:"Share your score"})]})]}));sd.displayName="ActionButtons";const nd=$e.memo(({onPlayAgain:t,onHome:e})=>{const{players:s,category:n,questions:r,questionResponseTimes:o}=Ai(),a=s[0],l=ax[n],[c,d]=p.useState(!1),[u,h]=p.useState(null),f=r.length,m=(a==null?void 0:a.score)||0,y=f*15,x=m/y*100,g=()=>`I just ${x>=90?"mastered":x>=70?"aced":x>=50?"conquered":"tackled"} the ${n} quiz on SportIQ with ${m}/${y} points (${x.toFixed(1)}% accuracy)! Think you can beat my score? 🎯 #SportIQ https://sportiq.games`,[b,w]=p.useState(g()),_=b,A="https://sportiq.games";p.useState(!1);const C=(a==null?void 0:a.correctAnswers)||0,T=f-C,E=o.filter(G=>G>0&&G<=15),P=E.length>0?Math.min(...E):0,N=E.length>0?Math.max(...E):0,I=E.length>0?E.reduce((G,H)=>G+H,0)/E.length:0,z=E.reduce((G,H)=>G+H,0),de=lx(x),he=G=>{h(G),setTimeout(()=>h(null),3e3)};p.useEffect(()=>{const H=Date.now()+3e3,Q={startVelocity:30,spread:360,ticks:60,zIndex:0},ee=(j,v)=>Math.random()*(v-j)+j,Y=setInterval(()=>{const j=H-Date.now();if(j<=0)return clearInterval(Y);const v=50*(j/3e3);Ut({...Q,particleCount:v,origin:{x:ee(.1,.3),y:Math.random()-.2}}),Ut({...Q,particleCount:v,origin:{x:ee(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(Y)},[]);const X=p.useCallback(()=>{d(!0),w(g())},[g]);return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-gray-900 to-gray-800",children:[i.jsxs("div",{className:"w-full max-w-xl bg-gray-800/50 backdrop-blur-lg rounded-2xl p-8 shadow-xl border border-gray-700/50",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx(Ke,{className:"w-24 h-24 text-yellow-400 animate-bounce filter drop-shadow-lg"}),i.jsx("span",{className:"absolute top-12 right-0 text-4xl animate-pulse",children:l}),i.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"})]}),i.jsx("h2",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Game Complete!"}),i.jsx("p",{className:"text-2xl text-green-400 font-bold mb-2",children:de}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[i.jsx(Qc,{className:"w-4 h-4"}),i.jsxs("span",{children:["Total response time: ",z.toFixed(2),"s"]})]})]}),i.jsx(td,{score:m,accuracy:x,totalQuestions:f,correctAnswers:C,incorrectAnswers:T,fastestResponse:P,slowestResponse:N,avgTimePerQuestion:I,totalResponseTime:z}),i.jsx("div",{className:"mt-8",children:i.jsx(sd,{onPlayAgain:t,onHome:e,onShare:X})}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-gray-400 text-sm",children:"Challenge your friends to beat your score! 🏆"})})]}),c&&i.jsx(ux,{shareText:_,shareUrl:A,onClose:()=>d(!1),onShowToast:he,player:a,score:m,maxScore:y,accuracy:x,category:n,categoryEmoji:l,setCustomShareText:w}),i.jsx(De,{children:u&&i.jsx(dx,{message:u,onClose:()=>h(null)})}),i.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes scaleIn {
          from { transform: scale(0.95); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        
        .animate-scaleIn {
          animation: scaleIn 0.3s ease-out;
        }
        
        /* Almarena-like font styling */
        .sport-share-text {
          font-family: "Almarena Neue", "Montserrat", "Segoe UI", sans-serif;
          font-weight: 700;
          letter-spacing: -0.02em;
          font-size: 1.1rem;
          line-height: 1.4;
          text-transform: none;
        }
      `})]})});nd.displayName="SoloResultsScreen";const hx={football:"⚽",basketball:"🏀",tennis:"🎾",olympics:"🏅",mixed:"🎯"},fx=t=>t>=90?"Outstanding! 🌟":t>=80?"Excellent! 🎯":t>=70?"Great Job! 👏":t>=60?"Well Done! 💪":t>=50?"Good Effort! 👍":"Keep Practicing! 💫",mx=({size:t=20,className:e=""})=>i.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",className:e,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M17.1907 4H19.9333L13.73 11.0533L20.8 20H15.0267L10.7027 14.4667L5.74933 20H3.00267L9.66667 12.4533L2.93333 4H8.84L12.7533 9.0467L17.1907 4ZM15.72 18.4667H17.0667L8.15733 5.46667H6.70933L15.72 18.4667Z"})}),px=({message:t,onClose:e})=>i.jsxs(S.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50",children:[i.jsx("span",{children:t}),i.jsx("button",{onClick:e,className:"ml-2 text-white/80 hover:text-white",children:i.jsx(Ps,{size:16})})]}),rd=$e.memo(({correctAnswers:t,incorrectAnswers:e,totalQuestions:s})=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[i.jsx(_i,{size:16})," Correct"]}),i.jsx("span",{className:"text-green-400 font-bold",children:t})]}),i.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 transition-all duration-1000",style:{width:`${t/s*100}%`}})})]}),i.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(t/s*100).toFixed(0),"%"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[i.jsx(Xc,{size:16})," Incorrect"]}),i.jsx("span",{className:"text-red-400 font-bold",children:e})]}),i.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:`${e/s*100}%`}})})]}),i.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(e/s*100).toFixed(0),"%"]})]})]}));rd.displayName="AnswerDistributionChart";const gx=({shareText:t,shareUrl:e,onClose:s,onShowToast:n,winner:r,loser:o,isTied:a,category:l,categoryEmoji:c,currentPlayer:d,setCustomShareText:u})=>{const[h,f]=p.useState(!1),m=async()=>{try{await navigator.clipboard.writeText(t),n("Text copied to clipboard!")}catch(b){console.error("Failed to copy text:",b)}},y=async()=>{try{await navigator.clipboard.writeText(e),n("Link copied to clipboard!")}catch(b){console.error("Failed to copy link:",b)}},x=()=>{f(!0),setTimeout(()=>{Ut({particleCount:100,spread:70,origin:{y:.6}}),n("Results shared successfully!"),f(!1),setTimeout(()=>{s()},1e3)},500)},g=b=>{let w;const _=t.includes("https://sportiq.games")?t:`${t} https://sportiq.games`;switch(b){case"x":w=`https://twitter.com/intent/tweet?text=${encodeURIComponent(_)}`;break;case"facebook":w=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent("https://sportiq.games")}&quote=${encodeURIComponent(t)}`;break;case"whatsapp":w=`https://wa.me/?text=${encodeURIComponent(_)}`;break;default:return}window.open(w,"_blank"),x()};return i.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 w-full max-w-md animate-scaleIn",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-xl font-bold text-white",children:["Share Your ",(r==null?void 0:r.username)===(d==null?void 0:d.username)&&!a?"Victory":"Results"]}),i.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",disabled:h,children:i.jsx(Ps,{size:20})})]}),i.jsx("p",{className:"text-sm text-gray-400 mb-4 text-center",children:"Challenge your friends to beat your score!"}),i.jsxs("div",{className:"bg-gradient-to-b from-gray-800 to-gray-900 p-4 rounded-lg border border-gray-700 mb-6 relative group",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold",children:"S"}),i.jsx("span",{className:"text-blue-400 font-bold",children:"SportIQ"})]}),i.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("div",{className:"text-white font-bold",children:d==null?void 0:d.username}),i.jsx("div",{className:a?"text-blue-400":(r==null?void 0:r.username)===(d==null?void 0:d.username)?"text-green-400":"text-yellow-400",children:a?"Tied!":(r==null?void 0:r.username)===(d==null?void 0:d.username)?"Winner!":"Challenger"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[i.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[i.jsx("div",{className:"text-xl font-bold text-yellow-400",children:r==null?void 0:r.score}),i.jsx("div",{className:"text-xs text-gray-400",children:r==null?void 0:r.username})]}),i.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[i.jsx("div",{className:"text-xl font-bold text-yellow-400",children:o==null?void 0:o.score}),i.jsx("div",{className:"text-xs text-gray-400",children:o==null?void 0:o.username})]})]}),i.jsxs("div",{className:"text-center mt-2 text-sm text-gray-300",children:[l.charAt(0).toUpperCase()+l.slice(1)," Quiz ",c]})]}),i.jsx("div",{className:`absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 
                        flex items-center justify-center transition-opacity rounded-lg`,children:i.jsx("span",{className:"bg-white/20 backdrop-blur-sm px-3 py-1 rounded text-white text-sm",children:"Preview"})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"flex justify-between text-gray-300 text-sm mb-2",children:[i.jsx("span",{children:"Customize your message:"}),i.jsxs("button",{onClick:m,className:"text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[i.jsx(Ts,{size:14})," Copy"]})]}),i.jsx("textarea",{value:t,onChange:b=>u(b.target.value),className:"w-full p-3 bg-gray-700 rounded-lg text-white text-sm resize-none border border-gray-600 focus:border-blue-500 focus:outline-none",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[i.jsxs("button",{className:`flex items-center justify-center gap-2 p-3 bg-blue-600 
                     hover:bg-blue-700 rounded-lg text-white transition-colors`,onClick:()=>g("x"),disabled:h,children:[h?i.jsx(Bt,{size:18,className:"animate-spin"}):i.jsx(kn,{size:18}),i.jsx("span",{children:"Share to Social"})]}),i.jsxs("button",{className:`flex items-center justify-center gap-2 p-3 bg-green-600 
                     hover:bg-green-700 rounded-lg text-white transition-colors`,onClick:()=>{m(),x()},disabled:h,children:[h?i.jsx(Bt,{size:18,className:"animate-spin"}):i.jsx(bs,{size:18}),i.jsx("span",{children:"Share via Chat"})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[i.jsx("button",{onClick:()=>g("x"),className:"p-3 bg-black hover:bg-gray-900 rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on X",disabled:h,children:i.jsx(mx,{size:20})}),i.jsx("button",{onClick:()=>g("facebook"),className:"p-3 bg-[#4267B2]/90 hover:bg-[#4267B2] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on Facebook",disabled:h,children:i.jsx(qc,{size:20})}),i.jsx("button",{onClick:()=>g("whatsapp"),className:"p-3 bg-[#25D366]/90 hover:bg-[#25D366] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on WhatsApp",disabled:h,children:i.jsx(bs,{size:20})}),i.jsx("button",{onClick:()=>{y(),x()},className:"p-3 bg-gray-600/90 hover:bg-gray-600 rounded-lg text-white transition-colors flex items-center justify-center",title:"Copy link",disabled:h,children:i.jsx(zc,{size:20})})]})]})})},id=$e.memo(({player:t,isWinner:e,totalQuestions:s,maxPossibleScore:n,playerResponseTimes:r,rematchReady:o})=>{const a=t.score||0;let l=t.correctAnswers;l===void 0&&(l=Math.floor(a/15));const c=s-l,d=a/n*100,u=r.filter(g=>g>0&&g<=15),h=u.length>0?Math.min(...u):0,f=u.length>0?Math.max(...u):0,m=u.length>0?u.reduce((g,b)=>g+b,0)/u.length:0,y=u.reduce((g,b)=>g+b,0),x=fx(d);return i.jsxs("div",{className:`bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 ${e?"ring-2 ring-yellow-400":""}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[e&&i.jsx(Fc,{className:"w-6 h-6 text-yellow-400"}),i.jsx("h3",{className:"text-xl font-bold text-white",children:t.username}),e&&i.jsx("div",{className:"bg-yellow-400/10 text-yellow-400 px-2 py-1 rounded-full text-xs font-bold",children:"Winner!"}),o&&i.jsx("div",{className:"bg-green-500/10 text-green-400 px-2 py-1 rounded-full text-xs font-bold",children:"Ready for rematch ✓"})]}),i.jsx("div",{className:"text-xl text-gray-300",children:x})]}),i.jsx("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm mb-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Final Score"}),i.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent",children:a}),i.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 transition-all duration-1000",style:{width:`${a/n*100}%`}})}),i.jsxs("div",{className:"text-gray-400 text-sm mt-1",children:["Max: ",n]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Accuracy"}),i.jsxs("div",{className:"text-3xl font-bold text-green-400",children:[d.toFixed(1),"%"]}),i.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 transition-all duration-1000",style:{width:`${Math.min(d,100)}%`}})})]})]})}),i.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm mb-4",children:[i.jsxs("h3",{className:"text-lg text-white mb-3 flex items-center gap-2",children:[i.jsx(Ns,{className:"w-5 h-5 text-green-400"}),"Answer Distribution"]}),i.jsx(rd,{correctAnswers:l,incorrectAnswers:c,totalQuestions:s})]}),i.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm",children:[i.jsxs("h3",{className:"text-lg text-white mb-3 flex items-center gap-2",children:[i.jsx(Ni,{className:"w-5 h-5 text-yellow-400"}),"Response Times"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Fastest Response"}),i.jsxs("span",{className:"text-green-400 font-bold",children:[h.toFixed(2),"s"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Slowest Response"}),i.jsxs("span",{className:"text-yellow-400 font-bold",children:[f.toFixed(2),"s"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Average Response"}),i.jsxs("span",{className:"text-blue-400 font-bold",children:[m.toFixed(2),"s"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Total Response Time"}),i.jsxs("span",{className:"text-purple-400 font-bold",children:[y.toFixed(2),"s"]})]})]})]})]})});id.displayName="PlayerStats";const od=$e.memo(({onPlayAgain:t,onHome:e,onShare:s,rematchRequested:n,onRematch:r,onCancelRematch:o})=>i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n?i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 rounded-t-xl bg-gray-700 text-white",children:[i.jsx(Bt,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"Waiting for opponent..."})]}),i.jsx("button",{onClick:o,className:"p-2 rounded-b-xl bg-red-600 hover:bg-red-700 text-white text-sm font-medium transition-colors",children:"Cancel Request"})]}):i.jsxs("button",{onClick:r,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-green-600 
                 hover:bg-green-700 text-white font-semibold transition-all transform 
                 hover:scale-[1.02] active:scale-[0.98] group`,children:[i.jsx(Kc,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"Play Again"]}),i.jsxs("button",{onClick:e,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-gray-700 
               hover:bg-gray-600 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[i.jsx(ut,{className:"w-5 h-5 group-hover:-translate-y-1 transition-transform"}),"Home"]}),i.jsxs("button",{onClick:s,className:`flex flex-col items-center justify-center p-4 rounded-xl bg-blue-600 
               hover:bg-blue-700 text-white transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(kn,{className:"w-5 h-5 group-hover:rotate-45 transition-transform"}),i.jsx("span",{children:"Challenge Friends"})]}),i.jsx("span",{className:"text-xs text-blue-200 mt-1",children:"Share your results"})]})]}));od.displayName="ActionButtons";const yx=({onPlayAgain:t,onHome:e})=>{const{players:s,category:n,questions:r,completionTime:o=0,getCurrentPlayer:a,getPlayerResponseTimes:l,socket:c,gameId:d}=Jt(),[u,h]=p.useState(!1),[f,m]=p.useState(null),[y,x]=p.useState(!1),[g,b]=p.useState(null),w=a(),_=hx[n],A=r.length*15,C=$e.useMemo(()=>[...s].sort((Y,j)=>j.score-Y.score),[s]),T=C[0],E=C[1],P=(T==null?void 0:T.score)===(E==null?void 0:E.score),N=p.useCallback(Y=>l(Y),[l]),I=()=>P?`Epic battle! I just tied ${T==null?void 0:T.score}-${E==null?void 0:E.score} with ${(T==null?void 0:T.username)===(w==null?void 0:w.username)?E==null?void 0:E.username:T==null?void 0:T.username} in a ${n} quiz on SportIQ! Can you break our tie? 🎮 #SportIQ https://sportiq.games`:(T==null?void 0:T.username)===(w==null?void 0:w.username)?`Just beat ${E==null?void 0:E.username} ${T==null?void 0:T.score}-${E==null?void 0:E.score} in a ${n} quiz on SportIQ! Think you can defeat me? 🏆 #SportIQ https://sportiq.games`:`Just had an intense ${n} quiz battle on SportIQ! I scored ${E==null?void 0:E.score} against ${T==null?void 0:T.username}'s ${T==null?void 0:T.score}. Help me get my revenge! 💪 #SportIQ https://sportiq.games`,[z,de]=p.useState(I()),he=z,X="https://sportiq.games";p.useState(!1);const G=()=>{if(!c||!w||!d)return;x(!0),console.log("Requesting rematch",{gameId:d,playerId:w.id}),c.emit("requestRematch",{gameId:d,playerId:w.id});const Y=setTimeout(()=>{x(!1),m("Opponent didn't respond to rematch request")},3e4);b(Y)},H=()=>{x(!1),g&&(clearTimeout(g),b(null))};p.useEffect(()=>{if(!c)return;const Y=v=>{console.log("Rematch requested by player:",v.playerId)},j=()=>{console.log("Both players ready for rematch, redirecting to lobby"),g&&(clearTimeout(g),b(null)),window.dispatchEvent(new CustomEvent("sportiq:returnToLobby"))};return c.on("rematchRequested",Y),c.on("goToLobby",j),()=>{c.off("rematchRequested",Y),c.off("goToLobby",j)}},[c,g]);const Q=Y=>{m(Y),setTimeout(()=>m(null),3e3)},ee=p.useCallback(()=>{h(!0),de(I())},[I]);return p.useEffect(()=>{if(!P&&T){const j=Date.now()+3e3,v={startVelocity:30,spread:360,ticks:60,zIndex:0},k=(L,B)=>Math.random()*(B-L)+L,M=setInterval(()=>{const L=j-Date.now();if(L<=0)return clearInterval(M);const B=50*(L/3e3);Ut({...v,particleCount:B,origin:{x:k(.1,.3),y:Math.random()-.2}}),Ut({...v,particleCount:B,origin:{x:k(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(M)}},[P,T]),p.useEffect(()=>()=>{g&&clearTimeout(g)},[g]),C.length?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-gray-900 to-gray-800",children:[i.jsxs("div",{className:"w-full max-w-3xl bg-gray-800/50 backdrop-blur-lg rounded-2xl p-8 shadow-xl border border-gray-700/50",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsx(Ke,{className:"w-24 h-24 text-yellow-400 animate-bounce filter drop-shadow-lg"}),i.jsx("span",{className:"absolute top-12 right-0 text-4xl animate-pulse",children:_}),i.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"})]}),i.jsx("h2",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Match Complete!"}),P?i.jsx("p",{className:"text-2xl text-blue-400 font-bold mb-2",children:"It's a tie! 🤝"}):i.jsxs("p",{className:"text-2xl text-green-400 font-bold mb-2",children:[T==null?void 0:T.username," wins! 🏆"]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[i.jsx(Qc,{className:"w-4 h-4"}),i.jsxs("span",{children:["Match duration: ",o.toFixed(1),"s"]})]})]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:C.map((Y,j)=>i.jsx(id,{player:Y,isWinner:j===0&&!P,totalQuestions:r.length,maxPossibleScore:A,playerResponseTimes:N(Y.id),rematchReady:Y.rematchReady},Y.id))}),i.jsx(od,{onPlayAgain:t,onHome:e,onShare:ee,rematchRequested:y,onRematch:G,onCancelRematch:H}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-gray-400 text-sm",children:"Share your results with friends! 🎮"})})]}),u&&i.jsx(gx,{shareText:he,shareUrl:X,onClose:()=>h(!1),onShowToast:Q,winner:T,loser:E,isTied:P,category:n,categoryEmoji:_,currentPlayer:w,setCustomShareText:de}),i.jsx(De,{children:f&&i.jsx(px,{message:f,onClose:()=>m(null)})}),i.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes scaleIn {
          from { transform: scale(0.95); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        
        .animate-scaleIn {
          animation: scaleIn 0.3s ease-out;
        }
        
        /* Almarena-like font styling */
        .sport-share-text {
          font-family: "Almarena Neue", "Montserrat", "Segoe UI", sans-serif;
          font-weight: 700;
          letter-spacing: -0.02em;
          font-size: 1.1rem;
          line-height: 1.4;
          text-transform: none;
        }
      `})]}):i.jsx("div",{className:"text-white text-center p-8",children:"Loading results..."})},xx=({onJoinSuccess:t,onBackToMode:e,selectedCategory:s="mixed"})=>{const[n,r]=p.useState(()=>localStorage.getItem("showJoinUI")==="true"?(localStorage.removeItem("showJoinUI"),!0):!1),[o,a]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(!1),[h,f]=p.useState(!1),{gameId:m,joinGame:y,socket:x,players:g,getCurrentPlayer:b,hasJoinedGame:w,resetGame:_,createGame:A}=Jt(),C=localStorage.getItem("username")||"",T=b();T==null||T.isHost;const[E,P]=p.useState({isOpen:!1,type:null});p.useEffect(()=>{(async()=>{if(!n&&!w&&!h&&!m&&s)try{f(!0),console.log("Automatically creating game with category:",s),await A(s),f(!1)}catch(Q){console.error("Failed to create game:",Q),f(!1)}})()},[w,m,s,A,h,n]);const N=()=>{t()};p.useEffect(()=>{if(!x)return;const H=ee=>{c(ee.message)},Q=ee=>{ee.players.some(j=>j.id===x.id)&&(console.log("Game updated and player is in the game, triggering success callback"),setTimeout(()=>{t()},100))};return x.on("error",H),x.on("gameUpdated",Q),()=>{x.off("error",H),x.off("gameUpdated",Q)}},[x,t]);const I=async()=>{if(m)try{await navigator.clipboard.writeText(m),u(!0),setTimeout(()=>u(!1),2e3)}catch(H){console.error("Failed to copy code:",H),c("Failed to copy code to clipboard")}},z=()=>{if(c(""),!o.trim()){c("Please enter a game code");return}try{console.log("Attempting to join game:",o),y(o,C).then(()=>{console.log("Successfully joined game:",o)}).catch(H=>{console.error("Error joining game:",H),c(H.message||"Failed to join game")})}catch(H){console.error("Exception joining game:",H),c("An error occurred while joining the game")}},de=()=>{P({isOpen:!0,type:"mode"})},he=()=>{localStorage.setItem("goToCategory","true"),_(),e&&e()},X=()=>{_(),e&&e(),P({isOpen:!1,type:null})},G=H=>{if(!H)return"";switch(H){case"football":return" ⚽";case"basketball":return" 🏀";case"tennis":return" 🎾";case"olympics":return" 🏅";case"mixed":default:return" 🎯"}};return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-[#1a1a1a]",children:[i.jsx(Pi,{isOpen:E.isOpen,onConfirm:X,onCancel:()=>P({isOpen:!1,type:null}),title:"Go Back?",message:"Are you sure you want to go back to mode selection? Any game setup in progress will be lost.",confirmText:we.MODES,cancelText:"Stay Here"}),i.jsx("div",{className:"fixed bottom-6 left-6 z-50",children:e&&i.jsx(He,{icon:ut,label:we.MODES,onClick:de})}),i.jsxs("div",{className:"w-full max-w-md",children:[i.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-4",children:n?"Join Game 🎮":"Create Game 🎮"}),s&&!n&&i.jsx("div",{className:"text-center mb-6",children:i.jsxs("span",{className:"px-4 py-2 bg-gray-800 rounded-full text-blue-400 text-sm inline-block",children:[`Category: ${s.charAt(0).toUpperCase()+s.slice(1)}`,G(s)]})}),n?i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Enter game code"}),i.jsx("input",{type:"text",value:o,onChange:H=>{a(H.target.value),c("")},placeholder:"Enter code",className:`w-full p-3 rounded-lg bg-gray-700 text-white font-mono text-lg 
                         border-2 ${l?"border-red-500":"border-transparent"} 
                         focus:border-green-500 focus:outline-none`,maxLength:6}),l&&i.jsxs("div",{className:"mt-2 text-red-500 text-sm flex items-center gap-2",children:[i.jsx(by,{size:16}),l]})]}),i.jsx("div",{className:"flex justify-end items-center",children:i.jsxs("button",{onClick:z,className:`px-6 py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white 
                         transition-colors flex items-center gap-2`,children:[i.jsx(Yc,{size:20}),"Join Game"]})})]}):i.jsx("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl",children:h?i.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500 mb-4"}),i.jsx("p",{className:"text-gray-300",children:"Creating game..."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Share this code with your friend"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:m,readOnly:!0,className:"flex-1 p-3 rounded-lg bg-gray-700 text-white font-mono text-lg select-all"}),i.jsxs("button",{onClick:I,disabled:!m,className:`p-3 rounded-lg ${d?"bg-green-600":"bg-blue-600 hover:bg-blue-700"} text-white transition-colors relative group ${m?"":"opacity-50 cursor-not-allowed"}`,title:"Copy code",children:[i.jsx(Ts,{size:24}),i.jsx("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:d?"Copied!":"Copy code"})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("button",{onClick:he,className:`px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white 
                             transition-colors flex items-center gap-2`,children:[i.jsx(_t,{size:18}),"Change Category"]}),i.jsxs("button",{onClick:N,disabled:!m,className:`px-6 py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white 
                              transition-colors flex items-center gap-2 group ${m?"":"opacity-50 cursor-not-allowed"}`,children:["Continue to Lobby",i.jsx(Dc,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})})]})]})},nr="G-K3CZGYNSLS",Tn=()=>(p.useEffect(()=>{if(typeof window.gtag!="function"){let s=function(...n){window.dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[],window.gtag=s,s("js",new Date),s("config",nr,{send_page_view:!0,cookie_domain:"auto",anonymize_ip:!0})}},[]),{trackEvent:(s,n)=>{typeof window.gtag=="function"&&window.gtag("event",s,{...n,send_to:nr})},trackPageView:(s,n)=>{typeof window.gtag=="function"&&window.gtag("event","page_view",{page_path:s,page_title:n,send_to:nr})}}),vx=[{id:"faq-1",question:"How do I play SportIQ?",answer:"SportIQ offers two main game modes: Solo Play and 1v1 Multiplayer. In Solo Play, you can practice at your own pace by answering sports trivia questions. In 1v1 mode, you can challenge a friend by creating a game and sharing the invite code, or join an existing game with an invite code."},{id:"faq-2",question:"What sports categories are available in SportIQ?",answer:"SportIQ currently offers questions in five categories: Football ⚽, Basketball 🏀, Tennis 🎾, Olympics 🏅, and Mixed Sports 🎯. Each category features challenging trivia questions to test your knowledge."},{id:"faq-3",question:"How does scoring work in SportIQ?",answer:"In SportIQ, you earn 10 points for each correct answer. Additionally, you can earn up to 5 bonus points based on how quickly you answer. The faster you respond, the higher your bonus will be, with tiers including Lightning Fast (5 points), Quick (4 points), Normal (3 points), Measured (2 points), and Delayed (1 point)."},{id:"faq-4",question:"Is SportIQ free to play?",answer:"Yes, SportIQ is completely free to play. You can enjoy all game modes and features without any cost or in-app purchases."},{id:"faq-5",question:"Can I play SportIQ on my mobile device?",answer:"Yes, SportIQ is fully responsive and works on all modern devices including smartphones, tablets, and desktops. Simply visit sportiq.games in your mobile browser to start playing."},{id:"faq-6",question:"How do I challenge a friend to a 1v1 match?",answer:"To challenge a friend, select the 'Create 1v1 Game' mode, choose a category, and you'll receive a unique invite code. Share this code with your friend who can then use it to join your game through the 'Join 1v1 Game' option."},{id:"faq-7",question:"Are new questions added regularly?",answer:"Yes, we regularly update SportIQ with new trivia questions across all categories to keep the game fresh and challenging for returning players."},{id:"faq-8",question:"How can I share my results?",answer:"After completing a quiz, you'll see your results with detailed statistics. You can share your score on social media or via messaging apps directly from the results screen to challenge your friends to beat your score!"},{id:"faq-9",question:"What happens if I lose connection during a game?",answer:"In Solo mode, your progress is saved locally, and you can continue where you left off. In 1v1 mode, if you lose connection temporarily, the system will try to reconnect you automatically. If the disconnection persists for too long, you may need to rejoin the game."},{id:"faq-10",question:"How are the questions selected?",answer:"Questions are randomly selected from our database based on your chosen category. In the Mixed Sports category, questions are pulled from all sports categories to provide a varied challenge. Our system ensures you get a different set of questions each time you play."}],bx={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},zs={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},wx=()=>{const t=lt(),[e,s]=$e.useState(null),{trackPageView:n}=Tn();p.useEffect(()=>{document.title="FAQ - SportIQ - Sports Trivia Quiz Game",n("/faq","FAQ Page")},[n]);const r=a=>{s(e===a?null:a)},o=()=>{t("/")};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#0c1220] to-[#1a1a2e] py-16 px-4",children:[i.jsx("div",{className:"fixed bottom-6 left-6 z-10",children:i.jsx(He,{icon:ut,label:we.HOME,onClick:o})}),i.jsxs(S.div,{className:"max-w-3xl mx-auto",initial:"hidden",animate:"visible",variants:bx,children:[i.jsxs(S.div,{className:"text-center mb-12",variants:zs,children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx(Mr,{size:32,className:"text-blue-400"}),i.jsx("h1",{className:"text-4xl font-bold text-white",children:"Frequently Asked Questions"})]}),i.jsx("p",{className:"text-gray-400 text-lg",children:"Find answers to common questions about SportIQ, the ultimate sports trivia quiz game."}),i.jsx("div",{className:"mx-auto mt-4 h-1 w-24 bg-gradient-to-r from-blue-500 to-green-500 rounded-full"})]}),i.jsx("div",{className:"space-y-4",children:vx.map(a=>i.jsxs(S.div,{variants:zs,className:"bg-gray-800/80 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-700/50",children:[i.jsxs("button",{onClick:()=>r(a.id),className:"w-full px-6 py-4 text-left flex justify-between items-center focus:outline-none",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:a.question}),i.jsx(S.div,{animate:{rotate:e===a.id?180:0},transition:{duration:.3},className:"flex-shrink-0 text-blue-400",children:e===a.id?i.jsx(Ci,{size:20}):i.jsx(ki,{size:20})})]}),i.jsx(S.div,{initial:{height:0,opacity:0},animate:{height:e===a.id?"auto":0,opacity:e===a.id?1:0},transition:{duration:.3},className:"overflow-hidden",children:i.jsxs("div",{className:"px-6 pb-4 text-gray-300",children:[i.jsx("div",{className:"pt-2 border-t border-gray-700/50"}),i.jsx("p",{className:"mt-2",children:a.answer})]})})]},a.id))}),i.jsx(S.div,{variants:zs,className:"text-center mt-12 text-gray-400",children:i.jsxs("p",{children:["Don't see your question here? ",i.jsx("a",{href:"mailto:support@sportiq.games",className:"text-blue-400 hover:text-blue-300 underline",children:"Contact us"})," for more information."]})}),i.jsx(S.div,{variants:zs,className:"text-center mt-8 text-xs text-gray-500",children:i.jsxs("p",{children:["© ",new Date().getFullYear()," SportIQ - v2.0.14 - The Ultimate Sports Trivia Challenge"]})})]})]})},Sa={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Zt={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},jx={hidden:{scale:.9,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",stiffness:300,damping:24}},hover:{y:-5,boxShadow:"0 10px 25px -5px rgba(59, 130, 246, 0.25)",transition:{type:"spring",stiffness:400,damping:10}}},Sx=()=>{const t=lt(),{trackPageView:e}=Tn();p.useEffect(()=>{document.title="About SportIQ - The Ultimate Sports Trivia Game",e("/about","About Page")},[e]);const s=()=>{t("/")},n=[{id:"feature-1",title:"Multiple Categories",description:"Test your knowledge across Football, Basketball, Tennis, Olympics, and Mixed Sports categories.",icon:ky,color:"bg-green-600/20 text-green-400 border-green-600/30"},{id:"feature-2",title:"Solo Play",description:"Practice at your own pace to improve your sports knowledge and response time.",icon:Ke,color:"bg-yellow-600/20 text-yellow-400 border-yellow-600/30"},{id:"feature-3",title:"1v1 Battles",description:"Challenge friends to real-time quiz battles with shareable game codes.",icon:on,color:"bg-blue-600/20 text-blue-400 border-blue-600/30"},{id:"feature-4",title:"Speed Bonuses",description:"Earn extra points for quick answers with our tiered bonus system.",icon:Ni,color:"bg-purple-600/20 text-purple-400 border-purple-600/30"}];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#0c1220] to-[#1a1a2e] py-16 px-4",children:[i.jsx("div",{className:"fixed bottom-6 left-6 z-10",children:i.jsx(He,{icon:ut,label:we.HOME,onClick:s})}),i.jsxs(S.div,{className:"max-w-4xl mx-auto",initial:"hidden",animate:"visible",variants:Sa,children:[i.jsxs(S.div,{className:"text-center mb-12",variants:Zt,children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx(It,{size:32,className:"text-blue-400"}),i.jsx("h1",{className:"text-4xl font-bold text-white",children:"About SportIQ"})]}),i.jsx("p",{className:"text-gray-400 text-lg",children:"The ultimate sports trivia experience for casual fans and sports experts alike."}),i.jsx("div",{className:"mx-auto mt-4 h-1 w-24 bg-gradient-to-r from-blue-500 to-green-500 rounded-full"})]}),i.jsxs(S.div,{variants:Zt,className:"bg-gray-800/80 backdrop-blur-sm rounded-xl p-6 md:p-8 border border-gray-700/50 mb-10",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"What is SportIQ?"}),i.jsx("p",{className:"text-gray-300 mb-6",children:"SportIQ is a web-based sports trivia game designed to test and expand your knowledge of various sports. Whether you're a casual fan or a die-hard sports enthusiast, SportIQ offers an engaging way to challenge yourself and compete with friends."}),i.jsx("p",{className:"text-gray-300 mb-6",children:"This project was created out of a passion for both sports and web development. The goal was to build something fun that brings together sports fans and offers a chance to learn new facts about favorite sports while enjoying friendly competition."}),i.jsx("p",{className:"text-gray-300",children:"SportIQ features categories including Football ⚽, Basketball 🏀, Tennis 🎾, Olympics 🏅, and Mixed Sports 🎯, with challenging questions that will test even the most knowledgeable sports fans."})]}),i.jsx(S.h2,{variants:Zt,className:"text-2xl font-bold text-white mb-6 text-center",children:"Key Features"}),i.jsx(S.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",variants:Sa,children:n.map(r=>i.jsxs(S.div,{variants:jx,whileHover:"hover",className:`p-6 rounded-xl ${r.color} border backdrop-blur-sm flex flex-col items-center text-center`,children:[i.jsx(S.div,{className:"p-3 rounded-full bg-gray-900/50 mb-4",whileHover:{rotate:360},transition:{duration:.8},children:i.jsx(r.icon,{size:28})}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:r.title}),i.jsx("p",{className:"text-gray-300",children:r.description})]},r.id))}),i.jsxs(S.div,{variants:Zt,className:"bg-gray-800/80 backdrop-blur-sm rounded-xl p-6 md:p-8 border border-gray-700/50 mb-10 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Get in Touch"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Have suggestions for new features or categories? Found a bug or an incorrect question? I'd love to hear your feedback to help improve SportIQ!"}),i.jsx("a",{href:"mailto:feedback@sportiq.games",className:"inline-block mt-4 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"Send Feedback"})]}),i.jsxs(S.div,{variants:Zt,className:"text-center mt-12 text-xs text-gray-500",children:[i.jsxs("p",{children:["© ",new Date().getFullYear()," SportIQ - v2.0.14"]}),i.jsx("p",{className:"mt-1",children:"A hobby project created with passion for sports and web development."})]})]})]})},rr=({children:t,redirectTo:e="/auth/signin"})=>{const{user:s,loading:n}=ht(),r=Je();return n?i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-b from-[#0c1220] to-[#1a1a2e]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-t-4 border-b-4 border-blue-500 rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):s?i.jsx(i.Fragment,{children:t}):i.jsx(ou,{to:e,state:{from:r.pathname},replace:!0})},_x=()=>{const[t,e]=p.useState(""),[s,n]=p.useState(""),[r,o]=p.useState(""),[a,l]=p.useState(!1),[c,d]=p.useState(null),[u,h]=p.useState(!1),{signUp:f,signInWithGoogle:m}=ht(),y=lt(),x=async b=>{if(b.preventDefault(),!t||!s||!r){d("Please fill in all fields");return}if(s.length<8){d("Password must be at least 8 characters");return}h(!0),d(null);try{const{error:w}=await f(t,s,r);w?d(w.message):y("/auth/verification",{state:{email:t}})}catch(w){d("An unexpected error occurred"),console.error(w)}finally{h(!1)}},g=async()=>{h(!0),d(null);try{const{error:b}=await m();b&&d(b.message)}catch(b){d("An unexpected error occurred"),console.error(b)}finally{h(!1)}};return i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-b from-[#0c1220] to-[#1a1a2e]",children:i.jsxs(S.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md bg-gray-800 rounded-xl p-8 shadow-xl border border-gray-700/50",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Join ",i.jsx("span",{className:"text-blue-400",children:"Sport"}),i.jsx("span",{className:"text-white",children:"IQ"})]}),i.jsx("p",{className:"text-gray-400",children:"Create an account to track your progress"})]}),c&&i.jsx(S.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-6",children:c}),i.jsxs("form",{onSubmit:x,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-400 mb-1",children:"Username"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"username",type:"text",value:r,onChange:b=>o(b.target.value),className:"w-full p-3 bg-gray-700 text-white rounded-lg pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"Choose a username",disabled:u}),i.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400 mb-1",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"email",type:"email",value:t,onChange:b=>e(b.target.value),className:"w-full p-3 bg-gray-700 text-white rounded-lg pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"your.email@example.com",disabled:u}),i.jsx(_n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"password",type:a?"text":"password",value:s,onChange:b=>n(b.target.value),className:"w-full p-3 bg-gray-700 text-white rounded-lg pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"Create a secure password",disabled:u}),i.jsx(Gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),i.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:a?i.jsx(Bc,{size:18}):i.jsx(Uc,{size:18})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 8 characters"})]}),i.jsx(S.button,{type:"submit",disabled:u,className:"w-full p-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:u?i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i.jsxs(i.Fragment,{children:["Create Account ",i.jsx(Si,{size:18})]})})]}),i.jsxs("div",{className:"relative flex items-center justify-center my-6",children:[i.jsx("div",{className:"border-t border-gray-700 w-full"}),i.jsx("div",{className:"absolute bg-gray-800 px-3 text-gray-500 text-sm",children:"or continue with"})]}),i.jsxs(S.button,{onClick:g,disabled:u,className:"w-full p-3 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[i.jsx("path",{fill:"#4285F4",d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"}),i.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z"}),i.jsx("path",{fill:"#FBBC05",d:"M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z"}),i.jsx("path",{fill:"#EA4335",d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"})]}),"Continue with Google"]}),i.jsx("div",{className:"text-center mt-6",children:i.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",i.jsx(xe,{to:"/auth/signin",className:"text-blue-400 hover:text-blue-300",children:"Sign In"})]})})]})})},kx=()=>{var b;const[t,e]=p.useState(""),[s,n]=p.useState(""),[r,o]=p.useState(!1),[a,l]=p.useState(null),[c,d]=p.useState(!1),{signIn:u,signInWithGoogle:h}=ht(),f=lt(),y=((b=Je().state)==null?void 0:b.from)||"/dashboard",x=async w=>{if(w.preventDefault(),!t||!s){l("Please fill in all fields");return}d(!0),l(null);try{const{error:_}=await u(t,s);_?l(_.message):f(y,{replace:!0})}catch(_){l("An unexpected error occurred"),console.error(_)}finally{d(!1)}},g=async()=>{d(!0),l(null);try{const{error:w}=await h();w&&l(w.message)}catch(w){l("An unexpected error occurred"),console.error(w)}finally{d(!1)}};return i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-b from-[#0c1220] to-[#1a1a2e]",children:i.jsxs(S.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md bg-gray-800 rounded-xl p-8 shadow-xl border border-gray-700/50",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome Back to ",i.jsx("span",{className:"text-blue-400",children:"Sport"}),i.jsx("span",{className:"text-white",children:"IQ"})]}),i.jsx("p",{className:"text-gray-400",children:"Sign in to continue your quiz journey"})]}),a&&i.jsx(S.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-6",children:a}),i.jsxs("form",{onSubmit:x,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400 mb-1",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"email",type:"email",value:t,onChange:w=>e(w.target.value),className:"w-full p-3 bg-gray-700 text-white rounded-lg pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"your.email@example.com",disabled:c}),i.jsx(_n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"password",type:r?"text":"password",value:s,onChange:w=>n(w.target.value),className:"w-full p-3 bg-gray-700 text-white rounded-lg pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"Enter your password",disabled:c}),i.jsx(Gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),i.jsx("button",{type:"button",onClick:()=>o(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:r?i.jsx(Bc,{size:18}):i.jsx(Uc,{size:18})})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(xe,{to:"/auth/forgot-password",className:"text-sm text-blue-400 hover:text-blue-300 mt-1",children:"Forgot password?"})})]}),i.jsx(S.button,{type:"submit",disabled:c,className:"w-full p-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:c?i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i.jsxs(i.Fragment,{children:["Sign In ",i.jsx(Hc,{size:18})]})})]}),i.jsxs("div",{className:"relative flex items-center justify-center my-6",children:[i.jsx("div",{className:"border-t border-gray-700 w-full"}),i.jsx("div",{className:"absolute bg-gray-800 px-3 text-gray-500 text-sm",children:"or continue with"})]}),i.jsxs(S.button,{onClick:g,disabled:c,className:"w-full p-3 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[i.jsx("path",{fill:"#4285F4",d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"}),i.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z"}),i.jsx("path",{fill:"#FBBC05",d:"M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z"}),i.jsx("path",{fill:"#EA4335",d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"})]}),"Sign in with Google"]}),i.jsx("div",{className:"text-center mt-6",children:i.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",i.jsx(xe,{to:"/auth/signup",className:"text-blue-400 hover:text-blue-300",children:"Sign Up"})]})})]})})},Cx=()=>{var s;const e=((s=Je().state)==null?void 0:s.email)||"your email";return i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-b from-[#0c1220] to-[#1a1a2e]",children:i.jsxs(S.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md bg-gray-800 rounded-xl p-8 shadow-xl border border-gray-700/50 text-center",children:[i.jsx(S.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(_n,{className:"w-10 h-10 text-blue-400"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Verify Your Email"}),i.jsxs("p",{className:"text-gray-300 mb-6",children:["We've sent a verification link to:",i.jsx("span",{className:"block text-blue-400 mt-2 text-lg font-medium",children:e})]}),i.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 mb-6 text-left border border-gray-600/50",children:[i.jsx("h3",{className:"text-white font-medium mb-2",children:"Next Steps:"}),i.jsxs("ol",{className:"text-gray-300 space-y-2 list-decimal list-inside",children:[i.jsx("li",{children:"Check your email inbox"}),i.jsx("li",{children:"Click the verification link in the email"}),i.jsx("li",{children:"Return to SportIQ and sign in with your credentials"})]})]}),i.jsxs("p",{className:"text-gray-400 mb-6",children:["Didn't receive an email? Check your spam folder or"," ",i.jsx(xe,{to:"/auth/signup",className:"text-blue-400 hover:underline",children:"try signing up again"}),"."]}),i.jsx("div",{className:"flex justify-center",children:i.jsx(xe,{to:"/",children:i.jsxs(S.button,{className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg flex items-center gap-2 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx(ut,{size:18}),"Return to Home"]})})})]})})},Tx=()=>{const t=lt();return p.useEffect(()=>{const e=me.auth.onAuthStateChange(n=>{n==="SIGNED_IN"&&t("/dashboard")}),{hash:s}=window.location;if(s&&s.includes("access_token")){const n=setTimeout(()=>{t("/dashboard")},1e3);return()=>{clearTimeout(n),e.data.subscription.unsubscribe()}}return()=>{e.data.subscription.unsubscribe()}},[t]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-[#0c1220] to-[#1a1a2e]",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx("div",{className:"w-16 h-16 border-t-4 border-b-4 border-blue-500 rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-xl font-medium",children:"Completing authentication..."})]})})},Nx=()=>{const{user:t,profile:e,signOut:s}=ht(),[n,r]=p.useState([]),[o,a]=p.useState(!0),[l,c]=p.useState({totalGames:0,averageScore:0,highestScore:0,averageAccuracy:0,favoriteCategory:"",totalCorrectAnswers:0}),d=lt();p.useEffect(()=>{(async()=>{if(t)try{a(!0);const{data:y,error:x}=await me.from("game_sessions").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(10);if(x)throw x;if(r(y||[]),y&&y.length>0){const g={};let b=0,w=0,_=0,A=0;y.forEach(E=>{g[E.category]=(g[E.category]||0)+1,b+=E.score,w=Math.max(w,E.score),_+=E.correct_answers,A+=E.total_questions});let C="",T=0;Object.entries(g).forEach(([E,P])=>{P>T&&(T=P,C=E)}),c({totalGames:y.length,averageScore:Math.round(b/y.length),highestScore:w,averageAccuracy:Math.round(_/A*100),favoriteCategory:C.charAt(0).toUpperCase()+C.slice(1),totalCorrectAnswers:_})}}catch(y){console.error("Error fetching game history:",y)}finally{a(!1)}})()},[t]);const u=async()=>{await s(),d("/")},h=m=>{switch(m.toLowerCase()){case"football":return"⚽";case"basketball":return"🏀";case"tennis":return"🎾";case"olympics":return"🏅";case"mixed":default:return"🎯"}},f=m=>{const y=new Date(m);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(y)};return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#0c1220] to-[#1a1a2e] p-4 sm:p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-white",children:[i.jsx("span",{className:"text-blue-400",children:"Sport"}),i.jsx("span",{className:"text-white",children:"IQ"})," Dashboard"]}),i.jsx("p",{className:"text-gray-400",children:"Track your quiz performance and history"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(xe,{to:"/settings",children:i.jsx(S.button,{className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",whileHover:{scale:1.05},whileTap:{scale:.95},children:i.jsx(Py,{size:20})})}),i.jsx(S.button,{onClick:u,className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",whileHover:{scale:1.05},whileTap:{scale:.95},children:i.jsx(Ti,{size:20})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700/50",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-500/30 rounded-full flex items-center justify-center",children:i.jsx(Cn,{size:32,className:"text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:(e==null?void 0:e.username)||"User"}),i.jsx("p",{className:"text-gray-400",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[i.jsx(Ke,{size:18,className:"text-yellow-400"})," Stats Overview"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Games"}),i.jsx("p",{className:"text-white font-bold text-lg",children:l.totalGames})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Avg Score"}),i.jsx("p",{className:"text-white font-bold text-lg",children:l.averageScore})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Highest Score"}),i.jsx("p",{className:"text-white font-bold text-lg",children:l.highestScore})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Avg Accuracy"}),i.jsxs("p",{className:"text-white font-bold text-lg",children:[l.averageAccuracy,"%"]})]})]})]}),i.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[i.jsx(Ey,{size:18,className:"text-yellow-400"})," Achievements"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("p",{className:"text-gray-400",children:"Favorite Category"}),i.jsxs("p",{className:"text-white",children:[l.favoriteCategory," ",h(l.favoriteCategory)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("p",{className:"text-gray-400",children:"Correct Answers"}),i.jsx("p",{className:"text-white",children:l.totalCorrectAnswers})]})]})]}),i.jsx(xe,{to:"/",className:"block",children:i.jsxs(S.button,{className:"w-full p-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx(Ns,{size:20}),"Play New Quiz"]})})]})]}),i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700/50 lg:col-span-2",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(wy,{size:20,className:"text-blue-400"}),"Recent Game History"]}),i.jsxs(xe,{to:"/history",className:"text-blue-400 hover:text-blue-300 text-sm flex items-center",children:["View All ",i.jsx(Si,{size:16})]})]}),o?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx("div",{className:"w-10 h-10 border-t-4 border-b-4 border-blue-500 rounded-full animate-spin"})}):n.length===0?i.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-6 text-center",children:[i.jsx("p",{className:"text-gray-400 mb-3",children:"You haven't played any games yet."}),i.jsx(xe,{to:"/",className:"text-blue-400 hover:text-blue-300",children:"Start your first quiz now!"})]}):i.jsx("div",{className:"space-y-4",children:n.map(m=>i.jsx(S.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{scale:1.01},className:"bg-gray-700/30 rounded-lg p-4 border border-gray-700/50",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-xl",children:h(m.category)}),i.jsxs("h3",{className:"text-white font-medium capitalize",children:[m.mode," - ",m.category]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[i.jsx(Lc,{size:14})," ",f(m.created_at)]}),i.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[i.jsx(rn,{size:14})," ",m.completion_time?`${m.completion_time.toFixed(1)}s`:"N/A"]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-gray-400 text-xs",children:"Score"}),i.jsx("p",{className:"text-green-400 font-bold",children:m.score})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-gray-400 text-xs",children:"Accuracy"}),i.jsxs("p",{className:"text-blue-400 font-bold",children:[Math.round(m.correct_answers/m.total_questions*100),"%"]})]}),m.mode==="1v1"&&i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-gray-400 text-xs",children:"Result"}),i.jsx("p",{className:`font-bold ${m.result==="win"?"text-green-400":m.result==="loss"?"text-red-400":"text-yellow-400"}`,children:m.result==="win"?"Win":m.result==="loss"?"Loss":"Draw"})]})]})]})},m.id))})]})]})]})})},Px=()=>{const{user:t}=ht(),[e,s]=p.useState([]),[n,r]=p.useState([]),[o,a]=p.useState(!0),[l,c]=p.useState(1),[d,u]=p.useState(1),[h,f]=p.useState("all"),[m,y]=p.useState("all"),[x,g]=p.useState("newest"),[b,w]=p.useState(""),_=10;p.useEffect(()=>{(async()=>{if(t)try{a(!0);const{data:I,error:z}=await me.from("game_sessions").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(z)throw z;s(I||[]);const de=[...new Set((I||[]).map(he=>he.category))]}catch(I){console.error("Error fetching game history:",I)}finally{a(!1)}})()},[t]),p.useEffect(()=>{let N=[...e];if(h!=="all"&&(N=N.filter(I=>I.mode===h)),m!=="all"&&(N=N.filter(I=>I.category===m)),b){const I=b.toLowerCase();N=N.filter(z=>z.category.toLowerCase().includes(I)||z.mode.toLowerCase().includes(I)||z.result&&z.result.toLowerCase().includes(I))}switch(x){case"newest":N.sort((I,z)=>new Date(z.created_at).getTime()-new Date(I.created_at).getTime());break;case"oldest":N.sort((I,z)=>new Date(I.created_at).getTime()-new Date(z.created_at).getTime());break;case"highest-score":N.sort((I,z)=>z.score-I.score);break;case"accuracy":N.sort((I,z)=>z.correct_answers/z.total_questions-I.correct_answers/I.total_questions);break}r(N),u(Math.ceil(N.length/_)),c(1)},[e,h,m,x,b]);const A=()=>{const N=(l-1)*_,I=N+_;return n.slice(N,I)},C=N=>{switch(N.toLowerCase()){case"football":return"⚽";case"basketball":return"🏀";case"tennis":return"🎾";case"olympics":return"🏅";case"mixed":default:return"🎯"}},T=N=>{const I=new Date(N);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(I)},E=()=>{const N=["Date","Mode","Category","Score","Correct Answers","Total Questions","Accuracy","Completion Time","Result"].join(","),I=n.map(G=>[new Date(G.created_at).toLocaleDateString(),G.mode,G.category,G.score,G.correct_answers,G.total_questions,`${Math.round(G.correct_answers/G.total_questions*100)}%`,G.completion_time?`${G.completion_time.toFixed(1)}s`:"N/A",G.result||"N/A"].join(",")),z=[N,...I].join(`
`),de=new Blob([z],{type:"text/csv"}),he=URL.createObjectURL(de),X=document.createElement("a");X.href=he,X.download=`sportiq-history-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(he)},P=["all",...new Set(e.map(N=>N.category))];return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#0c1220] to-[#1a1a2e] p-4 sm:p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(xe,{to:"/dashboard",children:i.jsx(S.button,{className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",whileHover:{scale:1.05},whileTap:{scale:.95},children:i.jsx(_t,{size:20})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Game History"}),i.jsx("p",{className:"text-gray-400",children:"View and analyze your past quizzes"})]})]}),i.jsxs(S.button,{onClick:E,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:n.length===0,title:n.length===0?"No data to export":"Export as CSV",children:[i.jsx(Sy,{size:18}),"Export CSV"]})]}),i.jsx("div",{className:"bg-gray-800 rounded-xl p-4 mb-6 shadow-lg border border-gray-700/50",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Search"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:b,onChange:N=>w(N.target.value),placeholder:"Search games...",className:"w-full p-2 pl-9 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx(Ny,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Mode"}),i.jsxs("select",{value:h,onChange:N=>f(N.target.value),className:"p-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[i.jsx("option",{value:"all",children:"All Modes"}),i.jsx("option",{value:"solo",children:"Solo"}),i.jsx("option",{value:"1v1",children:"1v1"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),i.jsxs("select",{value:m,onChange:N=>y(N.target.value),className:"p-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[i.jsx("option",{value:"all",children:"All Categories"}),P.filter(N=>N!=="all").map(N=>i.jsx("option",{value:N,className:"capitalize",children:N.charAt(0).toUpperCase()+N.slice(1)},N))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sort By"}),i.jsxs("select",{value:x,onChange:N=>g(N.target.value),className:"p-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[i.jsx("option",{value:"newest",children:"Newest First"}),i.jsx("option",{value:"oldest",children:"Oldest First"}),i.jsx("option",{value:"highest-score",children:"Highest Score"}),i.jsx("option",{value:"accuracy",children:"Best Accuracy"})]})]})]})}),i.jsx("div",{className:"bg-gray-800 rounded-xl shadow-lg border border-gray-700/50 overflow-hidden",children:o?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx("div",{className:"w-12 h-12 border-t-4 border-b-4 border-blue-500 rounded-full animate-spin"})}):n.length===0?i.jsxs("div",{className:"py-12 text-center",children:[i.jsx(_y,{size:48,className:"mx-auto mb-4 text-gray-600"}),i.jsx("p",{className:"text-gray-400 mb-2",children:"No game history found"}),b||h!=="all"||m!=="all"?i.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your filters"}):i.jsx(xe,{to:"/",className:"text-blue-400 hover:text-blue-300",children:"Play your first game now!"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-6 gap-2 bg-gray-700/50 px-6 py-3 text-sm font-semibold text-gray-300 border-b border-gray-700",children:[i.jsx("div",{className:"col-span-2 md:col-span-3",children:"Game Details"}),i.jsx("div",{className:"hidden md:block",children:"Date"}),i.jsx("div",{className:"text-center",children:"Score"}),i.jsx("div",{className:"text-center",children:"Accuracy"}),i.jsx("div",{className:"text-center hidden sm:block",children:"Time"})]}),i.jsx("div",{className:"divide-y divide-gray-700",children:A().map(N=>i.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},whileHover:{backgroundColor:"rgba(55, 65, 81, 0.2)"},className:"grid grid-cols-6 gap-2 px-6 py-4 items-center text-sm",children:[i.jsxs("div",{className:"col-span-2 md:col-span-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:C(N.category)}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-white font-medium capitalize",children:[N.mode," - ",N.category]}),i.jsx("div",{className:"block md:hidden text-xs text-gray-500",children:T(N.created_at)})]})]}),N.mode==="1v1"&&i.jsx("div",{className:"ml-7 mt-1",children:i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${N.result==="win"?"bg-green-600/20 text-green-400":N.result==="loss"?"bg-red-600/20 text-red-400":"bg-yellow-600/20 text-yellow-400"}`,children:N.result==="win"?"Win":N.result==="loss"?"Loss":"Draw"})})]}),i.jsxs("div",{className:"hidden md:flex items-center text-gray-400 text-xs",children:[i.jsx(Lc,{size:14,className:"mr-1"}),T(N.created_at)]}),i.jsx("div",{className:"text-center font-bold text-green-400",children:N.score}),i.jsxs("div",{className:"text-center font-medium text-blue-400",children:[Math.round(N.correct_answers/N.total_questions*100),"%"]}),i.jsx("div",{className:"text-center text-gray-300 hidden sm:block",children:N.completion_time?`${N.completion_time.toFixed(1)}s`:"N/A"})]},N.id))}),d>1&&i.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",(l-1)*_+1," to ",Math.min(l*_,n.length)," of ",n.length," games"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(N=>Math.max(N-1,1)),disabled:l===1,className:"p-2 rounded-lg bg-gray-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(jy,{size:20})}),i.jsxs("div",{className:"flex items-center px-4 bg-gray-700 rounded-lg text-white",children:[l," / ",d]}),i.jsx("button",{onClick:()=>c(N=>Math.min(N+1,d)),disabled:l===d,className:"p-2 rounded-lg bg-gray-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Dc,{size:20})})]})]})]})})]})})},Ax=()=>{const{user:t,profile:e,refreshProfile:s}=ht(),[n,r]=p.useState(""),[o,a]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(""),[h,f]=p.useState(""),[m,y]=p.useState(!1),[x,g]=p.useState(null),[b,w]=p.useState(null),[_,A]=p.useState(!1);p.useEffect(()=>{e!=null&&e.username&&r(e.username),t!=null&&t.email&&a(t.email)},[e,t]);const C=async P=>{if(P.preventDefault(),!!t){y(!0),w(null),g(null);try{const{error:N}=await me.from("profiles").update({username:n}).eq("id",t.id);if(N)throw N;await s(),g("Profile updated successfully!")}catch(N){console.error("Error updating profile:",N),w("Failed to update profile. Please try again.")}finally{y(!1)}}},T=async P=>{if(P.preventDefault(),!!t){if(d!==h){w("New passwords do not match");return}if(d.length<8){w("New password must be at least 8 characters");return}y(!0),w(null),g(null);try{const{error:N}=await me.auth.updateUser({password:d});if(N)throw N;g("Password updated successfully!"),c(""),u(""),f("")}catch(N){console.error("Error updating password:",N),w("Failed to update password. Please try again.")}finally{y(!1)}}},E=async()=>{if(t){y(!0),w(null);try{const{error:P}=await me.from("profiles").delete().eq("id",t.id);if(P)throw P;await me.auth.signOut(),window.location.href="/"}catch(P){console.error("Error deleting account:",P),w("Failed to delete account. Please contact support."),y(!1)}}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#0c1220] to-[#1a1a2e] p-4 sm:p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[i.jsx(xe,{to:"/dashboard",children:i.jsx(S.button,{className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white",whileHover:{scale:1.05},whileTap:{scale:.95},children:i.jsx(_t,{size:20})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Account Settings"}),i.jsx("p",{className:"text-gray-400",children:"Manage your profile and preferences"})]})]}),x&&i.jsxs(S.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[i.jsx(_i,{size:20}),x]}),b&&i.jsxs(S.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[i.jsx(xa,{size:20}),b]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700/50",children:[i.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[i.jsx(Cn,{size:20,className:"text-blue-400"}),"Profile Settings"]}),i.jsxs("form",{onSubmit:C,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-400 mb-1",children:"Username"}),i.jsx("input",{id:"username",type:"text",value:n,onChange:P=>r(P.target.value),className:"w-full p-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),i.jsx("input",{id:"email",type:"email",value:o,readOnly:!0,className:"w-full p-3 bg-gray-700/50 text-gray-300 rounded-lg cursor-not-allowed"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),i.jsx(S.button,{type:"submit",disabled:m,className:"w-full p-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},children:m?i.jsx("div",{className:"w-5 h-5 border-t-2 border-b-2 border-white rounded-full animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(Ty,{size:18}),"Save Profile"]})})]})]}),i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700/50",children:[i.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[i.jsx(va,{size:20,className:"text-blue-400"}),"Change Password"]}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-400 mb-1",children:"New Password"}),i.jsx("input",{id:"newPassword",type:"password",value:d,onChange:P=>u(P.target.value),className:"w-full p-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m,placeholder:"Enter new password"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-400 mb-1",children:"Confirm New Password"}),i.jsx("input",{id:"confirmPassword",type:"password",value:h,onChange:P=>f(P.target.value),className:"w-full p-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m,placeholder:"Confirm new password"})]}),i.jsx(S.button,{type:"submit",disabled:m||!d||!h,className:"w-full p-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},children:m?i.jsx("div",{className:"w-5 h-5 border-t-2 border-b-2 border-white rounded-full animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(va,{size:18}),"Update Password"]})})]})]})]}),i.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"mt-8 bg-gray-800 rounded-xl p-6 shadow-lg border border-red-900/30",children:[i.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[i.jsx(xa,{size:20,className:"text-red-400"}),"Danger Zone"]}),_?i.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4",children:[i.jsx("p",{className:"text-red-300 mb-4",children:"Are you sure you want to delete your account? This action cannot be undone and will delete all your game history and statistics."}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:"Cancel"}),i.jsx("button",{onClick:E,disabled:m,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?i.jsx("div",{className:"w-4 h-4 border-t-2 border-b-2 border-white rounded-full animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(ja,{size:16}),"Permanently Delete Account"]})})]})]}):i.jsxs(S.button,{onClick:()=>A(!0),className:"px-4 py-2 bg-gray-700 hover:bg-red-900/50 text-red-400 hover:text-red-300 rounded-lg transition-colors flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx(ja,{size:18}),"Delete Account"]})]})]})})},Ex=({currentView:t,additionalParams:e={}})=>{const s=Je(),{trackPageView:n,trackEvent:r}=Tn();return p.useEffect(()=>{n(s.pathname)},[s,n]),p.useEffect(()=>{if(t){const o=t.charAt(0).toUpperCase()+t.slice(1);n(`/view/${t}`,`${o} View`),r("view_screen",{screen_name:t,...e}),console.log(`Tracked virtual pageview: ${t}`,e)}},[t,e,n,r]),null};function Rx(){var j,v;const[t,e]=p.useState("home"),[s,n]=p.useState("solo"),[r,o]=p.useState(!1),[a,l]=p.useState(null),{trackEvent:c}=Tn(),{initializeGame:d,addPlayer:u,setCategory:h,isGameStarted:f,isGameEnded:m,resetGame:y,players:x}=Ai(),{initializeGame:g,createGame:b,isGameStarted:w,isGameEnded:_,resetGame:A,setCategory:C,players:T,getCurrentPlayer:E,socket:P,hasJoinedGame:N,requestRematch:I}=Jt(),z=k=>{c("home_start",{username:k}),localStorage.setItem("username",k),y(),A(),e("welcome")},de=async(k,M)=>{try{c("mode_select",{mode:M,username:k}),n(M==="solo"?"solo":"1v1"),M==="solo"?(y(),await d("solo"),u(k),e("category")):M==="create"?(A(),await g(),e("category")):M==="join"&&(A(),await g(),localStorage.setItem("showJoinUI","true"),e("invite"),c("join_game_attempt",{mode:"1v1"}))}catch(L){console.error("Error starting game:",L),c("game_start_error",{mode:M,error:L instanceof Error?L.message:"Unknown error"})}},he=async()=>{const k=localStorage.getItem("username")||"Guest";c("play_again",{mode:s,category:a}),al(),s==="solo"?(y(),d(s),u(k),e("category")):console.log("1v1 rematch is handled directly by the rematch system")},X=()=>{c("invite_success",{mode:"1v1",category:a}),e("lobby")},G=async k=>{if(r){console.log("Category selection already in progress, ignoring");return}try{if(o(!0),console.log(`App handling category selection: ${k} for mode: ${s}`),c("category_select",{mode:s,category:k}),s==="solo")try{e("loading"),await h(k)}catch(M){console.error("Error setting solo category:",M),c("category_select_error",{mode:"solo",category:k,error:M instanceof Error?M.message:"Unknown error"}),e("category")}else l(k),N?(console.log("Already joined game, updating category"),C(k),e("lobby")):(console.log("Selected category for new game:",k),e("invite"))}finally{setTimeout(()=>{o(!1)},1e3)}},H=()=>{c("navigation",{action:"return_to_mode_select",from_state:t});const k=localStorage.getItem("goToCategory")==="true";localStorage.removeItem("goToCategory"),y(),A(),l(null),k?(console.log("Redirecting to category selection from invite screen"),e("category")):e("welcome")},Q=()=>{if(c("navigation",{action:"back_to_category",from_state:t,mode:s}),s==="solo")e("category");else{const k=E();k&&k.isHost?e("category"):e("lobby")}};p.useEffect(()=>{const k=()=>{console.log("Custom game started event received, forcing transition to game"),t==="lobby"&&(e("game"),c("game_started",{mode:"1v1",category:a,players_count:T.length}))};return window.addEventListener("sportiq:gameStarted",k),()=>{window.removeEventListener("sportiq:gameStarted",k)}},[t,c,T.length,a]),p.useEffect(()=>{const k=()=>{console.log("Custom returnToLobby event received, navigating to lobby"),e("lobby"),c("rematch_accepted",{mode:"1v1",category:a})};return window.addEventListener("sportiq:returnToLobby",k),()=>{window.removeEventListener("sportiq:returnToLobby",k)}},[c,a]),p.useEffect(()=>{t==="loading"&&(s==="solo"&&f||s==="1v1"&&w)&&(console.log("Game started while in loading screen, transitioning to game screen"),e("game"),c("game_started",{mode:s,category:a,from_loading:!0}))},[f,w,s,t,c,a]),p.useEffect(()=>{t==="lobby"&&s==="1v1"&&w&&!_&&(console.log("1v1 game started while in lobby state, transitioning to game screen"),e("game"),c("game_started",{mode:"1v1",category:a,from_lobby:!0,players_count:T.length}))},[w,_,s,t,c,a,T.length]),p.useEffect(()=>{if(s==="solo"&&m){console.log("Solo game ended, transitioning to results screen"),e("results");const k=x[0];c("game_completed",{mode:"solo",category:a,score:(k==null?void 0:k.score)||0,correct_answers:(k==null?void 0:k.correctAnswers)||0,total_questions:10})}else if(s==="1v1"&&_){console.log("1v1 game ended, transitioning to results screen"),e("results");const k=E(),M=T.find(L=>L.id!==(k==null?void 0:k.id));c("game_completed",{mode:"1v1",category:a,player_score:(k==null?void 0:k.score)||0,opponent_score:(M==null?void 0:M.score)||0,correct_answers:(k==null?void 0:k.correctAnswers)||0,is_winner:(k==null?void 0:k.score)>((M==null?void 0:M.score)||0),total_questions:10})}},[m,_,s,c,a,x,T,E]),p.useEffect(()=>{if(P&&s==="1v1"){const k=M=>{console.log("Game over event received in App.tsx:",M),e("results"),setTimeout(()=>{t!=="results"&&_&&(console.log("Forcing transition to results screen"),e("results"))},1e3)};return P.on("gameOver",k),()=>{P.off("gameOver",k)}}},[P,s,_,t]),p.useEffect(()=>{if(s==="1v1"&&_&&t!=="results"){console.log("Game ended but UI not in results state, forcing transition");const k=setTimeout(()=>{e("results")},500);return()=>clearTimeout(k)}},[s,_,t]),p.useEffect(()=>{var k;console.log("Current game state:",{mode:s,state:t,isSoloGameStarted:f,isSoloGameEnded:m,is1v1GameStarted:w,is1v1GameEnded:_,soloPlayersCount:x.length,multiPlayersCount:T.length,hasJoinedGame:N,categorySelectionInProgress:r,selectedCategory:a,isHost:(k=E())==null?void 0:k.isHost,goToCategory:localStorage.getItem("goToCategory")})},[t,s,f,m,w,_,x.length,T.length,N,r,a,E]);const ee=()=>{const k=E();k&&(c("rematch_requested",{mode:"1v1",category:a,player_id:k.id}),I(k.id))},Y={mode:s,category:a||"none",players_solo:x.length,players_multi:T.length,is_host:((j=E())==null?void 0:j.isHost)||!1,game_state:{solo_started:f,solo_ended:m,multi_started:w,multi_ended:_}};return i.jsx(Hf,{children:i.jsx(Iy,{children:i.jsxs(pu,{children:[i.jsx(Ex,{currentView:t,additionalParams:Y}),i.jsxs(lu,{children:[i.jsx(Ie,{path:"/auth/signup",element:i.jsx(_x,{})}),i.jsx(Ie,{path:"/auth/signin",element:i.jsx(kx,{})}),i.jsx(Ie,{path:"/auth/verification",element:i.jsx(Cx,{})}),i.jsx(Ie,{path:"/dashboard",element:i.jsx(rr,{children:i.jsx(Nx,{})})}),i.jsx(Ie,{path:"/history",element:i.jsx(rr,{children:i.jsx(Px,{})})}),i.jsx(Ie,{path:"/settings",element:i.jsx(rr,{children:i.jsx(Ax,{})})}),i.jsx(Ie,{path:"/auth/callback",element:i.jsx(Tx,{})}),i.jsx(Ie,{path:"/faq",element:i.jsx(wx,{})}),i.jsx(Ie,{path:"/about",element:i.jsx(Sx,{})}),i.jsx(Ie,{path:"*",element:i.jsxs("div",{className:"min-h-screen bg-[#1a1a1a]",children:[t==="home"&&i.jsx(Hy,{onStart:z}),t==="welcome"&&i.jsx(Ky,{onStart:de}),t==="invite"&&i.jsx(xx,{onJoinSuccess:X,onBackToMode:H,selectedCategory:a}),t==="category"&&i.jsx(tx,{onSelect:G,mode:s,onBack:H}),t==="loading"&&i.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:i.jsxs("div",{className:"text-white text-center p-8",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading Quiz..."}),i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-green-500 rounded-full animate-pulse w-1/2"})})]})}),t==="lobby"&&s==="1v1"&&i.jsx(sx,{onBackToCategory:Q,onBackToMode:H}),t==="game"&&i.jsx(ox,{mode:s,onBackToCategory:Q,onBackToMode:H},`game-${s}-${((v=x[0])==null?void 0:v.id)||"solo"}`),t==="results"&&(s==="solo"?i.jsx(nd,{onPlayAgain:he,onHome:H}):i.jsx(yx,{onPlayAgain:ee,onHome:H}))]})})]})]})})})}const ad=document.getElementById("root");if(!ad)throw new Error("Failed to find the root element");const Mx=Ta(ad);Mx.render(i.jsx($e.StrictMode,{children:i.jsx(Rx,{})}))});export default Ix();

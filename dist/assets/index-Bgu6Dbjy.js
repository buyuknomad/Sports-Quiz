const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BdwrkyL5.js","assets/vendor-C2OVMZwl.js"])))=>i.map(i=>d[i]);
var Dl=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);import{r as w,a as Ll,g as $l,c as Ce,b as mo,R as Fe}from"./vendor-C2OVMZwl.js";import{l as Vl}from"./socket-TjCxX7sJ.js";var pg=Dl((Rg,rs)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var po={exports:{}},Cs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl=w,Bl=Symbol.for("react.element"),Ul=Symbol.for("react.fragment"),Gl=Object.prototype.hasOwnProperty,ql=Fl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zl={key:!0,ref:!0,__self:!0,__source:!0};function go(s,e,t){var n,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Gl.call(e,n)&&!zl.hasOwnProperty(n)&&(r[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Bl,type:s,key:i,ref:o,props:r,_owner:ql.current}}Cs.Fragment=Ul;Cs.jsx=go;Cs.jsxs=go;po.exports=Cs;var c=po.exports,yo,Rr=Ll;yo=Rr.createRoot,Rr.hydrateRoot;const Hl="modulepreload",Wl=function(s){return"/"+s},Mr={},wt=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=Wl(l),l in Mr)return;Mr[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Hl,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Kl=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>wt(async()=>{const{default:n}=await Promise.resolve().then(()=>kt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Bn extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Jl extends Bn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ql extends Bn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xl extends Bn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pn;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(pn||(pn={}));var Yl=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class Zl{constructor(e,{headers:t={},customFetch:n,region:r=pn.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Kl(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Yl(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u}).catch(v=>{throw new Jl(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Ql(d);if(!d.ok)throw new Xl(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield d.json():f==="application/octet-stream"?m=yield d.blob():f==="text/event-stream"?m=d:f==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(r){return{data:null,error:r}}})}}var xe={},Un={},As={},Xt={},Es={},Ns={},ec=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bt=ec();const tc=bt.fetch,vo=bt.fetch.bind(bt),xo=bt.Headers,sc=bt.Request,nc=bt.Response,kt=Object.freeze(Object.defineProperty({__proto__:null,Headers:xo,Request:sc,Response:nc,default:vo,fetch:tc},Symbol.toStringTag,{value:"Module"})),rc=$l(kt);var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});let ic=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Rs.default=ic;var wo=Ce&&Ce.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ns,"__esModule",{value:!0});const oc=wo(rc),ac=wo(Rs);let lc=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=oc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,d=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=b:d=JSON.parse(b))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,m="OK")}catch{i.status===404&&y===""?(f=204,m="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new ac.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};Ns.default=lc;var cc=Ce&&Ce.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Es,"__esModule",{value:!0});const uc=cc(Ns);let dc=class extends uc.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Es.default=dc;var hc=Ce&&Ce.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xt,"__esModule",{value:!0});const fc=hc(Es);let mc=class extends fc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Xt.default=mc;var pc=Ce&&Ce.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(As,"__esModule",{value:!0});const Rt=pc(Xt);let gc=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Rt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Rt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Rt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new Rt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Rt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};As.default=gc;var Ms={},Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.version=void 0;Is.version="0.0.0-automated";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.DEFAULT_HEADERS=void 0;const yc=Is;Ms.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${yc.version}`};var bo=Ce&&Ce.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Un,"__esModule",{value:!0});const vc=bo(As),xc=bo(Xt),wc=Ms;let bc=class _o{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},wc.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new vc.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new _o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;n||r?(o=n?"HEAD":"GET",Object.entries(t).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",l=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new xc.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Un.default=bc;var Pt=Ce&&Ce.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xe,"__esModule",{value:!0});xe.PostgrestError=xe.PostgrestBuilder=xe.PostgrestTransformBuilder=xe.PostgrestFilterBuilder=xe.PostgrestQueryBuilder=xe.PostgrestClient=void 0;const jo=Pt(Un);xe.PostgrestClient=jo.default;const To=Pt(As);xe.PostgrestQueryBuilder=To.default;const So=Pt(Xt);xe.PostgrestFilterBuilder=So.default;const ko=Pt(Es);xe.PostgrestTransformBuilder=ko.default;const Po=Pt(Ns);xe.PostgrestBuilder=Po.default;const Co=Pt(Rs);xe.PostgrestError=Co.default;var _c=xe.default={PostgrestClient:jo.default,PostgrestQueryBuilder:To.default,PostgrestFilterBuilder:So.default,PostgrestTransformBuilder:ko.default,PostgrestBuilder:Po.default,PostgrestError:Co.default};const{PostgrestClient:jc,PostgrestQueryBuilder:Tg,PostgrestFilterBuilder:Sg,PostgrestTransformBuilder:kg,PostgrestBuilder:Pg,PostgrestError:Cg}=_c,Tc="2.11.2",Sc={"X-Client-Info":`realtime-js/${Tc}`},kc="1.0.0",Ao=1e4,Pc=1e3;var xt;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(xt||(xt={}));var be;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(be||(be={}));var Ee;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Ee||(Ee={}));var gn;(function(s){s.websocket="websocket"})(gn||(gn={}));var st;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(st||(st={}));class Cc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o=o+r;const l=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}let Eo=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var X;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(X||(X={}));const Ir=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ac(o,s,e,r),i),{})},Ac=(s,e,t,n)=>{const r=e.find(a=>a.name===s),i=r==null?void 0:r.type,o=t[s];return i&&!n.includes(i)?No(i,o):yn(o)},No=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Mc(e,t)}switch(s){case X.bool:return Ec(e);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return Nc(e);case X.json:case X.jsonb:return Rc(e);case X.timestamp:return Ic(e);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return yn(e);default:return yn(e)}},yn=s=>s,Ec=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Nc=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Rc=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Mc=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>No(e,a))}return s},Ic=s=>typeof s=="string"?s.replace(" ","T"):s,Ro=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ws{constructor(e,t,n={},r=Ao){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Or;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Or||(Or={}));class Vt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vt.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=Vt.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Vt.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),v=d.filter(g=>m.indexOf(g.presence_ref)<0),y=h.filter(g=>f.indexOf(g.presence_ref)<0);v.length>0&&(a[u]=v),y.length>0&&(l[u]=y)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...f)}n(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dr;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Dr||(Dr={}));var Lr;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Lr||(Lr={}));var Oe;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Oe||(Oe={}));class Gn{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ws(this,Ee.join,this.params,this.timeout),this.rejoinTimer=new Eo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ee.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Vt(this),this.broadcastEndpointURL=Ro(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Oe.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Oe.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Oe.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let y=0;y<m;y++){const g=f[y],{filter:{event:b,schema:j,table:T,filter:k}}=g,_=d&&d[y];if(_&&_.event===b&&_.schema===j&&_.table===T&&_.filter===k)v.push(Object.assign(Object.assign({},g),{id:_.id}));else{this.unsubscribe(),e==null||e(Oe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Oe.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(Oe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Oe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ee.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new Ws(this,Ee.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Ws(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Ee;if(n&&[a,l,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var v,y,g;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(y=m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,y,g,b,j,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,_=(v=m.filter)===null||v===void 0?void 0:v.event;return k&&((y=t.ids)===null||y===void 0?void 0:y.includes(k))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const k=(j=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return k==="*"||k===((T=t==null?void 0:t.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:g,commit_timestamp:b,type:j,errors:T}=v;f=Object.assign(Object.assign({},{schema:y,table:g,commit_timestamp:b,eventType:j,new:{},old:{},errors:T}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Gn.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ee.close,{},e)}_onError(e){this._on(Ee.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ir(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ir(e.columns,e.old_record)),t}}const Oc=()=>{},Dc=typeof WebSocket<"u",Lc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $c{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Sc,this.params={},this.timeout=Ao,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Oc,this.conn=null,this.sendBuffer=[],this.serializer=new Cc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>wt(async()=>{const{default:l}=await Promise.resolve().then(()=>kt);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${gn.websocket}`,this.httpEndpoint=Ro(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Eo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Dc){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Vc(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),wt(async()=>{const{default:e}=await import("./browser-BdwrkyL5.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kc}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xt.connecting:return st.Connecting;case xt.open:return st.Open;case xt.closing:return st.Closing;default:return st.Closed}}isConnected(){return this.connectionState()===st.Open}channel(e,t={config:{}}){const n=new Gn(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(Ee.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Pc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ee.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([Lc],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class Vc{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=xt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class qn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function de(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Fc extends qn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vn extends qn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Bc=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const Mo=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>wt(async()=>{const{default:n}=await Promise.resolve().then(()=>kt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Uc=()=>Bc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wt(()=>Promise.resolve().then(()=>kt),void 0)).Response:Response}),xn=s=>{if(Array.isArray(s))return s.map(t=>xn(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=xn(n)}),e};var at=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const Ks=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Gc=(s,e,t)=>at(void 0,void 0,void 0,function*(){const n=yield Uc();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{e(new Fc(Ks(r),s.status||500))}).catch(r=>{e(new vn(Ks(r),r))}):e(new vn(Ks(s),s))}),qc=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),t))};function Yt(s,e,t,n,r,i){return at(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,qc(e,n,r,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Gc(l,a,n))})})}function vs(s,e,t,n){return at(this,void 0,void 0,function*(){return Yt(s,"GET",e,t,n)})}function He(s,e,t,n,r){return at(this,void 0,void 0,function*(){return Yt(s,"POST",e,n,r,t)})}function zc(s,e,t,n,r){return at(this,void 0,void 0,function*(){return Yt(s,"PUT",e,n,r,t)})}function Hc(s,e,t,n){return at(this,void 0,void 0,function*(){return Yt(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Io(s,e,t,n,r){return at(this,void 0,void 0,function*(){return Yt(s,"DELETE",e,n,r,t)})}var ve=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const Wc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$r={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Kc{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Mo(r)}uploadOrUpdate(e,t,n,r){return ve(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},$r),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(de(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return ve(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:$r.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(de(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ve(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield He(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new qn("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}update(e,t,n){return ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ve(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}copy(e,t,n){return ve(this,void 0,void 0,function*(){try{return{data:{path:(yield He(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return ve(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield He(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return ve(this,void 0,void 0,function*(){try{const r=yield He(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}download(e,t){return ve(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield vs(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}})}info(e){return ve(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield vs(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xn(n),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}exists(e){return ve(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Hc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(de(n)&&n instanceof vn){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return ve(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}})}list(e,t,n){return ve(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Wc),t),{prefix:e||""});return{data:yield He(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Jc="2.7.1",Qc={"X-Client-Info":`storage-js/${Jc}`};var ut=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class Xc{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Qc),t),this.fetch=Mo(n)}listBuckets(){return ut(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(de(e))return{data:null,error:e};throw e}})}getBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ut(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ut(this,void 0,void 0,function*(){try{return{data:yield zc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}})}}class Yc extends Xc{constructor(e,t={},n){super(e,t,n)}from(e){return new Kc(this.url,this.headers,e,this.fetch)}}const Zc="2.49.1";let It="";typeof Deno<"u"?It="deno":typeof document<"u"?It="web":typeof navigator<"u"&&navigator.product==="ReactNative"?It="react-native":It="node";const eu={"X-Client-Info":`supabase-js-${It}/${Zc}`},tu={headers:eu},su={schema:"public"},nu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ru={};var iu=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const ou=s=>{let e;return s?e=s:typeof fetch>"u"?e=vo:e=fetch,(...t)=>e(...t)},au=()=>typeof Headers>"u"?xo:Headers,lu=(s,e,t)=>{const n=ou(t),r=au();return(i,o)=>iu(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:s;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var cu=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};function uu(s){return s.replace(/\/$/,"")}function du(s,e){const{db:t,auth:n,realtime:r,global:i}=s,{db:o,auth:a,realtime:l,global:u}=e,d={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},u),i),accessToken:()=>cu(this,void 0,void 0,function*(){return""})};return s.accessToken?d.accessToken=s.accessToken:delete d.accessToken,d}const Oo="2.68.0",ft=30*1e3,wn=3,Js=wn*ft,hu="http://localhost:9999",fu="supabase.auth.token",mu={"X-Client-Info":`gotrue-js/${Oo}`},bn="X-Supabase-Api-Version",Do={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function pu(s){return Math.round(Date.now()/1e3)+s}function gu(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Ne=()=>typeof window<"u"&&typeof document<"u",Xe={tested:!1,writable:!1},Ft=()=>{if(!Ne())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xe.tested)return Xe.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Xe.tested=!0,Xe.writable=!0}catch{Xe.tested=!0,Xe.writable=!1}return Xe.writable};function yu(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const Lo=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>wt(async()=>{const{default:n}=await Promise.resolve().then(()=>kt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},vu=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",$o=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},is=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},os=async(s,e)=>{await s.removeItem(e)};function xu(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,r,i,o,a,l,u,d=0;for(s=s.replace("-","+").replace("_","/");d<s.length;)o=e.indexOf(s.charAt(d++)),a=e.indexOf(s.charAt(d++)),l=e.indexOf(s.charAt(d++)),u=e.indexOf(s.charAt(d++)),n=o<<2|a>>4,r=(a&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(n),l!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Os{constructor(){this.promise=new Os.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Os.promiseConstructor=Promise;function Vr(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(xu(n))}async function wu(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function bu(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function _u(s){return("0"+s.toString(16)).substr(-2)}function ju(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,_u).join("")}async function Tu(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function Su(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ku(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await Tu(s);return Su(t)}async function dt(s,e,t=!1){const n=ju();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await $o(s,`${e}-code-verifier`,r);const i=await ku(n);return[i,n===i?"plain":"s256"]}const Pu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Cu(s){const e=s.headers.get(bn);if(!e||!e.match(Pu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class zn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function V(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Au extends zn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Eu(s){return V(s)&&s.name==="AuthApiError"}class Vo extends zn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class lt extends zn{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Ge extends lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Nu(s){return V(s)&&s.name==="AuthSessionMissingError"}class Qs extends lt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class as extends lt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ls extends lt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ru(s){return V(s)&&s.name==="AuthImplicitGrantRedirectError"}class Fr extends lt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _n extends lt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Xs(s){return V(s)&&s.name==="AuthRetryableFetchError"}class Br extends lt{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var Mu=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const Ze=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Iu=[502,503,504];async function Ur(s){var e;if(!vu(s))throw new _n(Ze(s),0);if(Iu.includes(s.status))throw new _n(Ze(s),s.status);let t;try{t=await s.json()}catch(i){throw new Vo(Ze(i),i)}let n;const r=Cu(s);if(r&&r.getTime()>=Do["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Br(Ze(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ge}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Br(Ze(t),s.status,t.weak_password.reasons);throw new Au(Ze(t),s.status||500,n)}const Ou=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function q(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[bn]||(i[bn]=Do["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Du(s,e,t+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Du(s,e,t,n,r,i){const o=Ou(e,n,r,i);let a;try{a=await s(t,Object.assign({},o))}catch(l){throw console.error(l),new _n(Ze(l),0)}if(a.ok||await Ur(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Ur(l)}}function qe(s){var e;let t=null;Fu(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=pu(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function Gr(s){const e=qe(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function We(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Lu(s){return{data:s,error:null}}function $u(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,o=Mu(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Vu(s){return s}function Fu(s){return s.access_token&&s.refresh_token&&s.expires_in}var Bu=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class Uu{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Lo(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:We})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Bu(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:$u,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(V(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:We})}catch(t){if(V(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Vu});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(V(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:We})}catch(t){if(V(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:We})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:We})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(V(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(V(t))return{data:null,error:t};throw t}}}const Gu={getItem:s=>Ft()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{Ft()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{Ft()&&globalThis.localStorage.removeItem(s)}};function qr(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function qu(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ht={debug:!!(globalThis&&Ft()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zu extends Fo{}async function Hu(s,e,t){ht.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ht.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){ht.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{ht.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw ht.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new zu(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ht.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}qu();const Wu={url:hu,storageKey:fu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zr(s,e,t){return await t()}class zt{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zt.nextInstanceID,zt.nextInstanceID+=1,this.instanceID>0&&Ne()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Wu),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Uu({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Lo(r.fetch),this.lock=r.lock||zr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Ne()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Hu:this.lock=zr,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Ft()?this.storage=Gu:(this.memoryStorage={},this.storage=qr(this.memoryStorage)):(this.memoryStorage={},this.storage=qr(this.memoryStorage)),Ne()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Oo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=yu(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Ne()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ru(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return V(t)?{error:t}:{error:new Vo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:qe}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(V(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await dt(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:qe})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:qe})}else throw new as("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(V(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Gr})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Gr})}else throw new as("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Qs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(V(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await is(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:o}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qe});if(await os(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Qs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(V(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,a=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:qe}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Qs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(V(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await dt(this.storage,this.storageKey));const{error:h}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new as("You must provide either an email or phone number.")}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:qe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await dt(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Lu})}catch(i){if(V(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Ge;const{error:r}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await q(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await q(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new as("You must provide either an email or phone number and a type")}catch(t){if(V(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Js:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:We}):await this._useSession(async t=>{var n,r,i;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ge}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:We})})}catch(t){if(V(t))return Nu(t)&&(await this._removeSession(),await os(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Ge;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await dt(this.storage,this.storageKey));const{data:u,error:d}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:We});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return Vr(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ge;const t=Date.now()/1e3;let n=t,r=!0,i=null;const o=Vr(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(V(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ge;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(V(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ne())throw new ls("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ls(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Fr("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ls("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Fr("No code detected.");const{data:j,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new ls("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const m=f-d;m*1e3<=ft&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:y,error:g}=await this._getUser(i);if(g)throw g;const b={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(V(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await is(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Eu(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await os(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=gu(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await dt(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(V(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(V(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return Ne()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(V(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(V(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await bu(async r=>(r>0&&await wu(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qe})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Xs(i)&&Date.now()+o-n<ft})}catch(n){if(this._debug(t,"error",n),V(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ne()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await is(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Js;if(this._debug(t,`session has${r?"":" not"} expired with margin of ${Js}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Xs(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Ge;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Os;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ge;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),V(i)){const o={session:null,error:i};return Xs(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await $o(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await os(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ne()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ft);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/ft);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${ft}ms, refresh threshold is ${wn} ticks`),r<=wn&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Fo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ne()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await dt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(V(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await q(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(V(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(V(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(V(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}zt.nextInstanceID=0;const Ku=zt;class Ju extends Ku{constructor(e){super(e)}}var Qu=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class Xu{constructor(e,t,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=uu(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:su,realtime:ru,auth:Object.assign(Object.assign({},nu),{storageKey:l}),global:tu},d=du(n??{},u);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=lu(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new jc(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Zl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Yc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Qu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:a,debug:l},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ju({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $c(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Yu=(s,e,t)=>new Xu(s,e,t),Zu="https://zfkjvbhkroowlyqebvyh.supabase.co",ed="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpma2p2Ymhrcm9vd2x5cWVidnloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1NTY2NTYsImV4cCI6MjA1ODEzMjY1Nn0.ULHVkpGVQOqMckICZUsdhnPu4TMQYBxLkzZW4eVNOw4",td=Yu(Zu,ed,{auth:{autoRefreshToken:!0,persistSession:!0},global:{headers:{"X-Client-Info":"sports-quiz-app"}}}),Ot=new Map,sd=5*60*1e3,cs=new Map,us={football:[{id:"fb1",category:"football",question:"Which country won the 2022 FIFA World Cup?",options:["France","Brazil","Argentina","Germany"],correctAnswer:"Argentina"},{id:"fb2",category:"football",question:"Who holds the record for most goals in World Cup history?",options:["Pelé","Miroslav Klose","Ronaldo","Just Fontaine"],correctAnswer:"Miroslav Klose"},{id:"fb3",category:"football",question:"Which team has won the most UEFA Champions League titles?",options:["Real Madrid","AC Milan","Bayern Munich","Liverpool"],correctAnswer:"Real Madrid"}],basketball:[{id:"bb1",category:"basketball",question:"Which NBA team has won the most championships?",options:["Los Angeles Lakers","Boston Celtics","Chicago Bulls","Golden State Warriors"],correctAnswer:"Boston Celtics"},{id:"bb2",category:"basketball",question:"Who holds the NBA record for most points in a single game?",options:["Michael Jordan","Kobe Bryant","Wilt Chamberlain","LeBron James"],correctAnswer:"Wilt Chamberlain"},{id:"bb3",category:"basketball",question:"Who is the NBA's all-time leading scorer?",options:["Kareem Abdul-Jabbar","LeBron James","Michael Jordan","Karl Malone"],correctAnswer:"LeBron James"}],tennis:[{id:"tn1",category:"tennis",question:"Who has won the most Grand Slam singles titles in tennis history?",options:["Roger Federer","Rafael Nadal","Novak Djokovic","Serena Williams"],correctAnswer:"Novak Djokovic"},{id:"tn2",category:"tennis",question:"Which Grand Slam tournament is played on clay courts?",options:["Wimbledon","US Open","French Open","Australian Open"],correctAnswer:"French Open"},{id:"tn3",category:"tennis",question:"Who holds the record for most Wimbledon singles titles?",options:["Roger Federer","Novak Djokovic","Pete Sampras","Björn Borg"],correctAnswer:"Roger Federer"}],olympics:[{id:"ol1",category:"olympics",question:"Which city hosted the 2020 Summer Olympics (held in 2021)?",options:["Paris","Tokyo","London","Rio de Janeiro"],correctAnswer:"Tokyo"},{id:"ol2",category:"olympics",question:"Who is the most decorated Olympian of all time?",options:["Usain Bolt","Michael Phelps","Simone Biles","Carl Lewis"],correctAnswer:"Michael Phelps"},{id:"ol3",category:"olympics",question:"Which country has won the most Summer Olympic medals?",options:["Soviet Union","United States","China","Germany"],correctAnswer:"United States"}],mixed:[{id:"mx1",category:"mixed",question:"Which sport uses a shuttlecock?",options:["Tennis","Badminton","Cricket","Hockey"],correctAnswer:"Badminton"},{id:"mx2",category:"mixed",question:"In which sport would you perform a slam dunk?",options:["Volleyball","Basketball","Tennis","Football"],correctAnswer:"Basketball"},{id:"mx3",category:"mixed",question:"What is the diameter of a basketball hoop in inches?",options:["16 inches","18 inches","20 inches","24 inches"],correctAnswer:"18 inches"}]};function Hr(s){if(s==="mixed"){const t=[],n=["football","basketball","tennis","olympics"];for(const r of n){const o=[...us[r]].sort(()=>Math.random()-.5);t.push(...o.slice(0,2))}return t.push(...us.mixed),t.sort(()=>Math.random()-.5).slice(0,10).map(r=>({...r,category:"mixed"}))}const e=[...us[s]];if(e.length<10){const t=10-e.length,n=Object.entries(us).filter(([r])=>r!==s).flatMap(([,r])=>r).sort(()=>Math.random()-.5).slice(0,t).map(r=>({...r,category:s}));e.push(...n)}return e.slice(0,10).map(t=>({...t,category:s}))}async function nd(s){console.log(`Fetching questions for category: ${s}`);const e=`pending_${s}`;if(cs.has(e))return console.log("Request already in progress for category:",s),cs.get(e);const t=`questions_${s}`,n=Ot.get(t);if(n&&Date.now()-n.timestamp<sd)return console.log("Using cached questions for category:",s),n.data;const r=(async()=>{try{console.log("Fetching questions from Supabase...");let i=td.from("questions").select("*").eq("active",!0);s!=="mixed"&&(i=i.eq("category",s));const{data:o,error:a}=await i;if(a)throw console.error("Supabase query error:",a),a;if(!o||o.length===0){console.warn("No questions found in Supabase, using fallback questions");const u=Hr(s);return Ot.set(t,{data:u,timestamp:Date.now()}),u}const l=o.map(u=>({id:u.id,category:u.category,question:u.question,options:u.options,correctAnswer:u.correct_answer})).sort(()=>Math.random()-.5).slice(0,10);return Ot.set(t,{data:l,timestamp:Date.now()}),l}catch(i){console.error("Error fetching questions:",i);const o=Hr(s);return Ot.set(t,{data:o,timestamp:Date.now()}),o}finally{cs.delete(e)}})();return cs.set(e,r),r}function rd(){Ot.clear(),console.log("Question cache cleared")}class id extends w.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleRetry=()=>{rd(),this.setState({hasError:!1,error:null}),window.location.reload()}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?c.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 max-w-md w-full text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong."}),c.jsx("p",{className:"text-gray-400 mb-6",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred."}),c.jsx("button",{onClick:this.handleRetry,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition-colors",children:"Try Again"})]})}):this.props.children}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var od={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),H=(s,e)=>{const t=w.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},d)=>w.createElement("svg",{ref:d,...od,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${ad(s)}`,a].join(" "),...u},[...e.map(([h,f])=>w.createElement(h,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=H("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=H("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=H("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=H("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=H("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=H("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=H("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=H("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=H("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=H("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=H("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=H("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=H("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=H("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=H("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=H("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=H("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=H("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=H("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=H("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=H("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=H("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=H("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=H("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=H("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=H("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=H("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=H("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=H("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Jn=w.createContext({});function Qn(s){const e=w.useRef(null);return e.current===null&&(e.current=s()),e.current}const Ls=w.createContext(null),Xn=w.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class pd extends w.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function gd({children:s,isPresent:e}){const t=w.useId(),n=w.useRef(null),r=w.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=w.useContext(Xn);return w.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=r.current;if(e||!n.current||!o||!a)return;n.current.dataset.motionPopId=t;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),c.jsx(pd,{isPresent:e,childRef:n,sizeRef:r,children:w.cloneElement(s,{ref:n})})}const yd=({children:s,initial:e,isPresent:t,onExitComplete:n,custom:r,presenceAffectsLayout:i,mode:o})=>{const a=Qn(vd),l=w.useId(),u=w.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;n&&n()},[a,n]),d=w.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:u,register:h=>(a.set(h,!1),()=>a.delete(h))}),i?[Math.random(),u]:[t,u]);return w.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[t]),w.useEffect(()=>{!t&&!a.size&&n&&n()},[t]),o==="popLayout"&&(s=c.jsx(gd,{isPresent:t,children:s})),c.jsx(Ls.Provider,{value:d,children:s})};function vd(){return new Map}function Yo(s=!0){const e=w.useContext(Ls);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=w.useId();w.useEffect(()=>{s&&r(i)},[s]);const o=w.useCallback(()=>s&&n&&n(i),[i,n,s]);return!t&&n?[!1,o]:[!0]}const ds=s=>s.key||"";function Jr(s){const e=[];return w.Children.forEach(s,t=>{w.isValidElement(t)&&e.push(t)}),e}const Yn=typeof window<"u",Zo=Yn?w.useLayoutEffect:w.useEffect,De=({children:s,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=Yo(o),u=w.useMemo(()=>Jr(s),[s]),d=o&&!a?[]:u.map(ds),h=w.useRef(!0),f=w.useRef(u),m=Qn(()=>new Map),[v,y]=w.useState(u),[g,b]=w.useState(u);Zo(()=>{h.current=!1,f.current=u;for(let k=0;k<g.length;k++){const _=ds(g[k]);d.includes(_)?m.delete(_):m.get(_)!==!0&&m.set(_,!1)}},[g,d.length,d.join("-")]);const j=[];if(u!==v){let k=[...u];for(let _=0;_<g.length;_++){const R=g[_],$=ds(R);d.includes($)||(k.splice(_,0,R),j.push(R))}i==="wait"&&j.length&&(k=j),b(Jr(k)),y(u);return}const{forceRender:T}=w.useContext(Jn);return c.jsx(c.Fragment,{children:g.map(k=>{const _=ds(k),R=o&&!a?!1:u===g||d.includes(_),$=()=>{if(m.has(_))m.set(_,!0);else return;let C=!0;m.forEach(B=>{B||(C=!1)}),C&&(T==null||T(),b(f.current),o&&(l==null||l()),n&&n())};return c.jsx(yd,{isPresent:R,initial:!h.current||t?void 0:!1,custom:R?void 0:e,presenceAffectsLayout:r,mode:i,onExitComplete:R?void 0:$,children:k},_)})})},_e=s=>s;let Tn=_e;function Zn(s){let e;return()=>(e===void 0&&(e=s()),e)}const _t=(s,e,t)=>{const n=e-s;return n===0?1:(t-s)/n},Le=s=>s*1e3,$e=s=>s/1e3,xd={skipAnimations:!1,useManualTiming:!1};function wd(s){let e=new Set,t=new Set,n=!1,r=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){i.has(u)&&(l.schedule(u),s()),u(o)}const l={schedule:(u,d=!1,h=!1)=>{const m=h&&n?e:t;return d&&i.add(u),m.has(u)||m.add(u),u},cancel:u=>{t.delete(u),i.delete(u)},process:u=>{if(o=u,n){r=!0;return}n=!0,[e,t]=[t,e],e.forEach(a),e.clear(),n=!1,r&&(r=!1,l.process(u))}};return l}const hs=["read","resolveKeyframes","update","preRender","render","postRender"],bd=40;function ea(s,e){let t=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,o=hs.reduce((b,j)=>(b[j]=wd(i),b),{}),{read:a,resolveKeyframes:l,update:u,preRender:d,render:h,postRender:f}=o,m=()=>{const b=performance.now();t=!1,r.delta=n?1e3/60:Math.max(Math.min(b-r.timestamp,bd),1),r.timestamp=b,r.isProcessing=!0,a.process(r),l.process(r),u.process(r),d.process(r),h.process(r),f.process(r),r.isProcessing=!1,t&&e&&(n=!1,s(m))},v=()=>{t=!0,n=!0,r.isProcessing||s(m)};return{schedule:hs.reduce((b,j)=>{const T=o[j];return b[j]=(k,_=!1,R=!1)=>(t||v(),T.schedule(k,_,R)),b},{}),cancel:b=>{for(let j=0;j<hs.length;j++)o[hs[j]].cancel(b)},state:r,steps:o}}const{schedule:Z,cancel:Ke,state:he,steps:Ys}=ea(typeof requestAnimationFrame<"u"?requestAnimationFrame:_e,!0),ta=w.createContext({strict:!1}),Qr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jt={};for(const s in Qr)jt[s]={isEnabled:e=>Qr[s].some(t=>!!e[t])};function _d(s){for(const e in s)jt[e]={...jt[e],...s[e]}}const jd=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ws(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||jd.has(s)}let sa=s=>!ws(s);function Td(s){s&&(sa=e=>e.startsWith("on")?!ws(e):s(e))}try{Td(require("@emotion/is-prop-valid").default)}catch{}function Sd(s,e,t){const n={};for(const r in s)r==="values"&&typeof s.values=="object"||(sa(r)||t===!0&&ws(r)||!e&&!ws(r)||s.draggable&&r.startsWith("onDrag"))&&(n[r]=s[r]);return n}function kd(s){if(typeof Proxy>"u")return s;const e=new Map,t=(...n)=>s(...n);return new Proxy(t,{get:(n,r)=>r==="create"?s:(e.has(r)||e.set(r,s(r)),e.get(r))})}const $s=w.createContext({});function Ht(s){return typeof s=="string"||Array.isArray(s)}function Vs(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const er=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tr=["initial",...er];function Fs(s){return Vs(s.animate)||tr.some(e=>Ht(s[e]))}function na(s){return!!(Fs(s)||s.variants)}function Pd(s,e){if(Fs(s)){const{initial:t,animate:n}=s;return{initial:t===!1||Ht(t)?t:void 0,animate:Ht(n)?n:void 0}}return s.inherit!==!1?e:{}}function Cd(s){const{initial:e,animate:t}=Pd(s,w.useContext($s));return w.useMemo(()=>({initial:e,animate:t}),[Xr(e),Xr(t)])}function Xr(s){return Array.isArray(s)?s.join(" "):s}const Ad=Symbol.for("motionComponentSymbol");function mt(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function Ed(s,e,t){return w.useCallback(n=>{n&&s.onMount&&s.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):mt(t)&&(t.current=n))},[e])}const sr=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Nd="framerAppearId",ra="data-"+sr(Nd),{schedule:nr,cancel:Eg}=ea(queueMicrotask,!1),ia=w.createContext({});function Rd(s,e,t,n,r){var i,o;const{visualElement:a}=w.useContext($s),l=w.useContext(ta),u=w.useContext(Ls),d=w.useContext(Xn).reducedMotion,h=w.useRef(null);n=n||l.renderer,!h.current&&n&&(h.current=n(s,{visualState:e,parent:a,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,m=w.useContext(ia);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&Md(h.current,t,r,m);const v=w.useRef(!1);w.useInsertionEffect(()=>{f&&v.current&&f.update(t,u)});const y=t[ra],g=w.useRef(!!y&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return Zo(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),nr.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),w.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,y)}),g.current=!1))}),f}function Md(s,e,t,n){const{layoutId:r,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;s.projection=new t(s.latestValues,e["data-framer-portal-id"]?void 0:oa(s.parent)),s.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||a&&mt(a),visualElement:s,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:u})}function oa(s){if(s)return s.options.allowProjection!==!1?s.projection:oa(s.parent)}function Id({preloadedFeatures:s,createVisualElement:e,useRender:t,useVisualState:n,Component:r}){var i,o;s&&_d(s);function a(u,d){let h;const f={...w.useContext(Xn),...u,layoutId:Od(u)},{isStatic:m}=f,v=Cd(u),y=n(u,m);if(!m&&Yn){Dd();const g=Ld(f);h=g.MeasureLayout,v.visualElement=Rd(r,y,f,e,g.ProjectionNode)}return c.jsxs($s.Provider,{value:v,children:[h&&v.visualElement?c.jsx(h,{visualElement:v.visualElement,...f}):null,t(r,u,Ed(y,v.visualElement,d),y,m,v.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(i=r.displayName)!==null&&i!==void 0?i:r.name)!==null&&o!==void 0?o:""})`}`;const l=w.forwardRef(a);return l[Ad]=r,l}function Od({layoutId:s}){const e=w.useContext(Jn).id;return e&&s!==void 0?e+"-"+s:s}function Dd(s,e){w.useContext(ta).strict}function Ld(s){const{drag:e,layout:t}=jt;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(s)||t!=null&&t.isEnabled(s)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const $d=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rr(s){return typeof s!="string"||s.includes("-")?!1:!!($d.indexOf(s)>-1||/[A-Z]/u.test(s))}function Yr(s){const e=[{},{}];return s==null||s.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function ir(s,e,t,n){if(typeof e=="function"){const[r,i]=Yr(n);e=e(t!==void 0?t:s.custom,r,i)}if(typeof e=="string"&&(e=s.variants&&s.variants[e]),typeof e=="function"){const[r,i]=Yr(n);e=e(t!==void 0?t:s.custom,r,i)}return e}const Sn=s=>Array.isArray(s),Vd=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),Fd=s=>Sn(s)?s[s.length-1]||0:s,pe=s=>!!(s&&s.getVelocity);function ps(s){const e=pe(s)?s.get():s;return Vd(e)?e.toValue():e}function Bd({scrapeMotionValuesFromProps:s,createRenderState:e,onUpdate:t},n,r,i){const o={latestValues:Ud(n,r,i,s),renderState:e()};return t&&(o.onMount=a=>t({props:n,current:a,...o}),o.onUpdate=a=>t(a)),o}const aa=s=>(e,t)=>{const n=w.useContext($s),r=w.useContext(Ls),i=()=>Bd(s,e,n,r);return t?i():Qn(i)};function Ud(s,e,t,n){const r={},i=n(s,{});for(const f in i)r[f]=ps(i[f]);let{initial:o,animate:a}=s;const l=Fs(s),u=na(s);e&&u&&!l&&s.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!Vs(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const v=ir(s,f[m]);if(v){const{transitionEnd:y,transition:g,...b}=v;for(const j in b){let T=b[j];if(Array.isArray(T)){const k=d?T.length-1:0;T=T[k]}T!==null&&(r[j]=T)}for(const j in y)r[j]=y[j]}}}return r}const Ct=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ct=new Set(Ct),la=s=>e=>typeof e=="string"&&e.startsWith(s),ca=la("--"),Gd=la("var(--"),or=s=>Gd(s)?qd.test(s.split("/*")[0].trim()):!1,qd=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ua=(s,e)=>e&&typeof s=="number"?e.transform(s):s,Ve=(s,e,t)=>t>e?e:t<s?s:t,At={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Wt={...At,transform:s=>Ve(0,1,s)},fs={...At,default:1},es=s=>({test:e=>typeof e=="string"&&e.endsWith(s)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${s}`}),ze=es("deg"),Re=es("%"),O=es("px"),zd=es("vh"),Hd=es("vw"),Zr={...Re,parse:s=>Re.parse(s)/100,transform:s=>Re.transform(s*100)},Wd={borderWidth:O,borderTopWidth:O,borderRightWidth:O,borderBottomWidth:O,borderLeftWidth:O,borderRadius:O,radius:O,borderTopLeftRadius:O,borderTopRightRadius:O,borderBottomRightRadius:O,borderBottomLeftRadius:O,width:O,maxWidth:O,height:O,maxHeight:O,top:O,right:O,bottom:O,left:O,padding:O,paddingTop:O,paddingRight:O,paddingBottom:O,paddingLeft:O,margin:O,marginTop:O,marginRight:O,marginBottom:O,marginLeft:O,backgroundPositionX:O,backgroundPositionY:O},Kd={rotate:ze,rotateX:ze,rotateY:ze,rotateZ:ze,scale:fs,scaleX:fs,scaleY:fs,scaleZ:fs,skew:ze,skewX:ze,skewY:ze,distance:O,translateX:O,translateY:O,translateZ:O,x:O,y:O,z:O,perspective:O,transformPerspective:O,opacity:Wt,originX:Zr,originY:Zr,originZ:O},ei={...At,transform:Math.round},ar={...Wd,...Kd,zIndex:ei,size:O,fillOpacity:Wt,strokeOpacity:Wt,numOctaves:ei},Jd={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Qd=Ct.length;function Xd(s,e,t){let n="",r=!0;for(let i=0;i<Qd;i++){const o=Ct[i],a=s[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const u=ua(a,ar[o]);if(!l){r=!1;const d=Jd[o]||o;n+=`${d}(${u}) `}t&&(e[o]=u)}}return n=n.trim(),t?n=t(e,r?"":n):r&&(n="none"),n}function lr(s,e,t){const{style:n,vars:r,transformOrigin:i}=s;let o=!1,a=!1;for(const l in e){const u=e[l];if(ct.has(l)){o=!0;continue}else if(ca(l)){r[l]=u;continue}else{const d=ua(u,ar[l]);l.startsWith("origin")?(a=!0,i[l]=d):n[l]=d}}if(e.transform||(o||t?n.transform=Xd(e,s.transform,t):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;n.transformOrigin=`${l} ${u} ${d}`}}const Yd={offset:"stroke-dashoffset",array:"stroke-dasharray"},Zd={offset:"strokeDashoffset",array:"strokeDasharray"};function eh(s,e,t=1,n=0,r=!0){s.pathLength=1;const i=r?Yd:Zd;s[i.offset]=O.transform(-n);const o=O.transform(e),a=O.transform(t);s[i.array]=`${o} ${a}`}function ti(s,e,t){return typeof s=="string"?s:O.transform(e+t*s)}function th(s,e,t){const n=ti(e,s.x,s.width),r=ti(t,s.y,s.height);return`${n} ${r}`}function cr(s,{attrX:e,attrY:t,attrScale:n,originX:r,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,h){if(lr(s,u,h),d){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:m,dimensions:v}=s;f.transform&&(v&&(m.transform=f.transform),delete f.transform),v&&(r!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=th(v,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),n!==void 0&&(f.scale=n),o!==void 0&&eh(f,o,a,l,!1)}const ur=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),da=()=>({...ur(),attrs:{}}),dr=s=>typeof s=="string"&&s.toLowerCase()==="svg";function ha(s,{style:e,vars:t},n,r){Object.assign(s.style,e,r&&r.getProjectionStyles(n));for(const i in t)s.style.setProperty(i,t[i])}const fa=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ma(s,e,t,n){ha(s,e,void 0,n);for(const r in e.attrs)s.setAttribute(fa.has(r)?r:sr(r),e.attrs[r])}const bs={};function sh(s){Object.assign(bs,s)}function pa(s,{layout:e,layoutId:t}){return ct.has(s)||s.startsWith("origin")||(e||t!==void 0)&&(!!bs[s]||s==="opacity")}function hr(s,e,t){var n;const{style:r}=s,i={};for(const o in r)(pe(r[o])||e.style&&pe(e.style[o])||pa(o,s)||((n=t==null?void 0:t.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=r[o]);return i}function ga(s,e,t){const n=hr(s,e,t);for(const r in s)if(pe(s[r])||pe(e[r])){const i=Ct.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=s[r]}return n}function nh(s,e){try{e.dimensions=typeof s.getBBox=="function"?s.getBBox():s.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const si=["x","y","width","height","cx","cy","r"],rh={useVisualState:aa({scrapeMotionValuesFromProps:ga,createRenderState:da,onUpdate:({props:s,prevProps:e,current:t,renderState:n,latestValues:r})=>{if(!t)return;let i=!!s.drag;if(!i){for(const a in r)if(ct.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<si.length;a++){const l=si[a];s[l]!==e[l]&&(o=!0)}o&&Z.read(()=>{nh(t,n),Z.render(()=>{cr(n,r,dr(t.tagName),s.transformTemplate),ma(t,n)})})}})},ih={useVisualState:aa({scrapeMotionValuesFromProps:hr,createRenderState:ur})};function ya(s,e,t){for(const n in e)!pe(e[n])&&!pa(n,t)&&(s[n]=e[n])}function oh({transformTemplate:s},e){return w.useMemo(()=>{const t=ur();return lr(t,e,s),Object.assign({},t.vars,t.style)},[e])}function ah(s,e){const t=s.style||{},n={};return ya(n,t,s),Object.assign(n,oh(s,e)),n}function lh(s,e){const t={},n=ah(s,e);return s.drag&&s.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(t.tabIndex=0),t.style=n,t}function ch(s,e,t,n){const r=w.useMemo(()=>{const i=da();return cr(i,e,dr(n),s.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(s.style){const i={};ya(i,s.style,s),r.style={...i,...r.style}}return r}function uh(s=!1){return(t,n,r,{latestValues:i},o)=>{const l=(rr(t)?ch:lh)(n,i,o,t),u=Sd(n,typeof t=="string",s),d=t!==w.Fragment?{...u,...l,ref:r}:{},{children:h}=n,f=w.useMemo(()=>pe(h)?h.get():h,[h]);return w.createElement(t,{...d,children:f})}}function dh(s,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...rr(n)?rh:ih,preloadedFeatures:s,useRender:uh(r),createVisualElement:e,Component:n};return Id(o)}}function va(s,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==s.length)return!1;for(let n=0;n<t;n++)if(e[n]!==s[n])return!1;return!0}function Bs(s,e,t){const n=s.getProps();return ir(n,e,t!==void 0?t:n.custom,s)}const hh=Zn(()=>window.ScrollTimeline!==void 0);class fh{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map(r=>{if(hh()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class mh extends fh{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function fr(s,e){return s?s[e]||s.default||s:void 0}const kn=2e4;function xa(s){let e=0;const t=50;let n=s.next(e);for(;!n.done&&e<kn;)e+=t,n=s.next(e);return e>=kn?1/0:e}function mr(s){return typeof s=="function"}function ni(s,e){s.timeline=e,s.onfinish=null}const pr=s=>Array.isArray(s)&&typeof s[0]=="number",ph={linearEasing:void 0};function gh(s,e){const t=Zn(s);return()=>{var n;return(n=ph[e])!==null&&n!==void 0?n:t()}}const _s=gh(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wa=(s,e,t=10)=>{let n="";const r=Math.max(Math.round(e/t),2);for(let i=0;i<r;i++)n+=s(_t(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function ba(s){return!!(typeof s=="function"&&_s()||!s||typeof s=="string"&&(s in Pn||_s())||pr(s)||Array.isArray(s)&&s.every(ba))}const Dt=([s,e,t,n])=>`cubic-bezier(${s}, ${e}, ${t}, ${n})`,Pn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dt([0,.65,.55,1]),circOut:Dt([.55,0,1,.45]),backIn:Dt([.31,.01,.66,-.59]),backOut:Dt([.33,1.53,.69,.99])};function _a(s,e){if(s)return typeof s=="function"&&_s()?wa(s,e):pr(s)?Dt(s):Array.isArray(s)?s.map(t=>_a(t,e)||Pn.easeOut):Pn[s]}const Ae={x:!1,y:!1};function ja(){return Ae.x||Ae.y}function yh(s,e,t){var n;if(s instanceof Element)return[s];if(typeof s=="string"){let r=document;const i=(n=void 0)!==null&&n!==void 0?n:r.querySelectorAll(s);return i?Array.from(i):[]}return Array.from(s)}function Ta(s,e){const t=yh(s),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[t,r,()=>n.abort()]}function ri(s){return e=>{e.pointerType==="touch"||ja()||s(e)}}function vh(s,e,t={}){const[n,r,i]=Ta(s,t),o=ri(a=>{const{target:l}=a,u=e(a);if(typeof u!="function"||!l)return;const d=ri(h=>{u(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,r)});return n.forEach(a=>{a.addEventListener("pointerenter",o,r)}),i}const Sa=(s,e)=>e?s===e?!0:Sa(s,e.parentElement):!1,gr=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,xh=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wh(s){return xh.has(s.tagName)||s.tabIndex!==-1}const Lt=new WeakSet;function ii(s){return e=>{e.key==="Enter"&&s(e)}}function Zs(s,e){s.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const bh=(s,e)=>{const t=s.currentTarget;if(!t)return;const n=ii(()=>{if(Lt.has(t))return;Zs(t,"down");const r=ii(()=>{Zs(t,"up")}),i=()=>Zs(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",i,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function oi(s){return gr(s)&&!ja()}function _h(s,e,t={}){const[n,r,i]=Ta(s,t),o=a=>{const l=a.currentTarget;if(!oi(a)||Lt.has(l))return;Lt.add(l);const u=e(a),d=(m,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!oi(m)||!Lt.has(l))&&(Lt.delete(l),typeof u=="function"&&u(m,{success:v}))},h=m=>{d(m,t.useGlobalTarget||Sa(l,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",f,r)};return n.forEach(a=>{!wh(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",u=>bh(u,r),r)}),i}function jh(s){return s==="x"||s==="y"?Ae[s]?null:(Ae[s]=!0,()=>{Ae[s]=!1}):Ae.x||Ae.y?null:(Ae.x=Ae.y=!0,()=>{Ae.x=Ae.y=!1})}const ka=new Set(["width","height","top","left","right","bottom",...Ct]);let gs;function Th(){gs=void 0}const Me={now:()=>(gs===void 0&&Me.set(he.isProcessing||xd.useManualTiming?he.timestamp:performance.now()),gs),set:s=>{gs=s,queueMicrotask(Th)}};function yr(s,e){s.indexOf(e)===-1&&s.push(e)}function vr(s,e){const t=s.indexOf(e);t>-1&&s.splice(t,1)}class xr{constructor(){this.subscriptions=[]}add(e){return yr(this.subscriptions,e),()=>vr(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Pa(s,e){return e?s*(1e3/e):0}const ai=30,Sh=s=>!isNaN(parseFloat(s));class kh{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{const i=Me.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Me.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Sh(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new xr);const n=this.events[e].add(t);return e==="change"?()=>{n(),Z.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Me.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ai)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,ai);return Pa(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kt(s,e){return new kh(s,e)}function Ph(s,e,t){s.hasValue(e)?s.getValue(e).set(t):s.addValue(e,Kt(t))}function Ch(s,e){const t=Bs(s,e);let{transitionEnd:n={},transition:r={},...i}=t||{};i={...i,...n};for(const o in i){const a=Fd(i[o]);Ph(s,o,a)}}function Ah(s){return!!(pe(s)&&s.add)}function Cn(s,e){const t=s.getValue("willChange");if(Ah(t))return t.add(e)}function Ca(s){return s.props[ra]}const Aa=(s,e,t)=>(((1-3*t+3*e)*s+(3*t-6*e))*s+3*e)*s,Eh=1e-7,Nh=12;function Rh(s,e,t,n,r){let i,o,a=0;do o=e+(t-e)/2,i=Aa(o,n,r)-s,i>0?t=o:e=o;while(Math.abs(i)>Eh&&++a<Nh);return o}function ts(s,e,t,n){if(s===e&&t===n)return _e;const r=i=>Rh(i,0,1,s,t);return i=>i===0||i===1?i:Aa(r(i),e,n)}const Ea=s=>e=>e<=.5?s(2*e)/2:(2-s(2*(1-e)))/2,Na=s=>e=>1-s(1-e),Ra=ts(.33,1.53,.69,.99),wr=Na(Ra),Ma=Ea(wr),Ia=s=>(s*=2)<1?.5*wr(s):.5*(2-Math.pow(2,-10*(s-1))),br=s=>1-Math.sin(Math.acos(s)),Oa=Na(br),Da=Ea(br),La=s=>/^0[^.\s]+$/u.test(s);function Mh(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||La(s):!0}const Bt=s=>Math.round(s*1e5)/1e5,_r=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ih(s){return s==null}const Oh=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jr=(s,e)=>t=>!!(typeof t=="string"&&Oh.test(t)&&t.startsWith(s)||e&&!Ih(t)&&Object.prototype.hasOwnProperty.call(t,e)),$a=(s,e,t)=>n=>{if(typeof n!="string")return n;const[r,i,o,a]=n.match(_r);return{[s]:parseFloat(r),[e]:parseFloat(i),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Dh=s=>Ve(0,255,s),en={...At,transform:s=>Math.round(Dh(s))},nt={test:jr("rgb","red"),parse:$a("red","green","blue"),transform:({red:s,green:e,blue:t,alpha:n=1})=>"rgba("+en.transform(s)+", "+en.transform(e)+", "+en.transform(t)+", "+Bt(Wt.transform(n))+")"};function Lh(s){let e="",t="",n="",r="";return s.length>5?(e=s.substring(1,3),t=s.substring(3,5),n=s.substring(5,7),r=s.substring(7,9)):(e=s.substring(1,2),t=s.substring(2,3),n=s.substring(3,4),r=s.substring(4,5),e+=e,t+=t,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const An={test:jr("#"),parse:Lh,transform:nt.transform},pt={test:jr("hsl","hue"),parse:$a("hue","saturation","lightness"),transform:({hue:s,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(s)+", "+Re.transform(Bt(e))+", "+Re.transform(Bt(t))+", "+Bt(Wt.transform(n))+")"},me={test:s=>nt.test(s)||An.test(s)||pt.test(s),parse:s=>nt.test(s)?nt.parse(s):pt.test(s)?pt.parse(s):An.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?nt.transform(s):pt.transform(s)},$h=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Vh(s){var e,t;return isNaN(s)&&typeof s=="string"&&(((e=s.match(_r))===null||e===void 0?void 0:e.length)||0)+(((t=s.match($h))===null||t===void 0?void 0:t.length)||0)>0}const Va="number",Fa="color",Fh="var",Bh="var(",li="${}",Uh=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Jt(s){const e=s.toString(),t=[],n={color:[],number:[],var:[]},r=[];let i=0;const a=e.replace(Uh,l=>(me.test(l)?(n.color.push(i),r.push(Fa),t.push(me.parse(l))):l.startsWith(Bh)?(n.var.push(i),r.push(Fh),t.push(l)):(n.number.push(i),r.push(Va),t.push(parseFloat(l))),++i,li)).split(li);return{values:t,split:a,indexes:n,types:r}}function Ba(s){return Jt(s).values}function Ua(s){const{split:e,types:t}=Jt(s),n=e.length;return r=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],r[o]!==void 0){const a=t[o];a===Va?i+=Bt(r[o]):a===Fa?i+=me.transform(r[o]):i+=r[o]}return i}}const Gh=s=>typeof s=="number"?0:s;function qh(s){const e=Ba(s);return Ua(s)(e.map(Gh))}const Je={test:Vh,parse:Ba,createTransformer:Ua,getAnimatableNone:qh},zh=new Set(["brightness","contrast","saturate","opacity"]);function Hh(s){const[e,t]=s.slice(0,-1).split("(");if(e==="drop-shadow")return s;const[n]=t.match(_r)||[];if(!n)return s;const r=t.replace(n,"");let i=zh.has(e)?1:0;return n!==t&&(i*=100),e+"("+i+r+")"}const Wh=/\b([a-z-]*)\(.*?\)/gu,En={...Je,getAnimatableNone:s=>{const e=s.match(Wh);return e?e.map(Hh).join(" "):s}},Kh={...ar,color:me,backgroundColor:me,outlineColor:me,fill:me,stroke:me,borderColor:me,borderTopColor:me,borderRightColor:me,borderBottomColor:me,borderLeftColor:me,filter:En,WebkitFilter:En},Tr=s=>Kh[s];function Ga(s,e){let t=Tr(s);return t!==En&&(t=Je),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Jh=new Set(["auto","none","0"]);function Qh(s,e,t){let n=0,r;for(;n<s.length&&!r;){const i=s[n];typeof i=="string"&&!Jh.has(i)&&Jt(i).values.length&&(r=s[n]),n++}if(r&&t)for(const i of e)s[i]=Ga(t,r)}const ci=s=>s===At||s===O,ui=(s,e)=>parseFloat(s.split(", ")[e]),di=(s,e)=>(t,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/u);if(r)return ui(r[1],e);{const i=n.match(/^matrix\((.+)\)$/u);return i?ui(i[1],s):0}},Xh=new Set(["x","y","z"]),Yh=Ct.filter(s=>!Xh.has(s));function Zh(s){const e=[];return Yh.forEach(t=>{const n=s.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const Tt={width:({x:s},{paddingLeft:e="0",paddingRight:t="0"})=>s.max-s.min-parseFloat(e)-parseFloat(t),height:({y:s},{paddingTop:e="0",paddingBottom:t="0"})=>s.max-s.min-parseFloat(e)-parseFloat(t),top:(s,{top:e})=>parseFloat(e),left:(s,{left:e})=>parseFloat(e),bottom:({y:s},{top:e})=>parseFloat(e)+(s.max-s.min),right:({x:s},{left:e})=>parseFloat(e)+(s.max-s.min),x:di(4,13),y:di(5,14)};Tt.translateX=Tt.x;Tt.translateY=Tt.y;const rt=new Set;let Nn=!1,Rn=!1;function qa(){if(Rn){const s=Array.from(rt).filter(n=>n.needsMeasurement),e=new Set(s.map(n=>n.element)),t=new Map;e.forEach(n=>{const r=Zh(n);r.length&&(t.set(n,r),n.render())}),s.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=t.get(n);r&&r.forEach(([i,o])=>{var a;(a=n.getValue(i))===null||a===void 0||a.set(o)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Rn=!1,Nn=!1,rt.forEach(s=>s.complete()),rt.clear()}function za(){rt.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Rn=!0)})}function ef(){za(),qa()}class Sr{constructor(e,t,n,r,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(rt.add(this),Nn||(Nn=!0,Z.read(za),Z.resolveKeyframes(qa))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&t){const l=n.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),rt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,rt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ha=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s),tf=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sf(s){const e=tf.exec(s);if(!e)return[,];const[,t,n,r]=e;return[`--${t??n}`,r]}function Wa(s,e,t=1){const[n,r]=sf(s);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return Ha(o)?parseFloat(o):o}return or(r)?Wa(r,e,t+1):r}const Ka=s=>e=>e.test(s),nf={test:s=>s==="auto",parse:s=>s},Ja=[At,O,Re,ze,Hd,zd,nf],hi=s=>Ja.find(Ka(s));class Qa extends Sr{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),or(u))){const d=Wa(u,t.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!ka.has(n)||e.length!==2)return;const[r,i]=e,o=hi(r),a=hi(i);if(o!==a)if(ci(o)&&ci(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)Mh(e[r])&&n.push(r);n.length&&Qh(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tt[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Tt[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const fi=(s,e)=>e==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Je.test(s)||s==="0")&&!s.startsWith("url("));function rf(s){const e=s[0];if(s.length===1)return!0;for(let t=0;t<s.length;t++)if(s[t]!==e)return!0}function of(s,e,t,n){const r=s[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=s[s.length-1],o=fi(r,e),a=fi(i,e);return!o||!a?!1:rf(s)||(t==="spring"||mr(t))&&n}const af=s=>s!==null;function Us(s,{repeat:e,repeatType:t="loop"},n){const r=s.filter(af),i=e&&t!=="loop"&&e%2===1?0:r.length-1;return!i||n===void 0?r[i]:n}const lf=40;class Xa{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Me.now(),this.options={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>lf?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ef(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Me.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!of(e,n,r,i))if(o)this.options.duration=0;else{l&&l(Us(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,t);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...d},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const se=(s,e,t)=>s+(e-s)*t;function tn(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*(2/3-t)*6:s}function cf({hue:s,saturation:e,lightness:t,alpha:n}){s/=360,e/=100,t/=100;let r=0,i=0,o=0;if(!e)r=i=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=tn(l,a,s+1/3),i=tn(l,a,s),o=tn(l,a,s-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function js(s,e){return t=>t>0?e:s}const sn=(s,e,t)=>{const n=s*s,r=t*(e*e-n)+n;return r<0?0:Math.sqrt(r)},uf=[An,nt,pt],df=s=>uf.find(e=>e.test(s));function mi(s){const e=df(s);if(!e)return!1;let t=e.parse(s);return e===pt&&(t=cf(t)),t}const pi=(s,e)=>{const t=mi(s),n=mi(e);if(!t||!n)return js(s,e);const r={...t};return i=>(r.red=sn(t.red,n.red,i),r.green=sn(t.green,n.green,i),r.blue=sn(t.blue,n.blue,i),r.alpha=se(t.alpha,n.alpha,i),nt.transform(r))},hf=(s,e)=>t=>e(s(t)),ss=(...s)=>s.reduce(hf),Mn=new Set(["none","hidden"]);function ff(s,e){return Mn.has(s)?t=>t<=0?s:e:t=>t>=1?e:s}function mf(s,e){return t=>se(s,e,t)}function kr(s){return typeof s=="number"?mf:typeof s=="string"?or(s)?js:me.test(s)?pi:yf:Array.isArray(s)?Ya:typeof s=="object"?me.test(s)?pi:pf:js}function Ya(s,e){const t=[...s],n=t.length,r=s.map((i,o)=>kr(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)t[o]=r[o](i);return t}}function pf(s,e){const t={...s,...e},n={};for(const r in t)s[r]!==void 0&&e[r]!==void 0&&(n[r]=kr(s[r])(s[r],e[r]));return r=>{for(const i in n)t[i]=n[i](r);return t}}function gf(s,e){var t;const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=s.indexes[o][r[o]],l=(t=s.values[a])!==null&&t!==void 0?t:0;n[i]=l,r[o]++}return n}const yf=(s,e)=>{const t=Je.createTransformer(e),n=Jt(s),r=Jt(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?Mn.has(s)&&!r.values.length||Mn.has(e)&&!n.values.length?ff(s,e):ss(Ya(gf(n,r),r.values),t):js(s,e)};function Za(s,e,t){return typeof s=="number"&&typeof e=="number"&&typeof t=="number"?se(s,e,t):kr(s)(s,e)}const vf=5;function el(s,e,t){const n=Math.max(e-vf,0);return Pa(t-s(n),e-n)}const re={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nn=.001;function xf({duration:s=re.duration,bounce:e=re.bounce,velocity:t=re.velocity,mass:n=re.mass}){let r,i,o=1-e;o=Ve(re.minDamping,re.maxDamping,o),s=Ve(re.minDuration,re.maxDuration,$e(s)),o<1?(r=u=>{const d=u*o,h=d*s,f=d-t,m=In(u,o),v=Math.exp(-h);return nn-f/m*v},i=u=>{const h=u*o*s,f=h*t+t,m=Math.pow(o,2)*Math.pow(u,2)*s,v=Math.exp(-h),y=In(Math.pow(u,2),o);return(-r(u)+nn>0?-1:1)*((f-m)*v)/y}):(r=u=>{const d=Math.exp(-u*s),h=(u-t)*s+1;return-nn+d*h},i=u=>{const d=Math.exp(-u*s),h=(t-u)*(s*s);return d*h});const a=5/s,l=bf(r,i,a);if(s=Le(s),isNaN(l))return{stiffness:re.stiffness,damping:re.damping,duration:s};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:s}}}const wf=12;function bf(s,e,t){let n=t;for(let r=1;r<wf;r++)n=n-s(n)/e(n);return n}function In(s,e){return s*Math.sqrt(1-e*e)}const _f=["duration","bounce"],jf=["stiffness","damping","mass"];function gi(s,e){return e.some(t=>s[t]!==void 0)}function Tf(s){let e={velocity:re.velocity,stiffness:re.stiffness,damping:re.damping,mass:re.mass,isResolvedFromDuration:!1,...s};if(!gi(s,jf)&&gi(s,_f))if(s.visualDuration){const t=s.visualDuration,n=2*Math.PI/(t*1.2),r=n*n,i=2*Ve(.05,1,1-(s.bounce||0))*Math.sqrt(r);e={...e,mass:re.mass,stiffness:r,damping:i}}else{const t=xf(s);e={...e,...t,mass:re.mass},e.isResolvedFromDuration=!0}return e}function tl(s=re.visualDuration,e=re.bounce){const t=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:e}:s;let{restSpeed:n,restDelta:r}=t;const i=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=Tf({...t,velocity:-$e(t.velocity||0)}),v=f||0,y=u/(2*Math.sqrt(l*d)),g=o-i,b=$e(Math.sqrt(l/d)),j=Math.abs(g)<5;n||(n=j?re.restSpeed.granular:re.restSpeed.default),r||(r=j?re.restDelta.granular:re.restDelta.default);let T;if(y<1){const _=In(b,y);T=R=>{const $=Math.exp(-y*b*R);return o-$*((v+y*b*g)/_*Math.sin(_*R)+g*Math.cos(_*R))}}else if(y===1)T=_=>o-Math.exp(-b*_)*(g+(v+b*g)*_);else{const _=b*Math.sqrt(y*y-1);T=R=>{const $=Math.exp(-y*b*R),C=Math.min(_*R,300);return o-$*((v+y*b*g)*Math.sinh(C)+_*g*Math.cosh(C))/_}}const k={calculatedDuration:m&&h||null,next:_=>{const R=T(_);if(m)a.done=_>=h;else{let $=0;y<1&&($=_===0?Le(v):el(T,_,R));const C=Math.abs($)<=n,B=Math.abs(o-R)<=r;a.done=C&&B}return a.value=a.done?o:R,a},toString:()=>{const _=Math.min(xa(k),kn),R=wa($=>k.next(_*$).value,_,30);return _+"ms "+R}};return k}function yi({keyframes:s,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=s[0],f={done:!1,value:h},m=C=>a!==void 0&&C<a||l!==void 0&&C>l,v=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let y=t*e;const g=h+y,b=o===void 0?g:o(g);b!==g&&(y=b-h);const j=C=>-y*Math.exp(-C/n),T=C=>b+j(C),k=C=>{const B=j(C),ee=T(C);f.done=Math.abs(B)<=u,f.value=f.done?b:ee};let _,R;const $=C=>{m(f.value)&&(_=C,R=tl({keyframes:[f.value,v(f.value)],velocity:el(T,C,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return $(0),{calculatedDuration:null,next:C=>{let B=!1;return!R&&_===void 0&&(B=!0,k(C),$(C)),_!==void 0&&C>=_?R.next(C-_):(!B&&k(C),f)}}}const Sf=ts(.42,0,1,1),kf=ts(0,0,.58,1),sl=ts(.42,0,.58,1),Pf=s=>Array.isArray(s)&&typeof s[0]!="number",vi={linear:_e,easeIn:Sf,easeInOut:sl,easeOut:kf,circIn:br,circInOut:Da,circOut:Oa,backIn:wr,backInOut:Ma,backOut:Ra,anticipate:Ia},xi=s=>{if(pr(s)){Tn(s.length===4);const[e,t,n,r]=s;return ts(e,t,n,r)}else if(typeof s=="string")return Tn(vi[s]!==void 0),vi[s];return s};function Cf(s,e,t){const n=[],r=t||Za,i=s.length-1;for(let o=0;o<i;o++){let a=r(s[o],s[o+1]);if(e){const l=Array.isArray(e)?e[o]||_e:e;a=ss(l,a)}n.push(a)}return n}function Af(s,e,{clamp:t=!0,ease:n,mixer:r}={}){const i=s.length;if(Tn(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=s[0]===s[1];s[0]>s[i-1]&&(s=[...s].reverse(),e=[...e].reverse());const a=Cf(e,n,r),l=a.length,u=d=>{if(o&&d<s[0])return e[0];let h=0;if(l>1)for(;h<s.length-2&&!(d<s[h+1]);h++);const f=_t(s[h],s[h+1],d);return a[h](f)};return t?d=>u(Ve(s[0],s[i-1],d)):u}function Ef(s,e){const t=s[s.length-1];for(let n=1;n<=e;n++){const r=_t(0,e,n);s.push(se(t,1,r))}}function Nf(s){const e=[0];return Ef(e,s.length-1),e}function Rf(s,e){return s.map(t=>t*e)}function Mf(s,e){return s.map(()=>e||sl).splice(0,s.length-1)}function Ts({duration:s=300,keyframes:e,times:t,ease:n="easeInOut"}){const r=Pf(n)?n.map(xi):xi(n),i={done:!1,value:e[0]},o=Rf(t&&t.length===e.length?t:Nf(e),s),a=Af(o,e,{ease:Array.isArray(r)?r:Mf(e,r)});return{calculatedDuration:s,next:l=>(i.value=a(l),i.done=l>=s,i)}}const If=s=>{const e=({timestamp:t})=>s(t);return{start:()=>Z.update(e,!0),stop:()=>Ke(e),now:()=>he.isProcessing?he.timestamp:Me.now()}},Of={decay:yi,inertia:yi,tween:Ts,keyframes:Ts,spring:tl},Df=s=>s/100;class Pr extends Xa{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:n,element:r,keyframes:i}=this.options,o=(r==null?void 0:r.KeyframeResolver)||Sr,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(i,a,t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=this.options,a=mr(t)?t:Of[t]||Ts;let l,u;a!==Ts&&typeof e[0]!="number"&&(l=ss(Df,Za(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});i==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=xa(d));const{calculatedDuration:h}=d,f=h+r,m=f*(n+1)-r;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=n;if(this.startTime===null)return i.next(0);const{delay:f,repeat:m,repeatType:v,repeatDelay:y,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-f*(this.speed>=0?1:-1),j=this.speed>=0?b<0:b>d;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let T=this.currentTime,k=i;if(m){const C=Math.min(this.currentTime,d)/h;let B=Math.floor(C),ee=C%1;!ee&&C>=1&&(ee=1),ee===1&&B--,B=Math.min(B,m+1),!!(B%2)&&(v==="reverse"?(ee=1-ee,y&&(ee-=y/h)):v==="mirror"&&(k=o)),T=Ve(0,1,ee)*h}const _=j?{done:!1,value:l[0]}:k.next(T);a&&(_.value=a(_.value));let{done:R}=_;!j&&u!==null&&(R=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return $&&r!==void 0&&(_.value=Us(l,this.options,r)),g&&g(_.value),$&&this.finish(),_}get duration(){const{resolved:e}=this;return e?$e(e.calculatedDuration):0}get time(){return $e(this.currentTime)}set time(e){e=Le(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=$e(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=If,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Lf=new Set(["opacity","clipPath","filter","transform"]);function $f(s,e,t,{delay:n=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const d=_a(a,r);return Array.isArray(d)&&(u.easing=d),s.animate(u,{delay:n,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const Vf=Zn(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ss=10,Ff=2e4;function Bf(s){return mr(s.type)||s.type==="spring"||!ba(s.ease)}function Uf(s,e){const t=new Pr({...e,keyframes:s,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:s[0]};const r=[];let i=0;for(;!n.done&&i<Ff;)n=t.sample(i),r.push(n.value),i+=Ss;return{times:void 0,keyframes:r,duration:i-Ss,ease:"linear"}}const nl={anticipate:Ia,backInOut:Ma,circInOut:Da};function Gf(s){return s in nl}class wi extends Xa{constructor(e){super(e);const{name:t,motionValue:n,element:r,keyframes:i}=this.options;this.resolver=new Qa(i,(o,a)=>this.onKeyframesResolved(o,a),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:r,ease:i,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&_s()&&Gf(i)&&(i=nl[i]),Bf(this.options)){const{onComplete:h,onUpdate:f,motionValue:m,element:v,...y}=this.options,g=Uf(e,y);e=g.keyframes,e.length===1&&(e[1]=e[0]),n=g.duration,r=g.times,i=g.ease,o="keyframes"}const d=$f(a.owner.current,l,e,{...this.options,duration:n,times:r,ease:i});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(ni(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(Us(e,this.options,t)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:r,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return $e(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return $e(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=Le(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return _e;const{animation:n}=t;ni(n,e)}return _e}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:r,type:i,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:f,...m}=this.options,v=new Pr({...m,keyframes:n,duration:r,type:i,ease:o,times:a,isGenerator:!0}),y=Le(this.time);u.setWithVelocity(v.sample(y-Ss).value,v.sample(y).value,Ss)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return Vf()&&n&&Lf.has(n)&&!l&&!u&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}}const qf={type:"spring",stiffness:500,damping:25,restSpeed:10},zf=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),Hf={type:"keyframes",duration:.8},Wf={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Kf=(s,{keyframes:e})=>e.length>2?Hf:ct.has(s)?s.startsWith("scale")?zf(e[1]):qf:Wf;function Jf({when:s,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const Cr=(s,e,t,n={},r,i)=>o=>{const a=fr(n,s)||{},l=a.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Le(l);let d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:s,motionValue:e,element:i?void 0:r};Jf(a)||(d={...d,...Kf(s,d)}),d.duration&&(d.duration=Le(d.duration)),d.repeatDelay&&(d.repeatDelay=Le(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!i&&e.get()!==void 0){const f=Us(d.keyframes,a);if(f!==void 0)return Z.update(()=>{d.onUpdate(f),d.onComplete()}),new mh([])}return!i&&wi.supports(d)?new wi(d):new Pr(d)};function Qf({protectedKeys:s,needsAnimating:e},t){const n=s.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function rl(s,e,{delay:t=0,transitionOverride:n,type:r}={}){var i;let{transition:o=s.getDefaultTransition(),transitionEnd:a,...l}=e;n&&(o=n);const u=[],d=r&&s.animationState&&s.animationState.getState()[r];for(const h in l){const f=s.getValue(h,(i=s.latestValues[h])!==null&&i!==void 0?i:null),m=l[h];if(m===void 0||d&&Qf(d,h))continue;const v={delay:t,...fr(o||{},h)};let y=!1;if(window.MotionHandoffAnimation){const b=Ca(s);if(b){const j=window.MotionHandoffAnimation(b,h,Z);j!==null&&(v.startTime=j,y=!0)}}Cn(s,h),f.start(Cr(h,f,m,s.shouldReduceMotion&&ka.has(h)?{type:!1}:v,s,y));const g=f.animation;g&&u.push(g)}return a&&Promise.all(u).then(()=>{Z.update(()=>{a&&Ch(s,a)})}),u}function On(s,e,t={}){var n;const r=Bs(s,e,t.type==="exit"?(n=s.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=s.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(rl(s,r,t)):()=>Promise.resolve(),a=s.variantChildren&&s.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return Xf(s,e,d+u,h,f,t)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>d())}else return Promise.all([o(),a(t.delay)])}function Xf(s,e,t=0,n=0,r=1,i){const o=[],a=(s.variantChildren.size-1)*n,l=r===1?(u=0)=>u*n:(u=0)=>a-u*n;return Array.from(s.variantChildren).sort(Yf).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(On(u,e,{...i,delay:t+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function Yf(s,e){return s.sortNodePosition(e)}function Zf(s,e,t={}){s.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(i=>On(s,i,t));n=Promise.all(r)}else if(typeof e=="string")n=On(s,e,t);else{const r=typeof e=="function"?Bs(s,e,t.custom):e;n=Promise.all(rl(s,r,t))}return n.then(()=>{s.notify("AnimationComplete",e)})}const em=tr.length;function il(s){if(!s)return;if(!s.isControllingVariants){const t=s.parent?il(s.parent)||{}:{};return s.props.initial!==void 0&&(t.initial=s.props.initial),t}const e={};for(let t=0;t<em;t++){const n=tr[t],r=s.props[n];(Ht(r)||r===!1)&&(e[n]=r)}return e}const tm=[...er].reverse(),sm=er.length;function nm(s){return e=>Promise.all(e.map(({animation:t,options:n})=>Zf(s,t,n)))}function rm(s){let e=nm(s),t=bi(),n=!0;const r=l=>(u,d)=>{var h;const f=Bs(s,d,l==="exit"?(h=s.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:v,...y}=f;u={...u,...y,...v}}return u};function i(l){e=l(s)}function o(l){const{props:u}=s,d=il(s.parent)||{},h=[],f=new Set;let m={},v=1/0;for(let g=0;g<sm;g++){const b=tm[g],j=t[b],T=u[b]!==void 0?u[b]:d[b],k=Ht(T),_=b===l?j.isActive:null;_===!1&&(v=g);let R=T===d[b]&&T!==u[b]&&k;if(R&&n&&s.manuallyAnimateOnMount&&(R=!1),j.protectedKeys={...m},!j.isActive&&_===null||!T&&!j.prevProp||Vs(T)||typeof T=="boolean")continue;const $=im(j.prevProp,T);let C=$||b===l&&j.isActive&&!R&&k||g>v&&k,B=!1;const ee=Array.isArray(T)?T:[T];let Y=ee.reduce(r(b),{});_===!1&&(Y={});const{prevResolvedValues:W={}}=j,le={...W,...Y},oe=K=>{C=!0,f.has(K)&&(B=!0,f.delete(K)),j.needsAnimating[K]=!0;const ue=s.getValue(K);ue&&(ue.liveStyle=!1)};for(const K in le){const ue=Y[K],Be=W[K];if(m.hasOwnProperty(K))continue;let x=!1;Sn(ue)&&Sn(Be)?x=!va(ue,Be):x=ue!==Be,x?ue!=null?oe(K):f.add(K):ue!==void 0&&f.has(K)?oe(K):j.protectedKeys[K]=!0}j.prevProp=T,j.prevResolvedValues=Y,j.isActive&&(m={...m,...Y}),n&&s.blockInitialAnimation&&(C=!1),C&&(!(R&&$)||B)&&h.push(...ee.map(K=>({animation:K,options:{type:b}})))}if(f.size){const g={};f.forEach(b=>{const j=s.getBaseTarget(b),T=s.getValue(b);T&&(T.liveStyle=!0),g[b]=j??null}),h.push({animation:g})}let y=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!s.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(h):Promise.resolve()}function a(l,u){var d;if(t[l].isActive===u)return Promise.resolve();(d=s.variantChildren)===null||d===void 0||d.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),t[l].isActive=u;const h=o(l);for(const f in t)t[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>t,reset:()=>{t=bi(),n=!0}}}function im(s,e){return typeof e=="string"?e!==s:Array.isArray(e)?!va(e,s):!1}function Ye(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bi(){return{animate:Ye(!0),whileInView:Ye(),whileHover:Ye(),whileTap:Ye(),whileDrag:Ye(),whileFocus:Ye(),exit:Ye()}}class Qe{constructor(e){this.isMounted=!1,this.node=e}update(){}}class om extends Qe{constructor(e){super(e),e.animationState||(e.animationState=rm(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vs(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let am=0;class lm extends Qe{constructor(){super(...arguments),this.id=am++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const cm={animation:{Feature:om},exit:{Feature:lm}};function Qt(s,e,t,n={passive:!0}){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t)}function ns(s){return{point:{x:s.pageX,y:s.pageY}}}const um=s=>e=>gr(e)&&s(e,ns(e));function Ut(s,e,t,n){return Qt(s,e,um(t),n)}const _i=(s,e)=>Math.abs(s-e);function dm(s,e){const t=_i(s.x,e.x),n=_i(s.y,e.y);return Math.sqrt(t**2+n**2)}class ol{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=on(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=dm(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:v}=h,{timestamp:y}=he;this.history.push({...v,timestamp:y});const{onStart:g,onMove:b}=this.handlers;f||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=rn(f,this.transformPagePoint),Z.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=on(h.type==="pointercancel"?this.lastMoveEventInfo:rn(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,g),v&&v(h,g)},!gr(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const o=ns(e),a=rn(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=he;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=t;d&&d(e,on(a,this.history)),this.removeListeners=ss(Ut(this.contextWindow,"pointermove",this.handlePointerMove),Ut(this.contextWindow,"pointerup",this.handlePointerUp),Ut(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ke(this.updatePoint)}}function rn(s,e){return e?{point:e(s.point)}:s}function ji(s,e){return{x:s.x-e.x,y:s.y-e.y}}function on({point:s},e){return{point:s,delta:ji(s,al(e)),offset:ji(s,hm(e)),velocity:fm(e,.1)}}function hm(s){return s[0]}function al(s){return s[s.length-1]}function fm(s,e){if(s.length<2)return{x:0,y:0};let t=s.length-1,n=null;const r=al(s);for(;t>=0&&(n=s[t],!(r.timestamp-n.timestamp>Le(e)));)t--;if(!n)return{x:0,y:0};const i=$e(r.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-n.x)/i,y:(r.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const ll=1e-4,mm=1-ll,pm=1+ll,cl=.01,gm=0-cl,ym=0+cl;function je(s){return s.max-s.min}function vm(s,e,t){return Math.abs(s-e)<=t}function Ti(s,e,t,n=.5){s.origin=n,s.originPoint=se(e.min,e.max,s.origin),s.scale=je(t)/je(e),s.translate=se(t.min,t.max,s.origin)-s.originPoint,(s.scale>=mm&&s.scale<=pm||isNaN(s.scale))&&(s.scale=1),(s.translate>=gm&&s.translate<=ym||isNaN(s.translate))&&(s.translate=0)}function Gt(s,e,t,n){Ti(s.x,e.x,t.x,n?n.originX:void 0),Ti(s.y,e.y,t.y,n?n.originY:void 0)}function Si(s,e,t){s.min=t.min+e.min,s.max=s.min+je(e)}function xm(s,e,t){Si(s.x,e.x,t.x),Si(s.y,e.y,t.y)}function ki(s,e,t){s.min=e.min-t.min,s.max=s.min+je(e)}function qt(s,e,t){ki(s.x,e.x,t.x),ki(s.y,e.y,t.y)}function wm(s,{min:e,max:t},n){return e!==void 0&&s<e?s=n?se(e,s,n.min):Math.max(s,e):t!==void 0&&s>t&&(s=n?se(t,s,n.max):Math.min(s,t)),s}function Pi(s,e,t){return{min:e!==void 0?s.min+e:void 0,max:t!==void 0?s.max+t-(s.max-s.min):void 0}}function bm(s,{top:e,left:t,bottom:n,right:r}){return{x:Pi(s.x,t,r),y:Pi(s.y,e,n)}}function Ci(s,e){let t=e.min-s.min,n=e.max-s.max;return e.max-e.min<s.max-s.min&&([t,n]=[n,t]),{min:t,max:n}}function _m(s,e){return{x:Ci(s.x,e.x),y:Ci(s.y,e.y)}}function jm(s,e){let t=.5;const n=je(s),r=je(e);return r>n?t=_t(e.min,e.max-n,s.min):n>r&&(t=_t(s.min,s.max-r,e.min)),Ve(0,1,t)}function Tm(s,e){const t={};return e.min!==void 0&&(t.min=e.min-s.min),e.max!==void 0&&(t.max=e.max-s.min),t}const Dn=.35;function Sm(s=Dn){return s===!1?s=0:s===!0&&(s=Dn),{x:Ai(s,"left","right"),y:Ai(s,"top","bottom")}}function Ai(s,e,t){return{min:Ei(s,e),max:Ei(s,t)}}function Ei(s,e){return typeof s=="number"?s:s[e]||0}const Ni=()=>({translate:0,scale:1,origin:0,originPoint:0}),gt=()=>({x:Ni(),y:Ni()}),Ri=()=>({min:0,max:0}),ie=()=>({x:Ri(),y:Ri()});function Pe(s){return[s("x"),s("y")]}function ul({top:s,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:s,max:n}}}function km({x:s,y:e}){return{top:e.min,right:s.max,bottom:e.max,left:s.min}}function Pm(s,e){if(!e)return s;const t=e({x:s.left,y:s.top}),n=e({x:s.right,y:s.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function an(s){return s===void 0||s===1}function Ln({scale:s,scaleX:e,scaleY:t}){return!an(s)||!an(e)||!an(t)}function et(s){return Ln(s)||dl(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function dl(s){return Mi(s.x)||Mi(s.y)}function Mi(s){return s&&s!=="0%"}function ks(s,e,t){const n=s-t,r=e*n;return t+r}function Ii(s,e,t,n,r){return r!==void 0&&(s=ks(s,r,n)),ks(s,t,n)+e}function $n(s,e=0,t=1,n,r){s.min=Ii(s.min,e,t,n,r),s.max=Ii(s.max,e,t,n,r)}function hl(s,{x:e,y:t}){$n(s.x,e.translate,e.scale,e.originPoint),$n(s.y,t.translate,t.scale,t.originPoint)}const Oi=.999999999999,Di=1.0000000000001;function Cm(s,e,t,n=!1){const r=t.length;if(!r)return;e.x=e.y=1;let i,o;for(let a=0;a<r;a++){i=t[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&vt(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,hl(s,o)),n&&et(i.latestValues)&&vt(s,i.latestValues))}e.x<Di&&e.x>Oi&&(e.x=1),e.y<Di&&e.y>Oi&&(e.y=1)}function yt(s,e){s.min=s.min+e,s.max=s.max+e}function Li(s,e,t,n,r=.5){const i=se(s.min,s.max,r);$n(s,e,t,i,n)}function vt(s,e){Li(s.x,e.x,e.scaleX,e.scale,e.originX),Li(s.y,e.y,e.scaleY,e.scale,e.originY)}function fl(s,e){return ul(Pm(s.getBoundingClientRect(),e))}function Am(s,e,t){const n=fl(s,t),{scroll:r}=e;return r&&(yt(n.x,r.offset.x),yt(n.y,r.offset.y)),n}const ml=({current:s})=>s?s.ownerDocument.defaultView:null,Em=new WeakMap;class Nm{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ie(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ns(d).point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:v}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jh(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pe(g=>{let b=this.getAxisMotionValue(g).get()||0;if(Re.test(b)){const{projection:j}=this.visualElement;if(j&&j.layout){const T=j.layout.layoutBox[g];T&&(b=je(T)*(parseFloat(b)/100))}}this.originPoint[g]=b}),v&&Z.postRender(()=>v(d,h)),Cn(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:v,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:g}=h;if(m&&this.currentDirection===null){this.currentDirection=Rm(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),y&&y(d,h)},a=(d,h)=>this.stop(d,h),l=()=>Pe(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ol(e,{onSessionStart:r,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:ml(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Z.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!ms(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=wm(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&mt(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=bm(r.layoutBox,t):this.constraints=!1,this.elastic=Sm(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pe(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Tm(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!mt(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=Am(n,r.root,this.visualElement.getTransformPagePoint());let o=_m(r.layout.layoutBox,i);if(t){const a=t(km(o));this.hasMutatedConstraints=!!a,a&&(o=ul(a))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Pe(d=>{if(!ms(d,t,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:n?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Cn(this.visualElement,e),n.start(Cr(e,n,0,t,this.visualElement,!1))}stopAnimation(){Pe(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pe(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Pe(t=>{const{drag:n}=this.getProps();if(!ms(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];i.set(e[t]-se(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!mt(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Pe(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=jm({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Pe(o=>{if(!ms(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(se(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;Em.set(this.visualElement,this);const e=this.visualElement.current,t=Ut(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();mt(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Z.read(n);const o=Qt(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Pe(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),t(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=Dn,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ms(s,e,t){return(e===!0||e===s)&&(t===null||t===s)}function Rm(s,e=10){let t=null;return Math.abs(s.y)>e?t="y":Math.abs(s.x)>e&&(t="x"),t}class Mm extends Qe{constructor(e){super(e),this.removeGroupControls=_e,this.removeListeners=_e,this.controls=new Nm(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_e}unmount(){this.removeGroupControls(),this.removeListeners()}}const $i=s=>(e,t)=>{s&&Z.postRender(()=>s(e,t))};class Im extends Qe{constructor(){super(...arguments),this.removePointerDownListener=_e}onPointerDown(e){this.session=new ol(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ml(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:$i(e),onStart:$i(t),onMove:n,onEnd:(i,o)=>{delete this.session,r&&Z.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=Ut(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ys={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Vi(s,e){return e.max===e.min?0:s/(e.max-e.min)*100}const Mt={correct:(s,e)=>{if(!e.target)return s;if(typeof s=="string")if(O.test(s))s=parseFloat(s);else return s;const t=Vi(s,e.target.x),n=Vi(s,e.target.y);return`${t}% ${n}%`}},Om={correct:(s,{treeScale:e,projectionDelta:t})=>{const n=s,r=Je.parse(s);if(r.length>5)return n;const i=Je.createTransformer(s),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=se(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),i(r)}};class Dm extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;sh(Lm),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ys.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Z.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nr.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pl(s){const[e,t]=Yo(),n=w.useContext(Jn);return c.jsx(Dm,{...s,layoutGroup:n,switchLayoutGroup:w.useContext(ia),isPresent:e,safeToRemove:t})}const Lm={borderRadius:{...Mt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mt,borderTopRightRadius:Mt,borderBottomLeftRadius:Mt,borderBottomRightRadius:Mt,boxShadow:Om};function $m(s,e,t){const n=pe(s)?s:Kt(s);return n.start(Cr("",n,e,t)),n.animation}function Vm(s){return s instanceof SVGElement&&s.tagName!=="svg"}const Fm=(s,e)=>s.depth-e.depth;class Bm{constructor(){this.children=[],this.isDirty=!1}add(e){yr(this.children,e),this.isDirty=!0}remove(e){vr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Fm),this.isDirty=!1,this.children.forEach(e)}}function Um(s,e){const t=Me.now(),n=({timestamp:r})=>{const i=r-t;i>=e&&(Ke(n),s(i-e))};return Z.read(n,!0),()=>Ke(n)}const gl=["TopLeft","TopRight","BottomLeft","BottomRight"],Gm=gl.length,Fi=s=>typeof s=="string"?parseFloat(s):s,Bi=s=>typeof s=="number"||O.test(s);function qm(s,e,t,n,r,i){r?(s.opacity=se(0,t.opacity!==void 0?t.opacity:1,zm(n)),s.opacityExit=se(e.opacity!==void 0?e.opacity:1,0,Hm(n))):i&&(s.opacity=se(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let o=0;o<Gm;o++){const a=`border${gl[o]}Radius`;let l=Ui(e,a),u=Ui(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Bi(l)===Bi(u)?(s[a]=Math.max(se(Fi(l),Fi(u),n),0),(Re.test(u)||Re.test(l))&&(s[a]+="%")):s[a]=u}(e.rotate||t.rotate)&&(s.rotate=se(e.rotate||0,t.rotate||0,n))}function Ui(s,e){return s[e]!==void 0?s[e]:s.borderRadius}const zm=yl(0,.5,Oa),Hm=yl(.5,.95,_e);function yl(s,e,t){return n=>n<s?0:n>e?1:t(_t(s,e,n))}function Gi(s,e){s.min=e.min,s.max=e.max}function ke(s,e){Gi(s.x,e.x),Gi(s.y,e.y)}function qi(s,e){s.translate=e.translate,s.scale=e.scale,s.originPoint=e.originPoint,s.origin=e.origin}function zi(s,e,t,n,r){return s-=e,s=ks(s,1/t,n),r!==void 0&&(s=ks(s,1/r,n)),s}function Wm(s,e=0,t=1,n=.5,r,i=s,o=s){if(Re.test(e)&&(e=parseFloat(e),e=se(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=se(i.min,i.max,n);s===i&&(a-=e),s.min=zi(s.min,e,t,a,r),s.max=zi(s.max,e,t,a,r)}function Hi(s,e,[t,n,r],i,o){Wm(s,e[t],e[n],e[r],e.scale,i,o)}const Km=["x","scaleX","originX"],Jm=["y","scaleY","originY"];function Wi(s,e,t,n){Hi(s.x,e,Km,t?t.x:void 0,n?n.x:void 0),Hi(s.y,e,Jm,t?t.y:void 0,n?n.y:void 0)}function Ki(s){return s.translate===0&&s.scale===1}function vl(s){return Ki(s.x)&&Ki(s.y)}function Ji(s,e){return s.min===e.min&&s.max===e.max}function Qm(s,e){return Ji(s.x,e.x)&&Ji(s.y,e.y)}function Qi(s,e){return Math.round(s.min)===Math.round(e.min)&&Math.round(s.max)===Math.round(e.max)}function xl(s,e){return Qi(s.x,e.x)&&Qi(s.y,e.y)}function Xi(s){return je(s.x)/je(s.y)}function Yi(s,e){return s.translate===e.translate&&s.scale===e.scale&&s.originPoint===e.originPoint}class Xm{constructor(){this.members=[]}add(e){yr(this.members,e),e.scheduleRender()}remove(e){if(vr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let n;for(let r=t;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ym(s,e,t){let n="";const r=s.x.translate/e.x,i=s.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||i||o)&&(n=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:v}=t;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),m&&(n+=`skewX(${m}deg) `),v&&(n+=`skewY(${v}deg) `)}const a=s.x.scale*e.x,l=s.y.scale*e.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const tt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$t=typeof window<"u"&&window.MotionDebug!==void 0,ln=["","X","Y","Z"],Zm={visibility:"hidden"},Zi=1e3;let ep=0;function cn(s,e,t,n){const{latestValues:r}=e;r[s]&&(t[s]=r[s],e.setStaticValue(s,0),n&&(n[s]=0))}function wl(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:e}=s.options;if(!e)return;const t=Ca(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:i}=s.options;window.MotionCancelOptimisedAnimation(t,"transform",Z,!(r||i))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&wl(n)}function bl({attachResizeListener:s,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=ep++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$t&&(tt.totalNodes=tt.resolvedTargetDeltas=tt.recalculatedProjection=0),this.nodes.forEach(np),this.nodes.forEach(lp),this.nodes.forEach(cp),this.nodes.forEach(rp),$t&&window.MotionDebug.record(tt)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Bm)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new xr),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Vm(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),s){let h;const f=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Um(f,250),ys.hasAnimatedSinceResize&&(ys.hasAnimatedSinceResize=!1,this.nodes.forEach(to))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||mp,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=d.getProps(),j=!this.targetLayout||!xl(this.targetLayout,v)||m,T=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||f&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,T);const k={...fr(y,"layout"),onPlay:g,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else f||to(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ke(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(up),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eo);return}this.isUpdating||this.nodes.forEach(op),this.isUpdating=!1,this.nodes.forEach(ap),this.nodes.forEach(tp),this.nodes.forEach(sp),this.clearAllSnapshots();const a=Me.now();he.delta=Ve(0,1e3/60,a-he.timestamp),he.timestamp=a,he.isProcessing=!0,Ys.update.process(he),Ys.preRender.process(he),Ys.render.process(he),he.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ip),this.sharedNodes.forEach(dp)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Z.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Z.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ie(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!vl(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||et(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),pp(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ie();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(gp))){const{scroll:d}=this.root;d&&(yt(l.x,d.offset.x),yt(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=ie();if(ke(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&ke(l,o),yt(l.x,h.offset.x),yt(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=ie();ke(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&vt(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),et(d.latestValues)&&vt(l,d.latestValues)}return et(this.latestValues)&&vt(l,this.latestValues),l}removeTransform(o){const a=ie();ke(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!et(u.latestValues))continue;Ln(u.latestValues)&&u.updateSnapshot();const d=ie(),h=u.measurePageBox();ke(d,h),Wi(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return et(this.latestValues)&&Wi(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==he.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=he.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ie(),this.relativeTargetOrigin=ie(),qt(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ke(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ie(),this.targetWithTransforms=ie()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xm(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ke(this.target,this.layout.layoutBox),hl(this.target,this.targetDelta)):ke(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ie(),this.relativeTargetOrigin=ie(),qt(this.relativeTargetOrigin,this.target,m.target),ke(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$t&&tt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ln(this.parent.latestValues)||dl(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===he.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ke(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;Cm(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ie());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qi(this.prevProjectionDelta.x,this.projectionDelta.x),qi(this.prevProjectionDelta.y,this.projectionDelta.y)),Gt(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Yi(this.projectionDelta.x,this.prevProjectionDelta.x)||!Yi(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),$t&&tt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=gt(),this.projectionDelta=gt(),this.projectionDeltaWithTransform=gt()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=gt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ie(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=m!==v,g=this.getStack(),b=!g||g.members.length<=1,j=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some(fp));this.animationProgress=0;let T;this.mixTargetDelta=k=>{const _=k/1e3;so(h.x,o.x,_),so(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qt(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hp(this.relativeTarget,this.relativeTargetOrigin,f,_),T&&Qm(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=ie()),ke(T,this.relativeTarget)),y&&(this.animationValues=d,qm(d,u,this.latestValues,_,j,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ke(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Z.update(()=>{ys.hasAnimatedSinceResize=!0,this.currentAnimation=$m(0,Zi,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Zi),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&_l(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ie();const h=je(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=je(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}ke(a,l),vt(a,d),Gt(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Xm),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&cn("z",o,u,this.animationValues);for(let d=0;d<ln.length;d++)cn(`rotate${ln[d]}`,o,u,this.animationValues),cn(`skew${ln[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Zm;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ps(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=ps(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!et(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Ym(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in bs){if(f[y]===void 0)continue;const{correct:g,applyTo:b}=bs[y],j=u.transform==="none"?f[y]:g(f[y],h);if(b){const T=b.length;for(let k=0;k<T;k++)u[b[k]]=j}else u[y]=j}return this.options.layoutId&&(u.pointerEvents=h===this?ps(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(eo),this.root.sharedNodes.clear()}}}function tp(s){s.updateLayout()}function sp(s){var e;const t=((e=s.resumeFrom)===null||e===void 0?void 0:e.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=s.layout,{animationType:i}=s.options,o=t.source!==s.layout.source;i==="size"?Pe(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=je(f);f.min=n[h].min,f.max=f.min+m}):_l(i,t.layoutBox,n)&&Pe(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=je(n[h]);f.max=f.min+m,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[h].max=s.relativeTarget[h].min+m)});const a=gt();Gt(a,n,t.layoutBox);const l=gt();o?Gt(l,s.applyTransform(r,!0),t.measuredBox):Gt(l,n,t.layoutBox);const u=!vl(a);let d=!1;if(!s.resumeFrom){const h=s.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const v=ie();qt(v,t.layoutBox,f.layoutBox);const y=ie();qt(y,n,m.layoutBox),xl(v,y)||(d=!0),h.options.layoutRoot&&(s.relativeTarget=y,s.relativeTargetOrigin=v,s.relativeParent=h)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function np(s){$t&&tt.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function rp(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function ip(s){s.clearSnapshot()}function eo(s){s.clearMeasurements()}function op(s){s.isLayoutDirty=!1}function ap(s){const{visualElement:e}=s.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),s.resetTransform()}function to(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function lp(s){s.resolveTargetDelta()}function cp(s){s.calcProjection()}function up(s){s.resetSkewAndRotation()}function dp(s){s.removeLeadSnapshot()}function so(s,e,t){s.translate=se(e.translate,0,t),s.scale=se(e.scale,1,t),s.origin=e.origin,s.originPoint=e.originPoint}function no(s,e,t,n){s.min=se(e.min,t.min,n),s.max=se(e.max,t.max,n)}function hp(s,e,t,n){no(s.x,e.x,t.x,n),no(s.y,e.y,t.y,n)}function fp(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const mp={duration:.45,ease:[.4,0,.1,1]},ro=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),io=ro("applewebkit/")&&!ro("chrome/")?Math.round:_e;function oo(s){s.min=io(s.min),s.max=io(s.max)}function pp(s){oo(s.x),oo(s.y)}function _l(s,e,t){return s==="position"||s==="preserve-aspect"&&!vm(Xi(e),Xi(t),.2)}function gp(s){var e;return s!==s.root&&((e=s.scroll)===null||e===void 0?void 0:e.wasRoot)}const yp=bl({attachResizeListener:(s,e)=>Qt(s,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),un={current:void 0},jl=bl({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!un.current){const s=new yp({});s.mount(window),s.setOptions({layoutScroll:!0}),un.current=s}return un.current},resetTransform:(s,e)=>{s.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),vp={pan:{Feature:Im},drag:{Feature:Mm,ProjectionNode:jl,MeasureLayout:pl}};function ao(s,e,t){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,i=n[r];i&&Z.postRender(()=>i(e,ns(e)))}class xp extends Qe{mount(){const{current:e}=this.node;e&&(this.unmount=vh(e,t=>(ao(this.node,t,"Start"),n=>ao(this.node,n,"End"))))}unmount(){}}class wp extends Qe{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ss(Qt(this.node.current,"focus",()=>this.onFocus()),Qt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lo(s,e,t){const{props:n}=s;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),i=n[r];i&&Z.postRender(()=>i(e,ns(e)))}class bp extends Qe{mount(){const{current:e}=this.node;e&&(this.unmount=_h(e,t=>(lo(this.node,t,"Start"),(n,{success:r})=>lo(this.node,n,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vn=new WeakMap,dn=new WeakMap,_p=s=>{const e=Vn.get(s.target);e&&e(s)},jp=s=>{s.forEach(_p)};function Tp({root:s,...e}){const t=s||document;dn.has(t)||dn.set(t,{});const n=dn.get(t),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(jp,{root:s,...e})),n[r]}function Sp(s,e,t){const n=Tp(e);return Vn.set(s,t),n.observe(s),()=>{Vn.delete(s),n.unobserve(s)}}const kp={some:0,all:1};class Pp extends Qe{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:kp[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(l)};return Sp(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Cp(e,t))&&this.startObserver()}unmount(){}}function Cp({viewport:s={}},{viewport:e={}}={}){return t=>s[t]!==e[t]}const Ap={inView:{Feature:Pp},tap:{Feature:bp},focus:{Feature:wp},hover:{Feature:xp}},Ep={layout:{ProjectionNode:jl,MeasureLayout:pl}},Fn={current:null},Tl={current:!1};function Np(){if(Tl.current=!0,!!Yn)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fn.current=s.matches;s.addListener(e),e()}else Fn.current=!1}const Rp=[...Ja,me,Je],Mp=s=>Rp.find(Ka(s)),co=new WeakMap;function Ip(s,e,t){for(const n in e){const r=e[n],i=t[n];if(pe(r))s.addValue(n,r);else if(pe(i))s.addValue(n,Kt(r,{owner:s}));else if(i!==r)if(s.hasValue(n)){const o=s.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=s.getStaticValue(n);s.addValue(n,Kt(o!==void 0?o:r,{owner:s}))}}for(const n in t)e[n]===void 0&&s.removeValue(n);return e}const uo=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Op{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Sr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Me.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Z.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Fs(t),this.isVariantNode=na(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in f){const v=f[m];l[m]!==void 0&&pe(v)&&v.set(l[m],!1)}}mount(e){this.current=e,co.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),Tl.current||Np(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fn.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){co.delete(this.current),this.projection&&this.projection.unmount(),Ke(this.notifyUpdate),Ke(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ct.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Z.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jt){const t=jt[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ie()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<uo.length;n++){const r=uo[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=Ip(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=Kt(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Ha(r)||La(r))?r=parseFloat(r):!Mp(r)&&Je.test(t)&&(r=Ga(e,t)),this.setBaseTarget(e,pe(r)?r.get():r)),pe(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=ir(this.props,n,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!pe(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new xr),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Sl extends Op{constructor(){super(...arguments),this.KeyframeResolver=Qa}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pe(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Dp(s){return window.getComputedStyle(s)}class Lp extends Sl{constructor(){super(...arguments),this.type="html",this.renderInstance=ha}readValueFromInstance(e,t){if(ct.has(t)){const n=Tr(t);return n&&n.default||0}else{const n=Dp(e),r=(ca(t)?n.getPropertyValue(t):n[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return fl(e,t)}build(e,t,n){lr(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return hr(e,t,n)}}class $p extends Sl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ie}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ct.has(t)){const n=Tr(t);return n&&n.default||0}return t=fa.has(t)?t:sr(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return ga(e,t,n)}build(e,t,n){cr(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){ma(e,t,n,r)}mount(e){this.isSVGTag=dr(e.tagName),super.mount(e)}}const Vp=(s,e)=>rr(s)?new $p(e):new Lp(e,{allowProjection:s!==w.Fragment}),Fp=dh({...cm,...Ap,...vp,...Ep},Vp),S=kd(Fp),Bp=({onStart:s})=>{const[e,t]=w.useState(""),[n,r]=w.useState(!1),[i,o]=w.useState(!1),[a,l]=w.useState(0),u=["The first Olympic Games were held in Ancient Greece in 776 BC","A regulation NBA basketball hoop is exactly 10 feet (3.05m) high","The longest tennis match lasted 11 hours and 5 minutes at Wimbledon 2010","Soccer balls were originally made from inflated pig bladders","Michael Phelps has won more Olympic medals (28) than 100 countries","The Yankees have won the World Series 27 times—more than any other team","Golf is the only sport that has been played on the moon","The NHL's Stanley Cup has been used as a cereal bowl by players","The average lifespan of an NFL career is just 3.3 years","The most expensive soccer transfer was €222 million for Neymar in 2017"];w.useEffect(()=>{const f=setInterval(()=>{l(v=>(v+1)%u.length)},6e3),m=setTimeout(()=>{o(!0)},300);return()=>{clearInterval(f),clearTimeout(m)}},[]);const d=()=>{if(e.trim().length===0){r(!0);return}s(e.trim())},h=["⚽","🏀","🎾","🏈","⚾","🏆","🥇","🏅"];return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-[#0c1220] to-[#1a1a2e] flex flex-col items-center justify-center p-4 overflow-hidden relative",children:[h.map((f,m)=>c.jsx(S.div,{className:"absolute text-4xl opacity-5 pointer-events-none",initial:{x:Math.random()*window.innerWidth,y:-100},animate:{y:window.innerHeight+100,rotate:[0,180,360],x:`calc(${Math.random()*100}vw)`},transition:{duration:20+Math.random()*15,repeat:1/0,delay:Math.random()*5,ease:"linear"},children:f},m)),c.jsxs("div",{className:"w-full max-w-md text-center z-10",children:[c.jsx(De,{children:i&&c.jsxs(S.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"mb-12",children:[c.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[c.jsx(S.div,{animate:{rotate:[0,10,0,-10,0]},transition:{duration:5,repeat:1/0},className:"text-5xl",children:"🏆"}),c.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white leading-tight tracking-tight",children:c.jsxs("span",{className:"text-blue-400",children:["Sport",c.jsx("span",{className:"text-white",children:"IQ"})]})}),c.jsx(S.div,{animate:{rotate:[0,-10,0,10,0]},transition:{duration:5,repeat:1/0,delay:.5},className:"text-5xl",children:"🧠"})]}),c.jsx(S.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:c.jsx("p",{className:"text-xl text-gray-300 italic",children:"Test Your Sports Knowledge"})})]})}),c.jsxs(S.div,{className:"bg-gray-800/80 backdrop-blur-md rounded-2xl p-8 shadow-2xl border border-gray-700",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:20,delay:.2},children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Enter the Quiz Arena"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Your Username",value:e,onChange:f=>{t(f.target.value),r(!1)},className:`w-full p-4 pr-12 text-lg rounded-lg bg-gray-700 text-white placeholder-gray-400 
                          border-2 ${n?"border-red-500":"border-gray-600"} 
                          focus:border-blue-500 focus:outline-none transition-colors`}),c.jsx(xs,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),n&&c.jsx(S.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm mt-2 text-left",children:"Please enter a username to continue"})]}),c.jsxs(S.button,{onClick:d,whileHover:{scale:1.03},whileTap:{scale:.97},className:`w-full p-4 text-xl font-bold rounded-lg bg-blue-600
                      hover:bg-blue-700
                      text-white transition-all duration-200 flex items-center justify-center gap-3 shadow-lg`,children:[c.jsx(hd,{size:24,className:"fill-white"}),"TEST YOUR SPORTIQ"]}),c.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"Select game mode on the next screen"})]}),c.jsxs(S.div,{className:"grid grid-cols-3 gap-3 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:[c.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-lg flex flex-col items-center",children:[c.jsx(ot,{size:20,className:"text-yellow-400 mb-1"}),c.jsx("span",{className:"text-sm text-gray-300",children:"Solo Quiz"})]}),c.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-lg flex flex-col items-center",children:[c.jsx(xs,{size:20,className:"text-blue-400 mb-1"}),c.jsx("span",{className:"text-sm text-gray-300",children:"1v1 Duels"})]}),c.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-lg flex flex-col items-center",children:[c.jsx(Wn,{size:20,className:"text-green-400 mb-1"}),c.jsx("span",{className:"text-sm text-gray-300",children:"Leaderboard"})]})]}),c.jsx(S.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-gray-300 text-sm mb-3 font-medium",children:"Quiz Categories:"}),c.jsxs(S.div,{className:"grid grid-cols-3 sm:grid-cols-5 gap-1 sm:gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:[c.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[c.jsx("span",{className:"text-xl sm:text-2xl",children:"⚽"}),c.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Football"})]}),c.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[c.jsx("span",{className:"text-xl sm:text-2xl",children:"🏀"}),c.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Basketball"})]}),c.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[c.jsx("span",{className:"text-xl sm:text-2xl",children:"🎾"}),c.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Tennis"})]}),c.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[c.jsx("span",{className:"text-xl sm:text-2xl",children:"🏅"}),c.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Olympics"})]}),c.jsxs("div",{className:"bg-gray-700/50 p-1 sm:p-2 rounded-lg flex flex-col items-center",children:[c.jsx("span",{className:"text-xl sm:text-2xl",children:"🎯"}),c.jsx("span",{className:"text-[10px] sm:text-xs text-gray-300",children:"Mixed"})]})]})]}),c.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-6 bg-gray-800/60 backdrop-blur-sm rounded-xl w-full overflow-hidden relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-50"}),c.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-400"}),c.jsxs("div",{className:"p-3 relative",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(S.div,{animate:{scale:[1,1.1,1],rotate:[0,5,0,-5,0]},transition:{duration:3,repeat:1/0},children:"🔍"}),c.jsx(S.p,{className:"text-blue-400 font-bold text-xs uppercase tracking-wider",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:"SPORTS FACT"})]}),c.jsx("div",{className:"min-h-[3.5em] flex items-center",children:c.jsx(De,{mode:"wait",children:c.jsx(S.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{type:"spring",stiffness:100,damping:12,duration:.7},className:"text-gray-300 text-xs sm:text-sm italic break-words",children:u[a]},a)})}),c.jsxs("div",{className:"flex justify-center flex-wrap gap-1 mt-2",children:[u.slice(0,Math.min(5,u.length)).map((f,m)=>c.jsx(S.div,{className:`h-1 rounded-full ${m===a%5?"w-4 bg-blue-400":"w-1 bg-gray-600"}`,animate:m===a%5?{scale:[1,1.2,1],backgroundColor:["#60a5fa","#818cf8","#60a5fa"]}:{},transition:{duration:2,repeat:m===a%5?1/0:0}},m)),u.length>5&&c.jsx(S.div,{className:"h-1 w-4 rounded-full bg-gray-600",animate:{opacity:[.4,.8,.4]},transition:{duration:2,repeat:1/0}})]})]})]})]})]})},Up={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},ho={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},fo={hover:{scale:1.2,rotate:360,transition:{type:"spring",stiffness:260,damping:20}}},Gp=({onStart:s})=>{const e=localStorage.getItem("username")||"",t=n=>{if(!e){console.error("Username not found");return}s(e,n)};return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[c.jsxs(S.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[c.jsx(S.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-4",initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200},children:"Select Game Mode"}),c.jsx(S.div,{animate:{y:[0,-5,0],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-2xl sm:text-3xl",children:"⚽ 🎾"})]}),c.jsxs(S.div,{variants:Up,initial:"hidden",animate:"show",className:"w-full max-w-lg grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[c.jsxs(S.button,{variants:ho,whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>t("solo"),className:"group relative bg-gray-800 rounded-2xl p-6 sm:p-8 overflow-hidden",children:[c.jsx(S.div,{className:"absolute inset-0 bg-gradient-to-br from-green-600 to-green-400 opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),c.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4 relative z-10",children:[c.jsxs(S.div,{variants:fo,whileHover:"hover",className:"w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center bg-gradient-to-br from-green-600 to-green-400 rounded-full",children:[c.jsx(ot,{size:24,className:"text-white sm:hidden"}),c.jsx(ot,{size:32,className:"text-white hidden sm:block"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs(S.h2,{className:"text-xl sm:text-2xl font-bold text-white flex items-center justify-center gap-2",whileHover:{scale:1.05},children:["Solo Play",c.jsx(S.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl sm:text-3xl",children:"🏀"})]}),c.jsx("p",{className:"mt-2 text-gray-400 text-xs sm:text-sm",children:"Practice mode with no time pressure"})]})]}),c.jsx(S.div,{initial:{scaleX:0},whileHover:{scaleX:1},transition:{duration:.3},className:"absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-green-600 to-green-400"})]}),c.jsxs(S.button,{variants:ho,whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>t("1v1"),className:"group relative bg-gray-800 rounded-2xl p-6 sm:p-8 overflow-hidden",children:[c.jsx(S.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-600 to-blue-400 opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),c.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4 relative z-10",children:[c.jsxs(S.div,{variants:fo,whileHover:"hover",className:"w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center bg-gradient-to-br from-blue-600 to-blue-400 rounded-full",children:[c.jsx(Kr,{size:24,className:"text-white sm:hidden"}),c.jsx(Kr,{size:32,className:"text-white hidden sm:block"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs(S.h2,{className:"text-xl sm:text-2xl font-bold text-white flex items-center justify-center gap-2",whileHover:{scale:1.05},children:["1v1 Mode",c.jsx(S.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl sm:text-3xl",children:"⚔️"})]}),c.jsx("p",{className:"mt-2 text-gray-400 text-xs sm:text-sm",children:"Challenge a friend in real-time"})]})]}),c.jsx(S.div,{initial:{scaleX:0},whileHover:{scaleX:1},transition:{duration:.3},className:"absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-blue-600 to-blue-400"})]})]}),c.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-6 sm:mt-8 text-center",children:c.jsxs("p",{className:"text-gray-400 text-sm sm:text-base",children:["Playing as: "," ",c.jsx(S.span,{className:"text-green-400 font-semibold",whileHover:{scale:1.1},children:e})]})})]})},qp="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let St=(s=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(s|=0));for(;s--;)e+=qp[t[s]&63];return e};const zp=()=>window.location.hostname.includes("netlify")?"https://quiz-render-tests.onrender.com":window.location.origin;let P;window._globalSocket?(console.log("Using existing global socket"),P=window._globalSocket):(P=Vl(zp(),{transports:["websocket","polling"],withCredentials:!0,reconnection:!0,reconnectionAttempts:20,reconnectionDelay:1e3,timeout:6e4,autoConnect:!1,path:"/socket.io/"}),window._globalSocket=P);const Hp=()=>{if(!P._debugEventsAttached){P._debugEventsAttached=!0;const s=P.on.bind(P);P.on=function(t,n){return console.log(`[SOCKET-DEBUG] Adding listener for: ${t}`),s(t,n)};const e=P.emit.bind(P);P.emit=function(t,...n){return console.log(`[SOCKET-DEBUG] Emitting event: ${t}`,n[0]?"(with data)":"(no data)"),e(t,...n)},P.onAny((t,...n)=>{console.log(`[SOCKET-DEBUG] Received event: ${t}`,n[0]?"(with data)":"(no data)")})}},hn={gameId:St(6),category:"mixed",players:[],currentQuestion:0,questions:[],isGameStarted:!1,isGameEnded:!1,chatMessages:[],startCountdown:null,answeredPlayers:new Set,finishedPlayers:new Set,startTime:Date.now(),questionStartTime:Date.now(),questionResponseTimes:[],playerResponseTimes:new Map,scores:new Map,waitingForPlayers:!0,currentPlayerId:"",socket:P,isConnecting:!1,hasJoinedGame:!1,isGameCreationInProgress:!1},Et=mo((s,e)=>(Hp(),P.on("connect",()=>{console.log("Socket connected:",P.id),s(t=>({...t,currentPlayerId:P.id,isConnecting:!1}))}),P.on("connect_error",t=>{console.error("Socket connection error:",t),s(n=>({...n,isConnecting:!1,isGameCreationInProgress:!1}))}),P.on("gameCreated",t=>{console.log("Game created:",t),s(n=>({...n,gameId:t.gameId,category:t.category,questions:t.questions,players:t.players,waitingForPlayers:!0,hasJoinedGame:!0,isGameCreationInProgress:!1,playerResponseTimes:new Map,scores:new Map(t.players.map(r=>[r.id,r.score||0]))}))}),P.on("gameUpdated",t=>{console.log("Game updated:",t);const n=t.players.some(r=>r.id===P.id);s(r=>{const i=new Map(r.playerResponseTimes);t.players.forEach(a=>{a.responseTimes&&i.set(a.id,a.responseTimes)});const o=new Map(t.players.map(a=>[a.id,a.score||0]));return{...r,players:t.players,category:t.category,questions:t.questions||r.questions,waitingForPlayers:t.waitingForPlayers,startCountdown:t.startCountdown,hasJoinedGame:n||r.hasJoinedGame,playerResponseTimes:i,scores:o,isGameCreationInProgress:!1}})}),P.on("playerReadyUpdate",t=>{console.log("Player ready update:",t),s(n=>({...n,players:t.players,startCountdown:t.startCountdown}))}),P.on("gameStarted",t=>{console.log("Game started:",t),s(n=>({...n,isGameStarted:!0,startTime:Date.now(),questionStartTime:Date.now(),waitingForPlayers:!1,startCountdown:null,category:t.category,questions:t.questions,playerResponseTimes:new Map,scores:new Map(t.players.map(r=>[r.id,r.score||0]))})),window.dispatchEvent(new CustomEvent("sportiq:gameStarted"))}),P.on("scoreUpdate",t=>{console.log("Score update received:",t);const{playerId:n,score:r,responseTime:i,correctAnswers:o}=t;s(a=>{const l=new Map(a.scores);l.set(n,r);const u=new Map(a.playerResponseTimes),d=u.get(n)||[];u.set(n,[...d,i]);const h=a.players.map(f=>f.id===n?{...f,score:r,responseTimes:[...d,i],correctAnswers:o!==void 0?o:f.correctAnswers}:f);return{...a,scores:l,playerResponseTimes:u,players:h}})}),P.on("nextQuestion",t=>{console.log("Next question:",t),s(n=>({...n,currentQuestion:t.currentQuestion,questionStartTime:Date.now(),answeredPlayers:new Set}))}),P.on("gameOver",t=>{console.log("Game over:",t);const n=Date.now(),r=e().startTime,i=(n-r)/1e3;s(o=>{const a=new Map(t.players.map(u=>[u.id,u.score||0])),l=new Map(o.playerResponseTimes);return t.players.forEach(u=>{u.responseTimes&&l.set(u.id,u.responseTimes)}),{...o,isGameStarted:!1,isGameEnded:!0,scores:a,playerResponseTimes:l,players:t.players,completionTime:i}})}),P.on("categoryUpdated",t=>{console.log("Category updated:",t),s(n=>({...n,category:t.category,questions:t.questions}))}),P.on("playerAnswered",t=>{console.log("Player answered:",t);const{playerId:n,score:r,responseTime:i,isCorrect:o,correctAnswers:a}=t;s(l=>{const u=new Map(l.playerResponseTimes),d=u.get(n)||[];u.set(n,[...d,i]);const h=new Map(l.scores);h.set(n,r);const f=l.players.map(m=>{if(m.id===n){const v=a!==void 0?a:m.correctAnswers!==void 0?o?m.correctAnswers+1:m.correctAnswers:0;return{...m,score:r,responseTimes:[...d,i],correctAnswers:v}}return m});return{...l,playerResponseTimes:u,scores:h,players:f,answeredPlayers:new Set([...l.answeredPlayers,n])}})}),P.on("error",t=>{console.error("Socket error:",t),s(n=>({...n,isConnecting:!1,isGameCreationInProgress:!1}))}),P.on("disconnect",()=>{console.log("Socket disconnected"),s(t=>({...t,isConnecting:!1,isGameCreationInProgress:!1}))}),{...hn,socket:P,initializeGame:async()=>{const t=e(),n=Date.now();if(window._socketInitializeAttempt&&n-window._socketInitializeAttempt<5e3&&(console.log("Socket initialization attempted recently, using existing socket"),P.connected))return s(i=>({...i,currentPlayerId:P.id,isConnecting:!1})),Promise.resolve();if(window._socketInitializeAttempt=n,t._initializationPromise)return console.log("Initialization already in progress, returning existing promise"),t._initializationPromise;if(P.connected)return console.log("Socket already connected, skipping initialization"),t.currentPlayerId!==P.id&&s({currentPlayerId:P.id,isConnecting:!1}),Promise.resolve();console.log("Initializing game, connecting socket..."),s({isConnecting:!0});const r=new Promise((i,o)=>{const a=setTimeout(()=>{P.off("connect",l),P.off("connect_error",u),s(d=>({...d,isConnecting:!1,_initializationPromise:null})),o(new Error("Socket connection timeout"))},1e4),l=()=>{console.log("Socket connected for 1v1 game with ID:",P.id),clearTimeout(a),P.off("connect",l),P.off("connect_error",u),window._globalSocket=P;const d=St(6);s({...hn,socket:P,currentPlayerId:P.id,isConnecting:!1,gameId:d,hasJoinedGame:!1,playerResponseTimes:new Map,scores:new Map,_initializationPromise:null}),i()},u=d=>{console.error("Socket connection error:",d),clearTimeout(a),P.off("connect",l),P.off("connect_error",u),s(h=>({...h,isConnecting:!1,_initializationPromise:null,isGameCreationInProgress:!1})),o(d)};P.connected?l():(P.once("connect",l),P.once("connect_error",u),P.connect())});return s(i=>({...i,_initializationPromise:r})),r},createGame:async t=>{const n=localStorage.getItem("username")||"Guest",r=e();if(r.isGameCreationInProgress)return console.log("Game creation already in progress, ignoring duplicate request"),Promise.resolve();if(r.hasJoinedGame)return console.log("Already joined a game, updating category instead"),e().setCategory(t),Promise.resolve();s(i=>({...i,isGameCreationInProgress:!0}));try{if(!P.connected){console.log("Socket not connected, attempting to connect before creating game");try{await e().initializeGame()}catch(o){throw console.error("Failed to initialize socket connection:",o),s(a=>({...a,isGameCreationInProgress:!1})),new Error("Failed to connect to game server")}}if(console.log("Creating game with category:",t,"Socket connected:",P.connected),window._gameCreationPromise)return console.log("Game creation already in progress globally"),window._gameCreationPromise;const i=new Promise((o,a)=>{const l=setTimeout(()=>{P.off("gameCreated"),window._gameCreationPromise=void 0,s(u=>({...u,isGameCreationInProgress:!1})),a(new Error("Game creation timeout"))},5e3);P.once("gameCreated",()=>{clearTimeout(l),window._gameCreationPromise=void 0,s(u=>({...u,hasJoinedGame:!0,isGameCreationInProgress:!1})),o()}),console.log("Emitting createGame event:",{mode:"1v1",category:t,username:n,gameId:r.gameId}),P.emit("createGame",{mode:"1v1",category:t,username:n,gameId:r.gameId})});return window._gameCreationPromise=i,i}catch(i){throw window._gameCreationPromise=void 0,s(o=>({...o,isGameCreationInProgress:!1})),i}},joinGame:async(t,n)=>{try{return P.connected||await e().initializeGame(),new Promise((r,i)=>{const o=setTimeout(()=>{P.off("gameUpdated"),i(new Error("Join game timeout"))},5e3),a=l=>{l.players.some(d=>d.id===P.id)&&(s(d=>({...d,gameId:t.trim(),hasJoinedGame:!0,players:l.players,scores:new Map(l.players.map(h=>[h.id,h.score||0])),playerResponseTimes:new Map})),clearTimeout(o),P.off("gameUpdated",a),r())};P.on("gameUpdated",a),console.log("Joining game:",t),P.emit("joinGame",{gameId:t.trim(),username:n})})}catch(r){throw console.error("Error joining game:",r),r}},setPlayerReady:()=>{const{gameId:t}=e();!t||!P.connected||P.emit("playerReady",{gameId:t})},submitAnswer:(t,n,r,i)=>{const o=e(),a=o.getCurrentPlayer();if(!a||!P.connected)return;const l=15-n,u=[...o.questionResponseTimes,l],d=o.questions[o.currentQuestion],h=d&&d.correctAnswer===t,f=a.correctAnswers||0,m=h?f+1:f;P.emit("submitAnswer",{gameId:o.gameId,playerId:a.id,answer:t,timeRemaining:n,points:r,totalScore:i,responseTime:l,allResponseTimes:u,isCorrect:h,correctAnswers:m}),s(v=>{const y=new Map(v.playerResponseTimes);y.set(a.id,u);const g=new Map(v.scores);g.set(a.id,i);const b=v.players.map(j=>j.id===a.id?{...j,score:i,responseTimes:u,correctAnswers:m}:j);return{...v,questionResponseTimes:u,playerResponseTimes:y,scores:g,players:b,answeredPlayers:new Set([...v.answeredPlayers,a.id])}})},getCurrentPlayer:()=>{const t=e();return t.players.find(n=>n.id===t.currentPlayerId)},getPlayerResponseTimes:t=>{var o;const n=e(),r=n.players.find(a=>a.id===t);if((o=r==null?void 0:r.responseTimes)!=null&&o.length)return r.responseTimes;const i=n.playerResponseTimes.get(t);return i!=null&&i.length?i:[]},addChatMessage:(t,n)=>{const{gameId:r}=e();if(!r||!P.connected)return;const i=e().players.find(a=>a.id===t);if(!i)return;P.emit("chatMessage",{gameId:r,message:n});const o={id:St(),playerId:t,playerName:i.username,message:n,timestamp:Date.now()};s(a=>({...a,chatMessages:[...a.chatMessages,o]}))},resetGame:()=>{P.connected&&P.disconnect(),s(hn)},endGame:()=>{const{gameId:t,socket:n}=e();if(!t||!n.connected)return;console.log("Manually ending game:",t),n.emit("gameOver",{gameId:t});const r=Date.now(),i=e().startTime,o=(r-i)/1e3;s({isGameStarted:!1,isGameEnded:!0,completionTime:o})},setCategory:t=>{const n=e(),r=n.getCurrentPlayer();if(!(r!=null&&r.isHost)){console.warn("Only host can change category");return}if(!P.connected){console.error("Socket not connected");return}console.log("Setting category to:",t),P.emit("updateCategory",{gameId:n.gameId,category:t}),s(i=>({...i,category:t}))}})),Wp={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Kp={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},Jp={hover:{scale:1.2,rotate:360,transition:{type:"spring",stiffness:260,damping:20}}},Qp=({onSelect:s,mode:e,onBack:t})=>{const{hasJoinedGame:n,getCurrentPlayer:r}=Et(),i=r(),o=i==null?void 0:i.isHost,[a,l]=w.useState(!1);if(w.useEffect(()=>{e!=="solo"&&n&&(o||(console.log("Non-host player in category selection, redirecting to lobby"),s("mixed")))},[e,n,o,s]),e!=="solo"&&n&&!o)return c.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:c.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-md bg-gray-800 rounded-2xl p-8 text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Joining game..."}),c.jsx("p",{className:"text-gray-400 mb-6",children:"You'll be redirected to the lobby shortly"}),c.jsx(S.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1.5,repeat:1/0},className:"h-2 bg-green-600 rounded-full"})]})});const u=[{id:"football",name:"Football",emoji:"⚽",icon:ot,color:"from-yellow-600 to-yellow-400"},{id:"basketball",name:"Basketball",emoji:"🏀",icon:Ds,color:"from-orange-600 to-orange-400"},{id:"tennis",name:"Tennis",emoji:"🎾",icon:Go,color:"from-green-600 to-green-400"},{id:"olympics",name:"Olympics",emoji:"🏅",icon:Wn,color:"from-blue-600 to-blue-400"},{id:"mixed",name:"Mixed Sports",emoji:"🎯",icon:qo,color:"from-purple-600 to-purple-400"}],d=h=>{if(a){console.log("Selection already in progress, ignoring");return}if(l(!0),console.log(`Selected category: ${h} for mode: ${e}`),e!=="solo"&&n&&!o){console.log("Non-host attempted to select category, redirecting"),s(h),setTimeout(()=>{l(!1)},1e3);return}s(h),setTimeout(()=>{l(!1)},1e3)};return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 pb-20",children:[c.jsxs(S.button,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:`fixed bottom-6 left-6 z-10 flex items-center gap-1 sm:gap-2 px-4 py-3 bg-gray-800/90 hover:bg-gray-700 
                   rounded-full shadow-lg text-white transition-colors group text-sm sm:text-base`,children:[c.jsx(Bo,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"}),c.jsx("span",{className:"hidden sm:inline",children:"Back to Modes"}),c.jsx("span",{className:"sm:hidden",children:"Back"})]}),c.jsxs("div",{className:"w-full max-w-4xl",children:[c.jsxs(S.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},children:[c.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white text-center mb-2 sm:mb-4",children:"Choose Your Category"}),c.jsx("p",{className:"text-gray-400 text-center text-sm sm:text-base mb-6 sm:mb-12",children:e==="solo"?"Practice mode - Test your knowledge!":"Challenge a friend in this category!"})]}),c.jsx(S.div,{variants:Wp,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:u.map(({id:h,name:f,emoji:m,icon:v,color:y})=>c.jsxs(S.button,{variants:Kp,whileHover:{scale:1.02,y:-5},whileTap:{scale:.98},onClick:()=>d(h),disabled:a,className:`group relative bg-gray-800 rounded-2xl p-6 sm:p-8 overflow-hidden ${a?"opacity-70 cursor-not-allowed":""}`,children:[c.jsx(S.div,{className:`absolute inset-0 bg-gradient-to-br ${y} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),c.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4 relative z-10",children:[c.jsxs(S.div,{variants:Jp,whileHover:"hover",className:`w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center bg-gradient-to-br ${y} rounded-full`,children:[c.jsx(v,{size:24,className:"text-white sm:hidden"}),c.jsx(v,{size:32,className:"text-white hidden sm:block"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs(S.h2,{className:"text-xl sm:text-2xl font-bold text-white flex items-center justify-center gap-2",whileHover:{scale:1.05},children:[c.jsx("span",{children:f}),c.jsx(S.span,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"text-2xl sm:text-3xl",children:m})]}),c.jsxs("p",{className:"mt-2 text-gray-400 text-xs sm:text-sm",children:["Test your ",f.toLowerCase()," knowledge"]})]})]}),c.jsx(S.div,{initial:{scaleX:0},whileHover:{scaleX:1},transition:{duration:.3},className:`absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r ${y}`})]},h))})]})]})},Xp=()=>{const{gameId:s,players:e,setPlayerReady:t,category:n,startCountdown:r,getCurrentPlayer:i,waitingForPlayers:o,isGameStarted:a}=Et(),l=i(),u=e.length,h=u===2,f=()=>{navigator.clipboard.writeText(s)},m=()=>{l&&h&&t()},v=h&&e.every(y=>y.isReady);return c.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:c.jsxs("div",{className:"w-full max-w-2xl bg-gray-800 rounded-lg p-6 shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"1v1 Game Lobby"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:s,readOnly:!0,className:"bg-gray-700 text-white px-3 py-1 rounded font-mono text-sm"}),c.jsx("button",{onClick:f,className:"p-2 rounded bg-green-600 hover:bg-green-700 text-white transition-colors",title:"Copy invite code",children:c.jsx(it,{size:20})})]})]}),c.jsx("div",{className:"mb-6 flex items-center justify-center",children:c.jsxs("div",{className:"bg-gray-700 rounded-full px-4 py-2 flex items-center gap-2",children:[c.jsx(xs,{size:20,className:"text-green-400"}),c.jsxs("span",{className:"text-white font-medium",children:[u,"/2 Players"]})]})}),o&&c.jsxs("div",{className:"text-center mb-8 animate-pulse",children:[c.jsxs("div",{className:"flex items-center justify-center gap-3 text-yellow-400",children:[c.jsx(dd,{className:"w-6 h-6 animate-spin"}),c.jsx("span",{className:"text-lg font-medium",children:"Waiting for opponent..."})]}),c.jsx("p",{className:"text-gray-400 mt-2",children:"Share the game code with your opponent to start"})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("h3",{className:"text-xl text-white flex items-center gap-2 mb-4",children:[c.jsx(xs,{size:24}),"Players"]}),c.jsxs("div",{className:"grid gap-3",children:[e.map(y=>c.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${y.id===(l==null?void 0:l.id)?"bg-gray-700":"bg-gray-700/50"}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-white font-medium",children:y.username}),y.id===(l==null?void 0:l.id)&&c.jsx("span",{className:"text-xs bg-green-600/20 text-green-400 px-2 py-1 rounded",children:"You"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[y.id===(l==null?void 0:l.id)&&!y.isReady&&h&&c.jsxs("button",{onClick:m,className:`px-4 py-2 bg-green-600 hover:bg-green-700 text-white 
                               rounded-lg transition-colors flex items-center gap-2`,children:[c.jsx(Wr,{size:16}),"Ready Up"]}),y.isReady?c.jsxs("span",{className:"text-green-400 flex items-center gap-2",children:[c.jsx(fd,{size:16}),"Ready"]}):c.jsxs("span",{className:"text-gray-400 flex items-center gap-2",children:[c.jsx(Wr,{size:16}),"Not Ready"]})]})]},y.id)),o&&c.jsx("div",{className:"p-4 rounded-lg bg-gray-700/30 border-2 border-dashed border-gray-600",children:c.jsx("div",{className:"text-gray-400 text-center",children:"Waiting for opponent..."})})]})]}),r!==null&&c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl text-green-400 font-bold",children:[c.jsx(jn,{className:"w-6 h-6 animate-pulse"}),c.jsxs("span",{className:"animate-pulse",children:["Game starting in ",r,"..."]})]})}),r===null&&c.jsx("div",{className:"text-center text-gray-400",children:v?c.jsx("p",{children:"All players ready! Starting game..."}):h?c.jsx("p",{children:"Waiting for all players to be ready..."}):c.jsx("p",{children:"Waiting for opponent to join..."})})]})})},fn={gameId:"",mode:"solo",category:"mixed",players:[],currentQuestion:0,questions:[],timeRemaining:15,isGameStarted:!1,isGameEnded:!1,chatMessages:[],startCountdown:null,finishedPlayers:new Set,answeredPlayers:new Set,startTime:Date.now(),questionStartTimes:[],questionResponseTimes:[],playerResponseTimes:new Map,isTransitioning:!1,waitingForPlayers:!1,currentPlayerId:St(),scores:new Map,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1,nextQuestionPending:null,lastSyncTime:Date.now(),questionStartTime:Date.now(),socket:null},Ar=mo((s,e)=>{let t=null;const n=()=>{t&&clearTimeout(t)};return{...fn,resetGame:()=>{n(),s({...fn,startTime:Date.now(),questionStartTime:Date.now(),currentPlayerId:St()})},initializeGame:async r=>{if(r!=="solo")return console.log("Non-solo mode requested, deferring to oneVsOneStore"),Promise.resolve();n();const i=St();s({...fn,mode:r,currentPlayerId:i,startTime:Date.now(),questionStartTime:Date.now(),waitingForPlayers:!1,isGameStarted:!1})},addPlayer:r=>{const o=e().currentPlayerId;s(a=>({...a,players:[{id:o,username:r,score:0,correctAnswers:0,isReady:!1,hasFinished:!1}],scores:new Map([[o,0]])}))},setTimeRemaining:r=>{s({timeRemaining:r})},setCategory:async r=>{const i=e();if(console.log("Setting category:",r,"Mode:",i.mode),i.mode!=="solo")return console.log("Non-solo mode requested, deferring to oneVsOneStore"),Promise.resolve();if(i._categoryFetchInProgress){console.log("Category fetch already in progress, ignoring duplicate request");return}if(i.category===r&&i.questions.length>0){console.log("Category already set and questions loaded. Skipping duplicate fetch."),i.isGameStarted||setTimeout(()=>{s({isGameStarted:!0})},50);return}try{s(a=>({...a,_categoryFetchInProgress:!0})),s(a=>({...a,category:r}));const o=await nd(r);console.log("Fetched questions for category:",r,o),s(a=>({...a,questions:o,currentQuestion:0,timeRemaining:15,questionResponseTimes:[],startTime:Date.now(),questionStartTime:Date.now(),questionStartTimes:[Date.now()],waitingForPlayers:!1,isGameEnded:!1,isTransitioning:!1,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1,scores:new Map([[a.currentPlayerId,0]]),players:a.players.map(l=>({...l,score:0,correctAnswers:0,isReady:!1,hasFinished:!1})),_categoryFetchInProgress:!1})),setTimeout(()=>{s({isGameStarted:!0})},50)}catch(o){throw s(a=>({...a,_categoryFetchInProgress:!1})),console.error("Error in setCategory:",o),o}},getCurrentPlayer:()=>{const r=e();return r.players.find(i=>i.id===r.currentPlayerId)},startGame:()=>{e().mode==="solo"&&s({isGameStarted:!0})},endGame:()=>{const r=e();if(r.mode==="solo"){const o=(Date.now()-r.startTime)/1e3;s({isGameStarted:!1,isGameEnded:!0,completionTime:o})}},nextQuestion:()=>{n(),s(r=>({currentQuestion:r.currentQuestion+1,timeRemaining:15,answeredPlayers:new Set,questionStartTimes:[...r.questionStartTimes,Date.now()],isTransitioning:!1,selectedAnswer:null,isAnswerChecked:!1,isCorrect:!1}))},checkAnswer:r=>{const i=e();return i.questions[i.currentQuestion].correctAnswer===r},submitAnswer:(r,i,o,a)=>{var v;const l=e(),u=(v=l.getCurrentPlayer)==null?void 0:v.call(l);if(!u)return;const d=15-i,h=[...l.questionResponseTimes,d],m=l.questions[l.currentQuestion].correctAnswer===r;l.mode==="solo"&&(s(y=>({...y,questionResponseTimes:h,scores:new Map(y.scores).set(u.id,a),players:y.players.map(g=>g.id===u.id?{...g,score:a,correctAnswers:m?g.correctAnswers+1:g.correctAnswers}:g),isTransitioning:!0})),t&&clearTimeout(t),t=setTimeout(()=>{const y=e();y.currentQuestion<y.questions.length-1?s({currentQuestion:y.currentQuestion+1,timeRemaining:15,isTransitioning:!1}):s({isGameEnded:!0,completionTime:(Date.now()-y.startTime)/1e3})},2e3))},setPlayerReady:()=>{},addChatMessage:()=>{},setIsTransitioning:r=>{s({isTransitioning:r})},handleRematch:()=>{},getPlayerResponseTimes:r=>{const i=e();return r===i.currentPlayerId?i.questionResponseTimes:i.playerResponseTimes.get(r)||[]},joinGame:()=>Promise.resolve()}}),Yp=[{emoji:"⚽",text:"Great shot!"},{emoji:"👍",text:"Nice one!"},{emoji:"🎯",text:"Perfect answer!"},{emoji:"🔥",text:"On fire!"},{emoji:"💪",text:"Keep it up!"}],mn=[{threshold:12,points:5,label:"Lightning Fast",emoji:"⚡"},{threshold:10,points:4,label:"Quick",emoji:"🚀"},{threshold:8,points:3,label:"Normal",emoji:"✨"},{threshold:6,points:2,label:"Measured",emoji:"🎯"},{threshold:3,points:1,label:"Delayed",emoji:"⏳"},{threshold:0,points:0,label:"Slow",emoji:"🐌"}],Zp={hidden:{x:-20,opacity:0},visible:s=>({x:0,opacity:1,transition:{delay:s*.1,type:"spring",stiffness:100,damping:10}}),exit:{x:20,opacity:0}},eg=({mode:s,onBackToCategory:e,onBackToMode:t})=>{w.useEffect(()=>(console.log("QuizGame component mounted for mode:",s),()=>{console.log("QuizGame component unmounting")}),[s]);const n=Ar(),r=Et(),i=s==="solo"?n:r,{currentQuestion:o,questions:a,category:l,players:u,chatMessages:d,addChatMessage:h,isGameEnded:f,submitAnswer:m,getCurrentPlayer:v,getPlayerResponseTimes:y,endGame:g}=i,[b,j]=w.useState(null),[T,k]=w.useState(!1),[_,R]=w.useState(!1),[$,C]=w.useState(15),[B,ee]=w.useState(!1),[Y,W]=w.useState(!0),[le,oe]=w.useState(0),[L,ne]=w.useState(null),[K,ue]=w.useState(!1),[Be,x]=w.useState(null),[p,N]=w.useState(null),A=v(),E=a[o],D=s!=="solo";w.useEffect(()=>{E?console.log(`Current question (${o}):`,E.question.substring(0,30)+"..."):console.log("No question available yet")},[E,o]);const F={football:{icon:ot,emoji:"⚽",color:"text-yellow-400"},basketball:{icon:Ds,emoji:"🏀",color:"text-orange-400"},tennis:{icon:Go,emoji:"🎾",color:"text-green-400"},olympics:{icon:Wn,emoji:"🏅",color:"text-blue-400"},mixed:{icon:qo,emoji:"🎯",color:"text-purple-400"}},I=F[l]||F.mixed,U=I.icon,z=A?y(A.id):[],Q=z[z.length-1],J=z.reduce((M,ae)=>M+ae,0),te=()=>{x("category")},ce=()=>{x("mode")},G=M=>{x(null),M==="category"&&e?e():M==="mode"&&t&&t()},fe=()=>{x(null)};w.useEffect(()=>{if(!D||!E||f||K)return;if(o===a.length-1&&T){console.log("Last question answered by current player, checking end game conditions...");const ae=setTimeout(()=>{console.log("Forcing game end after last question"),ue(!0),g()},3e3);return()=>clearTimeout(ae)}},[o,a.length,T,D,E,g,f,K]),w.useEffect(()=>{E&&(console.log("Question changed, resetting state for question:",o),W(!0),j(null),k(!1),R(!1),C(15),oe(0),ne(null),N(null))},[o,E]);const ge=w.useCallback(M=>{for(const ae of mn)if(M>=ae.threshold)return ae;return mn[mn.length-1]},[]),we=w.useCallback(M=>{if(!Y||!A||!E)return;W(!1),j(M);const ae=M===E.correctAnswer;R(ae),k(!0),N(E.correctAnswer);let ye=0,Ue=null;ae&&(ye=10,Ue=ge($),ye+=Ue.points,ne(Ue)),oe(ye);const zs=(A.score||0)+ye;m(M,$,ye,zs),o===a.length-1&&console.log("This was the last question!")},[A,$,E,m,Y,o,a.length,ge]),Te=w.useCallback(()=>{if(!T&&Y&&A){W(!1),k(!0),R(!1),oe(0);const M=A.score||0;m("",0,0,M)}},[T,m,Y,A]);w.useEffect(()=>{let M;if(!T&&!f&&Y&&E){const ae=Date.now();return M=setInterval(()=>{const Ue=(Date.now()-ae)/1e3,Nt=Math.max(15-Ue,0);C(Nt),Nt<=0&&(clearInterval(M),Te())},50),()=>clearInterval(M)}},[T,Te,f,Y,E]);const Ie=M=>M<3?"text-green-400":M<7?"text-yellow-400":"text-orange-400",Se=M=>M>10?"text-green-400":M>5?"text-yellow-400":"text-red-400",Gs=M=>M.points>=5?"text-purple-400":M.points>=4?"text-blue-400":M.points>=3?"text-green-400":M.points>=2?"text-yellow-400":M.points>=1?"text-orange-400":"text-gray-400";if(f)return c.jsx("div",{className:"text-white text-center p-8 flex flex-col items-center justify-center min-h-screen",children:c.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"card p-8 max-w-md",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Game completed!"}),c.jsx("p",{className:"mb-4",children:"Loading results..."}),c.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:c.jsx(S.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1},className:"h-2 bg-green-500 rounded-full"})})]})});if(!E)return c.jsx("div",{className:"text-white text-center p-8 flex flex-col items-center justify-center min-h-screen",children:c.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"card p-8 max-w-md",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."}),c.jsx("p",{className:"mb-4",children:"Preparing questions"}),c.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:c.jsx(S.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1},className:"h-2 bg-blue-500 rounded-full w-1/2"})})]})});const qs=o+1;return c.jsxs("div",{className:"min-h-screen bg-background p-4",children:[c.jsx(De,{children:Be&&c.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs(S.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Are you sure?"}),c.jsx("p",{className:"text-gray-300 mb-6",children:"Your current progress will be lost if you leave this game."}),c.jsxs("div",{className:"flex gap-4 justify-end",children:[c.jsx("button",{onClick:fe,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:"Stay in Game"}),c.jsx("button",{onClick:()=>G(Be),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white transition-colors",children:"Leave Game"})]})]})})}),c.jsx(S.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"fixed top-0 left-0 right-0 bg-gray-800/90 backdrop-blur-sm border-b border-gray-700/50 z-40",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mx-auto",children:[c.jsx(S.div,{whileHover:{scale:1.1,rotate:360},transition:{duration:.5},className:`p-2 rounded-lg bg-gray-700/50 ${I.color}`,children:c.jsx(U,{className:"w-6 h-6"})}),c.jsxs("div",{className:"text-center",children:[c.jsxs("h2",{className:"text-white font-medium capitalize flex items-center gap-1 justify-center",children:[l," Quiz",c.jsx("span",{className:"text-xl ml-1",children:I.emoji})]}),c.jsxs("p",{className:"text-sm text-gray-400",children:["Question ",qs," of ",a.length]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[D&&c.jsx("div",{className:"flex gap-2",children:u.map(M=>c.jsxs(S.div,{className:`px-3 py-1 rounded-full ${M.id===(A==null?void 0:A.id)?"bg-green-600/20":"bg-gray-700/20"}`,whileHover:{scale:1.05},children:[c.jsx("span",{className:"text-white font-medium",children:M.score||0}),c.jsx("span",{className:"text-gray-400 text-sm ml-1",children:M.username})]},M.id))}),c.jsxs(S.div,{className:`flex items-center gap-2 bg-gray-700/30 px-4 py-2 rounded-full ${Se($)}`,animate:{scale:$<=5?[1,1.1,1]:1,transition:{duration:.5,repeat:$<=5?1/0:0,repeatType:"reverse"}},children:[c.jsx(S.div,{animate:{rotate:360,transition:{duration:2,repeat:1/0,ease:"linear"}},children:c.jsx(jn,{className:"w-5 h-5"})}),c.jsx("span",{className:"font-medium min-w-[4ch] text-right",children:$.toFixed(2)})]})]})]})}),c.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col gap-3",children:[e&&c.jsxs(S.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:te,className:`flex items-center gap-2 px-4 py-3 bg-gray-800/90 hover:bg-gray-700 
                     rounded-full shadow-lg text-white transition-colors group`,children:[c.jsx(Bo,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),c.jsx("span",{className:"hidden sm:inline",children:"Categories"})]}),t&&c.jsxs(S.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:.1}},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ce,className:`flex items-center gap-2 px-4 py-3 bg-gray-800/90 hover:bg-gray-700 
                     rounded-full shadow-lg text-white transition-colors group`,children:[c.jsx(Hn,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),c.jsx("span",{className:"hidden sm:inline",children:"Home"})]})]}),c.jsxs("div",{className:"container-game pt-20",children:[c.jsxs(S.div,{className:"card",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30},children:[c.jsx(De,{mode:"wait",children:c.jsx(S.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},className:"text-2xl font-bold text-white mb-8",children:E.question},E.question)}),c.jsx(De,{mode:"wait",children:c.jsx(S.div,{className:"grid gap-4",initial:"hidden",animate:"visible",exit:"exit",children:E.options.map((M,ae)=>{let ye="p-4 rounded-xl text-left w-full transition-colors duration-300 ";return T?M===E.correctAnswer?ye+="bg-green-600 text-white":M===b?ye+="bg-red-600 text-white":ye+="bg-gray-700 text-gray-400":ye+="bg-gray-700 hover:bg-gray-600 text-white",c.jsx(S.button,{custom:ae,variants:Zp,onClick:()=>we(M),disabled:!Y,className:ye,whileHover:Y?{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}}:{},whileTap:Y?{scale:.98,transition:{type:"spring",stiffness:400,damping:10}}:{},children:c.jsx(S.div,{initial:!1,animate:{color:T?M===E.correctAnswer?"#10B981":M===b?"#EF4444":"#9CA3AF":"#FFFFFF"},transition:{duration:.3},children:M})},M)})},o)}),c.jsx(De,{children:T&&c.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mt-6 space-y-2",children:[c.jsxs(S.div,{className:`flex items-center gap-2 ${_?"text-green-500":"text-red-500"}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10},children:[c.jsx(it,{size:20}),c.jsx("span",{children:_?`Correct! +${le} points`:`Wrong! The correct answer was ${p||E.correctAnswer}`})]}),_&&L&&c.jsx(S.div,{className:`flex items-center gap-2 ${Gs(L)}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10,delay:.1},children:c.jsxs("span",{className:"text-sm",children:[L.emoji," ",L.label," bonus: +",L.points," points"]})}),Q!==void 0&&c.jsxs(S.div,{className:`flex items-center gap-2 ${Ie(Q)}`,initial:{scale:.9},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10,delay:.2},children:[c.jsx(jn,{size:16}),c.jsxs("span",{className:"text-sm",children:["Response time: ",Q.toFixed(2),"s",J>0&&` (total ${J.toFixed(2)}s)`]})]})]})})]}),D&&c.jsxs("div",{className:"fixed bottom-4 right-4 flex flex-col items-end",children:[c.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>ee(!B),className:"mb-2 p-3 rounded-full bg-green-600 hover:bg-green-700 text-white transition-colors",children:B?c.jsx(Zt,{size:24}):c.jsx(Kn,{size:24})}),c.jsx(De,{children:B&&c.jsxs(S.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"space-y-2",children:[c.jsx("div",{className:"mb-2 w-64 card max-h-40 overflow-y-auto",children:d.map(M=>c.jsxs("div",{className:`mb-2 text-sm ${M.playerId===(A==null?void 0:A.id)?"text-green-400":"text-white"}`,children:[c.jsxs("span",{className:"font-bold",children:[M.playerName,":"]})," ",M.message]},M.id))}),c.jsx("div",{className:"grid grid-cols-2 gap-2 w-64",children:Yp.map(({emoji:M,text:ae})=>c.jsxs(S.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>A&&h(A.id,`${M} ${ae}`),className:"p-2 text-sm bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[M," ",ae]},ae))})]})})]}),!D&&c.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center text-gray-300",children:["Score: ",c.jsx("span",{className:"text-green-500 font-bold",children:(A==null?void 0:A.score)||0})]})]})]})};var rs={};(function s(e,t,n,r){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var x=new OffscreenCanvas(1,1),p=x.getContext("2d");p.fillRect(0,0,1,1);var N=x.transferToImageBitmap();try{p.createPattern(N,"no-repeat")}catch{return!1}return!0}();function l(){}function u(x){var p=t.exports.Promise,N=p!==void 0?p:e.Promise;return typeof N=="function"?new N(x):(x(l,l),null)}var d=function(x,p){return{transform:function(N){if(x)return N;if(p.has(N))return p.get(N);var A=new OffscreenCanvas(N.width,N.height),E=A.getContext("2d");return E.drawImage(N,0,0),p.set(N,A),A},clear:function(){p.clear()}}}(a,new Map),h=function(){var x=Math.floor(16.666666666666668),p,N,A={},E=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(p=function(D){var F=Math.random();return A[F]=requestAnimationFrame(function I(U){E===U||E+x-1<U?(E=U,delete A[F],D()):A[F]=requestAnimationFrame(I)}),F},N=function(D){A[D]&&cancelAnimationFrame(A[D])}):(p=function(D){return setTimeout(D,x)},N=function(D){return clearTimeout(D)}),{frame:p,cancel:N}}(),f=function(){var x,p,N={};function A(E){function D(F,I){E.postMessage({options:F||{},callback:I})}E.init=function(I){var U=I.transferControlToOffscreen();E.postMessage({canvas:U},[U])},E.fire=function(I,U,z){if(p)return D(I,null),p;var Q=Math.random().toString(36).slice(2);return p=u(function(J){function te(ce){ce.data.callback===Q&&(delete N[Q],E.removeEventListener("message",te),p=null,d.clear(),z(),J())}E.addEventListener("message",te),D(I,Q),N[Q]=te.bind(null,{data:{callback:Q}})}),p},E.reset=function(){E.postMessage({reset:!0});for(var I in N)N[I](),delete N[I]}}return function(){if(x)return x;if(!n&&i){var E=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{x=new Worker(URL.createObjectURL(new Blob([E])))}catch(D){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",D),null}A(x)}return x}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(x,p){return p?p(x):x}function y(x){return x!=null}function g(x,p,N){return v(x&&y(x[p])?x[p]:m[p],N)}function b(x){return x<0?0:Math.floor(x)}function j(x,p){return Math.floor(Math.random()*(p-x))+x}function T(x){return parseInt(x,16)}function k(x){return x.map(_)}function _(x){var p=String(x).replace(/[^0-9a-f]/gi,"");return p.length<6&&(p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]),{r:T(p.substring(0,2)),g:T(p.substring(2,4)),b:T(p.substring(4,6))}}function R(x){var p=g(x,"origin",Object);return p.x=g(p,"x",Number),p.y=g(p,"y",Number),p}function $(x){x.width=document.documentElement.clientWidth,x.height=document.documentElement.clientHeight}function C(x){var p=x.getBoundingClientRect();x.width=p.width,x.height=p.height}function B(x){var p=document.createElement("canvas");return p.style.position="fixed",p.style.top="0px",p.style.left="0px",p.style.pointerEvents="none",p.style.zIndex=x,p}function ee(x,p,N,A,E,D,F,I,U){x.save(),x.translate(p,N),x.rotate(D),x.scale(A,E),x.arc(0,0,1,F,I,U),x.restore()}function Y(x){var p=x.angle*(Math.PI/180),N=x.spread*(Math.PI/180);return{x:x.x,y:x.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:x.startVelocity*.5+Math.random()*x.startVelocity,angle2D:-p+(.5*N-Math.random()*N),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:x.color,shape:x.shape,tick:0,totalTicks:x.ticks,decay:x.decay,drift:x.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:x.gravity*3,ovalScalar:.6,scalar:x.scalar,flat:x.flat}}function W(x,p){p.x+=Math.cos(p.angle2D)*p.velocity+p.drift,p.y+=Math.sin(p.angle2D)*p.velocity+p.gravity,p.velocity*=p.decay,p.flat?(p.wobble=0,p.wobbleX=p.x+10*p.scalar,p.wobbleY=p.y+10*p.scalar,p.tiltSin=0,p.tiltCos=0,p.random=1):(p.wobble+=p.wobbleSpeed,p.wobbleX=p.x+10*p.scalar*Math.cos(p.wobble),p.wobbleY=p.y+10*p.scalar*Math.sin(p.wobble),p.tiltAngle+=.1,p.tiltSin=Math.sin(p.tiltAngle),p.tiltCos=Math.cos(p.tiltAngle),p.random=Math.random()+2);var N=p.tick++/p.totalTicks,A=p.x+p.random*p.tiltCos,E=p.y+p.random*p.tiltSin,D=p.wobbleX+p.random*p.tiltCos,F=p.wobbleY+p.random*p.tiltSin;if(x.fillStyle="rgba("+p.color.r+", "+p.color.g+", "+p.color.b+", "+(1-N)+")",x.beginPath(),o&&p.shape.type==="path"&&typeof p.shape.path=="string"&&Array.isArray(p.shape.matrix))x.fill(K(p.shape.path,p.shape.matrix,p.x,p.y,Math.abs(D-A)*.1,Math.abs(F-E)*.1,Math.PI/10*p.wobble));else if(p.shape.type==="bitmap"){var I=Math.PI/10*p.wobble,U=Math.abs(D-A)*.1,z=Math.abs(F-E)*.1,Q=p.shape.bitmap.width*p.scalar,J=p.shape.bitmap.height*p.scalar,te=new DOMMatrix([Math.cos(I)*U,Math.sin(I)*U,-Math.sin(I)*z,Math.cos(I)*z,p.x,p.y]);te.multiplySelf(new DOMMatrix(p.shape.matrix));var ce=x.createPattern(d.transform(p.shape.bitmap),"no-repeat");ce.setTransform(te),x.globalAlpha=1-N,x.fillStyle=ce,x.fillRect(p.x-Q/2,p.y-J/2,Q,J),x.globalAlpha=1}else if(p.shape==="circle")x.ellipse?x.ellipse(p.x,p.y,Math.abs(D-A)*p.ovalScalar,Math.abs(F-E)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI):ee(x,p.x,p.y,Math.abs(D-A)*p.ovalScalar,Math.abs(F-E)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI);else if(p.shape==="star")for(var G=Math.PI/2*3,fe=4*p.scalar,ge=8*p.scalar,we=p.x,Te=p.y,Ie=5,Se=Math.PI/Ie;Ie--;)we=p.x+Math.cos(G)*ge,Te=p.y+Math.sin(G)*ge,x.lineTo(we,Te),G+=Se,we=p.x+Math.cos(G)*fe,Te=p.y+Math.sin(G)*fe,x.lineTo(we,Te),G+=Se;else x.moveTo(Math.floor(p.x),Math.floor(p.y)),x.lineTo(Math.floor(p.wobbleX),Math.floor(E)),x.lineTo(Math.floor(D),Math.floor(F)),x.lineTo(Math.floor(A),Math.floor(p.wobbleY));return x.closePath(),x.fill(),p.tick<p.totalTicks}function le(x,p,N,A,E){var D=p.slice(),F=x.getContext("2d"),I,U,z=u(function(Q){function J(){I=U=null,F.clearRect(0,0,A.width,A.height),d.clear(),E(),Q()}function te(){n&&!(A.width===r.width&&A.height===r.height)&&(A.width=x.width=r.width,A.height=x.height=r.height),!A.width&&!A.height&&(N(x),A.width=x.width,A.height=x.height),F.clearRect(0,0,A.width,A.height),D=D.filter(function(ce){return W(F,ce)}),D.length?I=h.frame(te):J()}I=h.frame(te),U=J});return{addFettis:function(Q){return D=D.concat(Q),z},canvas:x,promise:z,reset:function(){I&&h.cancel(I),U&&U()}}}function oe(x,p){var N=!x,A=!!g(p||{},"resize"),E=!1,D=g(p,"disableForReducedMotion",Boolean),F=i&&!!g(p||{},"useWorker"),I=F?f():null,U=N?$:C,z=x&&I?!!x.__confetti_initialized:!1,Q=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,J;function te(G,fe,ge){for(var we=g(G,"particleCount",b),Te=g(G,"angle",Number),Ie=g(G,"spread",Number),Se=g(G,"startVelocity",Number),Gs=g(G,"decay",Number),qs=g(G,"gravity",Number),M=g(G,"drift",Number),ae=g(G,"colors",k),ye=g(G,"ticks",Number),Ue=g(G,"shapes"),Nt=g(G,"scalar"),zs=!!g(G,"flat"),Er=R(G),Nr=we,Hs=[],Il=x.width*Er.x,Ol=x.height*Er.y;Nr--;)Hs.push(Y({x:Il,y:Ol,angle:Te,spread:Ie,startVelocity:Se,color:ae[Nr%ae.length],shape:Ue[j(0,Ue.length)],ticks:ye,decay:Gs,gravity:qs,drift:M,scalar:Nt,flat:zs}));return J?J.addFettis(Hs):(J=le(x,Hs,U,fe,ge),J.promise)}function ce(G){var fe=D||g(G,"disableForReducedMotion",Boolean),ge=g(G,"zIndex",Number);if(fe&&Q)return u(function(Se){Se()});N&&J?x=J.canvas:N&&!x&&(x=B(ge),document.body.appendChild(x)),A&&!z&&U(x);var we={width:x.width,height:x.height};I&&!z&&I.init(x),z=!0,I&&(x.__confetti_initialized=!0);function Te(){if(I){var Se={getBoundingClientRect:function(){if(!N)return x.getBoundingClientRect()}};U(Se),I.postMessage({resize:{width:Se.width,height:Se.height}});return}we.width=we.height=null}function Ie(){J=null,A&&(E=!1,e.removeEventListener("resize",Te)),N&&x&&(document.body.contains(x)&&document.body.removeChild(x),x=null,z=!1)}return A&&!E&&(E=!0,e.addEventListener("resize",Te,!1)),I?I.fire(G,we,Ie):te(G,we,Ie)}return ce.reset=function(){I&&I.reset(),J&&J.reset()},ce}var L;function ne(){return L||(L=oe(null,{useWorker:!0,resize:!0})),L}function K(x,p,N,A,E,D,F){var I=new Path2D(x),U=new Path2D;U.addPath(I,new DOMMatrix(p));var z=new Path2D;return z.addPath(U,new DOMMatrix([Math.cos(F)*E,Math.sin(F)*E,-Math.sin(F)*D,Math.cos(F)*D,N,A])),z}function ue(x){if(!o)throw new Error("path confetti are not supported in this browser");var p,N;typeof x=="string"?p=x:(p=x.path,N=x.matrix);var A=new Path2D(p),E=document.createElement("canvas"),D=E.getContext("2d");if(!N){for(var F=1e3,I=F,U=F,z=0,Q=0,J,te,ce=0;ce<F;ce+=2)for(var G=0;G<F;G+=2)D.isPointInPath(A,ce,G,"nonzero")&&(I=Math.min(I,ce),U=Math.min(U,G),z=Math.max(z,ce),Q=Math.max(Q,G));J=z-I,te=Q-U;var fe=10,ge=Math.min(fe/J,fe/te);N=[ge,0,0,ge,-Math.round(J/2+I)*ge,-Math.round(te/2+U)*ge]}return{type:"path",path:p,matrix:N}}function Be(x){var p,N=1,A="#000000",E='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof x=="string"?p=x:(p=x.text,N="scalar"in x?x.scalar:N,E="fontFamily"in x?x.fontFamily:E,A="color"in x?x.color:A);var D=10*N,F=""+D+"px "+E,I=new OffscreenCanvas(D,D),U=I.getContext("2d");U.font=F;var z=U.measureText(p),Q=Math.ceil(z.actualBoundingBoxRight+z.actualBoundingBoxLeft),J=Math.ceil(z.actualBoundingBoxAscent+z.actualBoundingBoxDescent),te=2,ce=z.actualBoundingBoxLeft+te,G=z.actualBoundingBoxAscent+te;Q+=te+te,J+=te+te,I=new OffscreenCanvas(Q,J),U=I.getContext("2d"),U.font=F,U.fillStyle=A,U.fillText(p,ce,G);var fe=1/N;return{type:"bitmap",bitmap:I.transferToImageBitmap(),matrix:[fe,0,0,fe,-Q*fe/2,-J*fe/2]}}t.exports=function(){return ne().apply(this,arguments)},t.exports.reset=function(){ne().reset()},t.exports.create=oe,t.exports.shapeFromPath=ue,t.exports.shapeFromText=Be})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),rs,!1);const Ps=rs.exports;rs.exports.create;const tg=({size:s=20,className:e=""})=>c.jsx("svg",{width:s,height:s,viewBox:"0 0 24 24",className:e,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M17.1907 4H19.9333L13.73 11.0533L20.8 20H15.0267L10.7027 14.4667L5.74933 20H3.00267L9.66667 12.4533L2.93333 4H8.84L12.7533 9.0467L17.1907 4ZM15.72 18.4667H17.0667L8.15733 5.46667H6.70933L15.72 18.4667Z"})}),sg={football:"⚽",basketball:"🏀",tennis:"🎾",olympics:"🏅",mixed:"🎯"},ng=s=>s>=90?"Outstanding! 🌟":s>=80?"Excellent! 🎯":s>=70?"Great Job! 👏":s>=60?"Well Done! 💪":s>=50?"Good Effort! 👍":"Keep Practicing! 💫",rg=({message:s,onClose:e})=>c.jsxs(S.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50",children:[c.jsx("span",{children:s}),c.jsx("button",{onClick:e,className:"ml-2 text-white/80 hover:text-white",children:c.jsx(Zt,{size:16})})]}),kl=Fe.memo(({correctAnswers:s,incorrectAnswers:e,totalQuestions:t})=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[c.jsx(Uo,{size:16})," Correct"]}),c.jsx("span",{className:"text-green-400 font-bold",children:s})]}),c.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-green-500 transition-all duration-1000",style:{width:`${s/t*100}%`}})})]}),c.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(s/t*100).toFixed(0),"%"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[c.jsx(Qo,{size:16})," Incorrect"]}),c.jsx("span",{className:"text-red-400 font-bold",children:e})]}),c.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:`${e/t*100}%`}})})]}),c.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(e/t*100).toFixed(0),"%"]})]})]}));kl.displayName="AnswerDistributionChart";const Pl=Fe.memo(({score:s,accuracy:e,totalQuestions:t,correctAnswers:n,incorrectAnswers:r,fastestResponse:i,slowestResponse:o,avgTimePerQuestion:a,totalResponseTime:l})=>c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Final Score"}),c.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent",children:s}),c.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 transition-all duration-1000",style:{width:`${s/(t*15)*100}%`}})}),c.jsxs("div",{className:"text-gray-400 text-sm mt-1",children:["Max: ",t*15]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Accuracy"}),c.jsxs("div",{className:"text-4xl font-bold text-green-400",children:[e.toFixed(1),"%"]}),c.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 transition-all duration-1000",style:{width:`${Math.min(e,100)}%`}})})]})]})}),c.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:[c.jsxs("h3",{className:"text-xl text-white mb-4 flex items-center gap-2",children:[c.jsx(Ds,{className:"w-5 h-5 text-green-400"}),"Answer Distribution"]}),c.jsx(kl,{correctAnswers:n,incorrectAnswers:r,totalQuestions:t})]}),c.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-6 backdrop-blur-sm",children:[c.jsxs("h3",{className:"text-xl text-white mb-4 flex items-center gap-2",children:[c.jsx(Xo,{className:"w-5 h-5 text-yellow-400"}),"Response Times"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-400",children:"Fastest Response"}),c.jsxs("span",{className:"text-green-400 font-bold",children:[i.toFixed(2),"s"]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-400",children:"Slowest Response"}),c.jsxs("span",{className:"text-yellow-400 font-bold",children:[o.toFixed(2),"s"]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-400",children:"Average Response"}),c.jsxs("span",{className:"text-blue-400 font-bold",children:[a.toFixed(2),"s"]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-400",children:"Total Response Time"}),c.jsxs("span",{className:"text-purple-400 font-bold",children:[l.toFixed(2),"s"]})]})]})]})]}));Pl.displayName="StatsDisplay";const ig=({shareText:s,shareUrl:e,onClose:t,onShowToast:n})=>{const r=async()=>{try{await navigator.clipboard.writeText(s),n("Text copied to clipboard!")}catch(o){console.error("Failed to copy text:",o)}},i=async()=>{try{await navigator.clipboard.writeText(e),n("Link copied to clipboard!")}catch(o){console.error("Failed to copy link:",o)}};return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:c.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 w-full max-w-md animate-scaleIn",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:"Share Your Results"}),c.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",children:c.jsx(Zt,{size:20})})]}),c.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg mb-6 relative group",children:[c.jsx("p",{className:"sport-share-text text-white",children:s}),c.jsx("button",{onClick:r,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1 bg-gray-800/50 rounded-md hover:bg-gray-800",title:"Copy text",children:c.jsx(it,{size:14,className:"text-gray-300"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-gray-300 text-sm",children:"Challenge link:"}),c.jsxs("button",{onClick:i,className:"flex items-center gap-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm text-gray-300 transition-colors",children:[c.jsx(it,{size:14})," Copy"]})]}),c.jsx("div",{className:"bg-gray-700/30 p-2 rounded text-green-400 text-sm font-mono truncate",children:e})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsx("button",{onClick:()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}&url=${encodeURIComponent(e)}`,"_blank"),className:"p-3 bg-black hover:bg-gray-900 rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on X",children:c.jsx(tg,{size:20})}),c.jsx("button",{onClick:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}&quote=${encodeURIComponent(s)}`,"_blank"),className:"p-3 bg-[#4267B2]/90 hover:bg-[#4267B2] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on Facebook",children:c.jsx(zo,{size:20})}),c.jsx("button",{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(s+" "+e)}`,"_blank"),className:"p-3 bg-[#25D366]/90 hover:bg-[#25D366] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on WhatsApp",children:c.jsx(Kn,{size:20})}),c.jsx("button",{onClick:i,className:"p-3 bg-gray-600/90 hover:bg-gray-600 rounded-lg text-white transition-colors flex items-center justify-center",title:"Copy link",children:c.jsx(Ho,{size:20})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("p",{className:"text-sm text-gray-400",children:"Share with friends and challenge them to beat your score!"})})]})})},Cl=Fe.memo(({onPlayAgain:s,onHome:e,onShare:t})=>c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("button",{onClick:s,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-green-600 
               hover:bg-green-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[c.jsx(Wo,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"Play Again"]}),c.jsxs("button",{onClick:e,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-gray-700 
               hover:bg-gray-600 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[c.jsx(Hn,{className:"w-5 h-5 group-hover:-translate-y-1 transition-transform"}),"Home"]}),c.jsxs("button",{onClick:t,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-blue-600 
               hover:bg-blue-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[c.jsx(Ko,{className:"w-5 h-5 group-hover:rotate-45 transition-transform"}),"Share"]})]}));Cl.displayName="ActionButtons";const Al=Fe.memo(({onPlayAgain:s,onHome:e})=>{const{players:t,category:n,questions:r,questionResponseTimes:i}=Ar(),o=t[0],a=sg[n],[l,u]=w.useState(!1),[d,h]=w.useState(null),f=r.length,m=(o==null?void 0:o.score)||0,v=f*15,y=m/v*100,g=(o==null?void 0:o.correctAnswers)||0,b=f-g,j=i.filter(W=>W>0&&W<=15),T=j.length>0?Math.min(...j):0,k=j.length>0?Math.max(...j):0,_=j.length>0?j.reduce((W,le)=>W+le,0)/j.length:0,R=j.reduce((W,le)=>W+le,0),$=ng(y),C=`I scored ${m}/${v} points with ${y.toFixed(1)}% accuracy in the ${n} quiz on SportIQ! Can you beat my score? #SportIQ`,B="https://sportiq.games",ee=W=>{h(W),setTimeout(()=>h(null),3e3)};w.useEffect(()=>{const le=Date.now()+3e3,oe={startVelocity:30,spread:360,ticks:60,zIndex:0},L=(K,ue)=>Math.random()*(ue-K)+K,ne=setInterval(()=>{const K=le-Date.now();if(K<=0)return clearInterval(ne);const ue=50*(K/3e3);Ps({...oe,particleCount:ue,origin:{x:L(.1,.3),y:Math.random()-.2}}),Ps({...oe,particleCount:ue,origin:{x:L(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(ne)},[]);const Y=w.useCallback(async()=>{try{if(navigator.share&&navigator.canShare&&navigator.canShare({text:C,url:B})){await navigator.share({title:"SportIQ Challenge",text:C,url:B}),ee("Score shared successfully!");return}}catch(W){console.error("Native share failed:",W)}u(!0)},[C,B]);return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-gray-900 to-gray-800",children:[c.jsxs("div",{className:"w-full max-w-xl bg-gray-800/50 backdrop-blur-lg rounded-2xl p-8 shadow-xl border border-gray-700/50",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"relative inline-block",children:[c.jsx(ot,{className:"w-24 h-24 text-yellow-400 animate-bounce filter drop-shadow-lg"}),c.jsx("span",{className:"absolute top-12 right-0 text-4xl animate-pulse",children:a}),c.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"})]}),c.jsx("h2",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Game Complete!"}),c.jsx("p",{className:"text-2xl text-green-400 font-bold mb-2",children:$}),c.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[c.jsx(Jo,{className:"w-4 h-4"}),c.jsxs("span",{children:["Total response time: ",R.toFixed(2),"s"]})]})]}),c.jsx(Pl,{score:m,accuracy:y,totalQuestions:f,correctAnswers:g,incorrectAnswers:b,fastestResponse:T,slowestResponse:k,avgTimePerQuestion:_,totalResponseTime:R}),c.jsx("div",{className:"mt-8",children:c.jsx(Cl,{onPlayAgain:s,onHome:e,onShare:Y})}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("p",{className:"text-gray-400 text-sm",children:"Challenge your friends to beat your score! 🏆"})})]}),l&&c.jsx(ig,{shareText:C,shareUrl:B,onClose:()=>u(!1),onShowToast:ee}),c.jsx(De,{children:d&&c.jsx(rg,{message:d,onClose:()=>h(null)})}),c.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes scaleIn {
          from { transform: scale(0.95); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        
        .animate-scaleIn {
          animation: scaleIn 0.3s ease-out;
        }
        
        /* Almarena-like font styling */
        .sport-share-text {
          font-family: "Almarena Neue", "Montserrat", "Segoe UI", sans-serif;
          font-weight: 700;
          letter-spacing: -0.02em;
          font-size: 1.1rem;
          line-height: 1.4;
          text-transform: none;
        }
      `})]})});Al.displayName="SoloResultsScreen";const og={football:"⚽",basketball:"🏀",tennis:"🎾",olympics:"🏅",mixed:"🎯"},ag=s=>s>=90?"Outstanding! 🌟":s>=80?"Excellent! 🎯":s>=70?"Great Job! 👏":s>=60?"Well Done! 💪":s>=50?"Good Effort! 👍":"Keep Practicing! 💫",lg=({size:s=20,className:e=""})=>c.jsx("svg",{width:s,height:s,viewBox:"0 0 24 24",className:e,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M17.1907 4H19.9333L13.73 11.0533L20.8 20H15.0267L10.7027 14.4667L5.74933 20H3.00267L9.66667 12.4533L2.93333 4H8.84L12.7533 9.0467L17.1907 4ZM15.72 18.4667H17.0667L8.15733 5.46667H6.70933L15.72 18.4667Z"})}),cg=({message:s,onClose:e})=>c.jsxs(S.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50",children:[c.jsx("span",{children:s}),c.jsx("button",{onClick:e,className:"ml-2 text-white/80 hover:text-white",children:c.jsx(Zt,{size:16})})]}),El=Fe.memo(({correctAnswers:s,incorrectAnswers:e,totalQuestions:t})=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[c.jsx(Uo,{size:16})," Correct"]}),c.jsx("span",{className:"text-green-400 font-bold",children:s})]}),c.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-green-500 transition-all duration-1000",style:{width:`${s/t*100}%`}})})]}),c.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(s/t*100).toFixed(0),"%"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[c.jsx(Qo,{size:16})," Incorrect"]}),c.jsx("span",{className:"text-red-400 font-bold",children:e})]}),c.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:`${e/t*100}%`}})})]}),c.jsxs("div",{className:"w-12 text-center text-gray-400",children:[(e/t*100).toFixed(0),"%"]})]})]}));El.displayName="AnswerDistributionChart";const ug=({shareText:s,shareUrl:e,onClose:t,onShowToast:n})=>{const r=async()=>{try{await navigator.clipboard.writeText(s),n("Text copied to clipboard!")}catch(o){console.error("Failed to copy text:",o)}},i=async()=>{try{await navigator.clipboard.writeText(e),n("Link copied to clipboard!")}catch(o){console.error("Failed to copy link:",o)}};return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:c.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 w-full max-w-md animate-scaleIn",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:"Share Your Results"}),c.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",children:c.jsx(Zt,{size:20})})]}),c.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg mb-6 relative group",children:[c.jsx("p",{className:"sport-share-text text-white",children:s}),c.jsx("button",{onClick:r,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1 bg-gray-800/50 rounded-md hover:bg-gray-800",title:"Copy text",children:c.jsx(it,{size:14,className:"text-gray-300"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-gray-300 text-sm",children:"Website:"}),c.jsxs("button",{onClick:i,className:"flex items-center gap-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm text-gray-300 transition-colors",children:[c.jsx(it,{size:14})," Copy"]})]}),c.jsx("div",{className:"bg-gray-700/30 p-2 rounded text-green-400 text-sm font-mono truncate",children:e})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsx("button",{onClick:()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}&url=${encodeURIComponent(e)}`,"_blank"),className:"p-3 bg-black hover:bg-gray-900 rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on X",children:c.jsx(lg,{size:20})}),c.jsx("button",{onClick:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}&quote=${encodeURIComponent(s)}`,"_blank"),className:"p-3 bg-[#4267B2]/90 hover:bg-[#4267B2] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on Facebook",children:c.jsx(zo,{size:20})}),c.jsx("button",{onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(s+" "+e)}`,"_blank"),className:"p-3 bg-[#25D366]/90 hover:bg-[#25D366] rounded-lg text-white transition-colors flex items-center justify-center",title:"Share on WhatsApp",children:c.jsx(Kn,{size:20})}),c.jsx("button",{onClick:i,className:"p-3 bg-gray-600/90 hover:bg-gray-600 rounded-lg text-white transition-colors flex items-center justify-center",title:"Copy link",children:c.jsx(Ho,{size:20})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("p",{className:"text-sm text-gray-400",children:"Share with friends and challenge them to beat your score!"})})]})})},Nl=Fe.memo(({player:s,isWinner:e,totalQuestions:t,maxPossibleScore:n,playerResponseTimes:r})=>{const i=s.score||0;let o=s.correctAnswers;o===void 0&&(o=Math.floor(i/15));const a=t-o,l=i/n*100,u=r.filter(y=>y>0&&y<=15),d=u.length>0?Math.min(...u):0,h=u.length>0?Math.max(...u):0,f=u.length>0?u.reduce((y,g)=>y+g,0)/u.length:0,m=u.reduce((y,g)=>y+g,0),v=ag(l);return c.jsxs("div",{className:`bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 ${e?"ring-2 ring-yellow-400":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[e&&c.jsx(ud,{className:"w-6 h-6 text-yellow-400"}),c.jsx("h3",{className:"text-xl font-bold text-white",children:s.username}),e&&c.jsx("div",{className:"bg-yellow-400/10 text-yellow-400 px-2 py-1 rounded-full text-xs font-bold",children:"Winner!"})]}),c.jsx("div",{className:"text-xl text-gray-300",children:v})]}),c.jsx("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm mb-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Final Score"}),c.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent",children:i}),c.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 transition-all duration-1000",style:{width:`${i/n*100}%`}})}),c.jsxs("div",{className:"text-gray-400 text-sm mt-1",children:["Max: ",n]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Accuracy"}),c.jsxs("div",{className:"text-3xl font-bold text-green-400",children:[l.toFixed(1),"%"]}),c.jsx("div",{className:"mt-2 w-full bg-gray-700 h-2 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 transition-all duration-1000",style:{width:`${Math.min(l,100)}%`}})})]})]})}),c.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm mb-4",children:[c.jsxs("h3",{className:"text-lg text-white mb-3 flex items-center gap-2",children:[c.jsx(Ds,{className:"w-5 h-5 text-green-400"}),"Answer Distribution"]}),c.jsx(El,{correctAnswers:o,incorrectAnswers:a,totalQuestions:t})]}),c.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 backdrop-blur-sm",children:[c.jsxs("h3",{className:"text-lg text-white mb-3 flex items-center gap-2",children:[c.jsx(Xo,{className:"w-5 h-5 text-yellow-400"}),"Response Times"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-400",children:"Fastest Response"}),c.jsxs("span",{className:"text-green-400 font-bold",children:[d.toFixed(2),"s"]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-400",children:"Slowest Response"}),c.jsxs("span",{className:"text-yellow-400 font-bold",children:[h.toFixed(2),"s"]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-400",children:"Average Response"}),c.jsxs("span",{className:"text-blue-400 font-bold",children:[f.toFixed(2),"s"]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-400",children:"Total Response Time"}),c.jsxs("span",{className:"text-purple-400 font-bold",children:[m.toFixed(2),"s"]})]})]})]})]})});Nl.displayName="PlayerStats";const Rl=Fe.memo(({onPlayAgain:s,onHome:e,onShare:t})=>c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("button",{onClick:s,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-green-600 
               hover:bg-green-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[c.jsx(Wo,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"Play Again"]}),c.jsxs("button",{onClick:e,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-gray-700 
               hover:bg-gray-600 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[c.jsx(Hn,{className:"w-5 h-5 group-hover:-translate-y-1 transition-transform"}),"Home"]}),c.jsxs("button",{onClick:t,className:`flex items-center justify-center gap-2 p-4 rounded-xl bg-blue-600 
               hover:bg-blue-700 text-white font-semibold transition-all transform 
               hover:scale-[1.02] active:scale-[0.98] group`,children:[c.jsx(Ko,{className:"w-5 h-5 group-hover:rotate-45 transition-transform"}),"Share"]})]}));Rl.displayName="ActionButtons";const dg=({onPlayAgain:s,onHome:e})=>{const{players:t,category:n,questions:r,completionTime:i=0,getCurrentPlayer:o,getPlayerResponseTimes:a}=Et(),[l,u]=w.useState(!1),[d,h]=w.useState(null),f=o(),m=og[n],v=r.length*15,y=Fe.useMemo(()=>[...t].sort((C,B)=>B.score-C.score),[t]),g=y[0],b=y[1],j=(g==null?void 0:g.score)===(b==null?void 0:b.score),T=w.useCallback(C=>a(C),[a]),k=j?`I tied ${g==null?void 0:g.score}-${b==null?void 0:b.score} in the ${n} quiz on SportIQ! Can you beat our scores? #SportIQ`:`I ${(g==null?void 0:g.username)===(f==null?void 0:f.username)?"won":"lost"} ${g==null?void 0:g.score}-${b==null?void 0:b.score} in the ${n} quiz on SportIQ! Challenge me! #SportIQ`,_="https://sportiq.games",R=C=>{h(C),setTimeout(()=>h(null),3e3)},$=w.useCallback(async()=>{try{if(navigator.share&&navigator.canShare&&navigator.canShare({text:k,url:_})){await navigator.share({title:"SportIQ Match Result",text:k,url:_}),R("Result shared successfully!");return}}catch(C){console.error("Native share failed:",C)}u(!0)},[k,_]);return w.useEffect(()=>{if(!j&&g){const B=Date.now()+3e3,ee={startVelocity:30,spread:360,ticks:60,zIndex:0},Y=(le,oe)=>Math.random()*(oe-le)+le,W=setInterval(()=>{const le=B-Date.now();if(le<=0)return clearInterval(W);const oe=50*(le/3e3);Ps({...ee,particleCount:oe,origin:{x:Y(.1,.3),y:Math.random()-.2}}),Ps({...ee,particleCount:oe,origin:{x:Y(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(W)}},[j,g]),y.length?c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-gray-900 to-gray-800",children:[c.jsxs("div",{className:"w-full max-w-3xl bg-gray-800/50 backdrop-blur-lg rounded-2xl p-8 shadow-xl border border-gray-700/50",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"relative inline-block",children:[c.jsx(ot,{className:"w-24 h-24 text-yellow-400 animate-bounce filter drop-shadow-lg"}),c.jsx("span",{className:"absolute top-12 right-0 text-4xl animate-pulse",children:m}),c.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"})]}),c.jsx("h2",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Match Complete!"}),j?c.jsx("p",{className:"text-2xl text-blue-400 font-bold mb-2",children:"It's a tie! 🤝"}):c.jsxs("p",{className:"text-2xl text-green-400 font-bold mb-2",children:[g==null?void 0:g.username," wins! 🏆"]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[c.jsx(Jo,{className:"w-4 h-4"}),c.jsxs("span",{children:["Match duration: ",i.toFixed(1),"s"]})]})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:y.map((C,B)=>c.jsx(Nl,{player:C,isWinner:B===0&&!j,totalQuestions:r.length,maxPossibleScore:v,playerResponseTimes:T(C.id)},C.id))}),c.jsx(Rl,{onPlayAgain:s,onHome:e,onShare:$}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("p",{className:"text-gray-400 text-sm",children:"Share your results with friends! 🎮"})})]}),l&&c.jsx(ug,{shareText:k,shareUrl:_,onClose:()=>u(!1),onShowToast:R}),c.jsx(De,{children:d&&c.jsx(cg,{message:d,onClose:()=>h(null)})}),c.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes scaleIn {
          from { transform: scale(0.95); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        
        .animate-scaleIn {
          animation: scaleIn 0.3s ease-out;
        }
        
        /* Almarena-like font styling */
        .sport-share-text {
          font-family: "Almarena Neue", "Montserrat", "Segoe UI", sans-serif;
          font-weight: 700;
          letter-spacing: -0.02em;
          font-size: 1.1rem;
          line-height: 1.4;
          text-transform: none;
        }
      `})]}):c.jsx("div",{className:"text-white text-center p-8",children:"Loading results..."})},hg=({onJoinSuccess:s})=>{const[e,t]=w.useState(!1),[n,r]=w.useState(""),[i,o]=w.useState(""),[a,l]=w.useState(!1),{gameId:u,joinGame:d,socket:h,players:f,getCurrentPlayer:m,hasJoinedGame:v}=Et(),y=localStorage.getItem("username")||"";w.useEffect(()=>{v&&(console.log("Already joined a game, triggering success callback"),s())},[v,s]),w.useEffect(()=>{if(!h)return;const _=$=>{o($.message)},R=$=>{$.players.some(B=>B.id===h.id)&&(console.log("Game updated and player is in the game, triggering success callback"),setTimeout(()=>{s()},100))};return h.on("error",_),h.on("gameUpdated",R),()=>{h.off("error",_),h.off("gameUpdated",R)}},[h,s]);const g=async()=>{try{await navigator.clipboard.writeText(u),l(!0),setTimeout(()=>l(!1),2e3)}catch(_){console.error("Failed to copy code:",_),o("Failed to copy code to clipboard")}},b=()=>{if(o(""),!n.trim()){o("Please enter a game code");return}try{console.log("Attempting to join game:",n),d(n,y).then(()=>{console.log("Successfully joined game:",n)}).catch(_=>{console.error("Error joining game:",_),o(_.message||"Failed to join game")})}catch(_){console.error("Exception joining game:",_),o("An error occurred while joining the game")}},j=m(),T=(j==null?void 0:j.isHost)||f.length===0,k=f.some(_=>_.id===(h==null?void 0:h.id));return c.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-8",children:e?"Join Game 🎮":"Create Game 🎮"}),e?c.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Enter game code"}),c.jsx("input",{type:"text",value:n,onChange:_=>{r(_.target.value),o("")},placeholder:"Enter code",className:`w-full p-3 rounded-lg bg-gray-700 text-white font-mono text-lg 
                         border-2 ${i?"border-red-500":"border-transparent"} 
                         focus:border-green-500 focus:outline-none`,maxLength:6}),i&&c.jsxs("div",{className:"mt-2 text-red-500 text-sm flex items-center gap-2",children:[c.jsx(ld,{size:16}),i]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:()=>{t(!1),o("")},className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Create a game instead?"}),c.jsxs("button",{onClick:b,className:`px-6 py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white 
                         transition-colors flex items-center gap-2`,children:[c.jsx(md,{size:20}),"Join Game"]})]})]}):c.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Share this code with your friend"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:u,readOnly:!0,className:"flex-1 p-3 rounded-lg bg-gray-700 text-white font-mono text-lg select-all"}),c.jsxs("button",{onClick:g,className:`p-3 rounded-lg ${a?"bg-green-600":"bg-blue-600 hover:bg-blue-700"} text-white transition-colors relative group`,title:"Copy code",children:[c.jsx(it,{size:24}),c.jsx("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a?"Copied!":"Copy code"})]})]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:()=>t(!0),className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Want to join instead?"}),(T||k)&&c.jsxs("button",{onClick:s,className:`px-6 py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white 
                           transition-colors flex items-center gap-2 group`,children:[T?"Continue to Category":"Continue to Lobby",c.jsx(cd,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]})]})})};function fg(){var oe;const[s,e]=w.useState("home"),[t,n]=w.useState("solo"),[r,i]=w.useState(!1),{initializeGame:o,addPlayer:a,setCategory:l,isGameStarted:u,isGameEnded:d,resetGame:h,players:f}=Ar(),{initializeGame:m,createGame:v,isGameStarted:y,isGameEnded:g,resetGame:b,setCategory:j,players:T,getCurrentPlayer:k,socket:_,hasJoinedGame:R}=Et(),$=L=>{localStorage.setItem("username",L),h(),b(),e("welcome")},C=async(L,ne)=>{try{n(ne),ne==="solo"?(h(),await o(ne),a(L),e("category")):(b(),await m(),e("invite"))}catch(K){console.error("Error starting game:",K)}},B=async()=>{const L=localStorage.getItem("username")||"Guest";if(t==="solo")h(),o(t),a(L),e("category");else try{b(),await m(),_&&_.connected?e("invite"):(console.log("Socket connection not established, redirecting to welcome screen"),e("welcome"))}catch(ne){console.error("Error restarting 1v1 game:",ne),e("welcome")}},ee=()=>{if(T.length>=2){console.log("Player appears to have joined an existing game with multiple players");const L=k();if(L&&!L.isHost){console.log("Current player is not host, directing to lobby"),e("lobby");return}}if(R){const L=k();if(!(L==null?void 0:L.isHost)){console.log("Player has joined an existing game as non-host, directing to lobby"),e("lobby");return}}console.log("Player is starting a new game or is the host, directing to category selection"),e("category")},Y=async L=>{if(r){console.log("Category selection already in progress, ignoring");return}try{if(i(!0),console.log(`App handling category selection: ${L} for mode: ${t}`),t==="solo")try{e("loading"),await l(L)}catch(ne){console.error("Error setting solo category:",ne),e("category")}else try{R?(console.log("Already joined a game, updating category"),j(L),e("lobby")):(console.log("Creating new 1v1 game with category:",L),await v(L),e("lobby"))}catch(ne){console.error("Error creating/updating 1v1 game:",ne)}}finally{setTimeout(()=>{i(!1)},1e3)}},W=()=>{h(),b(),e("welcome")},le=()=>{if(t==="solo")e("category");else{const L=k();L&&L.isHost?e("category"):e("lobby")}};return w.useEffect(()=>{const L=()=>{console.log("Custom game started event received, forcing transition to game"),s==="lobby"&&e("game")};return window.addEventListener("sportiq:gameStarted",L),()=>{window.removeEventListener("sportiq:gameStarted",L)}},[s]),w.useEffect(()=>{s==="loading"&&(t==="solo"&&u||t==="1v1"&&y)&&(console.log("Game started while in loading screen, transitioning to game screen"),e("game"))},[u,y,t,s]),w.useEffect(()=>{s==="lobby"&&t==="1v1"&&y&&!g&&(console.log("1v1 game started while in lobby state, transitioning to game screen"),e("game"))},[y,g,t,s]),w.useEffect(()=>{t==="solo"&&d?(console.log("Solo game ended, transitioning to results screen"),e("results")):t==="1v1"&&g&&(console.log("1v1 game ended, transitioning to results screen"),e("results"))},[d,g,t]),w.useEffect(()=>{if(_&&t==="1v1"){const L=ne=>{console.log("Game over event received in App.tsx:",ne),e("results"),setTimeout(()=>{s!=="results"&&g&&(console.log("Forcing transition to results screen"),e("results"))},1e3)};return _.on("gameOver",L),()=>{_.off("gameOver",L)}}},[_,t,g,s]),w.useEffect(()=>{if(t==="1v1"&&g&&s!=="results"){console.log("Game ended but UI not in results state, forcing transition");const L=setTimeout(()=>{e("results")},500);return()=>clearTimeout(L)}},[t,g,s]),w.useEffect(()=>{console.log("Current game state:",{mode:t,state:s,isSoloGameStarted:u,isSoloGameEnded:d,is1v1GameStarted:y,is1v1GameEnded:g,soloPlayersCount:f.length,multiPlayersCount:T.length,hasJoinedGame:R,categorySelectionInProgress:r})},[s,t,u,d,y,g,f.length,T.length,R,r]),c.jsx(id,{children:c.jsxs("div",{className:"min-h-screen bg-[#1a1a1a]",children:[s==="home"&&c.jsx(Bp,{onStart:$}),s==="welcome"&&c.jsx(Gp,{onStart:C}),s==="invite"&&c.jsx(hg,{onJoinSuccess:ee}),s==="category"&&c.jsx(Qp,{onSelect:Y,mode:t,onBack:W}),s==="loading"&&c.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:c.jsxs("div",{className:"text-white text-center p-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Loading Quiz..."}),c.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-2 bg-green-500 rounded-full animate-pulse w-1/2"})})]})}),s==="lobby"&&t==="1v1"&&c.jsx(Xp,{}),s==="game"&&c.jsx(eg,{mode:t,onBackToCategory:le,onBackToMode:W},`game-${t}-${((oe=f[0])==null?void 0:oe.id)||"solo"}`),s==="results"&&(t==="solo"?c.jsx(Al,{onPlayAgain:B,onHome:W}):c.jsx(dg,{onPlayAgain:B,onHome:W}))]})})}const Ml=document.getElementById("root");if(!Ml)throw new Error("Failed to find the root element");const mg=yo(Ml);mg.render(c.jsx(Fe.StrictMode,{children:c.jsx(fg,{})}))});export default pg();
